/*! For license information please see main.78515f67.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},v={};function p(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){m[e]=new p(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];m[t]=new p(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){m[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){m[e]=new p(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){m[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){m[e]=new p(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){m[e]=new p(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){m[e]=new p(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){m[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)}));var y=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(v,e)||!f.call(d,e)&&(h.test(e)?v[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new p(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(y,g);m[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(y,g);m[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){m[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)})),m.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){m[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),x=Symbol.for("react.portal"),_=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),I=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),P=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var R=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var M,F=Object.assign;function V(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var U=!1;function B(e,t){if(!e||U)return"";U=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{U=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?V(e):""}function j(e){switch(e.tag){case 5:return V(e.type);case 16:return V("Lazy");case 13:return V("Suspense");case 19:return V("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function z(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case _:return"Fragment";case x:return"Portal";case S:return"Profiler";case E:return"StrictMode";case D:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case N:return null!==(t=e.displayName||null)?t:z(e.type)||"Memo";case P:t=e._payload,e=e._init;try{return z(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return z(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function G(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function K(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=K(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=K(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function X(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=G(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){$(e,t);var n=G(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,G(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:G(n)}}function ae(e,t){var n=G(t.value),r=G(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ve=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){ve.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var ye=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var xe=null,_e=null,Ee=null;function Se(e){if(e=ki(e)){if("function"!==typeof xe)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),xe(e.stateNode,e.type,t))}}function Te(e){_e?Ee?Ee.push(e):Ee=[e]:_e=e}function Ie(){if(_e){var e=_e,t=Ee;if(Ee=_e=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function De(){}var Ae=!1;function Ne(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==_e||null!==Ee)&&(De(),Ie())}}function Pe(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Re=!1;if(l)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){Re=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(le){Re=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ve=!1,Ue=null,Be={onError:function(e){Me=!0,Fe=e}};function je(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Be,arguments)}function ze(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ge(e){if(ze(e)!==e)throw Error(a(188))}function Ke(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=ze(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ge(i),e;if(o===r)return Ge(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Xe=i.unstable_requestPaint,$e=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,xt,_t,Et,St,Tt=!1,It=[],Ct=null,Dt=null,At=null,Nt=new Map,Pt=new Map,Rt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Dt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Nt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&xt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=ze(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,(function(){_t(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Vt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&xt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Ut(e,t,n){Vt(e)&&n.delete(t)}function Bt(){Tt=!1,null!==Ct&&Vt(Ct)&&(Ct=null),null!==Dt&&Vt(Dt)&&(Dt=null),null!==At&&Vt(At)&&(At=null),Nt.forEach(Ut),Pt.forEach(Ut)}function jt(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function zt(e){function t(t){return jt(t,e)}if(0<It.length){jt(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&jt(Ct,e),null!==Dt&&jt(Dt,e),null!==At&&jt(At,e),Nt.forEach(t),Pt.forEach(t),n=0;n<Rt.length;n++)(r=Rt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Rt.length&&null===(n=Rt[0]).blockedOn;)Ft(n),null===n.blockedOn&&Rt.shift()}var qt=b.ReactCurrentBatchConfig,Gt=!0;function Kt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){if(Gt){var i=Yt(e,t,n,r);if(null===i)Gr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Dt=Mt(Dt,e,t,n,r,i),!0;case"mouseover":return At=Mt(At,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return Nt.set(a,Mt(Nt.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Pt.set(a,Mt(Pt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Gr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Gr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=ze(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Xt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in $t?$t.value:$t.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),vn=an(dn),pn=an(F({},dn,{dataTransfer:0})),mn=an(F({},fn,{relatedTarget:0})),yn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},_n={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=_n[e])&&!!t[e]}function Sn(){return En}var Tn=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?xn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=an(Tn),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),An=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Nn=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Pn=an(Nn),Rn=[9,13,27,32],On=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!On||Ln&&8<Ln&&11>=Ln),Vn=String.fromCharCode(32),Un=!1;function Bn(e,t){switch(e){case"keyup":return-1!==Rn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function jn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var zn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Gn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Kn(e,t,n,r){Te(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Qn(e){Vr(e,0)}function Yn(e){if(W(bi(e)))return e}function Xn(e,t){if("change"===e)return t}var $n=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Wn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Wn)){var t=[];Kn(t,Wn,e,we(e)),Ne(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Wn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function vr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=l&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(yr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var xr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},_r={},Er={};function Sr(e){if(_r[e])return _r[e];if(!xr[e])return e;var t,n=xr[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return _r[e]=n[t];return e}l&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete xr.animationend.animation,delete xr.animationiteration.animation,delete xr.animationstart.animation),"TransitionEvent"in window||delete xr.transitionend.transition);var Tr=Sr("animationend"),Ir=Sr("animationiteration"),Cr=Sr("animationstart"),Dr=Sr("transitionend"),Ar=new Map,Nr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Pr(e,t){Ar.set(e,t),s(t,[e])}for(var Rr=0;Rr<Nr.length;Rr++){var Or=Nr[Rr];Pr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Pr(Tr,"onAnimationEnd"),Pr(Ir,"onAnimationIteration"),Pr(Cr,"onAnimationStart"),Pr("dblclick","onDoubleClick"),Pr("focusin","onFocus"),Pr("focusout","onBlur"),Pr(Dr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(je.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ve||(Ve=!0,Ue=l)}}(r,t,void 0,e),e.currentTarget=null}function Vr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ve)throw e=Ue,Ve=!1,Ue=null,e}function Ur(e,t){var n=t[pi];void 0===n&&(n=t[pi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var jr="_reactListening"+Math.random().toString(36).slice(2);function zr(e){if(!e[jr]){e[jr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[jr]||(t[jr]=!0,Br("selectionchange",!1,t))}}function qr(e,t,n,r){switch(Xt(t)){case 1:var i=Kt;break;case 4:i=Ht;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Re||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Gr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Ne((function(){var r=a,i=we(n),o=[];e:{var u=Ar.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=In;break;case"focusin":c="focus",s=mn;break;case"focusout":c="blur",s=mn;break;case"beforeblur":case"afterblur":s=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Dn;break;case Tr:case Ir:case Cr:s=yn;break;case Dr:s=An;break;case"scroll":s=hn;break;case"wheel":s=Pn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,v=r;null!==v;){var p=(d=v).stateNode;if(5===d.tag&&null!==p&&(d=p,null!==h&&(null!=(p=Pe(v,h))&&l.push(Kr(v,p,d)))),f)break;v=v.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[vi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=ze(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=vn,p="onMouseLeave",h="onMouseEnter",v="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,p="onPointerLeave",h="onPointerEnter",v="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(p,v+"leave",s,n,i)).target=f,u.relatedTarget=d,p=null,gi(i)===r&&((l=new l(h,v+"enter",c,n,i)).target=d,l.relatedTarget=f,p=l),f=p,s&&c)e:{for(h=c,v=0,d=l=s;d;d=Wr(d))v++;for(d=0,p=h;p;p=Wr(p))d++;for(;0<v-d;)l=Wr(l),v--;for(;0<d-v;)h=Wr(h),d--;for(;v--;){if(l===h||null!==h&&l===h.alternate)break e;l=Wr(l),h=Wr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var m=Xn;else if(Gn(u))if($n)m=or;else{m=ir;var y=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(m=ar);switch(m&&(m=m(e,r))?Kn(o,m,n,i):(y&&y(e,u,r),"focusout"===e&&(y=u._wrapperState)&&y.controlled&&"number"===u.type&&ee(u,"number",u.value)),y=r?bi(r):window,e){case"focusin":(Gn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,gr=null);break;case"focusout":gr=yr=mr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(On)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else zn?Bn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(zn||"onCompositionStart"!==k?"onCompositionEnd"===k&&zn&&(g=en()):(Jt="value"in($t=i)?$t.value:$t.textContent,zn=!0)),0<(y=Hr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:y}),g?k.data=g:null!==(g=jn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return jn(t);case"keypress":return 32!==t.which?null:(Un=!0,Vn);case"textInput":return(e=t.data)===Vn&&Un?null:e;default:return null}}(e,n):function(e,t){if(zn)return"compositionend"===e||!On&&Bn(e,t)?(e=en(),Zt=Jt=$t=null,zn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Vr(o,t)}))}function Kr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Pe(e,n))&&r.unshift(Kr(e,a,i)),null!=(a=Pe(e,t))&&r.push(Kr(e,a,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Pe(n,a))&&o.unshift(Kr(n,s,u)):i||null!=(s=Pe(n,a))&&o.push(Kr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,Xr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Xr,"")}function Jr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void zt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);zt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,vi="__reactContainer$"+fi,pi="__reactEvents$"+fi,mi="__reactListeners$"+fi,yi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[vi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var xi=[],_i=-1;function Ei(e){return{current:e}}function Si(e){0>_i||(e.current=xi[_i],xi[_i]=null,_i--)}function Ti(e,t){_i++,xi[_i]=e.current,e.current=t}var Ii={},Ci=Ei(Ii),Di=Ei(!1),Ai=Ii;function Ni(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Pi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Ri(){Si(Di),Si(Ci)}function Oi(e,t,n){if(Ci.current!==Ii)throw Error(a(168));Ti(Ci,t),Ti(Di,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Ai=Ci.current,Ti(Ci,e),Ti(Di,Di.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ai),r.__reactInternalMemoizedMergedChildContext=e,Si(Di),Si(Ci),Ti(Ci,e)):Si(Di),Ti(Di,n)}var Vi=null,Ui=!1,Bi=!1;function ji(e){null===Vi?Vi=[e]:Vi.push(e)}function zi(){if(!Bi&&null!==Vi){Bi=!0;var e=0,t=kt;try{var n=Vi;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Vi=null,Ui=!1}catch(i){throw null!==Vi&&(Vi=Vi.slice(e+1)),We(Ze,zi),i}finally{kt=t,Bi=!1}}return null}var qi=[],Gi=0,Ki=null,Hi=0,Wi=[],Qi=0,Yi=null,Xi=1,$i="";function Ji(e,t){qi[Gi++]=Hi,qi[Gi++]=Ki,Ki=e,Hi=t}function Zi(e,t,n){Wi[Qi++]=Xi,Wi[Qi++]=$i,Wi[Qi++]=Yi,Yi=e;var r=Xi;e=$i;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Xi=1<<32-ot(t)+i|n<<i|r,$i=a+e}else Xi=1<<a|n<<i|r,$i=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Ki;)Ki=qi[--Gi],qi[Gi]=null,Hi=qi[--Gi],qi[Gi]=null;for(;e===Yi;)Yi=Wi[--Qi],Wi[Qi]=null,$i=Wi[--Qi],Wi[Qi]=null,Xi=Wi[--Qi],Wi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Xi,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function va(e){null===aa?aa=[e]:aa.push(e)}var pa=b.ReactCurrentBatchConfig;function ma(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ya=Ei(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function xa(e){var t=ya.current;Si(ya),e._currentValue=t}function _a(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ta=null;function Ia(e){null===Ta?Ta=[e]:Ta.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ia(t)):(n.next=i.next,i.next=n),t.interleaved=n,Da(e,r)}function Da(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Aa=!1;function Na(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Pa(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ra(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Oa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ds)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Da(e,n)}return null===(i=r.interleaved)?(t.next=t,Ia(r)):(t.next=i.next,i.next=t),r.interleaved=t,Da(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Aa=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var v=e,p=u;switch(h=t,d=n,p.tag){case 1:if("function"===typeof(v=p.payload)){f=v.call(d,f,h);break e}f=v;break e;case 3:v.flags=-65537&v.flags|128;case 0:if(null===(h="function"===typeof(v=p.payload)?v.call(d,f,h):v)||void 0===h)break e;f=F({},f,h);break e;case 2:Aa=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=f}}function Va(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Ua=(new r.Component).refs;function Ba(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ja={isMounted:function(e){return!!(e=e._reactInternals)&&ze(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ra(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Ra(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Oa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Ra(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Oa(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function za(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ii,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Pi(t)?Ai:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ni(e,i):Ii),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ja,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ga(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ja.enqueueReplaceState(t,t.state,null)}function Ka(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Ua,Na(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Pi(t)?Ai:Ci.current,i.context=Ni(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ba(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ja.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Ua&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Oc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===_?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===P&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Vc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case x:return(t=Uc(t,e.mode,n)).return=e,t;case P:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Wa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case x:return n.key===i?l(e,t,n,r):null;case P:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Wa(e,n)}return null}function v(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case x:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case P:return v(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Wa(t,r)}return null}function p(i,a,u,s){for(var c=null,l=null,f=a,p=a=0,m=null;null!==f&&p<u.length;p++){f.index>p?(m=f,f=null):m=f.sibling;var y=d(i,f,u[p],s);if(null===y){null===f&&(f=m);break}e&&f&&null===y.alternate&&t(i,f),a=o(y,a,p),null===l?c=y:l.sibling=y,l=y,f=m}if(p===u.length)return n(i,f),ia&&Ji(i,p),c;if(null===f){for(;p<u.length;p++)null!==(f=h(i,u[p],s))&&(a=o(f,a,p),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,p),c}for(f=r(i,f);p<u.length;p++)null!==(m=v(f,i,p,u[p],s))&&(e&&null!==m.alternate&&f.delete(null===m.key?p:m.key),a=o(m,a,p),null===l?c=m:l.sibling=m,l=m);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,p),c}function m(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,p=u,m=u=0,y=null,g=s.next();null!==p&&!g.done;m++,g=s.next()){p.index>m?(y=p,p=null):y=p.sibling;var k=d(i,p,g.value,c);if(null===k){null===p&&(p=y);break}e&&p&&null===k.alternate&&t(i,p),u=o(k,u,m),null===f?l=k:f.sibling=k,f=k,p=y}if(g.done)return n(i,p),ia&&Ji(i,m),l;if(null===p){for(;!g.done;m++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,m),l}for(p=r(i,p);!g.done;m++,g=s.next())null!==(g=v(p,i,m,g.value,c))&&(e&&null!==g.alternate&&p.delete(null===g.key?m:g.key),u=o(g,u,m),null===f?l=g:f.sibling=g,f=g);return e&&p.forEach((function(e){return t(i,e)})),ia&&Ji(i,m),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===_&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===_){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===P&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===_?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Ha(r,a,o),s.return=r,r=s)}return u(r);case x:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Uc(o,r.mode,s)).return=r,r=a}return u(r);case P:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return p(r,a,o,s);if(L(o))return m(r,a,o,s);Wa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Vc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var Xa=Ya(!0),$a=Ya(!1),Ja={},Za=Ei(Ja),eo=Ei(Ja),to=Ei(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ti(to,t),Ti(eo,e),Ti(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ti(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ti(eo,e),Ti(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var uo=Ei(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,vo=0,po=null,mo=null,yo=null,go=!1,ko=!1,bo=0,wo=0;function xo(){throw Error(a(321))}function _o(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(vo=o,po=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,yo=mo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==mo&&null!==mo.next,vo=0,yo=mo=po=null,go=!1,t)throw Error(a(300));return e}function So(){var e=0!==bo;return bo=0,e}function To(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===yo?po.memoizedState=yo=e:yo=yo.next=e,yo}function Io(){if(null===mo){var e=po.alternate;e=null!==e?e.memoizedState:null}else e=mo.next;var t=null===yo?po.memoizedState:yo.next;if(null!==t)yo=t,mo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(mo=e).memoizedState,baseState:mo.baseState,baseQueue:mo.baseQueue,queue:mo.queue,next:null},null===yo?po.memoizedState=yo=e:yo=yo.next=e}return yo}function Co(e,t){return"function"===typeof t?t(e):t}function Do(e){var t=Io(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=mo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((vo&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,po.lanes|=f,Fs|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,po.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ao(e){var t=Io(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function No(){}function Po(e,t){var n=po,r=Io(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Go(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==yo&&1&yo.memoizedState.tag){if(n.flags|=2048,Uo(9,Oo.bind(null,n,r,i,t),void 0,null),null===As)throw Error(a(349));0!==(30&vo)||Ro(n,t,i)}return i}function Ro(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Oo(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Da(e,1);null!==t&&rc(t,e,1,-1)}function Vo(e){var t=To();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,po,e),[t.memoizedState,e]}function Uo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bo(){return Io().memoizedState}function jo(e,t,n,r){var i=To();po.flags|=e,i.memoizedState=Uo(1|t,n,void 0,void 0===r?null:r)}function zo(e,t,n,r){var i=Io();r=void 0===r?null:r;var a=void 0;if(null!==mo){var o=mo.memoizedState;if(a=o.destroy,null!==r&&_o(r,o.deps))return void(i.memoizedState=Uo(t,n,a,r))}po.flags|=e,i.memoizedState=Uo(1|t,n,a,r)}function qo(e,t){return jo(8390656,8,e,t)}function Go(e,t){return zo(2048,8,e,t)}function Ko(e,t){return zo(4,2,e,t)}function Ho(e,t){return zo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4,4,Wo.bind(null,t,e),n)}function Yo(){}function Xo(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function $o(e,t){var n=Io();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&_o(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&vo)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=pt(),po.lanes|=n,Fs|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return Io().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ia(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===po||null!==t&&t===po}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Sa,useCallback:xo,useContext:xo,useEffect:xo,useImperativeHandle:xo,useInsertionEffect:xo,useLayoutEffect:xo,useMemo:xo,useReducer:xo,useRef:xo,useState:xo,useDebugValue:xo,useDeferredValue:xo,useTransition:xo,useMutableSource:xo,useSyncExternalStore:xo,useId:xo,unstable_isNewReconciler:!1},uu={readContext:Sa,useCallback:function(e,t){return To().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return jo(4194308,4,e,t)},useInsertionEffect:function(e,t){return jo(4,2,e,t)},useMemo:function(e,t){var n=To();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=To();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,po,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},To().memoizedState=e},useState:Vo,useDebugValue:Yo,useDeferredValue:function(e){return To().memoizedState=e},useTransition:function(){var e=Vo(!1),t=e[0];return e=Zo.bind(null,e[1]),To().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=po,i=To();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===As)throw Error(a(349));0!==(30&vo)||Ro(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Uo(9,Oo.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=To(),t=As.identifierPrefix;if(ia){var n=$i;t=":"+t+"R"+(n=(Xi&~(1<<32-ot(Xi)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Sa,useCallback:Xo,useContext:Sa,useEffect:Go,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:$o,useReducer:Do,useRef:Bo,useState:function(){return Do(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(Io(),mo.memoizedState,e)},useTransition:function(){return[Do(Co)[0],Io().memoizedState]},useMutableSource:No,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Sa,useCallback:Xo,useContext:Sa,useEffect:Go,useImperativeHandle:Qo,useInsertionEffect:Ko,useLayoutEffect:Ho,useMemo:$o,useReducer:Ao,useRef:Bo,useState:function(){return Ao(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=Io();return null===mo?t.memoizedState=e:Jo(t,mo.memoizedState,e)},useTransition:function(){return[Ao(Co)[0],Io().memoizedState]},useMutableSource:No,useSyncExternalStore:Po,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=j(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function vu(e,t,n){(n=Ra(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ks||(Ks=!0,Hs=r),hu(0,t)},n}function pu(e,t,n){(n=Ra(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Ws?Ws=new Set([this]):Ws.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function mu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Tc.bind(null,e,t,n),t.then(e,e))}function yu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Ra(-1,1)).tag=2,Oa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?$a(t,null,n,r):Xa(t,e.child,n,r)}function xu(e,t,n,r,i){n=n.render;var a=t.ref;return Ea(t,i),r=Eo(e,t,n,r,a,i),n=So(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function _u(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Rc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Eu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Ku(e,t,i)}return t.flags|=1,(e=Oc(a,r)).ref=t.ref,e.return=t,t.child=e}function Eu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Ku(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Iu(e,t,n,r,i)}function Su(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Os,Rs),Rs|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Os,Rs),Rs|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ti(Os,Rs),Rs|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ti(Os,Rs),Rs|=r;return wu(e,t,i,n),t.child}function Tu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Iu(e,t,n,r,i){var a=Pi(n)?Ai:Ci.current;return a=Ni(t,a),Ea(t,i),n=Eo(e,t,n,r,a,i),r=So(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ku(e,t,i))}function Cu(e,t,n,r,i){if(Pi(n)){var a=!0;Mi(t)}else a=!1;if(Ea(t,i),null===t.stateNode)Gu(e,t),qa(t,n,r),Ka(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Sa(c):c=Ni(t,c=Pi(n)?Ai:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ga(t,o,r,c),Aa=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Di.current||Aa?("function"===typeof l&&(Ba(t,n,l,r),s=t.memoizedState),(u=Aa||za(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Pa(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ma(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Sa(s):s=Ni(t,s=Pi(n)?Ai:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ga(t,o,r,s),Aa=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var v=t.memoizedState;u!==f||h!==v||Di.current||Aa?("function"===typeof d&&(Ba(t,n,d,r),v=t.memoizedState),(c=Aa||za(t,n,c,r,h,v,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,v,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,v,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Du(e,t,n,r,a,i)}function Du(e,t,n,r,i,a){Tu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Ku(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=Xa(t,e.child,null,a),t.child=Xa(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Au(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),ro(e,t.containerInfo)}function Nu(e,t,n,r,i){return da(),va(i),t.flags|=256,wu(e,t,n,r),t.child}var Pu,Ru,Ou,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Vu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ti(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Mu,e):Uu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Bu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&Xa(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return Bu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Bu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=As)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Da(e,i),rc(r,e,i,-1))}return mc(),Bu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Wi[Qi++]=Xi,Wi[Qi++]=$i,Wi[Qi++]=Yi,Xi=e.id,$i=e.overflow,Yi=t),t=Uu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Oc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Oc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Oc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Uu(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bu(e,t,n,r){return null!==r&&va(r),Xa(t,e.child,null,n),(e=Uu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function ju(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),_a(e.return,t,n)}function zu(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&ju(e,n,t);else if(19===e.tag)ju(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),zu(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}zu(t,!0,n,null,a);break;case"together":zu(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Gu(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ku(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Oc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Oc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wu(t),null;case 1:case 17:return Pi(t.type)&&Ri(),Wu(t),null;case 3:return r=t.stateNode,io(),Si(Di),Si(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Ru(e,t),Wu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Ou(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Wu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Ur("cancel",r),Ur("close",r);break;case"iframe":case"object":case"embed":Ur("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],r);break;case"source":Ur("error",r);break;case"img":case"image":case"link":Ur("error",r),Ur("load",r);break;case"details":Ur("toggle",r);break;case"input":X(r,o),Ur("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ur("invalid",r);break;case"textarea":ie(r,o),Ur("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Ur("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Pu(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Ur("cancel",e),Ur("close",e),i=r;break;case"iframe":case"object":case"embed":Ur("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Ur(Lr[i],e);i=r;break;case"source":Ur("error",e),i=r;break;case"img":case"image":case"link":Ur("error",e),Ur("load",e),i=r;break;case"details":Ur("toggle",e),i=r;break;case"input":X(e,r),i=Y(e,r),Ur("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Ur("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Ur("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?me(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Ur("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+G(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wu(t),null;case 13:if(Si(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):mc())),null!==t.updateQueue&&(t.flags|=4),Wu(t),null);case 4:return io(),Ru(e,t),null===e&&zr(t.stateNode.containerInfo),Wu(t),null;case 10:return xa(t.type._context),Wu(t),null;case 19:if(Si(uo),null===(o=t.memoizedState))return Wu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Hu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Hu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&$e()>qs&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Wu(t),null}else 2*$e()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=$e(),t.sibling=null,n=uo.current,Ti(uo,r?1&n|2:1&n),t):(Wu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Rs)&&(Wu(t),6&t.subtreeFlags&&(t.flags|=8192)):Wu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yu(e,t){switch(ta(t),t.tag){case 1:return Pi(t.type)&&Ri(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Di),Si(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(uo),null;case 4:return io(),null;case 10:return xa(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Pu=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ru=function(){},Ou=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Ur("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xu=!1,$u=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[pi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)vs(e,t,n),n=n.sibling}function vs(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:$u||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),zt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!$u&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!$u&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Sc(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?($u=(r=$u)||null!==n.memoizedState,ds(e,t,n),$u=r):ds(e,t,n);break;default:ds(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Dc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ms(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));vs(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Sc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ys(t,e),t=t.sibling}function ys(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ms(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(m){Sc(e,e.return,m)}try{rs(5,e,e.return)}catch(m){Sc(e,e.return,m)}}break;case 1:ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ms(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(m){Sc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&$(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?me(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var v=o.value;null!=v?ne(i,!!o.multiple,v,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(m){Sc(e,e.return,m)}}break;case 6:if(ms(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(m){Sc(e,e.return,m)}}break;case 3:if(ms(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{zt(t.containerInfo)}catch(m){Sc(e,e.return,m)}break;case 4:default:ms(t,e),gs(e);break;case 13:ms(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(zs=$e())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?($u=(l=$u)||f,ms(t,e),$u=l):ms(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(v=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var p=d.stateNode;if("function"===typeof p.componentWillUnmount){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Sc(r,n,m)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){xs(h);continue}}null!==v?(v.return=d,Zu=v):xs(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=pe("display",u))}catch(m){Sc(e,e.return,m)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(m){Sc(e,e.return,m)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ms(t,e),gs(e),4&r&&ps(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Sc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Zu=e,bs(e,t,n)}function bs(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||Xu;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||$u;u=Xu;var c=$u;if(Xu=o,($u=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?_s(i):null!==s?(s.return=o,Zu=s):_s(i);for(;null!==a;)Zu=a,bs(a,t,n),a=a.sibling;Zu=i,Xu=u,$u=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):ws(e)}}function ws(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:$u||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!$u)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ma(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Va(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Va(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&zt(h)}}}break;default:throw Error(a(163))}$u||512&t.flags&&as(t)}catch(d){Sc(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function _s(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Sc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Sc(t,i,s)}}var a=t.return;try{as(t)}catch(s){Sc(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Sc(t,o,s)}}}catch(s){Sc(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Es,Ss=Math.ceil,Ts=b.ReactCurrentDispatcher,Is=b.ReactCurrentOwner,Cs=b.ReactCurrentBatchConfig,Ds=0,As=null,Ns=null,Ps=0,Rs=0,Os=Ei(0),Ls=0,Ms=null,Fs=0,Vs=0,Us=0,Bs=null,js=null,zs=0,qs=1/0,Gs=null,Ks=!1,Hs=null,Ws=null,Qs=!1,Ys=null,Xs=0,$s=0,Js=null,Zs=-1,ec=0;function tc(){return 0!==(6&Ds)?$e():-1!==Zs?Zs:Zs=$e()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Ds)&&0!==Ps?Ps&-Ps:null!==pa.transition?(0===ec&&(ec=pt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:Xt(e.type)}function rc(e,t,n,r){if(50<$s)throw $s=0,Js=null,Error(a(185));yt(e,n,r),0!==(2&Ds)&&e===As||(e===As&&(0===(2&Ds)&&(Vs|=n),4===Ls&&sc(e,Ps)),ic(e,r),1===n&&0===Ds&&0===(1&t.mode)&&(qs=$e()+500,Ui&&zi()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===As?Ps:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Ui=!0,ji(e)}(cc.bind(null,e)):ji(cc.bind(null,e)),oi((function(){0===(6&Ds)&&zi()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&Ds))throw Error(a(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=ht(e,e===As?Ps:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=yc(e,r);else{t=r;var i=Ds;Ds|=2;var o=pc();for(As===e&&Ps===t||(Gs=null,qs=$e()+500,dc(e,t));;)try{kc();break}catch(s){vc(e,s)}wa(),Ts.current=o,Ds=i,null!==Ns?t=0:(As=null,Ps=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=vt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,$e()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=yc(e,r))&&(0!==(o=vt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:xc(e,js,Gs);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=zs+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,js,Gs),t);break}xc(e,js,Gs);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ss(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,js,Gs),r);break}xc(e,js,Gs);break;default:throw Error(a(329))}}}return ic(e,$e()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Bs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=yc(e,t))&&(t=js,js=n,null!==t&&uc(t)),e}function uc(e){null===js?js=e:js.push.apply(js,e)}function sc(e,t){for(t&=~Us,t&=~Vs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Ds))throw Error(a(327));_c();var t=ht(e,0);if(0===(1&t))return ic(e,$e()),null;var n=yc(e,t);if(0!==e.tag&&2===n){var r=vt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,$e()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,js,Gs),ic(e,$e()),null}function lc(e,t){var n=Ds;Ds|=1;try{return e(t)}finally{0===(Ds=n)&&(qs=$e()+500,Ui&&zi())}}function fc(e){null!==Ys&&0===Ys.tag&&0===(6&Ds)&&_c();var t=Ds;Ds|=1;var n=Cs.transition,r=kt;try{if(Cs.transition=null,kt=1,e)return e()}finally{kt=r,Cs.transition=n,0===(6&(Ds=t))&&zi()}}function hc(){Rs=Os.current,Si(Os)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Ns)for(n=Ns.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Ri();break;case 3:io(),Si(Di),Si(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(uo);break;case 10:xa(r.type._context);break;case 22:case 23:hc()}n=n.return}if(As=e,Ns=e=Oc(e.current,null),Ps=Rs=t,Ls=0,Ms=null,Us=Vs=Fs=0,js=Bs=null,null!==Ta){for(t=0;t<Ta.length;t++)if(null!==(r=(n=Ta[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ta=null}return e}function vc(e,t){for(;;){var n=Ns;try{if(wa(),fo.current=ou,go){for(var r=po.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(vo=0,yo=mo=po=null,ko=!1,bo=0,Is.current=null,null===n||null===n.return){Ls=1,Ms=t,Ns=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Ps,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=yu(u);if(null!==v){v.flags&=-257,gu(v,u,s,0,t),1&v.mode&&mu(o,l,t),c=l;var p=(t=v).updateQueue;if(null===p){var m=new Set;m.add(c),t.updateQueue=m}else p.add(c);break e}if(0===(1&t)){mu(o,l,t),mc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var y=yu(u);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),gu(y,u,s,0,t),va(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===Bs?Bs=[o]:Bs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ws||!Ws.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,Ns===n&&null!==n&&(Ns=n=n.return);continue}break}}function pc(){var e=Ts.current;return Ts.current=ou,null===e?ou:e}function mc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===As||0===(268435455&Fs)&&0===(268435455&Vs)||sc(As,Ps)}function yc(e,t){var n=Ds;Ds|=2;var r=pc();for(As===e&&Ps===t||(Gs=null,dc(e,t));;)try{gc();break}catch(i){vc(e,i)}if(wa(),Ds=n,Ts.current=r,null!==Ns)throw Error(a(261));return As=null,Ps=0,Ls}function gc(){for(;null!==Ns;)bc(Ns)}function kc(){for(;null!==Ns&&!Ye();)bc(Ns)}function bc(e){var t=Es(e.alternate,e,Rs);e.memoizedProps=e.pendingProps,null===t?wc(e):Ns=t,Is.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qu(n,t,Rs)))return void(Ns=n)}else{if(null!==(n=Yu(n,t)))return n.flags&=32767,void(Ns=n);if(null===e)return Ls=6,void(Ns=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Ns=t);Ns=t=e}while(null!==t);0===Ls&&(Ls=5)}function xc(e,t,n){var r=kt,i=Cs.transition;try{Cs.transition=null,kt=1,function(e,t,n,r){do{_c()}while(null!==Ys);if(0!==(6&Ds))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===As&&(Ns=As=null,Ps=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qs||(Qs=!0,Ac(tt,(function(){return _c(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=kt;kt=1;var s=Ds;Ds|=4,Is.current=null,function(e,t){if(ei=Gt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var v;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(v=h.firstChild);)d=h,h=v;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(v=h.nextSibling))break;d=(h=d).parentNode}h=v}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Gt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var m=p.memoizedProps,y=p.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?m:ma(t.type,m),y);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}p=ns,ns=!1}(e,n),ys(n,e),vr(ti),Gt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),Xe(),Ds=s,kt=u,Cs.transition=o}else e.current=n;if(Qs&&(Qs=!1,Ys=e,Xs=i),o=e.pendingLanes,0===o&&(Ws=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ks)throw Ks=!1,e=Hs,Hs=null,e;0!==(1&Xs)&&0!==e.tag&&_c(),o=e.pendingLanes,0!==(1&o)?e===Js?$s++:($s=0,Js=e):$s=0,zi()}(e,t,n,r)}finally{Cs.transition=i,kt=r}return null}function _c(){if(null!==Ys){var e=bt(Xs),t=Cs.transition,n=kt;try{if(Cs.transition=null,kt=16>e?16:e,null===Ys)var r=!1;else{if(e=Ys,Ys=null,Xs=0,0!==(6&Ds))throw Error(a(331));var i=Ds;for(Ds|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,v=f.return;if(os(f),f===l){Zu=null;break}if(null!==d){d.return=v,Zu=d;break}Zu=v}}}var p=o.alternate;if(null!==p){var m=p.child;if(null!==m){p.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var b=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Zu=b;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(x){Sc(s,s.return,x)}if(s===u){Zu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Zu=w;break e}Zu=s.return}}if(Ds=i,zi(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(x){}r=!0}return r}finally{kt=n,Cs.transition=t}}return!1}function Ec(e,t,n){e=Oa(e,t=vu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(yt(e,1,t),ic(e,t))}function Sc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ws||!Ws.has(r))){t=Oa(t,e=pu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(yt(t,1,e),ic(t,e));break}}t=t.return}}function Tc(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,As===e&&(Ps&n)===n&&(4===Ls||3===Ls&&(130023424&Ps)===Ps&&500>$e()-zs?dc(e,0):Us|=n),ic(e,t)}function Ic(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Da(e,t))&&(yt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Ic(e,n)}function Dc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Ic(e,n)}function Ac(e,t){return We(e,t)}function Nc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Nc(e,t,n,r)}function Rc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Oc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Rc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case _:return Mc(n.children,i,o,t);case E:u=8,i|=8;break;case S:return(e=Pc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case D:return(e=Pc(13,n,t,i)).elementType=D,e.lanes=o,e;case A:return(e=Pc(19,n,t,i)).elementType=A,e.lanes=o,e;case R:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:u=10;break e;case I:u=9;break e;case C:u=11;break e;case N:u=14;break e;case P:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Pc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=R,e.lanes=n,e.stateNode={isHidden:!1},e}function Vc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Uc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function jc(e,t,n,r,i,a,o,u,s){return e=new Bc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Pc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Na(a),e}function zc(e){if(!e)return Ii;e:{if(ze(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Pi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Pi(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=jc(n,r,!0,e,0,a,0,u,s)).context=zc(null),n=e.current,(a=Ra(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Oa(n,a,i),e.current.lanes=i,yt(e,i,r),ic(e,r),e}function Gc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=zc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Ra(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Oa(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Es=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Di.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Au(t),da();break;case 5:ao(t);break;case 1:Pi(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(ya,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Vu(e,t,n):(Ti(uo,1&uo.current),null!==(e=Ku(e,t,n))?e.sibling:null);Ti(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,n)}return Ku(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Gu(e,t),e=t.pendingProps;var i=Ni(t,Ci.current);Ea(t,n),i=Eo(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Pi(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Na(t),i.updater=ja,t.stateNode=i,i._reactInternals=t,Ka(t,r,e,n),t=Du(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Gu(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Rc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===N)return 14}return 2}(r),e=ma(r,e),i){case 0:t=Iu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=xu(null,t,r,e,n);break e;case 14:t=_u(null,t,r,ma(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Iu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 3:e:{if(Au(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Pa(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Nu(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Nu(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=$a(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Ku(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Tu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Vu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Xa(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xu(e,t,r,i=t.elementType===r?i:ma(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ti(ya,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Di.current){t=Ku(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Ra(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),_a(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),_a(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ea(t,n),r=r(i=Sa(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ma(r=t.type,t.pendingProps),_u(e,t,r,i=ma(r.type,i),n);case 15:return Eu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ma(r,i),Gu(e,t),t.tag=1,Pi(r)?(e=!0,Mi(t)):e=!1,Ea(t,n),qa(t,r,i),Ka(t,r,i,n),Du(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Su(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Kc(o);u.call(e)}}Gc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Kc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[vi]=o.current,zr(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Kc(s);u.call(e)}}var s=jc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[vi]=s.current,zr(8===e.nodeType?e.parentNode:e),fc((function(){Gc(t,s,n,r)})),s}(n,t,e,i,r);return Kc(o)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Gc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Gc(null,e,null,null)})),t[vi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Rt.length&&0!==t&&t<Rt[n].priority;n++);Rt.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,$e()),0===(6&Ds)&&(qs=$e()+500,zi()))}break;case 13:fc((function(){var t=Da(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Wc(e,1)}},xt=function(e){if(13===e.tag){var t=Da(e,134217728);if(null!==t)rc(t,e,134217728,tc());Wc(e,134217728)}},_t=function(e){if(13===e.tag){var t=nc(e),n=Da(e,t);if(null!==n)rc(n,e,t,tc());Wc(e,t)}},Et=function(){return kt},St=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},xe=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));W(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,De=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Te,Ie,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ke(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!$c(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:x,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!$c(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=jc(e,1,!1,null,0,n,0,r,i),e[vi]=t.current,zr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ke(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!$c(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[vi]=t.current,zr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[vi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||v}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||v}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=y.prototype;var b=k.prototype=new g;b.constructor=k,p(b,y.prototype),b.isPureReactComponent=!0;var w=Array.isArray,x=Object.prototype.hasOwnProperty,_={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)x.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:_.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function D(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),D(o,t,i,"",(function(e){return e}))):null!=o&&(T(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(I,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=D(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=D(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function A(e,t,n){if(null==e)return e;var r=[],i=0;return D(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function N(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P={current:null},R={transition:null},O={ReactCurrentDispatcher:P,ReactCurrentBatchConfig:R,ReactCurrentOwner:_};t.Children={map:A,forEach:function(e,t,n){A(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return A(e,(function(){t++})),t},toArray:function(e){return A(e,(function(e){return e}))||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=p({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=_.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)x.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:N}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=R.transition;R.transition={};try{e()}finally{R.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return P.current.useCallback(e,t)},t.useContext=function(e){return P.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return P.current.useDeferredValue(e)},t.useEffect=function(e,t){return P.current.useEffect(e,t)},t.useId=function(){return P.current.useId()},t.useImperativeHandle=function(e,t,n){return P.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return P.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return P.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return P.current.useMemo(e,t)},t.useReducer=function(e,t,n){return P.current.useReducer(e,t,n)},t.useRef=function(e){return P.current.useRef(e)},t.useState=function(e){return P.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return P.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return P.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,v=!1,p=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(m=!1,b(e),!p)if(null!==r(c))p=!0,R(x);else{var t=r(l);null!==t&&O(w,t.startTime-e)}}function x(e,n){p=!1,m&&(m=!1,g(T),T=-1),v=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!D());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&O(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,v=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var _,E=!1,S=null,T=-1,I=5,C=-1;function D(){return!(t.unstable_now()-C<I)}function A(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?_():(E=!1,S=null)}}else E=!1}if("function"===typeof k)_=function(){k(A)};else if("undefined"!==typeof MessageChannel){var N=new MessageChannel,P=N.port2;N.port1.onmessage=A,_=function(){P.postMessage(null)}}else _=function(){y(A,0)};function R(e){S=e,E||(E=!0,_())}function O(e,n){T=y((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||v||(p=!0,R(x))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(m?(g(T),T=-1):m=!0,O(w,a-o))):(e.sortIndex=u,n(c,e),p||v||(p=!0,R(x))),e},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return G},SDK_VERSION:function(){return Je},_DEFAULT_ENTRY_NAME:function(){return Ue},_addComponent:function(){return qe},_addOrOverwriteComponent:function(){return Ge},_apps:function(){return je},_clearComponents:function(){return Qe},_components:function(){return ze},_getProvider:function(){return He},_registerComponent:function(){return Ke},_removeServiceInstance:function(){return We},deleteApp:function(){return nt},getApp:function(){return et},getApps:function(){return tt},initializeApp:function(){return Ze},onLog:function(){return at},registerVersion:function(){return it},setLogLevel:function(){return ot}});var t=n(791),r=n(250);function i(e){if(Array.isArray(e))return e}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function o(e,t){if(e){if("string"===typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e,t){return i(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||o(e,t)||u()}var c=n(184),l=function(){return(0,c.jsxs)("div",{className:"title",children:[(0,c.jsx)("h1",{children:"3D Workshop"}),(0,c.jsx)("h2",{children:"Gallery"}),(0,c.jsx)("p",{children:"Lorem ipsum, dolor sit amet consectetur ad"})]})};function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function h(){h=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(A){s=function(e,t,n){return e[t]=n}}function c(e,t,n,i){var a=t&&t.prototype instanceof v?t:v,o=Object.create(a.prototype),u=new I(i||[]);return r(o,"_invoke",{value:_(e,n,u)}),o}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(A){return{type:"throw",arg:A}}}e.wrap=c;var d={};function v(){}function p(){}function m(){}var y={};s(y,a,(function(){return this}));var g=Object.getPrototypeOf,k=g&&g(g(C([])));k&&k!==t&&n.call(k,a)&&(y=k);var b=m.prototype=v.prototype=Object.create(y);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function x(e,t){function i(r,a,o,u){var s=l(e[r],e,a);if("throw"!==s.type){var c=s.arg,h=c.value;return h&&"object"==f(h)&&n.call(h,"__await")?t.resolve(h.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(h).then((function(e){c.value=e,o(c)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function _(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return D()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=E(o,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=l(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=l(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function I(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function C(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:D}}function D(){return{value:void 0,done:!0}}return p.prototype=m,r(b,"constructor",{value:m,configurable:!0}),r(m,"constructor",{value:p,configurable:!0}),p.displayName=s(m,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,s(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(x.prototype),s(x.prototype,o,(function(){return this})),e.AsyncIterator=x,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new x(c(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(b),s(b,u,"Generator"),s(b,a,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,I.prototype={constructor:I,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(T),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),T(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;T(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function d(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function v(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){d(a,r,i,o,u,"next",e)}function u(e){d(a,r,i,o,u,"throw",e)}o(void 0)}))}}function p(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}function m(e,t,n){return(t=p(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,p(r.key),r)}}function k(e,t,n){return t&&g(e.prototype,t),n&&g(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function b(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=o(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,a=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw a}}}}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function _(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}function E(e){return E=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},E(e)}function S(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function T(e){var t=S();return function(){var n,r=E(e);if(t){var i=E(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===f(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return w(e)}(this,n)}}function I(e,t,n){return I=S()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&x(i,n.prototype),i},I.apply(null,arguments)}function C(e){var t="function"===typeof Map?new Map:void 0;return C=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return I(e,arguments,E(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),x(n,e)},C(e)}var D=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},A={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(D(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new N;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},N=function(e){_(n,e);var t=T(n);function n(){var e;return y(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return k(n)}(C(Error)),P=function(e){return function(e){var t=D(e);return A.encodeByteArray(t,!0)}(e).replace(/\./g,"")},R=function(e){try{return A.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function O(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&L(n)&&(e[n]=O(e[n],t[n]));return e}function L(e){return"__proto__"!==e}var M=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},F=function(){try{return M()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/blender-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&R(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},V=function(){var e;return null===(e=F())||void 0===e?void 0:e.config},U=function(){function e(){var t=this;y(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return k(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function B(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[P(JSON.stringify({alg:"none",type:"JWT"})),P(JSON.stringify(a)),""].join(".")}function j(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function z(){var e,t=null===(e=F())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function q(){try{return"object"===typeof indexedDB}catch(e){return!1}}var G=function(e){_(n,e);var t=T(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(w(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(w(a),K.prototype.create),a}return k(n)}(C(Error)),K=function(){function e(t,n,r){y(this,e),this.service=t,this.serviceName=n,this.errors=r}return k(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(H,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new G(n,a,t)}}]),e}();var H=/\{\$([^}]+)}/g;function W(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function Q(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(Y(u)&&Y(s)){if(!Q(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function Y(e){return null!==e&&"object"===typeof e}function X(e,t){var n=new $(e,t);return n.subscribe.bind(n)}var $=function(){function e(t,n){var r=this;y(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return k(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=b(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=J),void 0===r.error&&(r.error=J),void 0===r.complete&&(r.complete=J);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function J(){}function Z(e){return e&&e._delegate?e._delegate:e}function ee(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function te(e){return function(e){if(Array.isArray(e))return a(e)}(e)||ee(e)||o(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var ne=function(){function e(t,n,r){y(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return k(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),re="[DEFAULT]",ie=function(){function e(t,n){y(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return k(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new U;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:re})}catch(c){}var t,n=b(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=v(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(te(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),te(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=b(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=s(i.value,2),c=u[0],l=u[1];r===this.normalizeInstanceIdentifier(c)&&l.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(zy){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===re?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(zy){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re;return this.component?this.component.multipleInstances?e:re:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var ae,oe,ue=function(){function e(t){y(this,e),this.name=t,this.providers=new Map}return k(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ie(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),se=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(oe||(oe={}));var ce={debug:oe.DEBUG,verbose:oe.VERBOSE,info:oe.INFO,warn:oe.WARN,error:oe.ERROR,silent:oe.SILENT},le=oe.INFO,fe=(m(ae={},oe.DEBUG,"log"),m(ae,oe.VERBOSE,"log"),m(ae,oe.INFO,"info"),m(ae,oe.WARN,"warn"),m(ae,oe.ERROR,"error"),ae),he=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=fe[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},de=function(){function e(t){y(this,e),this.name=t,this._logLevel=le,this._logHandler=he,this._userLogHandler=null,se.push(this)}return k(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in oe))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?ce[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,oe.DEBUG].concat(t)),this._logHandler.apply(this,[this,oe.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,oe.VERBOSE].concat(t)),this._logHandler.apply(this,[this,oe.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,oe.INFO].concat(t)),this._logHandler.apply(this,[this,oe.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,oe.WARN].concat(t)),this._logHandler.apply(this,[this,oe.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,oe.ERROR].concat(t)),this._logHandler.apply(this,[this,oe.ERROR].concat(t))}}]),e}();function ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function pe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ve(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var me,ye,ge=function(e,t){return t.some((function(t){return e instanceof t}))};var ke=new WeakMap,be=new WeakMap,we=new WeakMap,xe=new WeakMap,_e=new WeakMap;var Ee={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return be.get(e);if("objectStoreNames"===t)return e.objectStoreNames||we.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ie(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function Se(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ye||(ye=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ce(this),n),Ie(ke.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Ie(e.apply(Ce(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Ce(this),t].concat(r));return we.set(a,t.sort?t.sort():[t]),Ie(a)}}function Te(e){return"function"===typeof e?Se(e):(e instanceof IDBTransaction&&function(e){if(!be.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));be.set(e,t)}}(e),ge(e,me||(me=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,Ee):e)}function Ie(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(Ie(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&ke.set(t,e)})).catch((function(){})),_e.set(t,e),t}(e);if(xe.has(e))return xe.get(e);var t=Te(e);return t!==e&&(xe.set(e,t),_e.set(t,e)),t}var Ce=function(e){return _e.get(e)};var De,Ae,Ne=["get","getKey","getAll","getAllKeys","count"],Pe=["put","add","delete","clear"],Re=new Map;function Oe(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(Re.get(t))return Re.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Pe.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Ne.includes(n))){var a=function(){var e=v(h().mark((function e(t){var a,o,u,s,c,l,f=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=f.length,c=new Array(s>1?s-1:0),l=1;l<s;l++)c[l-1]=f[l];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return Re.set(t,a),a}}}Ee=function(e){return pe(pe({},e),{},{get:function(t,n,r){return Oe(t,n)||e.get(t,n,r)},has:function(t,n){return!!Oe(t,n)||e.has(t,n)}})}(Ee);var Le=function(){function e(t){y(this,e),this.container=t}return k(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Me="@firebase/app",Fe="0.9.8",Ve=new de("@firebase/app"),Ue="[DEFAULT]",Be=(m(De={},Me,"fire-core"),m(De,"@firebase/app-compat","fire-core-compat"),m(De,"@firebase/analytics","fire-analytics"),m(De,"@firebase/analytics-compat","fire-analytics-compat"),m(De,"@firebase/app-check","fire-app-check"),m(De,"@firebase/app-check-compat","fire-app-check-compat"),m(De,"@firebase/auth","fire-auth"),m(De,"@firebase/auth-compat","fire-auth-compat"),m(De,"@firebase/database","fire-rtdb"),m(De,"@firebase/database-compat","fire-rtdb-compat"),m(De,"@firebase/functions","fire-fn"),m(De,"@firebase/functions-compat","fire-fn-compat"),m(De,"@firebase/installations","fire-iid"),m(De,"@firebase/installations-compat","fire-iid-compat"),m(De,"@firebase/messaging","fire-fcm"),m(De,"@firebase/messaging-compat","fire-fcm-compat"),m(De,"@firebase/performance","fire-perf"),m(De,"@firebase/performance-compat","fire-perf-compat"),m(De,"@firebase/remote-config","fire-rc"),m(De,"@firebase/remote-config-compat","fire-rc-compat"),m(De,"@firebase/storage","fire-gcs"),m(De,"@firebase/storage-compat","fire-gcs-compat"),m(De,"@firebase/firestore","fire-fst"),m(De,"@firebase/firestore-compat","fire-fst-compat"),m(De,"fire-js","fire-js"),m(De,"firebase","fire-js-all"),De),je=new Map,ze=new Map;function qe(e,t){try{e.container.addComponent(t)}catch(n){Ve.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Ge(e,t){e.container.addOrOverwriteComponent(t)}function Ke(e){var t=e.name;if(ze.has(t))return Ve.debug("There were multiple attempts to register component ".concat(t,".")),!1;ze.set(t,e);var n,r=b(je.values());try{for(r.s();!(n=r.n()).done;){qe(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function He(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function We(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Ue;He(e,t).clearInstance(n)}function Qe(){ze.clear()}var Ye=(m(Ae={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),m(Ae,"bad-app-name","Illegal App name: '{$appName}"),m(Ae,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),m(Ae,"app-deleted","Firebase App named '{$appName}' already deleted"),m(Ae,"no-options","Need to provide options, when not being deployed to hosting via source."),m(Ae,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),m(Ae,"invalid-log-argument","First argument to `onLog` must be null or a function."),m(Ae,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),m(Ae,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),m(Ae,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),m(Ae,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Ae),Xe=new K("app","Firebase",Ye),$e=function(){function e(t,n,r){var i=this;y(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ne("app",(function(){return i}),"PUBLIC"))}return k(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw Xe.create("app-deleted",{appName:this._name})}}]),e}(),Je="9.20.0";function Ze(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:Ue,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw Xe.create("bad-app-name",{appName:String(i)});if(n||(n=V()),!n)throw Xe.create("no-options");var a=je.get(i);if(a){if(Q(n,a.options)&&Q(r,a.config))return a;throw Xe.create("duplicate-app",{appName:i})}var o,u=new ue(i),s=b(ze.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new $e(n,r,u);return je.set(i,l),l}function et(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=je.get(e);if(!t&&e===Ue)return Ze();if(!t)throw Xe.create("no-app",{appName:e});return t}function tt(){return Array.from(je.values())}function nt(e){return rt.apply(this,arguments)}function rt(){return(rt=v(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!je.has(n)){e.next=6;break}return je.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(e,t,n){var r,i=null!==(r=Be[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Ve.warn(u.join(" "))}Ke(new ne("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function at(e,t){if(null!==e&&"function"!==typeof e)throw Xe.create("invalid-log-argument");!function(e,t){var n,r=b(se);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=ce[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:oe[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function ot(e){var t;t=e,se.forEach((function(e){e.setLogLevel(t)}))}var ut="firebase-heartbeat-database",st=1,ct="firebase-heartbeat-store",lt=null;function ft(){return lt||(lt=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=Ie(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(Ie(u.result),e.oldVersion,e.newVersion,Ie(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}(ut,st,{upgrade:function(e,t){if(0===t)e.createObjectStore(ct)}}).catch((function(e){throw Xe.create("idb-open",{originalErrorMessage:e.message})}))),lt}function ht(e){return dt.apply(this,arguments)}function dt(){return dt=v(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ft();case 3:return n=e.sent,e.abrupt("return",n.transaction(ct).objectStore(ct).get(mt(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof G?Ve.warn(e.t0.message):(r=Xe.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Ve.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),dt.apply(this,arguments)}function vt(e,t){return pt.apply(this,arguments)}function pt(){return pt=v(h().mark((function e(t,n){var r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ft();case 3:return r=e.sent,i=r.transaction(ct,"readwrite"),a=i.objectStore(ct),e.next=8,a.put(n,mt(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof G?Ve.warn(e.t0.message):(o=Xe.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Ve.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),pt.apply(this,arguments)}function mt(e){return"".concat(e.name,"!").concat(e.options.appId)}var yt=function(){function e(t){var n=this;y(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new xt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return k(e,[{key:"triggerHeartbeat",value:function(){var e=v(h().mark((function e(){var t,n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=gt(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=v(h().mark((function e(){var t,n,r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=gt(),n=kt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=P(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function gt(){return(new Date).toISOString().substring(0,10)}function kt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=b(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),_t(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),_t(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var bt,wt,xt=function(){function e(t){y(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return k(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=v(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(q()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=v(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,ht(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=v(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",vt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=v(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",vt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(te(r.heartbeats),te(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function _t(e){return P(JSON.stringify({version:2,heartbeats:e})).length}bt="",Ke(new ne("platform-logger",(function(e){return new Le(e)}),"PRIVATE")),Ke(new ne("heartbeat",(function(e){return new yt(e)}),"PRIVATE")),it(Me,Fe,bt),it(Me,Fe,"esm2017"),it("fire-js","");var Et=function(){function e(t,n){var r=this;y(this,e),this._delegate=t,this.firebase=n,qe(t,new ne("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return k(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),nt(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ue;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ue;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){qe(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Ge(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),St=(m(wt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),m(wt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),wt),Tt=new K("app-compat","Firebase",St);var It=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Ze(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(W(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:it,setLogLevel:ot,onLog:at,apps:null,SDK_VERSION:Je,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(Ke(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw Tt.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&O(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!W(n,e=e||Ue))throw Tt.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(Et);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){O(n,e)},createSubscribe:X,ErrorFactory:K,deepExtend:O}),n}(),Ct=new de("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Ct.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var Dt=self.firebase.SDK_VERSION;Dt&&Dt.indexOf("LITE")>=0&&Ct.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var At=It;!function(e){it("@firebase/app-compat","0.2.8",e)}();At.registerVersion("firebase","9.20.0","app-compat");var Nt,Pt="firebasestorage.googleapis.com",Rt="storageBucket",Ot=function(e){_(n,e);var t=T(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return y(this,n),(i=t.call(this,Lt(e),"Firebase Storage: ".concat(r," (").concat(Lt(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(w(i),n.prototype),i}return k(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return Lt(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(G);function Lt(e){return"storage/"+e}function Mt(){return new Ot(Nt.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Ft(){return new Ot(Nt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Vt(){return new Ot(Nt.CANCELED,"User canceled the upload/download.")}function Ut(){return new Ot(Nt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Bt(e){return new Ot(Nt.INVALID_ARGUMENT,e)}function jt(){return new Ot(Nt.APP_DELETED,"The Firebase app was deleted.")}function zt(e){return new Ot(Nt.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function qt(e,t){return new Ot(Nt.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Gt(e){throw new Ot(Nt.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Nt||(Nt={}));var Kt,Ht=function(){function e(t,n){y(this,e),this.bucket=t,this.path_=n}return k(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(a){return new e(t,"")}if(""===r.path)return r;throw i=t,new Ot(Nt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===Pt?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new Ot(Nt.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),Wt=function(){function e(t){y(this,e),this.promise_=Promise.reject(t)}return k(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function Qt(e){return"string"===typeof e||e instanceof String}function Yt(e){return Xt()&&e instanceof Blob}function Xt(){return"undefined"!==typeof Blob&&!z()}function $t(e,t,n,r){if(r<t)throw Bt("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Bt("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Jt(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Zt(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function en(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(Kt||(Kt={}));var tn=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this,d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];y(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return k(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=Mt();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?jt():Vt());else i(Ft())}};this.canceled_?t(0,new nn(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var v=!1;function p(e){v||(v=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,p(!0)}),n),p}((function(t,n){if(n)t(!1,new nn(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===Kt.NO_ERROR,a=r.getStatus();if(!n||en(a,e.additionalRetryCodes_)&&e.retry){var o=r.getErrorCode()===Kt.ABORT;t(!1,new nn(!1,null,o))}else{var u=-1!==e.successCodes_.indexOf(a);t(!0,new nn(u,r))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),nn=k((function e(t,n,r){y(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function rn(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function an(){for(var e=rn(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(Xt())return new Blob(n);throw new Ot(Nt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function on(e){if("undefined"===typeof atob)throw t="base-64",new Ot(Nt.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var un={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},sn=k((function e(t,n){y(this,e),this.data=t,this.contentType=n||null}));function cn(e,t){switch(e){case un.RAW:return new sn(ln(t));case un.BASE64:case un.BASE64URL:return new sn(fn(e,t));case un.DATA_URL:return new sn(function(e){var t=new hn(e);return t.base64?fn(un.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw qt(un.DATA_URL,"Malformed data URL.")}return ln(t)}(t.rest)}(t),new hn(t).contentType)}throw Mt()}function ln(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function fn(e,t){switch(e){case un.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw qt(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case un.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw qt(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=on(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw qt(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var hn=k((function e(t){y(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw qt(un.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}));var dn=function(){function e(t,n){y(this,e);var r=0,i="";Yt(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return k(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(Yt(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(Xt()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(an.apply(null,i))}var a=n.map((function(e){return Qt(e)?cn(un.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function vn(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function pn(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function mn(e,t){return t}var yn=k((function e(t,n,r,i){y(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||mn})),gn=null;function kn(){if(gn)return gn;var e=[];e.push(new yn("bucket")),e.push(new yn("generation")),e.push(new yn("metageneration")),e.push(new yn("name","fullPath",!0));var t=new yn("name");t.xform=function(e,t){return function(e){return!Qt(e)||e.length<2?e:pn(e)}(t)},e.push(t);var n=new yn("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new yn("timeCreated")),e.push(new yn("updated")),e.push(new yn("md5Hash",null,!0)),e.push(new yn("cacheControl",null,!0)),e.push(new yn("contentDisposition",null,!0)),e.push(new yn("contentEncoding",null,!0)),e.push(new yn("contentLanguage",null,!0)),e.push(new yn("contentType",null,!0)),e.push(new yn("metadata","customMetadata",!0)),gn=e}function bn(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new Ht(n,r);return t._makeStorageReference(i)}})}(r,e),r}function wn(e,t,n){var r=vn(t);return null===r?null:bn(e,r,n)}function xn(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var _n="prefixes",En="items";function Sn(e,t,n){var r=vn(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[_n]){var i,a=b(n[_n]);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new Ht(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n[En]){var s,c=b(n[En]);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new Ht(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var Tn=k((function e(t,n,r,i){y(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function In(e){if(!e)throw Mt()}function Cn(e,t){return function(n,r){var i=wn(e,r,t);return In(null!==i),i}}function Dn(e,t){return function(n,r){var i=wn(e,r,t);return In(null!==i),function(e,t,n,r){var i=vn(t);if(null===i)return null;if(!Qt(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return Jt("/b/"+o(i)+"/o/"+o(a),n,r)+Zt({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function An(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Ot(Nt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Ot(Nt.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new Ot(Nt.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Ot(Nt.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function Nn(e){var t=An(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new Ot(Nt.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function Pn(e,t,n){var r=Jt(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Tn(r,"GET",Cn(e,n),i);return a.errorHandler=Nn(t),a}function Rn(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=Jt(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new Tn(o,"GET",function(e,t){return function(n,r){var i=Sn(e,t,r);return In(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=An(t),s}function On(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function Ln(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=On(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+xn(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=dn.getBlob(c,r,l);if(null===f)throw Ut();var h={name:s.fullPath},d=Jt(a,e.host,e._protocol),v=e.maxUploadRetryTime,p=new Tn(d,"POST",Cn(e,n),v);return p.urlParams=h,p.headers=o,p.body=f.uploadData(),p.errorHandler=An(t),p}var Mn=k((function e(t,n,r,i){y(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function Fn(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){In(!1)}return In(!!n&&-1!==(t||["active"]).indexOf(n)),n}var Vn=262144;function Un(e,t,n,r,i,a,o,u){var s=new Mn(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new Ot(Nt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":0===l?"finalize":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},v=r.slice(f,h);if(null===v)throw Ut();var p=t.maxUploadRetryTime,m=new Tn(n,"POST",(function(e,n){var i,o=Fn(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?Cn(t,a)(e,n):null,new Mn(u,c,"final"===o,i)}),p);return m.headers=d,m.body=v.uploadData(),m.progressCallback=u||null,m.errorHandler=An(e),m}var Bn={STATE_CHANGED:"state_changed"},jn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function zn(e){switch(e){case"running":case"pausing":case"canceling":return jn.RUNNING;case"paused":return jn.PAUSED;case"success":return jn.SUCCESS;case"canceled":return jn.CANCELED;default:return jn.ERROR}}var qn=k((function e(t,n,r){y(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function Gn(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var Kn=null,Hn=function(){function e(){var t=this;y(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Kt.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=Kt.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=Kt.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return k(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw Gt("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw Gt("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw Gt("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw Gt("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw Gt("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),Wn=function(e){_(n,e);var t=T(n);function n(){return y(this,n),t.apply(this,arguments)}return k(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(Hn);function Qn(){return Kn?Kn():new Wn}var Yn=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;y(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=kn(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(r._request=void 0,r._chunkMultiplier=1,e._codeEquals(Nt.CANCELED))r._needToFetchStatus=!0,r.completeTransitions_();else{var t=r.isExponentialBackoffExpired();if(en(e.status,[])){if(!t)return r.sleepTime=Math.max(2*r.sleepTime,1e3),r._needToFetchStatus=!0,void r.completeTransitions_();e=Ft()}r._error=e,r._transition("error")}},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals(Nt.CANCELED)?r.completeTransitions_():(r._error=e,r._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return k(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=s(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=On(t,r,i),u={name:o.fullPath},s=Jt(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=xn(o,n),f=e.maxUploadRetryTime,h=new Tn(s,"POST",(function(e){var t;Fn(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){In(!1)}return In(Qt(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=An(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,Qn,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new Tn(n,"POST",(function(e){var t=Fn(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){In(!1)}n||In(!1);var i=Number(n);return In(!isNaN(i)),new Mn(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=An(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,Qn,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=Vn*this._chunkMultiplier,n=new Mn(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=Un(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,Qn,i,a,!1);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(Vn*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=Pn(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,Qn,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=Ln(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,Qn,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Vt(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=zn(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new qn(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(zn(this._state)){case jn.SUCCESS:Gn(this._resolve.bind(null,this.snapshot))();break;case jn.CANCELED:case jn.ERROR:Gn(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(zn(this._state)){case jn.RUNNING:case jn.PAUSED:e.next&&Gn(e.next.bind(e,this.snapshot))();break;case jn.SUCCESS:e.complete&&Gn(e.complete.bind(e))();break;case jn.CANCELED:case jn.ERROR:default:e.error&&Gn(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),Xn=function(){function e(t,n){y(this,e),this._service=t,this._location=n instanceof Ht?n:Ht.makeFromUrl(n,t.host)}return k(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new Ht(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return pn(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new Ht(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw zt(e)}}]),e}();function $n(e,t,n){return Jn.apply(this,arguments)}function Jn(){return(Jn=v(h().mark((function e(t,n,r){var i,a,o,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,Zn(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,te(u.prefixes)),(a=n.items).push.apply(a,te(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,$n(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Zn(e,t){null!=t&&"number"===typeof t.maxResults&&$t("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=Rn(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,Qn)}function er(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=Jt(t.fullServerUrl(),e.host,e._protocol),a=xn(n,r),o=e.maxOperationRetryTime,u=new Tn(i,"PATCH",Cn(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=Nn(t),u}(e.storage,e._location,t,kn());return e.storage.makeRequestWithTokens(n,Qn)}function tr(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=Jt(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new Tn(r,"GET",Dn(e,n),i);return a.errorHandler=Nn(t),a}(e.storage,e._location,kn());return e.storage.makeRequestWithTokens(t,Qn).then((function(e){if(null===e)throw new Ot(Nt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function nr(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=Jt(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new Tn(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=Nn(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,Qn)}function rr(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new Ht(e._location.bucket,n);return new Xn(e.storage,r)}function ir(e,t){if(e instanceof ur){var n=e;if(null==n._bucket)throw new Ot(Nt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Rt+"' property when initializing the app?");var r=new Xn(n,n._bucket);return null!=t?ir(r,t):r}return void 0!==t?rr(e,t):e}function ar(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof ur)return new Xn(e,t);throw Bt("To use ref(service, url), the first argument must be a Storage instance.")}return ir(e,t)}function or(e,t){var n=null===t||void 0===t?void 0:t[Rt];return null==n?null:Ht.makeFromBucketSpec(n,e)}var ur=function(){function e(t,n,r,i,a){y(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Pt,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Ht.makeFromBucketSpec(i,this._host):or(this._host,this.app.options)}return k(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=Ht.makeFromBucketSpec(this._url,e):this._bucket=or(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){$t("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){$t("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=v(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=v(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new Xn(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new Wt(jt());var o=function(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=Zt(e.urlParams),s=e.url+u,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new tn(s,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=v(h().mark((function e(t,n){var r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=s(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),sr="@firebase/storage",cr="0.11.2",lr="storage";function fr(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new Yn(e,new dn(t),n)}(e=Z(e),t,n)}function hr(e){return function(e){e._throwIfRoot("getMetadata");var t=Pn(e.storage,e._location,kn());return e.storage.makeRequestWithTokens(t,Qn)}(e=Z(e))}function dr(e){return function(e){var t={prefixes:[],items:[]};return $n(e,t).then((function(){return t}))}(e=Z(e))}function vr(e,t){return ar(e=Z(e),t)}function pr(e,t,n){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:B(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function mr(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new ur(r,i,a,n,Je)}Ke(new ne(lr,mr,"PUBLIC").setMultipleInstances(!0)),it(sr,cr,""),it(sr,cr,"esm2017");var yr=function(){function e(t,n,r){y(this,e),this._delegate=t,this.task=n,this.ref=r}return k(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),gr=function(){function e(t,n){y(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return k(e,[{key:"snapshot",get:function(){return new yr(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new yr(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new yr(e,i,i._ref))}:{next:t.next?function(e){return t.next(new yr(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),kr=function(){function e(t,n){y(this,e),this._delegate=t,this._service=n}return k(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new br(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new br(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),br=function(){function e(t,n){y(this,e),this._delegate=t,this.storage=n}return k(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return rr(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new gr(fr(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:un.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=cn(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new gr(new Yn(this._delegate,new dn(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return dr(this._delegate).then((function(t){return new kr(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return Zn(e=Z(e),t)}(this._delegate,e||void 0).then((function(e){return new kr(e,t.storage)}))}},{key:"getMetadata",value:function(){return hr(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return er(e=Z(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return tr(Z(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),nr(Z(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw zt(e)}}]),e}(),wr=function(){function e(t,n){y(this,e),this.app=t,this._delegate=n}return k(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(xr(e))throw Bt("ref() expected a child path but got a URL, use refFromURL instead.");return new br(vr(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!xr(e))throw Bt("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ht.makeFromUrl(e,this._delegate.host)}catch(t){throw Bt("refFromUrl() expected a valid full URL but got an invalid one.")}return new br(vr(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};pr(this._delegate,e,t,n)}}]),e}();function xr(e){return/^[A-Za-z]+:\/\//.test(e)}function _r(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new wr(r,i)}function Er(){return Er="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},Er.apply(this,arguments)}!function(e){var t={TaskState:jn,TaskEvent:Bn,StringFormat:un,Storage:wr,Reference:br};e.INTERNAL.registerComponent(new ne("storage-compat",_r,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.2")}(At);var Sr,Tr="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},Ir={},Cr=Cr||{},Dr=Tr||self;function Ar(){}function Nr(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Pr(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Rr="closure_uid_"+(1e9*Math.random()>>>0),Or=0;function Lr(e,t,n){return e.call.apply(e.bind,arguments)}function Mr(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Fr(e,t,n){return(Fr=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Lr:Mr).apply(null,arguments)}function Vr(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Ur(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Br(){this.s=this.s,this.o=this.o}Br.prototype.s=!1,Br.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Rr)&&e[Rr]||(e[Rr]=++Or))},Br.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var jr=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function zr(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function qr(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Nr(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Gr(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Gr.prototype.h=function(){this.defaultPrevented=!0};var Kr=function(){if(!Dr.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Dr.addEventListener("test",Ar,t),Dr.removeEventListener("test",Ar,t)}catch(n){}return e}();function Hr(e){return/^[\s\xa0]*$/.test(e)}var Wr=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Qr(e,t){return e<t?-1:e>t?1:0}function Yr(){var e=Dr.navigator;return e&&(e=e.userAgent)?e:""}function Xr(e){return-1!=Yr().indexOf(e)}function $r(e){return $r[" "](e),e}$r[" "]=Ar;var Jr,Zr=Xr("Opera"),ei=Xr("Trident")||Xr("MSIE"),ti=Xr("Edge"),ni=ti||ei,ri=Xr("Gecko")&&!(-1!=Yr().toLowerCase().indexOf("webkit")&&!Xr("Edge"))&&!(Xr("Trident")||Xr("MSIE"))&&!Xr("Edge"),ii=-1!=Yr().toLowerCase().indexOf("webkit")&&!Xr("Edge");function ai(){var e=Dr.document;return e?e.documentMode:void 0}e:{var oi="",ui=function(){var e=Yr();return ri?/rv:([^\);]+)(\)|;)/.exec(e):ti?/Edge\/([\d\.]+)/.exec(e):ei?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):ii?/WebKit\/(\S+)/.exec(e):Zr?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(ui&&(oi=ui?ui[1]:""),ei){var si=ai();if(null!=si&&si>parseFloat(oi)){Jr=String(si);break e}}Jr=oi}var ci,li={};function fi(){return function(e){var t=li;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=Wr(String(Jr)).split("."),n=Wr("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Qr(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Qr(0==a[2].length,0==o[2].length)||Qr(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Dr.document&&ei){var hi=ai();ci=hi||(parseInt(Jr,10)||void 0)}else ci=void 0;var di=ci;function vi(e,t){if(Gr.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(ri){e:{try{$r(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:pi[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&vi.X.h.call(this)}}Ur(vi,Gr);var pi={2:"touch",3:"pen",4:"mouse"};vi.prototype.h=function(){vi.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var mi="closure_listenable_"+(1e6*Math.random()|0),yi=0;function gi(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++yi,this.ba=this.ea=!1}function ki(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function bi(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function wi(e){var t={};for(var n in e)t[n]=e[n];return t}var xi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _i(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<xi.length;a++)n=xi[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function Ei(e){this.src=e,this.g={},this.h=0}function Si(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=jr(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(ki(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function Ti(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}Ei.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=Ti(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new gi(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var Ii="closure_lm_"+(1e6*Math.random()|0),Ci={};function Di(e,t,n,r,i){if(r&&r.once)return Ni(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Di(e,t[a],n,r,i);return null}return n=Vi(n),e&&e[mi]?e.N(t,n,Pr(r)?!!r.capture:!!r,i):Ai(e,t,n,!1,r,i)}function Ai(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Pr(i)?!!i.capture:!!i,u=Mi(e);if(u||(e[Ii]=u=new Ei(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Li;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)Kr||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Oi(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Ni(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ni(e,t[a],n,r,i);return null}return n=Vi(n),e&&e[mi]?e.O(t,n,Pr(r)?!!r.capture:!!r,i):Ai(e,t,n,!0,r,i)}function Pi(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Pi(e,t[a],n,r,i);else r=Pr(r)?!!r.capture:!!r,n=Vi(n),e&&e[mi]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=Ti(a=e.g[t],n,r,i))&&(ki(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Mi(e))&&(t=e.g[t.toString()],e=-1,t&&(e=Ti(t,n,r,i)),(n=-1<e?t[e]:null)&&Ri(n))}function Ri(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[mi])Si(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Oi(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Mi(t))?(Si(n,e),0==n.h&&(n.src=null,t[Ii]=null)):ki(e)}}}function Oi(e){return e in Ci?Ci[e]:Ci[e]="on"+e}function Li(e,t){if(e.ba)e=!0;else{t=new vi(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&Ri(e),e=n.call(r,t)}return e}function Mi(e){return(e=e[Ii])instanceof Ei?e:null}var Fi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Vi(e){return"function"===typeof e?e:(e[Fi]||(e[Fi]=function(t){return e.handleEvent(t)}),e[Fi])}function Ui(){Br.call(this),this.i=new Ei(this),this.P=this,this.I=null}function Bi(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Gr(t,e);else if(t instanceof Gr)t.target=t.target||e;else{var i=t;_i(t=new Gr(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=ji(o,r,!0,t)&&i}if(i=ji(o=t.g=e,r,!0,t)&&i,i=ji(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=ji(o=t.g=n[a],r,!1,t)&&i}function ji(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&Si(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Ur(Ui,Br),Ui.prototype[mi]=!0,Ui.prototype.removeEventListener=function(e,t,n,r){Pi(this,e,t,n,r)},Ui.prototype.M=function(){if(Ui.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)ki(n[r]);delete t.g[e],t.h--}}this.I=null},Ui.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Ui.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var zi=Dr.JSON.stringify;function qi(){var e=$i,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Gi,Ki=function(){function e(){y(this,e),this.h=this.g=null}return k(e,[{key:"add",value:function(e,t){var n=Hi.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),Hi=new(function(){function e(t,n){y(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return k(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new Wi}),(function(e){return e.reset()})),Wi=function(){function e(){y(this,e),this.next=this.g=this.h=null}return k(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Qi(e){Dr.setTimeout((function(){throw e}),0)}function Yi(e,t){Gi||function(){var e=Dr.Promise.resolve(void 0);Gi=function(){e.then(Ji)}}(),Xi||(Gi(),Xi=!0),$i.add(e,t)}var Xi=!1,$i=new Ki;function Ji(){for(var e;e=qi();){try{e.h.call(e.g)}catch(n){Qi(n)}var t=Hi;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Xi=!1}function Zi(e,t){Ui.call(this),this.h=e||1,this.g=t||Dr,this.j=Fr(this.lb,this),this.l=Date.now()}function ea(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function ta(e,t,n){if("function"===typeof e)n&&(e=Fr(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Fr(e.handleEvent,e)}return 2147483647<Number(t)?-1:Dr.setTimeout(e,t||0)}function na(e){e.g=ta((function(){e.g=null,e.i&&(e.i=!1,na(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Ur(Zi,Ui),(Sr=Zi.prototype).ca=!1,Sr.R=null,Sr.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Bi(this,"tick"),this.ca&&(ea(this),this.start()))}},Sr.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Sr.M=function(){Zi.X.M.call(this),ea(this),delete this.g};var ra=function(e){_(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return k(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:na(this)}},{key:"M",value:function(){Er(E(n.prototype),"M",this).call(this),this.g&&(Dr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Br);function ia(e){Br.call(this),this.h=e,this.g={}}Ur(ia,Br);var aa=[];function oa(e,t,n,r){Array.isArray(n)||(n&&(aa[0]=n.toString()),n=aa);for(var i=0;i<n.length;i++){var a=Di(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function ua(e){bi(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Ri(e)}),e),e.g={}}function sa(){this.g=!0}function ca(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return zi(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}ia.prototype.M=function(){ia.X.M.call(this),ua(this)},ia.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},sa.prototype.Aa=function(){this.g=!1},sa.prototype.info=function(){};var la={},fa=null;function ha(){return fa=fa||new Ui}function da(e){Gr.call(this,la.Pa,e)}function va(e){var t=ha();Bi(t,new da(t))}function pa(e,t){Gr.call(this,la.STAT_EVENT,e),this.stat=t}function ma(e){var t=ha();Bi(t,new pa(t,e))}function ya(e,t){Gr.call(this,la.Qa,e),this.size=t}function ga(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Dr.setTimeout((function(){e()}),t)}la.Pa="serverreachability",Ur(da,Gr),la.STAT_EVENT="statevent",Ur(pa,Gr),la.Qa="timingevent",Ur(ya,Gr);var ka={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},ba={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function wa(){}function xa(e){return e.h||(e.h=e.i())}function _a(){}wa.prototype.h=null;var Ea,Sa={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function Ta(){Gr.call(this,"d")}function Ia(){Gr.call(this,"c")}function Ca(){}function Da(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new ia(this),this.O=Na,e=ni?125:void 0,this.T=new Zi(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Aa}function Aa(){this.i=null,this.g="",this.h=!1}Ur(Ta,Gr),Ur(Ia,Gr),Ur(Ca,wa),Ca.prototype.g=function(){return new XMLHttpRequest},Ca.prototype.i=function(){return{}},Ea=new Ca;var Na=45e3,Pa={},Ra={};function Oa(e,t,n){e.K=1,e.v=Za(Qa(t)),e.s=n,e.P=!0,La(e,null)}function La(e,t){e.F=Date.now(),Ua(e),e.A=Qa(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),ho(n.i,"t",r),e.C=0,n=e.l.H,e.h=new Aa,e.g=vu(e.l,n?t:null,!e.s),0<e.N&&(e.L=new ra(Fr(e.La,e,e.g),e.N)),oa(e.S,e.g,"readystatechange",e.ib),t=e.H?wi(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),va(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function Ma(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function Fa(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Va(e,n))==Ra){4==t&&(e.o=4,ma(14),i=!1),ca(e.j,e.m,null,"[Incomplete Response]");break}if(r==Pa){e.o=4,ma(15),ca(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}ca(e.j,e.m,r,null),Ga(e,r)}Ma(e)&&r!=Ra&&r!=Pa&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,ma(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),ou(t),t.K=!0,ma(11))):(ca(e.j,e.m,n,"[Invalid Chunked Response]"),qa(e),za(e))}function Va(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ra:(n=Number(t.substring(n,r)),isNaN(n)?Pa:(r+=1)+n>t.length?Ra:(t=t.substr(r,n),e.C=r+n,t))}function Ua(e){e.V=Date.now()+e.O,Ba(e,e.O)}function Ba(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ga(Fr(e.gb,e),t)}function ja(e){e.B&&(Dr.clearTimeout(e.B),e.B=null)}function za(e){0==e.l.G||e.I||cu(e.l,e)}function qa(e){ja(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,ea(e.T),ua(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Ga(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||wo(n.h,e)))if(!e.J&&wo(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;su(n),Jo(n)}au(n),ma(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=ga(Fr(n.cb,n),6e3));if(1>=bo(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else fu(n,11)}else if((e.J||n.g==e)&&su(n),!Hr(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(xo(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,Ja(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=du(r,r.H?r.ka:null,r.V),d.J){_o(r.h,d);var v=d,p=r.J;p&&v.setTimeout(p),v.B&&(ja(v),Ua(v)),r.g=d}else iu(r);0<n.i.length&&eu(n)}else"stop"!=a[0]&&"close"!=a[0]||fu(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?fu(n,7):$o(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}va()}catch(a){}}function Ka(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Nr(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Nr(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Nr(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(Sr=Da.prototype).setTimeout=function(e){this.O=e},Sr.ib=function(e){e=e.target;var t=this.L;t&&3==Ko(e)?t.l():this.La(e)},Sr.La=function(e){try{if(e==this.g)e:{var t=Ko(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||ni||this.g&&(this.h.h||this.g.fa()||Ho(this.g)))){this.I||4!=t||7==n||va(),ja(this);var r=this.g.aa();this.Y=r;t:if(Ma(this)){var i=Ho(this.g);e="";var a=i.length,o=4==Ko(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){qa(this),za(this);var u="";break t}this.h.i=new Dr.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Hr(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,ma(12),qa(this),za(this);break e}ca(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ga(this,r)}this.P?(Fa(this,t,u),ni&&this.i&&3==t&&(oa(this.S,this.T,"tick",this.hb),this.T.start())):(ca(this.j,this.m,u,null),Ga(this,u)),4==t&&qa(this),this.i&&!this.I&&(4==t?cu(this.l,this):(this.i=!1,Ua(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,ma(12)):(this.o=0,ma(13)),qa(this),za(this)}}}catch(t){}},Sr.hb=function(){if(this.g){var e=Ko(this.g),t=this.g.fa();this.C<t.length&&(ja(this),Fa(this,e,t),this.i&&4!=e&&Ua(this))}},Sr.cancel=function(){this.I=!0,qa(this)},Sr.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(va(),ma(17)),qa(this),this.o=2,za(this)):Ba(this,this.V-e)};var Ha=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Wa(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof Wa){this.h=void 0!==t?t:e.h,Ya(this,e.j),this.s=e.s,this.g=e.g,Xa(this,e.m),this.l=e.l,t=e.i;var n=new so;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),$a(this,n),this.o=e.o}else e&&(n=String(e).match(Ha))?(this.h=!!t,Ya(this,n[1]||"",!0),this.s=eo(n[2]||""),this.g=eo(n[3]||"",!0),Xa(this,n[4]),this.l=eo(n[5]||"",!0),$a(this,n[6]||"",!0),this.o=eo(n[7]||"")):(this.h=!!t,this.i=new so(null,this.h))}function Qa(e){return new Wa(e)}function Ya(e,t,n){e.j=n?eo(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Xa(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function $a(e,t,n){t instanceof so?(e.i=t,function(e,t){t&&!e.j&&(co(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(lo(this,t),ho(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=to(t,oo)),e.i=new so(t,e.h))}function Ja(e,t,n){e.i.set(t,n)}function Za(e){return Ja(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function eo(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function to(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,no),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function no(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}Wa.prototype.toString=function(){var e=[],t=this.j;t&&e.push(to(t,ro,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(to(t,ro,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(to(n,"/"==n.charAt(0)?ao:io,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",to(n,uo)),e.join("")};var ro=/[#\/\?@]/g,io=/[#\?:]/g,ao=/[#\?]/g,oo=/[#\?@]/g,uo=/#/g;function so(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function co(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function lo(e,t){co(e),t=vo(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function fo(e,t){return co(e),t=vo(e,t),e.g.has(t)}function ho(e,t,n){lo(e,t),0<n.length&&(e.i=null,e.g.set(vo(e,t),zr(n)),e.h+=n.length)}function vo(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(Sr=so.prototype).add=function(e,t){co(this),this.i=null,e=vo(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},Sr.forEach=function(e,t){co(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},Sr.oa=function(){co(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},Sr.W=function(e){co(this);var t=[];if("string"===typeof e)fo(this,e)&&(t=t.concat(this.g.get(vo(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},Sr.set=function(e,t){return co(this),this.i=null,fo(this,e=vo(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},Sr.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},Sr.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var po=k((function e(t,n){y(this,e),this.h=t,this.g=n}));function mo(e){this.l=e||go,Dr.PerformanceNavigationTiming?e=0<(e=Dr.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Dr.g&&Dr.g.Ga&&Dr.g.Ga()&&Dr.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var yo,go=10;function ko(e){return!!e.h||!!e.g&&e.g.size>=e.j}function bo(e){return e.h?1:e.g?e.g.size:0}function wo(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function xo(e,t){e.g?e.g.add(t):e.h=t}function _o(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function Eo(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=b(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return zr(e.i)}function So(){}function To(){this.g=new So}function Io(e,t,n){var r=n||"";try{Ka(e,(function(e,n){var i=e;Pr(e)&&(i=zi(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Co(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function Do(e){this.l=e.ac||null,this.j=e.jb||!1}function Ao(e,t){Ui.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=No,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}mo.prototype.cancel=function(){if(this.i=Eo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=b(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},So.prototype.stringify=function(e){return Dr.JSON.stringify(e,void 0)},So.prototype.parse=function(e){return Dr.JSON.parse(e,void 0)},Ur(Do,wa),Do.prototype.g=function(){return new Ao(this.l,this.j)},Do.prototype.i=(yo={},function(){return yo}),Ur(Ao,Ui);var No=0;function Po(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function Ro(e){e.readyState=4,e.l=null,e.j=null,e.A=null,Oo(e)}function Oo(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(Sr=Ao.prototype).open=function(e,t){if(this.readyState!=No)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,Oo(this)},Sr.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Dr).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},Sr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ro(this)),this.readyState=No},Sr.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Oo(this)),this.g&&(this.readyState=3,Oo(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof Dr.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Po(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},Sr.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ro(this):Oo(this),3==this.readyState&&Po(this)}},Sr.Va=function(e){this.g&&(this.response=this.responseText=e,Ro(this))},Sr.Ua=function(e){this.g&&(this.response=e,Ro(this))},Sr.ga=function(){this.g&&Ro(this)},Sr.setRequestHeader=function(e,t){this.v.append(e,t)},Sr.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},Sr.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Ao.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Lo=Dr.JSON.parse;function Mo(e){Ui.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Fo,this.K=this.L=!1}Ur(Mo,Ui);var Fo="",Vo=/^https?$/i,Uo=["POST","PUT"];function Bo(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,jo(e),qo(e)}function jo(e){e.D||(e.D=!0,Bi(e,"complete"),Bi(e,"error"))}function zo(e){if(e.h&&"undefined"!=typeof Cr&&(!e.C[1]||4!=Ko(e)||2!=e.aa()))if(e.v&&4==Ko(e))ta(e.Ha,0,e);else if(Bi(e,"readystatechange"),4==Ko(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(Ha)[1]||null;if(!a&&Dr.self&&Dr.self.location){var o=Dr.self.location.protocol;a=o.substr(0,o.length-1)}i=!Vo.test(a?a.toLowerCase():"")}t=i}if(t)Bi(e,"complete"),Bi(e,"success");else{e.m=6;try{var u=2<Ko(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.aa()+"]",jo(e)}}finally{qo(e)}}}function qo(e,t){if(e.g){Go(e);var n=e.g,r=e.C[0]?Ar:null;e.g=null,e.C=null,t||Bi(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Go(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Dr.clearTimeout(e.A),e.A=null)}function Ko(e){return e.g?e.g.readyState:0}function Ho(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Fo:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Nu){return null}}function Wo(e){var t="";return bi(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Qo(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Wo(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Ja(e,t,n))}function Yo(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Xo(e){this.Ca=0,this.i=[],this.j=new sa,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Yo("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Yo("baseRetryDelayMs",5e3,e),this.bb=Yo("retryDelaySeedMs",1e4,e),this.$a=Yo("forwardChannelMaxRetries",2,e),this.ta=Yo("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new mo(e&&e.concurrentRequestLimit),this.Fa=new To,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function $o(e){if(Zo(e),3==e.G){var t=e.U++,n=Qa(e.F);Ja(n,"SID",e.I),Ja(n,"RID",t),Ja(n,"TYPE","terminate"),nu(e,n),(t=new Da(e,e.j,t,void 0)).K=2,t.v=Za(Qa(n)),n=!1,Dr.navigator&&Dr.navigator.sendBeacon&&(n=Dr.navigator.sendBeacon(t.v.toString(),"")),!n&&Dr.Image&&((new Image).src=t.v,n=!0),n||(t.g=vu(t.l,null),t.g.da(t.v)),t.F=Date.now(),Ua(t)}hu(e)}function Jo(e){e.g&&(ou(e),e.g.cancel(),e.g=null)}function Zo(e){Jo(e),e.u&&(Dr.clearTimeout(e.u),e.u=null),su(e),e.h.cancel(),e.m&&("number"===typeof e.m&&Dr.clearTimeout(e.m),e.m=null)}function eu(e){ko(e.h)||e.m||(e.m=!0,Yi(e.Ja,e),e.C=0)}function tu(e,t){var n;n=t?t.m:e.U++;var r=Qa(e.F);Ja(r,"SID",e.I),Ja(r,"RID",n),Ja(r,"AID",e.T),nu(e,r),e.o&&e.s&&Qo(r,e.o,e.s),n=new Da(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=ru(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),xo(e.h,n),Oa(n,r,t)}function nu(e,t){e.ia&&bi(e.ia,(function(e,n){Ja(t,n,e)})),e.l&&Ka({},(function(e,n){Ja(t,n,e)}))}function ru(e,t,n){n=Math.min(e.i.length,n);var r=e.l?Fr(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{Io(l,o,"req"+c+"_")}catch(ju){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function iu(e){e.g||e.u||(e.Z=1,Yi(e.Ia,e),e.A=0)}function au(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=ga(Fr(e.Ia,e),lu(e,e.A)),e.A++,!0)}function ou(e){null!=e.B&&(Dr.clearTimeout(e.B),e.B=null)}function uu(e){e.g=new Da(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=Qa(e.sa);Ja(t,"RID","rpc"),Ja(t,"SID",e.I),Ja(t,"CI",e.L?"0":"1"),Ja(t,"AID",e.T),Ja(t,"TYPE","xmlhttp"),nu(e,t),e.o&&e.s&&Qo(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=Za(Qa(t)),n.s=null,n.P=!0,La(n,e)}function su(e){null!=e.v&&(Dr.clearTimeout(e.v),e.v=null)}function cu(e,t){var n=null;if(e.g==t){su(e),ou(e),e.g=null;var r=2}else{if(!wo(e.h,t))return;n=t.D,_o(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Bi(r=ha(),new ya(r,n)),eu(e)}else iu(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(bo(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=ga(Fr(e.Ja,e,t),lu(e,e.C)),e.C++,!0))}(e,t)||2==r&&au(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:fu(e,5);break;case 4:fu(e,10);break;case 3:fu(e,6);break;default:fu(e,2)}}function lu(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function fu(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=Fr(e.kb,e);n||(n=new Wa("//www.google.com/images/cleardot.gif"),Dr.location&&"http"==Dr.location.protocol||Ya(n,"https"),Za(n)),function(e,t){var n=new sa;if(Dr.Image){var r=new Image;r.onload=Vr(Co,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Vr(Co,n,r,"TestLoadImage: error",!1,t),r.onabort=Vr(Co,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Vr(Co,n,r,"TestLoadImage: timeout",!1,t),Dr.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else ma(2);e.G=0,e.l&&e.l.va(t),hu(e),Zo(e)}function hu(e){if(e.G=0,e.la=[],e.l){var t=Eo(e.h);0==t.length&&0==e.i.length||(qr(e.la,t),qr(e.la,e.i),e.h.i.length=0,zr(e.i),e.i.length=0),e.l.ua()}}function du(e,t,n){var r=n instanceof Wa?Qa(n):new Wa(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),Xa(r,r.m);else{var i=Dr.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new Wa(null,void 0);r&&Ya(a,r),t&&(a.g=t),i&&Xa(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&Ja(r,n,t),Ja(r,"VER",e.ma),nu(e,r),r}function vu(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new Mo(new Do({jb:!0})):new Mo(e.ra)).Ka(e.H),t}function pu(){}function mu(){if(ei&&!(10<=Number(di)))throw Error("Environmental error: no available transport.")}function yu(e,t){Ui.call(this),this.g=new Xo(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!Hr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!Hr(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bu(this)}function gu(e){Ta.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function ku(){Ia.call(this),this.status=1}function bu(e){this.g=e}(Sr=Mo.prototype).Ka=function(e){this.L=e},Sr.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():Ea.g(),this.C=this.u?xa(this.u):xa(Ea),this.g.onreadystatechange=Fr(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void Bo(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=b(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(v){o.e(v)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Dr.FormData&&e instanceof Dr.FormData,!(0<=jr(Uo,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var c,l=b(n);try{for(l.s();!(c=l.n()).done;){var f=s(c.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(v){l.e(v)}finally{l.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Go(this),0<this.B&&((this.K=function(e){return ei&&fi()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Fr(this.qa,this)):this.A=ta(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Bo(this,u)}},Sr.qa=function(){"undefined"!=typeof Cr&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Bi(this,"timeout"),this.abort(8))},Sr.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Bi(this,"complete"),Bi(this,"abort"),qo(this))},Sr.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),qo(this,!0)),Mo.X.M.call(this)},Sr.Ha=function(){this.s||(this.F||this.v||this.l?zo(this):this.fb())},Sr.fb=function(){zo(this)},Sr.aa=function(){try{return 2<Ko(this)?this.g.status:-1}catch(yo){return-1}},Sr.fa=function(){try{return this.g?this.g.responseText:""}catch(yo){return""}},Sr.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Lo(t)}},Sr.Ea=function(){return this.m},Sr.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(Sr=Xo.prototype).ma=8,Sr.G=1,Sr.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new Da(this,this.j,e,void 0),n=this.s;if(this.S&&(n?_i(n=wi(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=ru(this,t,r),Ja(i=Qa(this.F),"RID",e),Ja(i,"CVER",22),this.D&&Ja(i,"X-HTTP-Session-Id",this.D),nu(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(Wo(n)))+"&"+r:this.o&&Qo(i,this.o,n)),xo(this.h,t),this.Ya&&Ja(i,"TYPE","init"),this.O?(Ja(i,"$req",r),Ja(i,"SID","null"),t.Z=!0,Oa(t,i,null)):Oa(t,i,r),this.G=2}}else 3==this.G&&(e?tu(this,e):0==this.i.length||ko(this.h)||tu(this))},Sr.Ia=function(){if(this.u=null,uu(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=ga(Fr(this.eb,this),e)}},Sr.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,ma(10),Jo(this),uu(this))},Sr.cb=function(){null!=this.v&&(this.v=null,Jo(this),au(this),ma(19))},Sr.kb=function(e){e?(this.j.info("Successfully pinged google.com"),ma(2)):(this.j.info("Failed to ping google.com"),ma(1))},(Sr=pu.prototype).xa=function(){},Sr.wa=function(){},Sr.va=function(){},Sr.ua=function(){},Sr.Ra=function(){},mu.prototype.g=function(e,t){return new yu(e,t)},Ur(yu,Ui),yu.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;ma(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=du(e,null,e.V),eu(e)},yu.prototype.close=function(){$o(this.g)},yu.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=zi(e),e=n);t.i.push(new po(t.ab++,e)),3==t.G&&eu(t)},yu.prototype.M=function(){this.g.l=null,delete this.j,$o(this.g),delete this.g,yu.X.M.call(this)},Ur(gu,Ta),Ur(ku,Ia),Ur(bu,pu),bu.prototype.xa=function(){Bi(this.g,"a")},bu.prototype.wa=function(e){Bi(this.g,new gu(e))},bu.prototype.va=function(e){Bi(this.g,new ku)},bu.prototype.ua=function(){Bi(this.g,"b")},mu.prototype.createWebChannel=mu.prototype.g,yu.prototype.send=yu.prototype.u,yu.prototype.open=yu.prototype.m,yu.prototype.close=yu.prototype.close,ka.NO_ERROR=0,ka.TIMEOUT=8,ka.HTTP_ERROR=6,ba.COMPLETE="complete",_a.EventType=Sa,Sa.OPEN="a",Sa.CLOSE="b",Sa.ERROR="c",Sa.MESSAGE="d",Ui.prototype.listen=Ui.prototype.N,Mo.prototype.listenOnce=Mo.prototype.O,Mo.prototype.getLastError=Mo.prototype.Oa,Mo.prototype.getLastErrorCode=Mo.prototype.Ea,Mo.prototype.getStatus=Mo.prototype.aa,Mo.prototype.getResponseJson=Mo.prototype.Sa,Mo.prototype.getResponseText=Mo.prototype.fa,Mo.prototype.send=Mo.prototype.da,Mo.prototype.setWithCredentials=Mo.prototype.Ka;var wu=Ir.createWebChannelTransport=function(){return new mu},xu=Ir.getStatEventTarget=function(){return ha()},_u=Ir.ErrorCode=ka,Eu=Ir.EventType=ba,Su=Ir.Event=la,Tu=Ir.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},Iu=Ir.FetchXmlHttpFactory=Do,Cu=Ir.WebChannel=_a,Du=Ir.XhrIo=Mo,Au="@firebase/firestore",Nu=function(){function e(t){y(this,e),this.uid=t}return k(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Nu.UNAUTHENTICATED=new Nu(null),Nu.GOOGLE_CREDENTIALS=new Nu("google-credentials-uid"),Nu.FIRST_PARTY=new Nu("first-party-uid"),Nu.MOCK_USER=new Nu("mock-user");var Pu="9.20.0",Ru=new de("@firebase/firestore");function Ou(){return Ru.logLevel}function Lu(e){if(Ru.logLevel<=oe.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Vu);Ru.debug.apply(Ru,["Firestore (".concat(Pu,"): ").concat(e)].concat(te(i)))}}function Mu(e){if(Ru.logLevel<=oe.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Vu);Ru.error.apply(Ru,["Firestore (".concat(Pu,"): ").concat(e)].concat(te(i)))}}function Fu(e){if(Ru.logLevel<=oe.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Vu);Ru.warn.apply(Ru,["Firestore (".concat(Pu,"): ").concat(e)].concat(te(i)))}}function Vu(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Uu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Pu,") INTERNAL ASSERTION FAILED: ")+e;throw Mu(t),new Error(t)}function Bu(e,t){e||Uu()}function ju(e,t){return e}var zu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},qu=function(e){_(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return k(n)}(G),Gu=k((function e(){var t=this;y(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),Ku=k((function e(t,n){y(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),Hu=function(){function e(){y(this,e)}return k(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Nu.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),Wu=function(){function e(t){y(this,e),this.token=t,this.changeListener=null}return k(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Qu=function(){function e(t){y(this,e),this.t=t,this.currentUser=Nu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return k(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Gu;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Gu,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(v(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Lu("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Lu("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Gu)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Lu("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Bu("string"==typeof n.accessToken),new Ku(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Bu(null===e||"string"==typeof e),new Nu(e)}}]),e}(),Yu=function(){function e(t,n,r){y(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=Nu.FIRST_PARTY,this.g=new Map}return k(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),Xu=function(){function e(t,n,r){y(this,e),this.h=t,this.l=n,this.m=r}return k(e,[{key:"getToken",value:function(){return Promise.resolve(new Yu(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Nu.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),$u=k((function e(t){y(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Ju=function(){function e(t){y(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return k(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Lu("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,Lu("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Lu("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):Lu("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Bu("string"==typeof t.token),e.T=t.token,new $u(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Zu(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var es=function(){function e(){y(this,e)}return k(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=Zu(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function ts(e,t){return e<t?-1:e>t?1:0}function ns(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function rs(e){return e+"\0"}var is=function(){function e(t,n){if(y(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new qu(zu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new qu(zu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new qu(zu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new qu(zu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return k(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?ts(this.nanoseconds,e.nanoseconds):ts(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),as=function(){function e(t){y(this,e),this.timestamp=t}return k(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new is(0,0))}},{key:"max",value:function(){return new e(new is(253402300799,999999999))}}]),e}(),os=function(){function e(t,n,r){y(this,e),void 0===n?n=0:n>t.length&&Uu(),void 0===r?r=t.length-n:r>t.length-n&&Uu(),this.segments=t,this.offset=n,this.len=r}return k(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),us=function(e){_(n,e);var t=T(n);function n(){return y(this,n),t.apply(this,arguments)}return k(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new qu(zu.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,te(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(os),ss=/^[_a-zA-Z][_a-zA-Z0-9]*$/,cs=function(e){_(n,e);var t=T(n);function n(){return y(this,n),t.apply(this,arguments)}return k(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return ss.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new qu(zu.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new qu(zu.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new qu(zu.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new qu(zu.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(os),ls=function(){function e(t){y(this,e),this.path=t}return k(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===us.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(us.fromString(t))}},{key:"fromName",value:function(t){return new e(us.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(us.emptyPath())}},{key:"comparator",value:function(e,t){return us.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new us(t.slice()))}}]),e}(),fs=k((function e(t,n,r,i){y(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function hs(e){return e.fields.find((function(e){return 2===e.kind}))}function ds(e){return e.fields.filter((function(e){return 2!==e.kind}))}fs.UNKNOWN_ID=-1;var vs=k((function e(t,n){y(this,e),this.fieldPath=t,this.kind=n}));var ps=function(){function e(t,n){y(this,e),this.sequenceNumber=t,this.offset=n}return k(e,null,[{key:"empty",value:function(){return new e(0,gs.min())}}]),e}();function ms(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=as.fromTimestamp(1e9===r?new is(n+1,0):new is(n,r));return new gs(i,ls.empty(),t)}function ys(e){return new gs(e.readTime,e.key,-1)}var gs=function(){function e(t,n,r){y(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return k(e,null,[{key:"min",value:function(){return new e(as.min(),ls.empty(),-1)}},{key:"max",value:function(){return new e(as.max(),ls.empty(),-1)}}]),e}();function ks(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=ls.comparator(e.documentKey,t.documentKey))?n:ts(e.largestBatchId,t.largestBatchId)}var bs="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ws=function(){function e(){y(this,e),this.onCommittedListeners=[]}return k(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function xs(e){return _s.apply(this,arguments)}function _s(){return _s=v(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===zu.FAILED_PRECONDITION&&t.message===bs){e.next=2;break}throw t;case 2:Lu("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),_s.apply(this,arguments)}var Es=function(){function e(t){var n=this;y(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return k(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Uu(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=b(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),Ss=function(){function e(t,n){var r=this;y(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.R=new Gu,this.transaction.oncomplete=function(){r.R.resolve()},this.transaction.onabort=function(){n.error?r.R.reject(new Cs(t,n.error)):r.R.resolve()},this.transaction.onerror=function(e){var n=Rs(e.target.error);r.R.reject(new Cs(t,n))}}return k(e,[{key:"v",get:function(){return this.R.promise}},{key:"abort",value:function(e){e&&this.R.reject(e),this.aborted||(Lu("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new As(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Cs(n,t)}}}]),e}(),Ts=function(){function e(t,n,r){y(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(j())&&Mu("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return k(e,[{key:"$",value:function(){var e=v(h().mark((function e(t){var n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Lu("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Cs(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new qu(zu.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new qu(zu.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Cs(t,n))},i.onupgradeneeded=function(e){Lu("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.M(t,i.transaction,e.oldVersion,n.version).next((function(){Lu("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=v(h().mark((function e(t,n,r,i){var a,o,u,s,c=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=h().mark((function e(){var n,u,s,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.$(t);case 4:return c.db=e.sent,n=Ss.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),Es.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.v;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,l="FirebaseError"!==s.name&&o<3,Lu("SimpleDb","Transaction failed with error:",s.message,"Retrying:",l),c.close(),l){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Lu("SimpleDb","Removing database:",e),Ns(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!q())return!1;if(e.C())return!0;var t=j(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/blender-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),Is=function(){function e(t){y(this,e),this.L=t,this.q=!1,this.U=null}return k(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return Ns(this.L.delete())}}]),e}(),Cs=function(e){_(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this,zu.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return k(n)}(qu);function Ds(e){return"IndexedDbTransactionError"===e.name}var As=function(){function e(t){y(this,e),this.store=t}return k(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Lu("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Lu("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ns(n)}},{key:"add",value:function(e){return Lu("SimpleDb","ADD",this.store.name,e,e),Ns(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Ns(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Lu("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Lu("SimpleDb","DELETE",this.store.name,e),Ns(this.store.delete(e))}},{key:"count",value:function(){return Lu("SimpleDb","COUNT",this.store.name),Ns(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new Es((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new Es((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){Lu("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"X",value:function(e){var t=this.cursor({});return new Es((function(n,r){t.onerror=function(e){var t=Rs(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new Es((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new Is(i),o=t(i.primaryKey,i.value,a);if(o instanceof Es){var u=o.catch((function(e){return a.done(),Es.reject(e)}));n.push(u)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return Es.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Ns(e){return new Es((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Rs(e.target.error);n(t)}}))}var Ps=!1;function Rs(e){var t=Ts.S(j());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new qu("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Ps||(Ps=!0,setTimeout((function(){throw r}),0)),r}}return e}var Os=function(){function e(t,n){y(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return k(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;Lu("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,v(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Lu,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Ds(e.t4)){e.next=17;break}Lu("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,xs(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),Ls=function(){function e(t,n){y(this,e),this.localStore=t,this.persistence=n}return k(e,[{key:"nt",value:function(){var e=v(h().mark((function e(){var t,n=this,r=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return Es.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Lu("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return Lu("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=ys(t);ks(r,n)>0&&(n=r)})),new gs(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Ms=function(){function e(t,n){var r=this;y(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return k(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function Fs(e){return null==e}function Vs(e){return 0===e&&1/e==-1/0}function Us(e){return"number"==typeof e&&Number.isInteger(e)&&!Vs(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Bs(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=zs(t)),t=js(e.get(n),t);return zs(t)}function js(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function zs(e){return e+"\x01\x01"}function qs(e){var t=e.length;if(Bu(t>=2),2===t)return Bu("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),us.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Uu(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Uu()}a=o+2}return new us(r)}Ms.ct=-1;var Gs=["userId","batchId"];function Ks(e,t){return[e,Bs(t)]}function Hs(e,t,n){return[e,Bs(t),n]}var Ws={},Qs=["prefixPath","collectionGroup","readTime","documentId"],Ys=["prefixPath","collectionGroup","documentId"],Xs=["collectionGroup","readTime","prefixPath","documentId"],$s=["canonicalId","targetId"],Js=["targetId","path"],Zs=["path","targetId"],ec=["collectionId","parent"],tc=["indexId","uid"],nc=["uid","sequenceNumber"],rc=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ic=["indexId","uid","orderedDocumentKey"],ac=["userId","collectionPath","documentId"],oc=["userId","collectionPath","largestBatchId"],uc=["userId","collectionGroup","largestBatchId"],sc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),cc=[].concat(te(sc),["documentOverlays"]),lc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],fc=lc,hc=[].concat(fc,["indexConfiguration","indexState","indexEntries"]),dc=function(e){_(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).at=e,i.currentSequenceNumber=r,i}return k(n)}(ws);function vc(e,t){var n=ju(e);return Ts.O(n.at,t)}function pc(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function mc(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function yc(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var gc=function(){function e(t,n){y(this,e),this.comparator=t,this.root=n||bc.EMPTY}return k(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,bc.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,bc.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new kc(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new kc(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new kc(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new kc(this.root,e,this.comparator,!0)}}]),e}(),kc=function(){function e(t,n,r,i){y(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return k(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),bc=function(){function e(t,n,r,i,a){y(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return k(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Uu();if(this.right.isRed())throw Uu();var e=this.left.check();if(e!==this.right.check())throw Uu();return e+(this.isRed()?0:1)}}]),e}();bc.EMPTY=null,bc.RED=!0,bc.BLACK=!1,bc.EMPTY=new(function(){function e(){y(this,e),this.size=0}return k(e,[{key:"key",get:function(){throw Uu()}},{key:"value",get:function(){throw Uu()}},{key:"color",get:function(){throw Uu()}},{key:"left",get:function(){throw Uu()}},{key:"right",get:function(){throw Uu()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new bc(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var wc=function(){function e(t){y(this,e),this.comparator=t,this.data=new gc(this.comparator)}return k(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new xc(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new xc(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),xc=function(){function e(t){y(this,e),this.iter=t}return k(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function _c(e){return e.hasNext()?e.getNext():void 0}var Ec=function(){function e(t){y(this,e),this.fields=t,t.sort(cs.comparator)}return k(e,[{key:"unionWith",value:function(t){var n,r=new wc(cs.comparator),i=b(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=b(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=b(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return ns(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),Sc=function(e){_(n,e);var t=T(n);function n(){var e;return y(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return k(n)}(C(Error));var Tc=function(e){function t(e){y(this,t),this.binaryString=e}return k(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return ts(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new Sc("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();Tc.EMPTY_BYTE_STRING=new Tc("");var Ic=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Cc(e){if(Bu(!!e),"string"==typeof e){var t=0,n=Ic.exec(e);if(Bu(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Dc(e.seconds),nanos:Dc(e.nanos)}}function Dc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ac(e){return"string"==typeof e?Tc.fromBase64String(e):Tc.fromUint8Array(e)}function Nc(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Pc(e){var t=e.mapValue.fields.__previous_value__;return Nc(t)?Pc(t):t}function Rc(e){var t=Cc(e.mapValue.fields.__local_write_time__.timestampValue);return new is(t.seconds,t.nanos)}var Oc=k((function e(t,n,r,i,a,o,u,s){y(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Lc=function(){function e(t,n){y(this,e),this.projectId=t,this.database=n||"(default)"}return k(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),Mc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Fc={nullValue:"NULL_VALUE"};function Vc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Nc(e)?4:Jc(e)?9007199254740991:10:Uu()}function Uc(e,t){if(e===t)return!0;var n=Vc(e);if(n!==Vc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Rc(e).isEqual(Rc(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Cc(e.timestampValue),r=Cc(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ac(e.bytesValue).isEqual(Ac(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Dc(e.geoPointValue.latitude)===Dc(t.geoPointValue.latitude)&&Dc(e.geoPointValue.longitude)===Dc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Dc(e.integerValue)===Dc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Dc(e.doubleValue),r=Dc(t.doubleValue);return n===r?Vs(n)===Vs(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return ns(e.arrayValue.values||[],t.arrayValue.values||[],Uc);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(pc(n)!==pc(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Uc(n[i],r[i])))return!1;return!0}(e,t);default:return Uu()}}function Bc(e,t){return void 0!==(e.values||[]).find((function(e){return Uc(e,t)}))}function jc(e,t){if(e===t)return 0;var n=Vc(e),r=Vc(t);if(n!==r)return ts(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ts(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Dc(e.integerValue||e.doubleValue),r=Dc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return zc(e.timestampValue,t.timestampValue);case 4:return zc(Rc(e),Rc(t));case 5:return ts(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Ac(e),r=Ac(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=ts(n[i],r[i]);if(0!==a)return a}return ts(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=ts(Dc(e.latitude),Dc(t.latitude));return 0!==n?n:ts(Dc(e.longitude),Dc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=jc(n[i],r[i]);if(a)return a}return ts(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Mc.mapValue&&t===Mc.mapValue)return 0;if(e===Mc.mapValue)return 1;if(t===Mc.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=ts(r[o],a[o]);if(0!==u)return u;var s=jc(n[r[o]],i[a[o]]);if(0!==s)return s}return ts(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Uu()}}function zc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return ts(e,t);var n=Cc(e),r=Cc(t),i=ts(n.seconds,r.seconds);return 0!==i?i:ts(n.nanos,r.nanos)}function qc(e){return Gc(e)}function Gc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Cc(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Ac(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,ls.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=b(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Gc(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=b(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Gc(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Uu();var t,n}function Kc(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Hc(e){return!!e&&"integerValue"in e}function Wc(e){return!!e&&"arrayValue"in e}function Qc(e){return!!e&&"nullValue"in e}function Yc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Xc(e){return!!e&&"mapValue"in e}function $c(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return mc(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=$c(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=$c(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Jc(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Zc(e){return"nullValue"in e?Fc:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Kc(Lc.empty(),ls.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Uu()}function el(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Kc(Lc.empty(),ls.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Mc:Uu()}function tl(e,t){var n=jc(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function nl(e,t){var n=jc(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var rl=function(){function e(t){y(this,e),this.value=t}return k(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Xc(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=$c(t)}},{key:"setAll",value:function(e){var t=this,n=cs.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=$c(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Xc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Uc(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Xc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){mc(t,(function(t,n){return e[t]=n}));var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e($c(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function il(e){var t=[];return mc(e.fields,(function(e,n){var r=new cs([e]);if(Xc(n)){var i=il(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=b(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new Ec(t)}var al=function(){function e(t,n,r,i,a,o,u){y(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return k(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(as.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=rl.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=rl.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=as.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,as.min(),as.min(),as.min(),rl.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,as.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,as.min(),as.min(),rl.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,as.min(),as.min(),rl.empty(),2)}}]),e}(),ol=k((function e(t,n){y(this,e),this.position=t,this.inclusive=n}));function ul(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?ls.comparator(ls.fromName(o.referenceValue),n.key):jc(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function sl(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Uc(e.position[n],t.position[n]))return!1;return!0}var cl=k((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";y(this,e),this.field=t,this.dir=n}));function ll(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var fl=k((function e(){y(this,e)})),hl=function(e){_(n,e);var t=T(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return k(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(jc(t,this.value)):null!==t&&Vc(this.value)===Vc(t)&&this.matchesComparison(jc(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Uu()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new xl(e,t,r):"array-contains"===t?new Tl(e,r):"in"===t?new Il(e,r):"not-in"===t?new Cl(e,r):"array-contains-any"===t?new Dl(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new _l(e,n):new El(e,n)}}]),n}(fl),dl=function(e){_(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).filters=e,i.op=r,i.ht=null,i}return k(n,[{key:"matches",value:function(e){return vl(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=b(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(fl);function vl(e){return"and"===e.op}function pl(e){return"or"===e.op}function ml(e){return yl(e)&&vl(e)}function yl(e){var t,n=b(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof dl)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function gl(e){if(e instanceof hl)return e.field.canonicalString()+e.op.toString()+qc(e.value);if(ml(e))return e.filters.map((function(e){return gl(e)})).join(",");var t=e.filters.map((function(e){return gl(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function kl(e,t){return e instanceof hl?function(e,t){return t instanceof hl&&e.op===t.op&&e.field.isEqual(t.field)&&Uc(e.value,t.value)}(e,t):e instanceof dl?function(e,t){return t instanceof dl&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&kl(n,t.filters[r])}),!0)}(e,t):void Uu()}function bl(e,t){var n=e.filters.concat(t);return dl.create(n,e.op)}function wl(e){return e instanceof hl?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(qc(e.value))}(e):e instanceof dl?function(e){return e.op.toString()+" {"+e.getFilters().map(wl).join(" ,")+"}"}(e):"Filter"}var xl=function(e){_(n,e);var t=T(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this,e,r,i)).key=ls.fromName(i.referenceValue),a}return k(n,[{key:"matches",value:function(e){var t=ls.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(hl),_l=function(e){_(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e,"in",r)).keys=Sl("in",r),i}return k(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(hl),El=function(e){_(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e,"not-in",r)).keys=Sl("not-in",r),i}return k(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(hl);function Sl(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return ls.fromName(e.referenceValue)}))}var Tl=function(e){_(n,e);var t=T(n);function n(e,r){return y(this,n),t.call(this,e,"array-contains",r)}return k(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return Wc(t)&&Bc(t.arrayValue,this.value)}}]),n}(hl),Il=function(e){_(n,e);var t=T(n);function n(e,r){return y(this,n),t.call(this,e,"in",r)}return k(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Bc(this.value.arrayValue,t)}}]),n}(hl),Cl=function(e){_(n,e);var t=T(n);function n(e,r){return y(this,n),t.call(this,e,"not-in",r)}return k(n,[{key:"matches",value:function(e){if(Bc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Bc(this.value.arrayValue,t)}}]),n}(hl),Dl=function(e){_(n,e);var t=T(n);function n(e,r){return y(this,n),t.call(this,e,"array-contains-any",r)}return k(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!Wc(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Bc(t.value.arrayValue,e)}))}}]),n}(hl),Al=k((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;y(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ft=null}));function Nl(e){return new Al(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Pl(e){var t=ju(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return gl(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Fs(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return qc(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return qc(e)})).join(",")),t.ft=n}return t.ft}function Rl(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!ll(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!kl(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!sl(e.startAt,t.startAt)&&sl(e.endAt,t.endAt)}function Ol(e){return ls.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Ll(e,t){return e.filters.filter((function(e){return e instanceof hl&&e.field.isEqual(t)}))}function Ml(e,t,n){var r,i=Fc,a=!0,o=b(Ll(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Fc,c=!0;switch(u.op){case"<":case"<=":s=Zc(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Fc}tl({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];tl({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function Fl(e,t,n){var r,i=Mc,a=!0,o=b(Ll(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Mc,c=!0;switch(u.op){case">=":case">":s=el(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Mc}nl({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];nl({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Vl=k((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;y(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.dt=null,this.wt=null,this.startAt,this.endAt}));function Ul(e,t,n,r,i,a,o,u){return new Vl(e,t,n,r,i,a,o,u)}function Bl(e){return new Vl(e)}function jl(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function zl(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function ql(e){var t,n=b(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function Gl(e){return null!==e.collectionGroup}function Kl(e){var t=ju(e);if(null===t.dt){t.dt=[];var n=ql(t),r=zl(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new cl(n)),t.dt.push(new cl(cs.keyField(),"asc"));else{var i,a=!1,o=b(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.dt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new cl(cs.keyField(),s))}}}return t.dt}function Hl(e){var t=ju(e);if(!t.wt)if("F"===t.limitType)t.wt=Nl(t.path,t.collectionGroup,Kl(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=b(Kl(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new cl(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new ol(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new ol(t.startAt.position,t.startAt.inclusive):null;t.wt=Nl(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.wt}function Wl(e,t){t.getFirstInequalityField(),ql(e);var n=e.filters.concat([t]);return new Vl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Ql(e,t,n){return new Vl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Yl(e,t){return Rl(Hl(e),Hl(t))&&e.limitType===t.limitType}function Xl(e){return"".concat(Pl(Hl(e)),"|lt:").concat(e.limitType)}function $l(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return wl(e)})).join(", "),"]")),Fs(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return qc(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return qc(e)})).join(",")),"Target(".concat(t,")")}(Hl(e)),"; limitType=").concat(e.limitType,")")}function Jl(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ls.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=b(Kl(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=b(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=ul(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Kl(e),t))&&!(e.endAt&&!function(e,t,n){var r=ul(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Kl(e),t))}(e,t)}function Zl(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ef(e){return function(t,n){var r,i=!1,a=b(Kl(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=tf(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function tf(e,t,n){var r=e.field.isKeyField()?ls.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?jc(r,i):Uu()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Uu()}}var nf=function(){function e(t,n){y(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return k(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){mc(this.inner,(function(t,n){var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return yc(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),rf=new gc(ls.comparator);function af(){return rf}var of=new gc(ls.comparator);function uf(){for(var e=of,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function sf(e){var t=of;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function cf(){return ff()}function lf(){return ff()}function ff(){return new nf((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var hf=new gc(ls.comparator),df=new wc(ls.comparator);function vf(){for(var e=df,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var pf=new wc(ts);function mf(){return pf}function yf(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Vs(t)?"-0":t}}function gf(e){return{integerValue:""+e}}function kf(e,t){return Us(t)?gf(t):yf(e,t)}var bf=k((function e(){y(this,e),this._=void 0}));function wf(e,t,n){return e instanceof Ef?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Sf?Tf(e,t):e instanceof If?Cf(e,t):function(e,t){var n=_f(e,t),r=Af(n)+Af(e._t);return Hc(n)&&Hc(e._t)?gf(r):yf(e.serializer,r)}(e,t)}function xf(e,t,n){return e instanceof Sf?Tf(e,t):e instanceof If?Cf(e,t):n}function _f(e,t){return e instanceof Df?Hc(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var Ef=function(e){_(n,e);var t=T(n);function n(){return y(this,n),t.apply(this,arguments)}return k(n)}(bf),Sf=function(e){_(n,e);var t=T(n);function n(e){var r;return y(this,n),(r=t.call(this)).elements=e,r}return k(n)}(bf);function Tf(e,t){var n,r=Nf(t),i=b(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Uc(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var If=function(e){_(n,e);var t=T(n);function n(e){var r;return y(this,n),(r=t.call(this)).elements=e,r}return k(n)}(bf);function Cf(e,t){var n,r=Nf(t),i=b(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Uc(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Df=function(e){_(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).serializer=e,i._t=r,i}return k(n)}(bf);function Af(e){return Dc(e.integerValue||e.doubleValue)}function Nf(e){return Wc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Pf=k((function e(t,n){y(this,e),this.field=t,this.transform=n}));var Rf=k((function e(t,n){y(this,e),this.version=t,this.transformResults=n})),Of=function(){function e(t,n){y(this,e),this.updateTime=t,this.exists=n}return k(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Lf(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Mf=k((function e(){y(this,e)}));function Ff(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Yf(e.key,Of.none()):new zf(e.key,e.data,Of.none());var n,r=e.data,i=rl.empty(),a=new wc(cs.comparator),o=b(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new qf(e.key,i,new Ec(a.toArray()),Of.none())}function Vf(e,t,n){e instanceof zf?function(e,t,n){var r=e.value.clone(),i=Kf(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof qf?function(e,t,n){if(Lf(e.precondition,t)){var r=Kf(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Gf(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Uf(e,t,n,r){return e instanceof zf?function(e,t,n,r){if(!Lf(e.precondition,t))return n;var i=e.value.clone(),a=Hf(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof qf?function(e,t,n,r){if(!Lf(e.precondition,t))return n;var i=Hf(e.fieldTransforms,r,t),a=t.data;return a.setAll(Gf(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Lf(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Bf(e,t){var n,r=null,i=b(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=_f(a.transform,o||null);null!=u&&(null===r&&(r=rl.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function jf(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&ns(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Sf&&t instanceof Sf||e instanceof If&&t instanceof If?ns(e.elements,t.elements,Uc):e instanceof Df&&t instanceof Df?Uc(e._t,t._t):e instanceof Ef&&t instanceof Ef}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var zf=function(e){_(n,e);var t=T(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return y(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return k(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Mf),qf=function(e){_(n,e);var t=T(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return y(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return k(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Mf);function Gf(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function Kf(e,t,n){var r=new Map;Bu(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,xf(o,u,n[i]))}return r}function Hf(e,t,n){var r,i=new Map,a=b(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,wf(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var Wf,Qf,Yf=function(e){_(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return k(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Mf),Xf=function(e){_(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return k(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Mf),$f=function(){function e(t,n,r,i){y(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return k(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Vf(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=b(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Uf(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=b(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=Uf(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=lf();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Ff(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(as.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),vf())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&ns(this.mutations,e.mutations,(function(e,t){return jf(e,t)}))&&ns(this.baseMutations,e.baseMutations,(function(e,t){return jf(e,t)}))}}]),e}(),Jf=function(){function e(t,n,r,i){y(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return k(e,null,[{key:"from",value:function(t,n,r){Bu(t.mutations.length===r.length);for(var i=hf,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Zf=function(){function e(t,n){y(this,e),this.largestBatchId=t,this.mutation=n}return k(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),eh=k((function e(t){y(this,e),this.count=t}));function th(e){switch(e){default:return Uu();case zu.CANCELLED:case zu.UNKNOWN:case zu.DEADLINE_EXCEEDED:case zu.RESOURCE_EXHAUSTED:case zu.INTERNAL:case zu.UNAVAILABLE:case zu.UNAUTHENTICATED:return!1;case zu.INVALID_ARGUMENT:case zu.NOT_FOUND:case zu.ALREADY_EXISTS:case zu.PERMISSION_DENIED:case zu.FAILED_PRECONDITION:case zu.ABORTED:case zu.OUT_OF_RANGE:case zu.UNIMPLEMENTED:case zu.DATA_LOSS:return!0}}function nh(e){if(void 0===e)return Mu("GRPC error has no .code"),zu.UNKNOWN;switch(e){case Wf.OK:return zu.OK;case Wf.CANCELLED:return zu.CANCELLED;case Wf.UNKNOWN:return zu.UNKNOWN;case Wf.DEADLINE_EXCEEDED:return zu.DEADLINE_EXCEEDED;case Wf.RESOURCE_EXHAUSTED:return zu.RESOURCE_EXHAUSTED;case Wf.INTERNAL:return zu.INTERNAL;case Wf.UNAVAILABLE:return zu.UNAVAILABLE;case Wf.UNAUTHENTICATED:return zu.UNAUTHENTICATED;case Wf.INVALID_ARGUMENT:return zu.INVALID_ARGUMENT;case Wf.NOT_FOUND:return zu.NOT_FOUND;case Wf.ALREADY_EXISTS:return zu.ALREADY_EXISTS;case Wf.PERMISSION_DENIED:return zu.PERMISSION_DENIED;case Wf.FAILED_PRECONDITION:return zu.FAILED_PRECONDITION;case Wf.ABORTED:return zu.ABORTED;case Wf.OUT_OF_RANGE:return zu.OUT_OF_RANGE;case Wf.UNIMPLEMENTED:return zu.UNIMPLEMENTED;case Wf.DATA_LOSS:return zu.DATA_LOSS;default:return Uu()}}(Qf=Wf||(Wf={}))[Qf.OK=0]="OK",Qf[Qf.CANCELLED=1]="CANCELLED",Qf[Qf.UNKNOWN=2]="UNKNOWN",Qf[Qf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Qf[Qf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Qf[Qf.NOT_FOUND=5]="NOT_FOUND",Qf[Qf.ALREADY_EXISTS=6]="ALREADY_EXISTS",Qf[Qf.PERMISSION_DENIED=7]="PERMISSION_DENIED",Qf[Qf.UNAUTHENTICATED=16]="UNAUTHENTICATED",Qf[Qf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Qf[Qf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Qf[Qf.ABORTED=10]="ABORTED",Qf[Qf.OUT_OF_RANGE=11]="OUT_OF_RANGE",Qf[Qf.UNIMPLEMENTED=12]="UNIMPLEMENTED",Qf[Qf.INTERNAL=13]="INTERNAL",Qf[Qf.UNAVAILABLE=14]="UNAVAILABLE",Qf[Qf.DATA_LOSS=15]="DATA_LOSS";var rh=function(){function e(){y(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return k(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return ih}},{key:"getOrCreateInstance",value:function(){return null===ih&&(ih=new e),ih}}]),e}(),ih=null,ah=function(){function e(t,n,r,i,a){y(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return k(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,oh.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(as.min(),i,mf(),af(),vf())}}]),e}(),oh=function(){function e(t,n,r,i,a){y(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return k(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,vf(),vf(),vf())}}]),e}(),uh=k((function e(t,n,r,i){y(this,e),this.It=t,this.removedTargetIds=n,this.key=r,this.Tt=i})),sh=k((function e(t,n){y(this,e),this.targetId=t,this.Et=n})),ch=k((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Tc.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;y(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),lh=function(){function e(){y(this,e),this.At=0,this.Rt=dh(),this.vt=Tc.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}return k(e,[{key:"current",get:function(){return this.bt}},{key:"resumeToken",get:function(){return this.vt}},{key:"Vt",get:function(){return 0!==this.At}},{key:"St",get:function(){return this.Pt}},{key:"Dt",value:function(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}},{key:"Ct",value:function(){var e=vf(),t=vf(),n=vf();return this.Rt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Uu()}})),new oh(this.vt,this.bt,e,t,n)}},{key:"xt",value:function(){this.Pt=!1,this.Rt=dh()}},{key:"Nt",value:function(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}},{key:"kt",value:function(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}},{key:"Ot",value:function(){this.At+=1}},{key:"$t",value:function(){this.At-=1}},{key:"Mt",value:function(){this.Pt=!0,this.bt=!0}}]),e}(),fh=function(){function e(t){y(this,e),this.Ft=t,this.Bt=new Map,this.Lt=af(),this.qt=hh(),this.Ut=new wc(ts)}return k(e,[{key:"Kt",value:function(e){var t,n=b(e.It);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Tt&&e.Tt.isFoundDocument()?this.Gt(r,e.Tt):this.Qt(r,e.key,e.Tt)}}catch(u){n.e(u)}finally{n.f()}var i,a=b(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Qt(o,e.key,e.Tt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"zt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.jt(n);switch(e.state){case 0:t.Wt(n)&&r.Dt(e.resumeToken);break;case 1:r.$t(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.$t(),r.Vt||t.removeTarget(n);break;case 3:t.Wt(n)&&(r.Mt(),r.Dt(e.resumeToken));break;case 4:t.Wt(n)&&(t.Ht(n),r.Dt(e.resumeToken));break;default:Uu()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((function(e,r){n.Wt(r)&&t(r)}))}},{key:"Jt",value:function(e){var t,n=e.targetId,r=e.Et.count,i=this.Yt(n);if(i){var a=i.target;if(Ol(a))if(0===r){var o=new ls(a.path);this.Qt(n,o,al.newNoDocument(o,as.min()))}else Bu(1===r);else{var u=this.Zt(n);u!==r&&(this.Ht(n),this.Ut=this.Ut.add(n),null===(t=rh.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:u,existenceFilterCount:e.Et.count}))}}}},{key:"Xt",value:function(e){var t=this,n=new Map;this.Bt.forEach((function(r,i){var a=t.Yt(i);if(a){if(r.current&&Ol(a.target)){var o=new ls(a.target.path);null!==t.Lt.get(o)||t.te(i,o)||t.Qt(i,o,al.newNoDocument(o,e))}r.St&&(n.set(i,r.Ct()),r.xt())}}));var r=vf();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Yt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Lt.forEach((function(t,n){return n.setReadTime(e)}));var i=new ah(e,n,this.Ut,this.Lt,r);return this.Lt=af(),this.qt=hh(),this.Ut=new wc(ts),i}},{key:"Gt",value:function(e,t){if(this.Wt(e)){var n=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}}},{key:"Qt",value:function(e,t,n){if(this.Wt(e)){var r=this.jt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Bt.delete(e)}},{key:"Zt",value:function(e){var t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.jt(e).Ot()}},{key:"jt",value:function(e){var t=this.Bt.get(e);return t||(t=new lh,this.Bt.set(e,t)),t}},{key:"ee",value:function(e){var t=this.qt.get(e);return t||(t=new wc(ts),this.qt=this.qt.insert(e,t)),t}},{key:"Wt",value:function(e){var t=null!==this.Yt(e);return t||Lu("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Yt",value:function(e){var t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}},{key:"Ht",value:function(e){var t=this;this.Bt.set(e,new lh),this.Ft.getRemoteKeysForTarget(e).forEach((function(n){t.Qt(e,n,null)}))}},{key:"te",value:function(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}]),e}();function hh(){return new gc(ls.comparator)}function dh(){return new gc(ls.comparator)}var vh={asc:"ASCENDING",desc:"DESCENDING"},ph={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},mh={and:"AND",or:"OR"},yh=k((function e(t,n){y(this,e),this.databaseId=t,this.useProto3Json=n}));function gh(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function kh(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function bh(e,t){return gh(e,t.toTimestamp())}function wh(e){return Bu(!!e),as.fromTimestamp(function(e){var t=Cc(e);return new is(t.seconds,t.nanos)}(e))}function xh(e,t){return function(e){return new us(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function _h(e){var t=us.fromString(e);return Bu(Hh(t)),t}function Eh(e,t){return xh(e.databaseId,t.path)}function Sh(e,t){var n=_h(t);if(n.get(1)!==e.databaseId.projectId)throw new qu(zu.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new qu(zu.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ls(Dh(n))}function Th(e,t){return xh(e.databaseId,t)}function Ih(e){var t=_h(e);return 4===t.length?us.emptyPath():Dh(t)}function Ch(e){return new us(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Dh(e){return Bu(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ah(e,t,n){return{name:Eh(e,t),fields:n.value.mapValue.fields}}function Nh(e,t,n){var r=Sh(e,t.name),i=wh(t.updateTime),a=t.createTime?wh(t.createTime):as.min(),o=new rl({mapValue:{fields:t.fields}}),u=al.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function Ph(e,t){return"found"in t?function(e,t){Bu(!!t.found),t.found.name,t.found.updateTime;var n=Sh(e,t.found.name),r=wh(t.found.updateTime),i=t.found.createTime?wh(t.found.createTime):as.min(),a=new rl({mapValue:{fields:t.found.fields}});return al.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){Bu(!!t.missing),Bu(!!t.readTime);var n=Sh(e,t.missing),r=wh(t.readTime);return al.newNoDocument(n,r)}(e,t):Uu()}function Rh(e,t){var n;if(t instanceof zf)n={update:Ah(e,t.key,t.value)};else if(t instanceof Yf)n={delete:Eh(e,t.key)};else if(t instanceof qf)n={update:Ah(e,t.key,t.data),updateMask:Kh(t.fieldMask)};else{if(!(t instanceof Xf))return Uu();n={verify:Eh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof Ef)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Sf)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof If)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Df)return{fieldPath:t.field.canonicalString(),increment:n._t};throw Uu()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:bh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Uu()}(e,t.precondition)),n}function Oh(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Of.updateTime(wh(e.updateTime)):void 0!==e.exists?Of.exists(e.exists):Of.none()}(t.currentDocument):Of.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Bu("REQUEST_TIME"===t.setToServerValue),n=new Ef;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Sf(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new If(i)}else"increment"in t?n=new Df(e,t.increment):Uu();var a=cs.fromServerFormat(t.fieldPath);return new Pf(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=Sh(e,t.update.name),a=new rl({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new Ec(t.map((function(e){return cs.fromServerFormat(e)})))}(t.updateMask);return new qf(i,a,o,n,r)}return new zf(i,a,n,r)}if(t.delete){var u=Sh(e,t.delete);return new Yf(u,n)}if(t.verify){var s=Sh(e,t.verify);return new Xf(s,n)}return Uu()}function Lh(e,t){return{documents:[Th(e,t.path)]}}function Mh(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=Th(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=Th(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Gh(dl.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:zh(e.field),direction:Uh(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.useProto3Json||Fs(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Fh(e){var t=Ih(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Bu(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Vh(e);return t instanceof dl&&ml(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new cl(qh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Fs(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new ol(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new ol(n,t)}(n.endAt)),Ul(t,i,u,o,s,"F",c,l)}function Vh(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=qh(e.unaryFilter.field);return hl.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=qh(e.unaryFilter.field);return hl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=qh(e.unaryFilter.field);return hl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=qh(e.unaryFilter.field);return hl.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Uu()}}(e):void 0!==e.fieldFilter?function(e){return hl.create(qh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Uu()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return dl.create(e.compositeFilter.filters.map((function(e){return Vh(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Uu()}}(e.compositeFilter.op))}(e):Uu()}function Uh(e){return vh[e]}function Bh(e){return ph[e]}function jh(e){return mh[e]}function zh(e){return{fieldPath:e.canonicalString()}}function qh(e){return cs.fromServerFormat(e.fieldPath)}function Gh(e){return e instanceof hl?function(e){if("=="===e.op){if(Yc(e.value))return{unaryFilter:{field:zh(e.field),op:"IS_NAN"}};if(Qc(e.value))return{unaryFilter:{field:zh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Yc(e.value))return{unaryFilter:{field:zh(e.field),op:"IS_NOT_NAN"}};if(Qc(e.value))return{unaryFilter:{field:zh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zh(e.field),op:Bh(e.op),value:e.value}}}(e):e instanceof dl?function(e){var t=e.getFilters().map((function(e){return Gh(e)}));return 1===t.length?t[0]:{compositeFilter:{op:jh(e.op),filters:t}}}(e):Uu()}function Kh(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function Hh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var Wh=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:as.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:as.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Tc.EMPTY_BYTE_STRING;y(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return k(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Qh=k((function e(t){y(this,e),this.se=t}));function Yh(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Xh(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Eh(e,t.key),fields:t.data.value.mapValue.fields,updateTime:gh(e,t.version.toTimestamp()),createTime:gh(e,t.createTime.toTimestamp())}}(e.se,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:$h(t.version)};else{if(!t.isUnknownDocument())return Uu();r.unknownDocument={path:n.path.toArray(),version:$h(t.version)}}return r}function Xh(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function $h(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Jh(e){var t=new is(e.seconds,e.nanoseconds);return as.fromTimestamp(t)}function Zh(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Oh(e.se,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Oh(e.se,t)})),u=is.fromMillis(t.localWriteTimeMs);return new $f(t.batchId,u,n,o)}function ed(e){var t,n,r=Jh(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Jh(e.lastLimboFreeSnapshotVersion):as.min();return void 0!==e.query.documents?(Bu(1===(n=e.query).documents.length),t=Hl(Bl(Ih(n.documents[0])))):t=function(e){return Hl(Fh(e))}(e.query),new Wh(t,e.targetId,0,e.lastListenSequenceNumber,r,i,Tc.fromBase64String(e.resumeToken))}function td(e,t){var n,r=$h(t.snapshotVersion),i=$h(t.lastLimboFreeSnapshotVersion);n=Ol(t.target)?Lh(e.se,t.target):Mh(e.se,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Pl(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function nd(e){var t=Fh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Ql(t,t.limit,"L"):t}function rd(e,t){return new Zf(t.largestBatchId,Oh(e.se,t.overlayMutation))}function id(e,t){var n=t.path.lastSegment();return[e,Bs(t.path.popLast()),n]}function ad(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:$h(r.readTime),documentKey:Bs(r.documentKey.path),largestBatchId:r.largestBatchId}}var od=function(){function e(){y(this,e)}return k(e,[{key:"getBundleMetadata",value:function(e,t){return ud(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Jh(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return ud(e).put({bundleId:(n=t).id,createTime:$h(wh(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return sd(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:nd(t.bundledQuery),readTime:Jh(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return sd(e).put(function(e){return{name:e.name,readTime:$h(wh(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function ud(e){return vc(e,"bundles")}function sd(e){return vc(e,"namedQueries")}var cd=function(){function e(t,n){y(this,e),this.serializer=t,this.userId=n}return k(e,[{key:"getOverlay",value:function(e,t){var n=this;return ld(e).get(id(this.userId,t)).next((function(e){return e?rd(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=cf();return Es.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Zf(t,a);i.push(r.re(e,o))})),Es.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Bs(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(ld(e).J("collectionPathOverlayIndex",i))})),Es.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=cf(),a=Bs(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return ld(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=b(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=rd(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=cf(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return ld(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=rd(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"re",value:function(e,t){return ld(e).put(function(e,t,n){var r=s(id(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Rh(e.se,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"ie",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function ld(e){return vc(e,"documentOverlays")}var fd=function(){function e(){y(this,e)}return k(e,[{key:"oe",value:function(e,t){this.ue(e,t),t.ce()}},{key:"ue",value:function(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(Dc(e.integerValue));else if("doubleValue"in e){var n=Dc(e.doubleValue);isNaN(n)?this.ae(t,13):(this.ae(t,15),Vs(n)?t.he(0):t.he(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ae(t,20),"string"==typeof r?t.le(r):(t.le("".concat(r.seconds||"")),t.he(r.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(Ac(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ae(t,45),t.he(i.latitude||0),t.he(i.longitude||0)}else"mapValue"in e?Jc(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):Uu()}},{key:"fe",value:function(e,t){this.ae(t,25),this.ye(e,t)}},{key:"ye",value:function(e,t){t.le(e)}},{key:"me",value:function(e,t){var n=e.fields||{};this.ae(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.fe(a,t),this.ue(n[a],t)}}},{key:"ge",value:function(e,t){var n=e.values||[];this.ae(t,50);var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ue(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ae(t,37),ls.fromName(e).path.forEach((function(e){n.ae(t,60),n.ye(e,t)}))}},{key:"ae",value:function(e,t){e.he(t)}},{key:"de",value:function(e){e.he(2)}}]),e}();function hd(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function dd(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=hd(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}fd.pe=new fd;var vd=function(){function e(){y(this,e),this.buffer=new Uint8Array(1024),this.position=0}return k(e,[{key:"Ie",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Te(n.value),n=t.next();this.Ee()}},{key:"Ae",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Re(n.value),n=t.next();this.ve()}},{key:"be",value:function(e){var t,n=b(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Te(i);else if(i<2048)this.Te(960|i>>>6),this.Te(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Te(480|i>>>12),this.Te(128|63&i>>>6),this.Te(128|63&i);else{var a=r.codePointAt(0);this.Te(240|a>>>18),this.Te(128|63&a>>>12),this.Te(128|63&a>>>6),this.Te(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ee()}},{key:"Pe",value:function(e){var t,n=b(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Re(i);else if(i<2048)this.Re(960|i>>>6),this.Re(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Re(480|i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i);else{var a=r.codePointAt(0);this.Re(240|a>>>18),this.Re(128|63&a>>>12),this.Re(128|63&a>>>6),this.Re(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ve()}},{key:"Ve",value:function(e){var t=this.Se(e),n=dd(t);this.De(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Ce",value:function(e){var t=this.Se(e),n=dd(t);this.De(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"xe",value:function(){this.Ne(255),this.Ne(255)}},{key:"ke",value:function(){this.Oe(255),this.Oe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.De(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"$e",value:function(){return this.buffer.slice(0,this.position)}},{key:"Se",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Te",value:function(e){var t=255&e;0===t?(this.Ne(0),this.Ne(255)):255===t?(this.Ne(255),this.Ne(0)):this.Ne(t)}},{key:"Re",value:function(e){var t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(e)}},{key:"Ee",value:function(){this.Ne(0),this.Ne(1)}},{key:"ve",value:function(){this.Oe(0),this.Oe(1)}},{key:"Ne",value:function(e){this.De(1),this.buffer[this.position++]=e}},{key:"Oe",value:function(e){this.De(1),this.buffer[this.position++]=~e}},{key:"De",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),pd=function(){function e(t){y(this,e),this.Me=t}return k(e,[{key:"we",value:function(e){this.Me.Ie(e)}},{key:"le",value:function(e){this.Me.be(e)}},{key:"he",value:function(e){this.Me.Ve(e)}},{key:"ce",value:function(){this.Me.xe()}}]),e}(),md=function(){function e(t){y(this,e),this.Me=t}return k(e,[{key:"we",value:function(e){this.Me.Ae(e)}},{key:"le",value:function(e){this.Me.Pe(e)}},{key:"he",value:function(e){this.Me.Ce(e)}},{key:"ce",value:function(){this.Me.ke()}}]),e}(),yd=function(){function e(){y(this,e),this.Me=new vd,this.Fe=new pd(this.Me),this.Be=new md(this.Me)}return k(e,[{key:"seed",value:function(e){this.Me.seed(e)}},{key:"Le",value:function(e){return 0===e?this.Fe:this.Be}},{key:"$e",value:function(){return this.Me.$e()}},{key:"reset",value:function(){this.Me.reset()}}]),e}(),gd=function(){function e(t,n,r,i){y(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return k(e,[{key:"qe",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function kd(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=bd(e.arrayValue,t.arrayValue))?n:0!==(n=bd(e.directionalValue,t.directionalValue))?n:ls.comparator(e.documentKey,t.documentKey)}function bd(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var wd=function(){function e(t){y(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.Ke=[];var n,r=b(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Ge=i:this.Ke.push(i)}}catch(a){r.e(a)}finally{r.f()}}return k(e,[{key:"Qe",value:function(e){Bu(e.collectionGroup===this.collectionId);var t=hs(e);if(void 0!==t&&!this.ze(t))return!1;for(var n=ds(e),r=0,i=0;r<n.length&&this.ze(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ge){var a=n[r];if(!this.je(this.Ge,a)||!this.We(this.Ue[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ue.length||!this.We(this.Ue[i++],o))return!1}return!0}},{key:"ze",value:function(e){var t,n=b(this.Ke);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"We",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function xd(e){var t,n;if(Bu(e instanceof hl||e instanceof dl),e instanceof hl){if(e instanceof Il){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return hl.create(e.field,"==",t)})))||[];return dl.create(r,"or")}return e}var i=e.filters.map((function(e){return xd(e)}));return dl.create(i,e.op)}function _d(e){if(0===e.getFilters().length)return[];var t=Id(xd(e));return Bu(Td(t)),Ed(t)||Sd(t)?[t]:t.getFilters()}function Ed(e){return e instanceof hl}function Sd(e){return e instanceof dl&&ml(e)}function Td(e){return Ed(e)||Sd(e)||function(e){if(e instanceof dl&&pl(e)){var t,n=b(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!Ed(r)&&!Sd(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function Id(e){if(Bu(e instanceof hl||e instanceof dl),e instanceof hl)return e;if(1===e.filters.length)return Id(e.filters[0]);var t=e.filters.map((function(e){return Id(e)})),n=dl.create(t,e.op);return Td(n=Ad(n))?n:(Bu(n instanceof dl),Bu(vl(n)),Bu(n.filters.length>1),n.filters.reduce((function(e,t){return Cd(e,t)})))}function Cd(e,t){var n;return Bu(e instanceof hl||e instanceof dl),Bu(t instanceof hl||t instanceof dl),n=e instanceof hl?t instanceof hl?function(e,t){return dl.create([e,t],"and")}(e,t):Dd(e,t):t instanceof hl?Dd(t,e):function(e,t){if(Bu(e.filters.length>0&&t.filters.length>0),vl(e)&&vl(t))return bl(e,t.getFilters());var n=pl(e)?e:t,r=pl(e)?t:e,i=n.filters.map((function(e){return Cd(e,r)}));return dl.create(i,"or")}(e,t),Ad(n)}function Dd(e,t){if(vl(t))return bl(t,e.getFilters());var n=t.filters.map((function(t){return Cd(e,t)}));return dl.create(n,"or")}function Ad(e){if(Bu(e instanceof hl||e instanceof dl),e instanceof hl)return e;var t=e.getFilters();if(1===t.length)return Ad(t[0]);if(yl(e))return e;var n=t.map((function(e){return Ad(e)})),r=[];return n.forEach((function(t){t instanceof hl?r.push(t):t instanceof dl&&(t.op===e.op?r.push.apply(r,te(t.filters)):r.push(t))})),1===r.length?r[0]:dl.create(r,e.op)}var Nd=function(){function e(){y(this,e),this.He=new Pd}return k(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.He.add(t),Es.resolve()}},{key:"getCollectionParents",value:function(e,t){return Es.resolve(this.He.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return Es.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return Es.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return Es.resolve(null)}},{key:"getIndexType",value:function(e,t){return Es.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return Es.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return Es.resolve(null)}},{key:"getMinOffset",value:function(e,t){return Es.resolve(gs.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return Es.resolve(gs.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return Es.resolve()}},{key:"updateIndexEntries",value:function(e,t){return Es.resolve()}}]),e}(),Pd=function(){function e(){y(this,e),this.index={}}return k(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new wc(us.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new wc(us.comparator)).toArray()}}]),e}(),Rd=new Uint8Array(0),Od=function(){function e(t,n){y(this,e),this.user=t,this.databaseId=n,this.Je=new Pd,this.Ye=new nf((function(e){return Pl(e)}),(function(e,t){return Rl(e,t)})),this.uid=t.uid||""}return k(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Je.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Je.add(t)}));var a={collectionId:r,parent:Bs(i)};return Ld(e).put(a)}return Es.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[rs(t),""],!1,!0);return Ld(e).j(r).next((function(e){var r,i=b(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(qs(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Fd(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=Vd(e);return a.next((function(e){o.put(ad(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Fd(e),r=Vd(e),i=Md(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Md(e),i=!0,a=new Map;return Es.forEach(this.Ze(t),(function(t){return n.Xe(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=vf(),o=[];return Es.forEach(a,(function(i,a){var u;Lu("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Pl(t)));var s=function(e,t){var n=hs(t);if(void 0===n)return null;var r,i=b(Ll(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=b(ds(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=b(Ll(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=b(ds(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Ml(e,o.fieldPath,e.startAt):Fl(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new ol(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=b(ds(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Fl(e,o.fieldPath,e.endAt):Ml(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new ol(r,i)}(a,i),h=n.tn(i,a,l),d=n.tn(i,a,f),v=n.en(i,a,c),p=n.nn(i.indexId,s,h,l.inclusive,d,f.inclusive,v);return Es.forEach(p,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=ls.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return Es.resolve(null)}))}},{key:"Ze",value:function(e){var t=this.Ye.get(e);return t||(t=0===e.filters.length?[e]:_d(dl.create(e.filters,"and")).map((function(t){return Nl(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.Ye.set(e,t),t)}},{key:"nn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.sn(t[h/c]):Rd,f=u.rn(e,s,n[h%c],r),d=u.on(e,s,i[h%c],a),v=o.map((function(t){return u.rn(e,s,t,!0)}));l.push.apply(l,te(u.createRange(f,d,v)))},h=0;h<s;++h)f();return l}},{key:"rn",value:function(e,t,n,r){var i=new gd(e,ls.empty(),t,n);return r?i:i.qe()}},{key:"on",value:function(e,t,n,r){var i=new gd(e,ls.empty(),t,n);return r?i.qe():i}},{key:"Xe",value:function(e,t){var n=new wd(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=b(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Qe(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.Ze(t);return Es.forEach(i,(function(t){return n.Xe(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new wc(cs.comparator),r=!1,i=b(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=b(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=b(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"un",value:function(e,t){var n,r=new yd,i=b(ds(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Le(a.kind);fd.pe.oe(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.$e()}},{key:"sn",value:function(e){var t=new yd;return fd.pe.oe(e,t.Le(0)),t.$e()}},{key:"cn",value:function(e,t){var n=new yd;return fd.pe.oe(Kc(this.databaseId,t),n.Le(function(e){var t=ds(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.$e()}},{key:"en",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new yd);var i,a=0,o=b(ds(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=b(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.an(t,s.fieldPath)&&Wc(c))r=this.hn(r,s,c);else{var h=f.Le(s.kind);fd.pe.oe(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.ln(r)}},{key:"tn",value:function(e,t,n){return this.en(e,t,n.position)}},{key:"ln",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].$e();return t}},{key:"hn",value:function(e,t,n){var r,i=te(e),a=[],o=b(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=b(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new yd;f.seed(l.$e()),fd.pe.oe(s,f.Le(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"an",value:function(e,t){return!!e.filters.find((function(e){return e instanceof hl&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Fd(e),i=Vd(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return Es.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new ps(t.sequenceNumber,new gs(Jh(t.readTime),new ls(qs(t.documentKey)),t.largestBatchId)):ps.empty(),r=e.fields.map((function(e){var t=s(e,2),n=t[0],r=t[1];return new vs(cs.fromServerFormat(n),r)}));return new fs(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:ts(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Fd(e),a=Vd(e);return this.fn(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return Es.forEach(t,(function(t){return a.put(ad(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return Es.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?Es.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),Es.forEach(a,(function(r){return n.dn(e,t,r).next((function(t){var a=n.wn(i,r);return t.isEqual(a)?Es.resolve():n._n(e,i,r,t,a)}))}))}))}))}},{key:"mn",value:function(e,t,n,r){return Md(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.cn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"gn",value:function(e,t,n,r){return Md(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.cn(n,t.key),t.key.path.toArray()])}},{key:"dn",value:function(e,t,n){var r=Md(e),i=new wc(kd);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.cn(n,t)])},(function(e,r){i=i.add(new gd(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"wn",value:function(e,t){var n=new wc(kd),r=this.un(t,e);if(null==r)return n;var i=hs(t);if(null!=i){var a=e.data.field(i.fieldPath);if(Wc(a)){var o,u=b(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new gd(t.indexId,e.key,this.sn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new gd(t.indexId,e.key,Rd,r));return n}},{key:"_n",value:function(e,t,n,r,i){var a=this;Lu("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=_c(a),s=_c(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=_c(o)):l?(i(u),u=_c(a)):(u=_c(a),s=_c(o))}}(r,i,kd,(function(r){o.push(a.mn(e,t,n,r))}),(function(r){o.push(a.gn(e,t,n,r))})),Es.waitFor(o)}},{key:"fn",value:function(e){var t=1;return Vd(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return kd(e,t)})).filter((function(e,t,n){return!t||0!==kd(e,n[t-1])}));var r=[];r.push(e);var i,a=b(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=kd(o,e),s=kd(o,t);if(0===u)r[0]=e.qe();else if(u>0&&s<0)r.push(o),r.push(o.qe());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.yn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Rd,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Rd,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"yn",value:function(e,t){return kd(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Ud)}},{key:"getMinOffset",value:function(e,t){var n=this;return Es.mapArray(this.Ze(t),(function(t){return n.Xe(e,t).next((function(e){return e||Uu()}))})).next(Ud)}}]),e}();function Ld(e){return vc(e,"collectionParents")}function Md(e){return vc(e,"indexEntries")}function Fd(e){return vc(e,"indexConfiguration")}function Vd(e){return vc(e,"indexState")}function Ud(e){Bu(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;ks(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new gs(t.readTime,t.documentKey,n)}var Bd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},jd=function(){function e(t,n,r){y(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return k(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function zd(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Bu(1===u)})));var c,l=[],f=b(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=Hs(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(v){f.e(v)}finally{f.f()}return Es.waitFor(a).next((function(){return l}))}function qd(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Uu();t=e.noDocument}return JSON.stringify(t).length}jd.DEFAULT_COLLECTION_PERCENTILE=10,jd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,jd.DEFAULT=new jd(41943040,jd.DEFAULT_COLLECTION_PERCENTILE,jd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),jd.DISABLED=new jd(-1,0,0);var Gd=function(){function e(t,n,r,i){y(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.pn={}}return k(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Hd(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=Wd(e),o=Hd(e);return o.add({}).next((function(u){Bu("number"==typeof u);var s,c=new $f(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Rh(e.se,t)})),i=n.mutations.map((function(t){return Rh(e.se,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new wc((function(e,t){return ts(e.canonicalString(),t.canonicalString())})),d=b(r);try{for(d.s();!(s=d.n()).done;){var v=s.value,p=Hs(i.userId,v.key.path,u);h=h.add(v.key.path.popLast()),f.push(o.put(l)),f.push(a.put(p,Ws))}}catch(m){d.e(m)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.pn[u]=c.keys()})),Es.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return Hd(e).get(t).next((function(e){return e?(Bu(e.userId===n.userId),Zh(n.serializer,e)):null}))}},{key:"In",value:function(e,t){var n=this;return this.pn[t]?Es.resolve(this.pn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.pn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return Hd(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Bu(t.batchId>=r),a=Zh(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Hd(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Hd(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return Zh(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=Ks(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return Wd(e).Z({range:i},(function(r,i,o){var u=s(r,3),c=u[0],l=u[1],f=u[2],h=qs(l);if(c===n.userId&&t.path.isEqual(h))return Hd(e).get(f).next((function(e){if(!e)throw Uu();Bu(e.userId===n.userId),a.push(Zh(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new wc(ts),i=[];return t.forEach((function(t){var a=Ks(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=Wd(e).Z({range:o},(function(e,i,a){var o=s(e,3),u=o[0],c=o[1],l=o[2],f=qs(c);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),Es.waitFor(i).next((function(){return n.Tn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=Ks(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new wc(ts);return Wd(e).Z({range:o},(function(e,t,a){var o=s(e,3),c=o[0],l=o[1],f=o[2],h=qs(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.Tn(e,u)}))}},{key:"Tn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(Hd(e).get(t).next((function(e){if(null===e)throw Uu();Bu(e.userId===n.userId),r.push(Zh(n.serializer,e))})))})),Es.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return zd(e.at,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.En(t.batchId)})),Es.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"En",value:function(e){delete this.pn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return Es.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return Wd(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=qs(e[1]);i.push(a)}else r.done()})).next((function(){Bu(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return Kd(e,this.userId,t)}},{key:"An",value:function(e){var t=this;return Qd(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"ie",value:function(t,n,r,i){return Bu(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function Kd(e,t,n){var r=Ks(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return Wd(e).Z({range:a,Y:!0},(function(e,n,r){var a=s(e,3),u=a[0],c=a[1];a[2];u===t&&c===i&&(o=!0),r.done()})).next((function(){return o}))}function Hd(e){return vc(e,"mutations")}function Wd(e){return vc(e,"documentMutations")}function Qd(e){return vc(e,"mutationQueues")}var Yd=function(){function e(t){y(this,e),this.Rn=t}return k(e,[{key:"next",value:function(){return this.Rn+=2,this.Rn}}],[{key:"vn",value:function(){return new e(0)}},{key:"bn",value:function(){return new e(-1)}}]),e}(),Xd=function(){function e(t,n){y(this,e),this.referenceDelegate=t,this.serializer=n}return k(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Pn(e).next((function(n){var r=new Yd(n.highestTargetId);return n.highestTargetId=r.next(),t.Vn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Pn(e).next((function(e){return as.fromTimestamp(new is(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Vn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Sn(e,t).next((function(){return n.Pn(e).next((function(r){return r.targetCount+=1,n.Dn(t,r),n.Vn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Sn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return $d(e).delete(t.targetId)})).next((function(){return n.Pn(e)})).next((function(t){return Bu(t.targetCount>0),t.targetCount-=1,n.Vn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return $d(e).Z((function(o,u){var s=ed(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return Es.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return $d(e).Z((function(e,n){var r=ed(n);t(r)}))}},{key:"Pn",value:function(e){return Jd(e).get("targetGlobalKey").next((function(e){return Bu(null!==e),e}))}},{key:"Vn",value:function(e,t){return Jd(e).put("targetGlobalKey",t)}},{key:"Sn",value:function(e,t){return $d(e).put(td(this.serializer,t))}},{key:"Dn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Pl(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return $d(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=ed(n);Rl(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Zd(e);return t.forEach((function(t){var o=Bs(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),Es.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Zd(e);return Es.forEach(t,(function(t){var a=Bs(t.path);return Es.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Zd(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Zd(e),i=vf();return r.Z({range:n,Y:!0},(function(e,t,n){var r=qs(e[1]),a=new ls(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Bs(t.path),r=IDBKeyRange.bound([n],[rs(n)],!1,!0),i=0;return Zd(e).Z({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=s(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ne",value:function(e,t){return $d(e).get(t).next((function(e){return e?ed(e):null}))}}]),e}();function $d(e){return vc(e,"targets")}function Jd(e){return vc(e,"targetGlobal")}function Zd(e){return vc(e,"targetDocuments")}function ev(e,t){var n=s(e,2),r=n[0],i=n[1],a=s(t,2),o=a[0],u=a[1],c=ts(r,o);return 0===c?ts(i,u):c}var tv=function(){function e(t){y(this,e),this.Cn=t,this.buffer=new wc(ev),this.xn=0}return k(e,[{key:"Nn",value:function(){return++this.xn}},{key:"kn",value:function(e){var t=[e,this.Nn()];if(this.buffer.size<this.Cn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();ev(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),nv=function(){function e(t,n,r){y(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.On=null}return k(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.$n(6e4)}},{key:"stop",value:function(){this.On&&(this.On.cancel(),this.On=null)}},{key:"started",get:function(){return null!==this.On}},{key:"$n",value:function(e){var t=this;Lu("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,v(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.On=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Ds(e.t0)){e.next=12;break}Lu("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,xs(e.t0);case 14:return e.next=16,t.$n(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),rv=function(){function e(t,n){y(this,e),this.Mn=t,this.params=n}return k(e,[{key:"calculateTargetCount",value:function(e,t){return this.Mn.Fn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return Es.resolve(Ms.ct);var r=new tv(t);return this.Mn.forEachTarget(e,(function(e){return r.kn(e.sequenceNumber)})).next((function(){return n.Mn.Bn(e,(function(e){return r.kn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Mn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Mn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Lu("LruGarbageCollector","Garbage collection skipped; disabled"),Es.resolve(Bd)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Lu("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Bd):n.Ln(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Mn.getCacheSize(e)}},{key:"Ln",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Lu("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Ou()<=oe.DEBUG&&Lu("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),Es.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),iv=function(){function e(t,n){y(this,e),this.db=t,this.garbageCollector=function(e,t){return new rv(e,t)}(this,n)}return k(e,[{key:"Fn",value:function(e){var t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"qn",value:function(e){var t=0;return this.Bn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Bn",value:function(e,t){return this.Un(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return av(e,n)}},{key:"removeReference",value:function(e,t,n){return av(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return av(e,t)}},{key:"Kn",value:function(e,t){return function(e,t){var n=!1;return Qd(e).X((function(r){return Kd(e,r,t).next((function(e){return e&&(n=!0),Es.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Un(e,(function(o,u){if(u<=t){var s=n.Kn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,as.min()),Zd(e).delete([0,Bs(o.path)])}))}));i.push(s)}})).next((function(){return Es.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return av(e,t)}},{key:"Un",value:function(e,t){var n,r=Zd(e),i=Ms.ct;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=s(e,2),o=a[0],u=(a[1],r.path),c=r.sequenceNumber;0===o?(i!==Ms.ct&&t(new ls(qs(n)),i),i=c,n=u):i=Ms.ct})).next((function(){i!==Ms.ct&&t(new ls(qs(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function av(e,t){return Zd(e).put(function(e,t){return{targetId:0,path:Bs(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var ov=function(){function e(){y(this,e),this.changes=new nf((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return k(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,al.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?Es.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),uv=function(){function e(t){y(this,e),this.serializer=t}return k(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return fv(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return fv(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Xh(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Gn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=al.newInvalidDocument(t);return fv(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(hv(t))},(function(e,i){r=n.Qn(t,i)})).next((function(){return r}))}},{key:"zn",value:function(e,t){var n=this,r={size:0,document:al.newInvalidDocument(t)};return fv(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(hv(t))},(function(e,i){r={document:n.Qn(t,i),size:qd(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=af();return this.jn(e,t,(function(e,t){var i=n.Qn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r=af(),i=new gc(ls.comparator);return this.jn(e,t,(function(e,t){var a=n.Qn(e,t);r=r.insert(e,a),i=i.insert(e,qd(t))})).next((function(){return{documents:r,Hn:i}}))}},{key:"jn",value:function(e,t,n){if(t.isEmpty())return Es.resolve();var r=new wc(vv);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(hv(r.first()),hv(r.last())),a=r.getIterator(),o=a.getNext();return fv(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=ls.fromSegments([].concat(te(t.prefixPath),[t.collectionGroup,t.documentId]));o&&vv(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G(hv(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Xh(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return fv(e).j(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=af(),o=b(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.Qn(ls.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(Jl(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=af(),o=dv(t,n),u=dv(t,gs.max());return fv(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Qn(ls.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new cv(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return lv(e).get("remoteDocumentGlobalKey").next((function(e){return Bu(!!e),e}))}},{key:"Gn",value:function(e,t){return lv(e).put("remoteDocumentGlobalKey",t)}},{key:"Qn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Nh(e.se,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=ls.fromSegments(t.noDocument.path),i=Jh(t.noDocument.readTime);n=al.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Uu();var a=ls.fromSegments(t.unknownDocument.path),o=Jh(t.unknownDocument.version);n=al.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new is(e[0],e[1]);return as.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(as.min()))return n}return al.newInvalidDocument(e)}}]),e}();function sv(e){return new uv(e)}var cv=function(e){_(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).Jn=e,i.trackRemovals=r,i.Yn=new nf((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return k(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new wc((function(e,t){return ts(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Yn.get(a);if(n.push(t.Jn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Yh(t.Jn.serializer,o);i=i.add(a.path.popLast());var c=qd(s);r+=c-u.size,n.push(t.Jn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Yh(t.Jn.serializer,o.convertToNoDocument(as.min()));n.push(t.Jn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Jn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Jn.updateMetadata(e,r)),Es.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Jn.zn(e,t).next((function(e){return n.Yn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Jn.Wn(e,t).next((function(e){var t=e.documents;return e.Hn.forEach((function(e,r){n.Yn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(ov);function lv(e){return vc(e,"remoteDocumentGlobal")}function fv(e){return vc(e,"remoteDocumentsV14")}function hv(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function dv(e,t){var n=t.documentKey.path.toArray();return[e,Xh(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function vv(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=ts(n[a],r[a]))return i;return(i=ts(n.length,r.length))||((i=ts(n[n.length-2],r[r.length-2]))||ts(n[n.length-1],r[r.length-1]))}var pv=k((function e(t,n){y(this,e),this.overlayedDocument=t,this.mutatedFields=n})),mv=function(){function e(t,n,r,i){y(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return k(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Uf(r.mutation,e,Ec.empty(),is.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,vf()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vf(),i=cf();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=uf();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=cf();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,vf())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=af(),a=ff(),o=ff();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof qf)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),Uf(o.mutation,t,o.mutation.getFieldMask(),is.now())):a.set(t.key,Ec.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new pv(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=ff(),i=new gc((function(e,t){return e-t})),a=vf();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=b(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||Ec.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||vf()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=lf();c.forEach((function(e){if(!a.has(e)){var n=Ff(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return Es.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return ls.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Gl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):Es.resolve(cf()),u=-1,s=a;return o.next((function(t){return Es.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?Es.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,vf())})).next((function(e){return{batchId:u,changes:sf(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new ls(t)).next((function(e){var t=uf();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=uf();return this.indexManager.getCollectionParents(e,i).next((function(o){return Es.forEach(o,(function(o){var u=function(e,t){return new Vl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,al.newInvalidDocument(r)))}));var n=uf();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&Uf(a.mutation,i,Ec.empty(),is.now()),Jl(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),yv=function(){function e(t){y(this,e),this.serializer=t,this.Zn=new Map,this.Xn=new Map}return k(e,[{key:"getBundleMetadata",value:function(e,t){return Es.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:wh(n.createTime)}),Es.resolve()}},{key:"getNamedQuery",value:function(e,t){return Es.resolve(this.Xn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Xn.set(t.name,function(e){return{name:e.name,query:nd(e.bundledQuery),readTime:wh(e.readTime)}}(t)),Es.resolve()}}]),e}(),gv=function(){function e(){y(this,e),this.overlays=new gc(ls.comparator),this.ts=new Map}return k(e,[{key:"getOverlay",value:function(e,t){return Es.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=cf();return Es.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.re(e,t,i)})),Es.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ts.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ts.delete(n)),Es.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=cf(),i=t.length+1,a=new ls(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return Es.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new gc((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=cf(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=cf(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return Es.resolve(s)}},{key:"re",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ts.get(r.largestBatchId).delete(n.key);this.ts.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Zf(t,n));var a=this.ts.get(t);void 0===a&&(a=vf(),this.ts.set(t,a)),this.ts.set(t,a.add(n.key))}}]),e}(),kv=function(){function e(){y(this,e),this.es=new wc(bv.ns),this.ss=new wc(bv.rs)}return k(e,[{key:"isEmpty",value:function(){return this.es.isEmpty()}},{key:"addReference",value:function(e,t){var n=new bv(e,t);this.es=this.es.add(n),this.ss=this.ss.add(n)}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.us(new bv(e,t))}},{key:"cs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"hs",value:function(e){var t=this,n=new ls(new us([])),r=new bv(n,e),i=new bv(n,e+1),a=[];return this.ss.forEachInRange([r,i],(function(e){t.us(e),a.push(e.key)})),a}},{key:"ls",value:function(){var e=this;this.es.forEach((function(t){return e.us(t)}))}},{key:"us",value:function(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}},{key:"fs",value:function(e){var t=new ls(new us([])),n=new bv(t,e),r=new bv(t,e+1),i=vf();return this.ss.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new bv(e,0),n=this.es.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),bv=function(){function e(t,n){y(this,e),this.key=t,this.ds=n}return k(e,null,[{key:"ns",value:function(e,t){return ls.comparator(e.key,t.key)||ts(e.ds,t.ds)}},{key:"rs",value:function(e,t){return ts(e.ds,t.ds)||ls.comparator(e.key,t.key)}}]),e}(),wv=function(){function e(t,n){y(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this._s=new wc(bv.ns)}return k(e,[{key:"checkEmpty",value:function(e){return Es.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new $f(i,t,n,r);this.mutationQueue.push(a);var o,u=b(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this._s=this._s.add(new bv(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return Es.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return Es.resolve(this.gs(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ys(n),i=r<0?0:r;return Es.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return Es.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return Es.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new bv(t,0),i=new bv(t,Number.POSITIVE_INFINITY),a=[];return this._s.forEachInRange([r,i],(function(e){var t=n.gs(e.ds);a.push(t)})),Es.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new wc(ts);return t.forEach((function(e){var t=new bv(e,0),i=new bv(e,Number.POSITIVE_INFINITY);n._s.forEachInRange([t,i],(function(e){r=r.add(e.ds)}))})),Es.resolve(this.ps(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;ls.isDocumentKey(i)||(i=i.child(""));var a=new bv(new ls(i),0),o=new wc(ts);return this._s.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ds)),!0)}),a),Es.resolve(this.ps(o))}},{key:"ps",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.gs(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Bu(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();var r=this._s;return Es.forEach(t.mutations,(function(i){var a=new bv(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n._s=r}))}},{key:"En",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new bv(t,0),r=this._s.firstAfterOrEqual(n);return Es.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,Es.resolve()}},{key:"Is",value:function(e,t){return this.ys(e)}},{key:"ys",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"gs",value:function(e){var t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),xv=function(){function e(t){y(this,e),this.Ts=t,this.docs=new gc(ls.comparator),this.size=0}return k(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ts(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return Es.resolve(n?n.document.mutableCopy():al.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=af();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():al.newInvalidDocument(e))})),Es.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=af(),a=t.path,o=new ls(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||ks(ys(l),n)<=0||(r.has(l.key)||Jl(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return Es.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Uu()}},{key:"Es",value:function(e,t){return Es.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new _v(this)}},{key:"getSize",value:function(e){return Es.resolve(this.size)}}]),e}(),_v=function(e){_(n,e);var t=T(n);function n(e){var r;return y(this,n),(r=t.call(this)).Jn=e,r}return k(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Jn.addEntry(e,i)):t.Jn.removeEntry(r)})),Es.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Jn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Jn.getEntries(e,t)}}]),n}(ov),Ev=function(){function e(t){y(this,e),this.persistence=t,this.As=new nf((function(e){return Pl(e)}),Rl),this.lastRemoteSnapshotVersion=as.min(),this.highestTargetId=0,this.Rs=0,this.vs=new kv,this.targetCount=0,this.bs=Yd.vn()}return k(e,[{key:"forEachTarget",value:function(e,t){return this.As.forEach((function(e,n){return t(n)})),Es.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return Es.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return Es.resolve(this.Rs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.bs.next(),Es.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Rs&&(this.Rs=t),Es.resolve()}},{key:"Sn",value:function(e){this.As.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.bs=new Yd(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Sn(t),this.targetCount+=1,Es.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Sn(t),Es.resolve()}},{key:"removeTargetData",value:function(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,Es.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.As.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.As.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),Es.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return Es.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.As.get(t)||null;return Es.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.vs.os(t,n),Es.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.vs.cs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),Es.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.vs.hs(t),Es.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.vs.fs(t);return Es.resolve(n)}},{key:"containsKey",value:function(e,t){return Es.resolve(this.vs.containsKey(t))}}]),e}(),Sv=function(){function e(t,n){var r=this;y(this,e),this.Ps={},this.overlays={},this.Vs=new Ms(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=t(this),this.Ds=new Ev(this),this.indexManager=new Nd,this.remoteDocumentCache=new xv((function(e){return r.referenceDelegate.Cs(e)})),this.serializer=new Qh(n),this.xs=new yv(this.serializer)}return k(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ss=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ss}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new gv,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ps[e.toKey()];return n||(n=new wv(t,this.referenceDelegate),this.Ps[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Ds}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.xs}},{key:"runTransaction",value:function(e,t,n){var r=this;Lu("MemoryPersistence","Starting transaction:",e);var i=new Tv(this.Vs.next());return this.referenceDelegate.Ns(),n(i).next((function(e){return r.referenceDelegate.ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Os",value:function(e,t){return Es.or(Object.values(this.Ps).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),Tv=function(e){_(n,e);var t=T(n);function n(e){var r;return y(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return k(n)}(ws),Iv=function(){function e(t){y(this,e),this.persistence=t,this.$s=new kv,this.Ms=null}return k(e,[{key:"Bs",get:function(){if(this.Ms)return this.Ms;throw Uu()}},{key:"addReference",value:function(e,t,n){return this.$s.addReference(n,t),this.Bs.delete(n.toString()),Es.resolve()}},{key:"removeReference",value:function(e,t,n){return this.$s.removeReference(n,t),this.Bs.add(n.toString()),Es.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Bs.add(t.toString()),Es.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.$s.hs(t.targetId).forEach((function(e){return n.Bs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Bs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ns",value:function(){this.Ms=new Set}},{key:"ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Es.forEach(this.Bs,(function(r){var i=ls.fromPath(r);return t.Ls(e,i).next((function(e){e||n.removeEntry(i,as.min())}))})).next((function(){return t.Ms=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ls(e,t).next((function(e){e?n.Bs.delete(t.toString()):n.Bs.add(t.toString())}))}},{key:"Cs",value:function(e){return 0}},{key:"Ls",value:function(e,t){var n=this;return Es.or([function(){return Es.resolve(n.$s.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Os(e,t)}])}}],[{key:"Fs",value:function(t){return new e(t)}}]),e}(),Cv=function(){function e(t){y(this,e),this.serializer=t}return k(e,[{key:"M",value:function(e,t,n,r){var i=this,a=new Ss("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Gs,{unique:!0}),e.createObjectStore("documentMutations")}(e),Dv(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=Es.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Dv(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:as.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Gs,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return Es.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.qs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Us(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Ks(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Gs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Qs(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:ac});t.createIndex("collectionPathOverlayIndex",oc,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",uc,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Qs});t.createIndex("documentKeyIndex",Ys),t.createIndex("collectionGroupIndex",Xs)}(e)})).next((function(){return i.zs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.js(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:tc}).createIndex("sequenceNumberIndex",nc,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:rc}).createIndex("documentKeyIndex",ic,{unique:!1})}(e)}))),o}},{key:"Us",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=qd(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"qs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return Es.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return Es.forEach(r,(function(r){Bu(r.userId===n.userId);var i=Zh(t.serializer,r);return zd(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Ks",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new us(n),o=function(e){return[0,Bs(e)]}(a);r.push(t.get(o).next((function(n){return n?Es.resolve():function(n){return t.put({targetId:0,path:Bs(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return Es.waitFor(r)}))}))}},{key:"Gs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:ec});var n=t.store("collectionParents"),r=new Pd,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Bs(i)})}};return t.store("remoteDocuments").Z({Y:!0},(function(e,t){var n=new us(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({Y:!0},(function(e,t){var n=s(e,3),r=(n[0],n[1]),a=(n[2],qs(r));return i(a.popLast())}))}))}},{key:"Qs",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=ed(r),a=td(t.serializer,i);return n.put(a)}))}},{key:"zs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new ls(us.fromString(i.document.name).popFirst(5)):i.noDocument?ls.fromSegments(i.noDocument.path):i.unknownDocument?ls.fromSegments(i.unknownDocument.path):Uu()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return Es.waitFor(r)}))}},{key:"js",value:function(e,t){var n=this,r=t.store("mutations"),i=sv(this.serializer),a=new Sv(Iv.Fs,this.serializer.se);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:vf();Zh(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),Es.forEach(r,(function(e,r){var o=new Nu(r),u=cd.ie(n.serializer,o),s=a.getIndexManager(o),c=Gd.ie(o,n.serializer,s,a.referenceDelegate);return new mv(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new dc(t,Ms.ct),e).next()}))}))}}]),e}();function Dv(e){e.createObjectStore("targetDocuments",{keyPath:Js}).createIndex("documentTargetsIndex",Zs,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",$s,{unique:!0}),e.createObjectStore("targetGlobal")}var Av="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Nv=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(y(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Ws=a,this.window=o,this.document=u,this.Hs=c,this.Js=l,this.Ys=f,this.Vs=null,this.Ss=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.Xs=null,this.ti=null,this.ei=Number.NEGATIVE_INFINITY,this.ni=function(e){return Promise.resolve()},!e.D())throw new qu(zu.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new iv(this,i),this.si=n+"main",this.serializer=new Qh(s),this.ii=new Ts(this.si,this.Ys,new Cv(this.serializer)),this.Ds=new Xd(this.referenceDelegate,this.serializer),this.remoteDocumentCache=sv(this.serializer),this.xs=new od,this.window&&this.window.localStorage?this.ri=this.window.localStorage:(this.ri=null,!1===l&&Mu("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return k(e,[{key:"start",value:function(){var e=this;return this.oi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new qu(zu.FAILED_PRECONDITION,Av);return e.ui(),e.ci(),e.ai(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Ds.getHighestSequenceNumber(t)}))})).then((function(t){e.Vs=new Ms(t,e.Hs)})).then((function(){e.Ss=!0})).catch((function(t){return e.ii&&e.ii.close(),Promise.reject(t)}))}},{key:"hi",value:function(e){var t=this;return this.ni=function(){var n=v(h().mark((function n(r){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ii.B(function(){var t=v(h().mark((function t(n){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ws.enqueueAndForget(v(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.oi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"oi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Rv(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.li(t).next((function(t){t||(e.isPrimary=!1,e.Ws.enqueueRetryable((function(){return e.ni(!1)})))}))})).next((function(){return e.fi(t)})).next((function(n){return e.isPrimary&&!n?e.di(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(Ds(t))return Lu("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Lu("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Ws.enqueueRetryable((function(){return e.ni(t)})),e.isPrimary=t}))}},{key:"li",value:function(e){var t=this;return Pv(e).get("owner").next((function(e){return Es.resolve(t._i(e))}))}},{key:"mi",value:function(e){return Rv(e).delete(this.clientId)}},{key:"gi",value:function(){var e=v(h().mark((function e(){var t,n,r,i,a=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.yi(this.ei,18e5)){e.next=6;break}return this.ei=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=vc(e,"clientMetadata");return t.j().next((function(e){var n=a.pi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return Es.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ri){n=b(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ri.removeItem(this.Ii(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ai",value:function(){var e=this;this.ti=this.Ws.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.oi().then((function(){return e.gi()})).then((function(){return e.ai()}))}))}},{key:"_i",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"fi",value:function(e){var t=this;return this.Js?Es.resolve(!0):Pv(e).get("owner").next((function(n){if(null!==n&&t.yi(n.leaseTimestampMs,5e3)&&!t.Ti(n.ownerId)){if(t._i(n)&&t.networkEnabled)return!0;if(!t._i(n)){if(!n.allowTabSynchronization)throw new qu(zu.FAILED_PRECONDITION,Av);return!1}}return!(!t.networkEnabled||!t.inForeground)||Rv(e).j().next((function(e){return void 0===t.pi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Lu("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=v(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ss=!1,this.Ei(),this.ti&&(this.ti.cancel(),this.ti=null),this.Ai(),this.Ri(),e.next=7,this.ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new dc(e,Ms.ct);return t.di(n).next((function(){return t.mi(n)}))}));case 7:this.ii.close(),this.vi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pi",value:function(e,t){var n=this;return e.filter((function(e){return n.yi(e.updateTimeMs,t)&&!n.Ti(e.clientId)}))}},{key:"bi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Rv(t).j().next((function(t){return e.pi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ss}},{key:"getMutationQueue",value:function(e,t){return Gd.ie(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Ds}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Od(e,this.serializer.se.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return cd.ie(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.xs}},{key:"runTransaction",value:function(e,t,n){var r=this;Lu("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Ys)?hc:14===i?fc:13===i?lc:12===i?cc:11===i?sc:void Uu();return this.ii.runTransaction(e,o,u,(function(i){return a=new dc(i,r.Vs?r.Vs.next():Ms.ct),"readwrite-primary"===t?r.li(a).next((function(e){return!!e||r.fi(a)})).next((function(t){if(!t)throw Mu("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Ws.enqueueRetryable((function(){return r.ni(!1)})),new qu(zu.FAILED_PRECONDITION,bs);return n(a)})).next((function(e){return r.wi(a).next((function(){return e}))})):r.Pi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Pi",value:function(e){var t=this;return Pv(e).get("owner").next((function(e){if(null!==e&&t.yi(e.leaseTimestampMs,5e3)&&!t.Ti(e.ownerId)&&!t._i(e)&&!(t.Js||t.allowTabSynchronization&&e.allowTabSynchronization))throw new qu(zu.FAILED_PRECONDITION,Av)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Pv(e).put("owner",t)}},{key:"di",value:function(e){var t=this,n=Pv(e);return n.get("owner").next((function(e){return t._i(e)?(Lu("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Es.resolve()}))}},{key:"yi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Mu("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ui",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Xs=function(){e.Ws.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.oi()}))},this.document.addEventListener("visibilitychange",this.Xs),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ai",value:function(){this.Xs&&(this.document.removeEventListener("visibilitychange",this.Xs),this.Xs=null)}},{key:"ci",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ei();var e=/(?:Version|Mobile)\/1[456]/;!z()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.Ws.enterRestrictedMode(!0),t.Ws.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"Ri",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ti",value:function(e){var t;try{var n=null!==(null===(t=this.ri)||void 0===t?void 0:t.getItem(this.Ii(e)));return Lu("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Mu("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ei",value:function(){if(this.ri)try{this.ri.setItem(this.Ii(this.clientId),String(Date.now()))}catch(Ur){Mu("Failed to set zombie client id.",Ur)}}},{key:"vi",value:function(){if(this.ri)try{this.ri.removeItem(this.Ii(this.clientId))}catch(Ur){}}},{key:"Ii",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return Ts.D()}}]),e}();function Pv(e){return vc(e,"owner")}function Rv(e){return vc(e,"clientMetadata")}function Ov(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Lv=function(){function e(t,n,r,i){y(this,e),this.targetId=t,this.fromCache=n,this.Vi=r,this.Si=i}return k(e,null,[{key:"Di",value:function(t,n){var r,i=vf(),a=vf(),o=b(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Mv=function(){function e(){y(this,e),this.Ci=!1}return k(e,[{key:"initialize",value:function(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ni(e,t).next((function(a){return a||i.ki(e,t,r,n)})).next((function(n){return n||i.Oi(e,t)}))}},{key:"Ni",value:function(e,t){var n=this;if(jl(t))return Es.resolve(null);var r=Hl(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Ql(t,null,"F"),r=Hl(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=vf.apply(void 0,te(i));return n.xi.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.$i(t,i);return n.Mi(t,o,a,r.readTime)?n.Ni(e,Ql(t,null,"F")):n.Fi(e,o,t,r)}))}))})))}))}},{key:"ki",value:function(e,t,n,r){var i=this;return jl(t)||r.isEqual(as.min())?this.Oi(e,t):this.xi.getDocuments(e,n).next((function(a){var o=i.$i(t,a);return i.Mi(t,o,n,r)?i.Oi(e,t):(Ou()<=oe.DEBUG&&Lu("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),$l(t)),i.Fi(e,o,t,ms(r,-1)))}))}},{key:"$i",value:function(e,t){var n=new wc(ef(e));return t.forEach((function(t,r){Jl(e,r)&&(n=n.add(r))})),n}},{key:"Mi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Oi",value:function(e,t){return Ou()<=oe.DEBUG&&Lu("QueryEngine","Using full collection scan to execute query:",$l(t)),this.xi.getDocumentsMatchingQuery(e,t,gs.min())}},{key:"Fi",value:function(e,t,n,r){return this.xi.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Fv=function(){function e(t,n,r,i){y(this,e),this.persistence=t,this.Bi=n,this.serializer=i,this.Li=new gc(ts),this.qi=new nf((function(e){return Pl(e)}),Rl),this.Ui=new Map,this.Ki=t.getRemoteDocumentCache(),this.Ds=t.getTargetCache(),this.xs=t.getBundleCache(),this.Gi(r)}return k(e,[{key:"Gi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new mv(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Li)}))}}]),e}();function Vv(e,t,n,r){return new Fv(e,t,n,r)}function Uv(e,t){return Bv.apply(this,arguments)}function Bv(){return Bv=v(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ju(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Gi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=vf(),s=b(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=b(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(k){f.e(k)}finally{f.f()}}}catch(k){s.e(k)}finally{s.f()}var d,v=b(n);try{for(v.s();!(d=v.n()).done;){var p=d.value;o.push(p.batchId);var m,y=b(p.mutations);try{for(y.s();!(m=y.n()).done;){var g=m.value;u=u.add(g.key)}}catch(k){y.e(k)}finally{y.f()}}}catch(k){v.e(k)}finally{v.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Qi:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Bv.apply(this,arguments)}function jv(e,t){var n=ju(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ki.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=Es.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Bu(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=vf(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function zv(e){var t=ju(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Ds.getLastRemoteSnapshotVersion(e)}))}function qv(e,t){var n=ju(e),r=t.snapshotVersion,i=n.Li;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ki.newChangeBuffer({trackRemovals:!0});i=n.Li;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Ds.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Ds.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(Tc.EMPTY_BYTE_STRING,as.min()).withLastLimboFreeSnapshotVersion(as.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Ds.updateTargetData(e,c))}}));var u=af(),s=vf();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Gv(e,a,t.documentUpdates).next((function(e){u=e.zi,s=e.ji}))),!r.isEqual(as.min())){var c=n.Ds.getLastRemoteSnapshotVersion(e).next((function(t){return n.Ds.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return Es.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Li=i,e}))}function Gv(e,t,n){var r=vf(),i=vf();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=af();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(as.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Lu("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{zi:r,ji:i}}))}function Kv(e,t){var n=ju(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function Hv(e,t){var n=ju(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Ds.getTargetData(e,t).next((function(i){return i?(r=i,Es.resolve(r)):n.Ds.allocateTargetId(e).next((function(i){return r=new Wh(t,i,0,e.currentSequenceNumber),n.Ds.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Li.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Li=n.Li.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}function Wv(e,t,n){return Qv.apply(this,arguments)}function Qv(){return Qv=v(h().mark((function e(t,n,r){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=ju(t),a=i.Li.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Ds(e.t1)){e.next=12;break}throw e.t1;case 12:Lu("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Li=i.Li.remove(n),i.qi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Qv.apply(this,arguments)}function Yv(e,t,n){var r=ju(e),i=as.min(),a=vf();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=ju(e),i=r.qi.get(n);return void 0!==i?Es.resolve(r.Li.get(i)):r.Ds.getTargetData(t,n)}(r,e,Hl(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ds.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Bi.getDocumentsMatchingQuery(e,t,n?i:as.min(),n?a:vf())})).next((function(e){return Jv(r,Zl(t),e),{documents:e,Wi:a}}))}))}function Xv(e,t){var n=ju(e),r=ju(n.Ds),i=n.Li.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ne(e,t).next((function(e){return e?e.target:null}))}))}function $v(e,t){var n=ju(e),r=n.Ui.get(t)||as.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Ki.getAllFromCollectionGroup(e,t,ms(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Jv(n,t,e),e}))}function Jv(e,t,n){var r=e.Ui.get(t)||as.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ui.set(t,r)}function Zv(e,t,n,r){return ep.apply(this,arguments)}function ep(){return ep=v(h().mark((function e(t,n,r,i){var a,o,u,s,c,l,f,d,v,p;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=ju(t),o=vf(),u=af(),s=b(r);try{for(s.s();!(c=s.n()).done;)l=c.value,f=n.Hi(l.metadata.name),l.document&&(o=o.add(f)),(d=n.Ji(l)).setReadTime(n.Yi(l.metadata.readTime)),u=u.insert(f,d)}catch(h){s.e(h)}finally{s.f()}return v=a.Ki.newChangeBuffer({trackRemovals:!0}),e.next=7,Hv(a,function(e){return Hl(Bl(us.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Gv(e,v,u).next((function(t){return v.apply(e),t})).next((function(t){return a.Ds.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Ds.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.zi,t.ji)})).next((function(){return t.zi}))}))})));case 9:case"end":return e.stop()}}),e)}))),ep.apply(this,arguments)}function tp(e,t){return np.apply(this,arguments)}function np(){return np=v(h().mark((function e(t,n){var r,i,a,o=arguments;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:vf(),e.next=3,Hv(t,Hl(nd(n.bundledQuery)));case 3:return i=e.sent,a=ju(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=wh(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.xs.saveNamedQuery(e,n);var o=i.withResumeToken(Tc.EMPTY_BYTE_STRING,t);return a.Li=a.Li.insert(o.targetId,o),a.Ds.updateTargetData(e,o).next((function(){return a.Ds.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Ds.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.xs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),np.apply(this,arguments)}function rp(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function ip(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function ap(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var op=function(){function e(t,n,r,i){y(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return k(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new qu(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Mu("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),up=function(){function e(t,n,r){y(this,e),this.targetId=t,this.state=n,this.error=r}return k(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new qu(i.error.code,i.error.message))),a?new e(t,i.state,r):(Mu("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),sp=function(){function e(t,n){y(this,e),this.clientId=t,this.activeTargetIds=n}return k(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=mf(),o=0;i&&o<r.activeTargetIds.length;++o)i=Us(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Mu("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),cp=function(){function e(t,n){y(this,e),this.clientId=t,this.onlineState=n}return k(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Mu("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),lp=function(){function e(){y(this,e),this.activeTargetIds=mf()}return k(e,[{key:"tr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Xi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),fp=function(){function e(t,n,r,i,a){y(this,e),this.window=t,this.Ws=n,this.persistenceKey=r,this.nr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.sr=this.ir.bind(this),this.rr=new gc(ts),this.started=!1,this.ur=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.cr=rp(this.persistenceKey,this.nr),this.ar=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.rr=this.rr.insert(this.nr,new lp),this.hr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.lr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.dr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this._r=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.sr)}return k(e,[{key:"start",value:function(){var e=v(h().mark((function e(){var t,n,r,i,a,o,u,s,c,l,f,d=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.bi();case 2:t=e.sent,n=b(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.nr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(rp(this.persistenceKey,i)))&&(o=sp.Zi(i,a))&&(this.rr=this.rr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.mr(),(u=this.storage.getItem(this.wr))&&(s=this.gr(u))&&this.yr(s),c=b(this.ur);try{for(c.s();!(l=c.n()).done;)f=l.value,this.ir(f)}catch(h){c.e(h)}finally{c.f()}this.ur=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ar,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.pr(this.rr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.rr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Ir(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Ir(e,t,n),this.Tr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(ap(this.persistenceKey,e));if(n){var r=up.Zi(e,n);r&&(t=r.state)}}return this.Er.tr(e),this.mr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Er.er(e),this.mr()}},{key:"isLocalQueryTarget",value:function(e){return this.Er.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(ap(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Ar(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Tr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Rr(e)}},{key:"notifyBundleLoaded",value:function(e){this.vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.sr),this.removeItem(this.cr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Lu("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Lu("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Lu("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ir",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Lu("SharedClientState","EVENT",n.key,n.newValue),n.key===this.cr)return void Mu("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ws.enqueueRetryable(v(h().mark((function e(){var r,i,a,o,u,s,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.hr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.br(n.key),e.abrupt("return",t.Pr(r,null));case 6:if(!(i=t.Vr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Pr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.lr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Sr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Dr(a));case 16:e.next=41;break;case 18:if(!t.dr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Cr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Nr(o));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.gr(n.newValue))){e.next=30;break}return e.abrupt("return",t.yr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ar){e.next=37;break}s=function(e){var t=Ms.ct;if(null!=e)try{var n=JSON.parse(e);Bu("number"==typeof n),t=n}catch(e){Mu("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Ms.ct&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t._r){e.next=41;break}return c=t.kr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Or(e)})));case 41:e.next=44;break;case 43:t.ur.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Er",get:function(){return this.rr.get(this.nr)}},{key:"mr",value:function(){this.setItem(this.cr,this.Er.Xi())}},{key:"Ir",value:function(e,t,n){var r=new op(this.currentUser,e,t,n),i=ip(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Xi())}},{key:"Tr",value:function(e){var t=ip(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Rr",value:function(e){var t={clientId:this.nr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Ar",value:function(e,t,n){var r=ap(this.persistenceKey,e),i=new up(e,t,n);this.setItem(r,i.Xi())}},{key:"vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}},{key:"br",value:function(e){var t=this.hr.exec(e);return t?t[1]:null}},{key:"Vr",value:function(e,t){var n=this.br(e);return sp.Zi(n,t)}},{key:"Sr",value:function(e,t){var n=this.lr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return op.Zi(new Nu(i),r,t)}},{key:"Cr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]);return up.Zi(r,t)}},{key:"gr",value:function(e){return cp.Zi(e)}},{key:"kr",value:function(e){return JSON.parse(e)}},{key:"Dr",value:function(){var e=v(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.$r(t.batchId,t.state,t.error));case 2:Lu("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Nr",value:function(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}},{key:"Pr",value:function(e,t){var n=this,r=t?this.rr.insert(e,t):this.rr.remove(e),i=this.pr(this.rr),a=this.pr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Fr(o,u).then((function(){n.rr=r}))}},{key:"yr",value:function(e){this.rr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"pr",value:function(e){var t=mf();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),hp=function(){function e(){y(this,e),this.Br=new lp,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return k(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Br.tr(e),this.Lr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Lr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Br.er(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Br.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Lr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Br.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Br.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Br=new lp,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),dp=function(){function e(){y(this,e)}return k(e,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),vp=function(){function e(){var t=this;y(this,e),this.Ur=function(){return t.Kr()},this.Gr=function(){return t.Qr()},this.zr=[],this.jr()}return k(e,[{key:"qr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}},{key:"jr",value:function(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}},{key:"Kr",value:function(){Lu("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=b(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Qr",value:function(){Lu("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=b(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),pp=null;function mp(){return null===pp?pp=268435456+Math.round(2147483648*Math.random()):pp++,"0x"+pp.toString(16)}var yp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},gp=function(){function e(t){y(this,e),this.Wr=t.Wr,this.Hr=t.Hr}return k(e,[{key:"Jr",value:function(e){this.Yr=e}},{key:"Zr",value:function(e){this.Xr=e}},{key:"onMessage",value:function(e){this.eo=e}},{key:"close",value:function(){this.Hr()}},{key:"send",value:function(e){this.Wr(e)}},{key:"no",value:function(){this.Yr()}},{key:"so",value:function(e){this.Xr(e)}},{key:"io",value:function(e){this.eo(e)}}]),e}(),kp="WebChannelConnection",bp=function(e){_(n,e);var t=T(n);function n(e){var r;return y(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return k(n,[{key:"lo",value:function(e,t,n,r){var i=mp();return new Promise((function(a,o){var u=new Du;u.setWithCredentials(!0),u.listenOnce(Eu.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case _u.NO_ERROR:var t=u.getResponseJson();Lu(kp,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case _u.TIMEOUT:Lu(kp,"RPC '".concat(e,"' ").concat(i," timed out")),o(new qu(zu.DEADLINE_EXCEEDED,"Request time out"));break;case _u.HTTP_ERROR:var n=u.getStatus();if(Lu(kp,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(zu).indexOf(t)>=0?t:zu.UNKNOWN}(s.status);o(new qu(c,s.message))}else o(new qu(zu.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new qu(zu.UNAVAILABLE,"Connection failed."));break;default:Uu()}}finally{Lu(kp,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);Lu(kp,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"wo",value:function(e,t,n){var r=mp(),i=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=wu(),o=xu(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new Iu({})),this.ho(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var s=i.join("");Lu(kp,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(s),u);var c=a.createWebChannel(s,u),l=!1,f=!1,h=new gp({Wr:function(t){f?Lu(kp,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(l||(Lu(kp,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),l=!0),Lu(kp,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},Hr:function(){return c.close()}}),d=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return d(c,Cu.EventType.OPEN,(function(){f||Lu(kp,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),d(c,Cu.EventType.CLOSE,(function(){f||(f=!0,Lu(kp,"RPC '".concat(e,"' stream ").concat(r," transport closed")),h.so())})),d(c,Cu.EventType.ERROR,(function(t){f||(f=!0,Fu(kp,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),h.so(new qu(zu.UNAVAILABLE,"The operation could not be completed")))})),d(c,Cu.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];Bu(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Lu(kp,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=Wf[e];if(void 0!==t)return nh(t)}(u),l=o.message;void 0===s&&(s=zu.INTERNAL,l="Unknown error status: "+u+" with message "+o.message),f=!0,h.so(new qu(s,l)),c.close()}else Lu(kp,"RPC '".concat(e,"' stream ").concat(r," received:"),i),h.io(i)}})),d(o,Su.STAT_EVENT,(function(t){t.stat===Tu.PROXY?Lu(kp,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===Tu.NOPROXY&&Lu(kp,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){h.no()}),0),h}}]),n}(function(){function e(t){y(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.ro=n+"://"+t.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return k(e,[{key:"uo",get:function(){return!1}},{key:"co",value:function(e,t,n,r,i){var a=mp(),o=this.ao(e,t);Lu("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this.ho(u,r,i),this.lo(e,o,u,n).then((function(t){return Lu("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Fu("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"fo",value:function(e,t,n,r,i,a){return this.co(e,t,n,r,i)}},{key:"ho",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Pu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ao",value:function(e,t){var n=yp[e];return"".concat(this.ro,"/v1/").concat(t,":").concat(n)}}]),e}());function wp(){return"undefined"!=typeof window?window:null}function xp(){return"undefined"!=typeof document?document:null}function _p(e){return new yh(e,!0)}var Ep=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;y(this,e),this.Ws=t,this.timerId=n,this._o=r,this.mo=i,this.yo=a,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}return k(e,[{key:"reset",value:function(){this.po=0}},{key:"Eo",value:function(){this.po=this.yo}},{key:"Ao",value:function(e){var t=this;this.cancel();var n=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,n-r);i>0&&Lu("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.po," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Io=this.Ws.enqueueAfterDelay(this.timerId,i,(function(){return t.To=Date.now(),e()})),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}},{key:"vo",value:function(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}},{key:"cancel",value:function(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}},{key:"Ro",value:function(){return(Math.random()-.5)*this.po}}]),e}(),Sp=function(){function e(t,n,r,i,a,o,u,s){y(this,e),this.Ws=t,this.bo=r,this.Po=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new Ep(t,n)}return k(e,[{key:"xo",value:function(){return 1===this.state||5===this.state||this.No()}},{key:"No",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.ko()}},{key:"stop",value:function(){var e=v(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.xo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oo",value:function(){this.state=0,this.Co.reset()}},{key:"$o",value:function(){var e=this;this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,(function(){return e.Mo()})))}},{key:"Fo",value:function(e){this.Bo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=v(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.No()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){this.So&&(this.So.cancel(),this.So=null)}},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"close",value:function(){var e=v(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Bo(),this.Lo(),this.Co.cancel(),this.Vo++,4!==t?this.Co.reset():n&&n.code===zu.RESOURCE_EXHAUSTED?(Mu(n.toString()),Mu("Using maximum backoff delay to prevent overloading the backend."),this.Co.Eo()):n&&n.code===zu.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.qo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"qo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Uo(this.Vo),n=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=s(t,2),i=r[0],a=r[1];e.Vo===n&&e.Ko(i,a)}),(function(n){t((function(){var t=new qu(zu.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Go(t)}))}))}},{key:"Ko",value:function(e,t){var n=this,r=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr((function(){r((function(){return n.state=2,n.Do=n.Ws.enqueueAfterDelay(n.Po,1e4,(function(){return n.No()&&(n.state=3),Promise.resolve()})),n.listener.Jr()}))})),this.stream.Zr((function(e){r((function(){return n.Go(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"ko",value:function(){var e=this;this.state=5,this.Co.Ao(v(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Go",value:function(e){return Lu("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Uo",value:function(e){var t=this;return function(n){t.Ws.enqueueAndForget((function(){return t.Vo===e?n():(Lu("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),Tp=function(e){_(n,e);var t=T(n);function n(e,r,i,a,o,u){var s;return y(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return k(n,[{key:"Qo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Co.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Uu()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Bu(void 0===t||"string"==typeof t),Tc.fromBase64String(t||"")):(Bu(void 0===t||t instanceof Uint8Array),Tc.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?zu.UNKNOWN:nh(e.code);return new qu(t,e.message||"")}(o);n=new ch(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=Sh(e,s.document.name),l=wh(s.document.updateTime),f=s.document.createTime?wh(s.document.createTime):as.min(),h=new rl({mapValue:{fields:s.document.fields}}),d=al.newFoundDocument(c,l,f,h),v=s.targetIds||[],p=s.removedTargetIds||[];n=new uh(v,p,d.key,d)}else if("documentDelete"in t){t.documentDelete;var m=t.documentDelete;m.document;var y=Sh(e,m.document),g=m.readTime?wh(m.readTime):as.min(),k=al.newNoDocument(y,g),b=m.removedTargetIds||[];n=new uh([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var x=Sh(e,w.document),_=w.removedTargetIds||[];n=new uh([],_,x,null)}else{if(!("filter"in t))return Uu();t.filter;var E=t.filter;E.targetId;var S=E.count||0,T=new eh(S),I=E.targetId;n=new sh(I,T)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return as.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?as.min():t.readTime?wh(t.readTime):as.min()}(e);return this.listener.zo(t,n)}},{key:"jo",value:function(e){var t={};t.database=Ch(this.serializer),t.addTarget=function(e,t){var n,r=t.target;return(n=Ol(r)?{documents:Lh(e,r)}:{query:Mh(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=kh(e,t.resumeToken):t.snapshotVersion.compareTo(as.min())>0&&(n.readTime=gh(e,t.snapshotVersion.toTimestamp())),n}(this.serializer,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Uu()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Fo(t)}},{key:"Wo",value:function(e){var t={};t.database=Ch(this.serializer),t.removeTarget=e,this.Fo(t)}}]),n}(Sp),Ip=function(e){_(n,e);var t=T(n);function n(e,r,i,a,o,u){var s;return y(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.Ho=!1,s}return k(n,[{key:"Jo",get:function(){return this.Ho}},{key:"start",value:function(){this.Ho=!1,this.lastStreamToken=void 0,Er(E(n.prototype),"start",this).call(this)}},{key:"qo",value:function(){this.Ho&&this.Yo([])}},{key:"Qo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(Bu(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();var t=function(e,t){return e&&e.length>0?(Bu(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?wh(e.updateTime):wh(t);return n.isEqual(as.min())&&(n=wh(t)),new Rf(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=wh(e.commitTime);return this.listener.Zo(n,t)}return Bu(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}},{key:"tu",value:function(){var e={};e.database=Ch(this.serializer),this.Fo(e)}},{key:"Yo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Rh(t.serializer,e)}))};this.Fo(n)}}]),n}(Sp),Cp=function(e){_(n,e);var t=T(n);function n(e,r,i,a){var o;return y(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.eu=!1,o}return k(n,[{key:"nu",value:function(){if(this.eu)throw new qu(zu.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.connection.co(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===zu.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new qu(zu.UNKNOWN,e.toString())}))}},{key:"fo",value:function(e,t,n,r){var i=this;return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=s(a,2),u=o[0],c=o[1];return i.connection.fo(e,t,n,u,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===zu.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new qu(zu.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.eu=!0}}]),n}(function(){return k((function e(){y(this,e)}))}());var Dp=function(){function e(t,n){y(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}return k(e,[{key:"ou",value:function(){var e=this;0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.iu=null,e.cu("Backend didn't respond within 10 seconds."),e.uu("Offline"),Promise.resolve()})))}},{key:"au",value:function(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.uu("Offline")))}},{key:"set",value:function(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}},{key:"uu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"cu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ru?(Mu(t),this.ru=!1):Lu("OnlineStateTracker",t)}},{key:"hu",value:function(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}]),e}(),Ap=k((function e(t,n,r,i,a){var o=this;y(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=a,this._u.qr((function(e){r.enqueueAndForget(v(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=jp(o),!e.t0){e.next=5;break}return Lu("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=v(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=ju(t)).du.add(4),e.next=4,Rp(n);case 4:return n.mu.set("Unknown"),n.du.delete(4),e.next=8,Np(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.mu=new Dp(r,i)}));function Np(e){return Pp.apply(this,arguments)}function Pp(){return Pp=v(h().mark((function e(t){var n,r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!jp(t)){e.next=18;break}n=b(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Pp.apply(this,arguments)}function Rp(e){return Op.apply(this,arguments)}function Op(){return Op=v(h().mark((function e(t){var n,r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=b(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Op.apply(this,arguments)}function Lp(e,t){var n=ju(e);n.fu.has(t.targetId)||(n.fu.set(t.targetId,t),Bp(n)?Up(n):mm(n).No()&&Fp(n,t))}function Mp(e,t){var n=ju(e),r=mm(n);n.fu.delete(t),r.No()&&Vp(n,t),0===n.fu.size&&(r.No()?r.$o():jp(n)&&n.mu.set("Unknown"))}function Fp(e,t){e.gu.Ot(t.targetId),mm(e).jo(t)}function Vp(e,t){e.gu.Ot(t),mm(e).Wo(t)}function Up(e){e.gu=new fh({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ne:function(t){return e.fu.get(t)||null}}),mm(e).start(),e.mu.ou()}function Bp(e){return jp(e)&&!mm(e).xo()&&e.fu.size>0}function jp(e){return 0===ju(e).du.size}function zp(e){e.gu=void 0}function qp(e){return Gp.apply(this,arguments)}function Gp(){return Gp=v(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.fu.forEach((function(e,n){Fp(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Gp.apply(this,arguments)}function Kp(e,t){return Hp.apply(this,arguments)}function Hp(){return Hp=v(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:zp(t),Bp(t)?(t.mu.au(n),Up(t)):t.mu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),Hp.apply(this,arguments)}function Wp(e,t,n){return Qp.apply(this,arguments)}function Qp(){return Qp=v(h().mark((function e(t,n,r){var i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.mu.set("Online"),!(n instanceof ch&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=v(h().mark((function e(t,n){var r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=b(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.fu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.fu.delete(o),t.gu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Lu("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Yp(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof uh?t.gu.Kt(n):n instanceof sh?t.gu.Jt(n):t.gu.zt(n),r.isEqual(as.min())){e.next=29;break}return e.prev=14,e.next=17,zv(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.gu.Xt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.fu.get(r);i&&e.fu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.fu.get(t);if(n){e.fu.set(t,n.withResumeToken(Tc.EMPTY_BYTE_STRING,n.snapshotVersion)),Vp(e,t);var r=new Wh(n.target,t,1,n.sequenceNumber);Fp(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Lu("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Yp(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Qp.apply(this,arguments)}function Yp(e,t,n){return Xp.apply(this,arguments)}function Xp(){return Xp=v(h().mark((function e(t,n,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ds(n)){e.next=2;break}throw n;case 2:return t.du.add(1),e.next=5,Rp(t);case 5:t.mu.set("Offline"),r||(r=function(){return zv(t.localStore)}),t.asyncQueue.enqueueRetryable(v(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Lu("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.du.delete(1),e.next=6,Np(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Xp.apply(this,arguments)}function $p(e,t){return t().catch((function(n){return Yp(e,n,t)}))}function Jp(e){return Zp.apply(this,arguments)}function Zp(){return Zp=v(h().mark((function e(t){var n,r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ju(t),r=ym(n),i=n.lu.length>0?n.lu[n.lu.length-1].batchId:-1;case 2:if(!em(n)){e.next=19;break}return e.prev=3,e.next=6,Kv(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.lu.length&&r.$o(),e.abrupt("break",19);case 10:i=a.batchId,tm(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Yp(n,e.t0);case 17:e.next=2;break;case 19:nm(n)&&rm(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Zp.apply(this,arguments)}function em(e){return jp(e)&&e.lu.length<10}function tm(e,t){e.lu.push(t);var n=ym(e);n.No()&&n.Jo&&n.Yo(t.mutations)}function nm(e){return jp(e)&&!ym(e).xo()&&e.lu.length>0}function rm(e){ym(e).start()}function im(e){return am.apply(this,arguments)}function am(){return am=v(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:ym(t).tu();case 1:case"end":return e.stop()}}),e)}))),am.apply(this,arguments)}function om(e){return um.apply(this,arguments)}function um(){return um=v(h().mark((function e(t){var n,r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=ym(t),r=b(t.lu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Yo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),um.apply(this,arguments)}function sm(e,t,n){return cm.apply(this,arguments)}function cm(){return cm=v(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.lu.shift(),a=Jf.from(i,n,r),e.next=3,$p(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Jp(t);case 5:case"end":return e.stop()}}),e)}))),cm.apply(this,arguments)}function lm(e,t){return fm.apply(this,arguments)}function fm(){return fm=v(h().mark((function e(t,n){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&ym(t).Jo,!e.t0){e.next=4;break}return e.next=4,function(){var e=v(h().mark((function e(t,n){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!th(i=n.code)||i===zu.ABORTED){e.next=7;break}return r=t.lu.shift(),ym(t).Oo(),e.next=5,$p(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Jp(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:nm(t)&&rm(t);case 5:case"end":return e.stop()}}),e)}))),fm.apply(this,arguments)}function hm(e,t){return dm.apply(this,arguments)}function dm(){return dm=v(h().mark((function e(t,n){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=ju(t)).asyncQueue.verifyOperationInProgress(),Lu("RemoteStore","RemoteStore received new credentials"),i=jp(r),r.du.add(3),e.next=6,Rp(r);case 6:return i&&r.mu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.du.delete(3),e.next=12,Np(r);case 12:case"end":return e.stop()}}),e)}))),dm.apply(this,arguments)}function vm(e,t){return pm.apply(this,arguments)}function pm(){return pm=v(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ju(t),!n){e.next=7;break}return r.du.delete(2),e.next=5,Np(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.du.add(2),e.next=12,Rp(r);case 12:r.mu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),pm.apply(this,arguments)}function mm(e){return e.yu||(e.yu=function(e,t,n){var r=ju(e);return r.nu(),new Tp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Jr:qp.bind(null,e),Zr:Kp.bind(null,e),zo:Wp.bind(null,e)}),e.wu.push(function(){var t=v(h().mark((function t(n){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.yu.Oo(),Bp(e)?Up(e):e.mu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.yu.stop();case 6:zp(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.yu}function ym(e){return e.pu||(e.pu=function(e,t,n){var r=ju(e);return r.nu(),new Ip(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Jr:im.bind(null,e),Zr:lm.bind(null,e),Xo:om.bind(null,e),Zo:sm.bind(null,e)}),e.wu.push(function(){var t=v(h().mark((function t(n){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.pu.Oo(),t.next=4,Jp(e);case 4:t.next=9;break;case 6:return t.next=8,e.pu.stop();case 8:e.lu.length>0&&(Lu("RemoteStore","Stopping write stream with ".concat(e.lu.length," pending writes")),e.lu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}var gm=function(){function e(t,n,r,i,a){y(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Gu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return k(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new qu(zu.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function km(e,t){if(Mu("AsyncQueue","".concat(t,": ").concat(e)),Ds(e))return new qu(zu.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var bm=function(){function e(t){y(this,e),this.comparator=t?function(e,n){return t(e,n)||ls.comparator(e.key,n.key)}:function(e,t){return ls.comparator(e.key,t.key)},this.keyedMap=uf(),this.sortedSet=new gc(this.comparator)}return k(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),wm=function(){function e(){y(this,e),this.Iu=new gc(ls.comparator)}return k(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Iu.get(t);n?0!==e.type&&3===n.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==n.type?this.Iu=this.Iu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Iu=this.Iu.remove(t):1===e.type&&2===n.type?this.Iu=this.Iu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):Uu():this.Iu=this.Iu.insert(t,e)}},{key:"Tu",value:function(){var e=[];return this.Iu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),xm=function(){function e(t,n,r,i,a,o,u,s,c){y(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return k(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Yl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,bm.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),_m=k((function e(){y(this,e),this.Eu=void 0,this.listeners=[]})),Em=k((function e(){y(this,e),this.queries=new nf((function(e){return Xl(e)}),Yl),this.onlineState="Unknown",this.Au=new Set}));function Sm(e,t){return Tm.apply(this,arguments)}function Tm(){return Tm=v(h().mark((function e(t,n){var r,i,a,o,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ju(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new _m),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Eu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=km(e.t0,"Initialization of query '".concat($l(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Ru(r.onlineState),o.Eu&&n.vu(o.Eu)&&Nm(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),Tm.apply(this,arguments)}function Im(e,t){return Cm.apply(this,arguments)}function Cm(){return Cm=v(h().mark((function e(t,n){var r,i,a,o,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ju(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Cm.apply(this,arguments)}function Dm(e,t){var n,r=ju(e),i=!1,a=b(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=b(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.vu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Eu=o}}}catch(f){a.e(f)}finally{a.f()}i&&Nm(r)}function Am(e,t,n){var r=ju(e),i=r.queries.get(t);if(i){var a,o=b(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Nm(e){e.Au.forEach((function(e){e.next()}))}var Pm=function(){function e(t,n,r){y(this,e),this.query=t,this.bu=n,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}return k(e,[{key:"vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=b(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new xm(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),a=!0):this.Du(e,this.onlineState)&&(this.Cu(e),a=!0),this.Vu=e,a}},{key:"onError",value:function(e){this.bu.error(e)}},{key:"Ru",value:function(e){this.onlineState=e;var t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}},{key:"Du",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.xu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Su",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Cu",value:function(e){e=xm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}]),e}(),Rm=function(){function e(t,n){y(this,e),this.Nu=t,this.byteLength=n}return k(e,[{key:"ku",value:function(){return"metadata"in this.Nu}}]),e}(),Om=function(){function e(t){y(this,e),this.serializer=t}return k(e,[{key:"Hi",value:function(e){return Sh(this.serializer,e)}},{key:"Ji",value:function(e){return e.metadata.exists?Nh(this.serializer,e.document,!1):al.newNoDocument(this.Hi(e.metadata.name),this.Yi(e.metadata.readTime))}},{key:"Yi",value:function(e){return wh(e)}}]),e}(),Lm=function(){function e(t,n,r){y(this,e),this.Ou=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Mm(t)}return k(e,[{key:"$u",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Nu.namedQuery)this.queries.push(e.Nu.namedQuery);else if(e.Nu.documentMetadata){this.documents.push({metadata:e.Nu.documentMetadata}),e.Nu.documentMetadata.exists||++t;var n=us.fromString(e.Nu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Nu.document&&(this.documents[this.documents.length-1].document=e.Nu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Mu",value:function(e){var t,n=new Map,r=new Om(this.serializer),i=b(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Hi(a.metadata.name),s=b(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||vf()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=v(h().mark((function e(){var t,n,r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Zv(this.localStore,new Om(this.serializer),this.documents,this.Ou.id);case 2:t=e.sent,n=this.Mu(this.documents),r=b(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,tp(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Fu:this.collectionGroups,Bu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Mm(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Fm=k((function e(t){y(this,e),this.key=t})),Vm=k((function e(t){y(this,e),this.key=t})),Um=function(){function e(t,n){y(this,e),this.query=t,this.Lu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=vf(),this.mutatedKeys=vf(),this.Ku=ef(t),this.Gu=new bm(this.Ku)}return k(e,[{key:"Qu",get:function(){return this.Lu}},{key:"zu",value:function(e,t){var n=this,r=t?t.ju:new wm,i=t?t.Gu:this.Gu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Jl(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),v=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),v=!0):n.Wu(l,f)||(r.track({type:2,doc:f}),v=!0,(s&&n.Ku(f,s)>0||c&&n.Ku(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),v=!0):l&&!f&&(r.track({type:1,doc:l}),v=!0,(s||c)&&(u=!0)),v&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Gu:o,ju:r,Mi:u,mutatedKeys:a}}},{key:"Wu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;var a=e.ju.Tu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Uu()}};return n(e)-n(t)}(e.type,t.type)||r.Ku(e.doc,t.doc)})),this.Hu(n);var o=t?this.Ju():[],u=0===this.Uu.size&&this.current?1:0,s=u!==this.qu;return this.qu=u,0!==a.length||s?{snapshot:new xm(this.query,e.Gu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Yu:o}:{Yu:o}}},{key:"Ru",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new wm,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}},{key:"Zu",value:function(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}},{key:"Hu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Lu=t.Lu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Lu=t.Lu.delete(e)})),this.current=e.current)}},{key:"Ju",value:function(){var e=this;if(!this.current)return[];var t=this.Uu;this.Uu=vf(),this.Gu.forEach((function(t){e.Zu(t.key)&&(e.Uu=e.Uu.add(t.key))}));var n=[];return t.forEach((function(t){e.Uu.has(t)||n.push(new Vm(t))})),this.Uu.forEach((function(e){t.has(e)||n.push(new Fm(e))})),n}},{key:"Xu",value:function(e){this.Lu=e.Wi,this.Uu=vf();var t=this.zu(e.documents);return this.applyChanges(t,!0)}},{key:"tc",value:function(){return xm.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}]),e}(),Bm=k((function e(t,n,r){y(this,e),this.query=t,this.targetId=n,this.view=r})),jm=k((function e(t){y(this,e),this.key=t,this.ec=!1})),zm=function(){function e(t,n,r,i,a,o){y(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.nc={},this.sc=new nf((function(e){return Xl(e)}),Yl),this.ic=new Map,this.rc=new Set,this.oc=new gc(ls.comparator),this.uc=new Map,this.cc=new kv,this.ac={},this.hc=new Map,this.lc=Yd.bn(),this.onlineState="Unknown",this.fc=void 0}return k(e,[{key:"isPrimaryClient",get:function(){return!0===this.fc}}]),e}();function qm(e,t){return Gm.apply(this,arguments)}function Gm(){return Gm=v(h().mark((function e(t,n){var r,i,a,o,u,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=My(t),!(o=r.sc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.tc(),e.next=15;break;case 6:return e.next=8,Hv(r.localStore,Hl(n));case 8:return u=e.sent,r.isPrimaryClient&&Lp(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,Km(r,n,i,"current"===s,u.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),Gm.apply(this,arguments)}function Km(e,t,n,r,i){return Hm.apply(this,arguments)}function Hm(){return Hm=v(h().mark((function e(t,n,r,i,a){var o,u,s,c,l,f;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dc=function(e,n,r){return function(){var e=v(h().mark((function e(t,n,r,i){var a,o,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.zu(r),e.t0=a.Mi,!e.t0){e.next=6;break}return e.next=5,Yv(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.zu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(hy(t,n.targetId,u.Yu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Yv(t.localStore,n,!0);case 3:return o=e.sent,u=new Um(n,o.Wi),s=u.zu(o.documents),c=oh.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),l=u.applyChanges(s,t.isPrimaryClient,c),hy(t,r,l.Yu),f=new Bm(n,r,u),e.abrupt("return",(t.sc.set(n,f),t.ic.has(r)?t.ic.get(r).push(n):t.ic.set(r,[n]),l.snapshot));case 11:case"end":return e.stop()}}),e)}))),Hm.apply(this,arguments)}function Wm(e,t){return Qm.apply(this,arguments)}function Qm(){return Qm=v(h().mark((function e(t,n){var r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=ju(t),i=r.sc.get(n),!((a=r.ic.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ic.set(i.targetId,a.filter((function(e){return!Yl(e,n)}))),void r.sc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,Wv(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Mp(r.remoteStore,i.targetId),ly(r,i.targetId)})).catch(xs);case 9:e.next=14;break;case 11:return ly(r,i.targetId),e.next=14,Wv(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Qm.apply(this,arguments)}function Ym(e,t,n){return Xm.apply(this,arguments)}function Xm(){return Xm=v(h().mark((function e(t,n,r){var i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Fy(t),e.prev=1,e.next=4,function(e,t){var n,r,i=ju(e),a=is.now(),o=t.reduce((function(e,t){return e.add(t.key)}),vf());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=af(),s=vf();return i.Ki.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=b(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Bf(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new qf(c.key,l,il(l.value.mapValue),Of.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:sf(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ac[e.currentUser.toKey()];r||(r=new gc(ts)),r=r.insert(t,n),e.ac[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,py(i,a.changes);case 9:return e.next=11,Jp(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=km(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Xm.apply(this,arguments)}function $m(e,t){return Jm.apply(this,arguments)}function Jm(){return Jm=v(h().mark((function e(t,n){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ju(t),e.prev=1,e.next=4,qv(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.uc.get(t);n&&(Bu(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ec=!0:e.modifiedDocuments.size>0?Bu(n.ec):e.removedDocuments.size>0&&(Bu(n.ec),n.ec=!1))})),e.next=8,py(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,xs(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Jm.apply(this,arguments)}function Zm(e,t,n){var r=ju(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.sc.forEach((function(e,n){var r=n.view.Ru(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=ju(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=b(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Ru(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Nm(n)}(r.eventManager,t),i.length&&r.nc.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function ey(e,t,n){return ty.apply(this,arguments)}function ty(){return ty=v(h().mark((function e(t,n,r){var i,a,o,u,s,c;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=ju(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.uc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new gc(ls.comparator)).insert(o,al.newNoDocument(o,as.min())),s=vf().add(o),c=new ah(as.min(),new Map,new wc(ts),u,s),e.next=9,$m(i,c);case 9:i.oc=i.oc.remove(o),i.uc.delete(n),vy(i),e.next=16;break;case 14:return e.next=16,Wv(i.localStore,n,!1).then((function(){return ly(i,n,r)})).catch(xs);case 16:case"end":return e.stop()}}),e)}))),ty.apply(this,arguments)}function ny(e,t){return ry.apply(this,arguments)}function ry(){return ry=v(h().mark((function e(t,n){var r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ju(t),i=n.batch.batchId,e.prev=1,e.next=4,jv(r.localStore,n);case 4:return a=e.sent,cy(r,i,null),sy(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,py(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,xs(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),ry.apply(this,arguments)}function iy(e,t,n){return ay.apply(this,arguments)}function ay(){return ay=v(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=ju(t),e.prev=1,e.next=4,function(e,t){var n=ju(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Bu(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,cy(i,n,r),sy(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,py(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,xs(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),ay.apply(this,arguments)}function oy(e,t){return uy.apply(this,arguments)}function uy(){return uy=v(h().mark((function e(t,n){var r,i,a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return jp((r=ju(t)).remoteStore)||Lu("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=ju(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.hc.get(i)||[]).push(n),r.hc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=km(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),uy.apply(this,arguments)}function sy(e,t){(e.hc.get(t)||[]).forEach((function(e){e.resolve()})),e.hc.delete(t)}function cy(e,t,n){var r=ju(e),i=r.ac[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ac[r.currentUser.toKey()]=i}}function ly(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=b(e.ic.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.sc.delete(a),n&&e.nc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ic.delete(t),e.isPrimaryClient&&e.cc.hs(t).forEach((function(t){e.cc.containsKey(t)||fy(e,t)}))}function fy(e,t){e.rc.delete(t.path.canonicalString());var n=e.oc.get(t);null!==n&&(Mp(e.remoteStore,n),e.oc=e.oc.remove(t),e.uc.delete(n),vy(e))}function hy(e,t,n){var r,i=b(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Fm?(e.cc.addReference(a.key,t),dy(e,a)):a instanceof Vm?(Lu("SyncEngine","Document no longer in limbo: "+a.key),e.cc.removeReference(a.key,t),e.cc.containsKey(a.key)||fy(e,a.key)):Uu()}}catch(o){i.e(o)}finally{i.f()}}function dy(e,t){var n=t.key,r=n.path.canonicalString();e.oc.get(n)||e.rc.has(r)||(Lu("SyncEngine","New document in limbo: "+n),e.rc.add(r),vy(e))}function vy(e){for(;e.rc.size>0&&e.oc.size<e.maxConcurrentLimboResolutions;){var t=e.rc.values().next().value;e.rc.delete(t);var n=new ls(us.fromString(t)),r=e.lc.next();e.uc.set(r,new jm(n)),e.oc=e.oc.insert(n,r),Lp(e.remoteStore,new Wh(Hl(Bl(n.path)),r,2,Ms.ct))}}function py(e,t,n){return my.apply(this,arguments)}function my(){return my=v(h().mark((function e(t,n,r){var i,a,o,u;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=ju(t),a=[],o=[],u=[],e.t0=i.sc.isEmpty(),e.t0){e.next=9;break}return i.sc.forEach((function(e,t){u.push(i.dc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=Lv.Di(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.nc.zo(a),e.next=9,function(){var e=v(h().mark((function e(t,n){var r,i,a,o,u,s,c,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ju(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return Es.forEach(n,(function(t){return Es.forEach(t.Vi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return Es.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Ds(e.t0)){e.next=10;break}throw e.t0;case 10:Lu("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=b(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Li.get(u),c=s.snapshotVersion,l=s.withLastLimboFreeSnapshotVersion(c),r.Li=r.Li.insert(u,l))}catch(f){i.e(f)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),my.apply(this,arguments)}function yy(e,t){return gy.apply(this,arguments)}function gy(){return gy=v(h().mark((function e(t,n){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=ju(t)).currentUser.isEqual(n)){e.next=11;break}return Lu("SyncEngine","User change. New user:",n.toKey()),e.next=5,Uv(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.hc.forEach((function(e){e.forEach((function(e){e.reject(new qu(zu.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.hc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,py(r,i.Qi);case 11:case"end":return e.stop()}}),e)}))),gy.apply(this,arguments)}function ky(e,t){var n=ju(e),r=n.uc.get(t);if(r&&r.ec)return vf().add(r.key);var i=vf(),a=n.ic.get(t);if(!a)return i;var o,u=b(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.sc.get(s);i=i.unionWith(c.view.Qu)}}catch(l){u.e(l)}finally{u.f()}return i}function by(e,t){return wy.apply(this,arguments)}function wy(){return wy=v(h().mark((function e(t,n){var r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ju(t),e.next=3,Yv(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Xu(i),e.abrupt("return",(r.isPrimaryClient&&hy(r,n.targetId,a.Yu),a));case 6:case"end":return e.stop()}}),e)}))),wy.apply(this,arguments)}function xy(e,t){return _y.apply(this,arguments)}function _y(){return _y=v(h().mark((function e(t,n){var r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ju(t),e.abrupt("return",$v(r.localStore,n).then((function(e){return py(r,e)})));case 2:case"end":return e.stop()}}),e)}))),_y.apply(this,arguments)}function Ey(e,t,n,r){return Sy.apply(this,arguments)}function Sy(){return Sy=v(h().mark((function e(t,n,r,i){var a,o;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ju(t),e.next=3,function(e,t){var n=ju(e),r=ju(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.In(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):Es.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Jp(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(cy(a,n,i||null),sy(a,n),function(e,t){ju(ju(e).mutationQueue).En(t)}(a.localStore,n)):Uu();case 11:return e.next=13,py(a,o);case 13:e.next=16;break;case 15:Lu("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),Sy.apply(this,arguments)}function Ty(e,t){return Iy.apply(this,arguments)}function Iy(){return Iy=v(h().mark((function e(t,n){var r,i,a,o,u,s,c,l;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(My(r=ju(t)),Fy(r),!0!==n||!0===r.fc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Cy(r,i.toArray());case 5:return a=e.sent,r.fc=!0,e.next=9,vm(r.remoteStore,!0);case 9:o=b(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Lp(r.remoteStore,s)}catch(f){o.e(f)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.fc){e.next=25;break}return c=[],l=Promise.resolve(),r.ic.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):l=l.then((function(){return ly(r,t),Wv(r.localStore,t,!0)})),Mp(r.remoteStore,t)})),e.next=19,l;case 19:return e.next=21,Cy(r,c);case 21:return function(e){var t=ju(e);t.uc.forEach((function(e,n){Mp(t.remoteStore,n)})),t.cc.ls(),t.uc=new Map,t.oc=new gc(ls.comparator)}(r),r.fc=!1,e.next=25,vm(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),Iy.apply(this,arguments)}function Cy(e,t,n){return Dy.apply(this,arguments)}function Dy(){return Dy=v(h().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,d,v,p,m,y,g;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=ju(t),a=[],o=[],u=b(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,l=void 0,!(f=i.ic.get(c))||0===f.length){e.next=34;break}return e.next=11,Hv(i.localStore,Hl(f[0]));case 11:l=e.sent,d=b(f),e.prev=13,d.s();case 15:if((v=d.n()).done){e.next=24;break}return p=v.value,m=i.sc.get(p),e.next=20,by(i,m);case 20:(y=e.sent).snapshot&&o.push(y.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Xv(i.localStore,c);case 36:return g=e.sent,e.next=39,Hv(i.localStore,g);case 39:return l=e.sent,e.next=42,Km(i,Ay(g),c,!1,l.resumeToken);case 42:a.push(l);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.nc.zo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Dy.apply(this,arguments)}function Ay(e){return Ul(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Ny(e){var t=ju(e);return ju(ju(t.localStore).persistence).bi()}function Py(e,t,n,r){return Ry.apply(this,arguments)}function Ry(){return Ry=v(h().mark((function e(t,n,r,i){var a,o,u,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=ju(t)).fc){e.next=3;break}return e.abrupt("return",void Lu("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ic.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,$v(a.localStore,Zl(o[0]));case 10:return u=e.sent,s=ah.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,Tc.EMPTY_BYTE_STRING),e.next=14,py(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,Wv(a.localStore,n,!0);case 17:return ly(a,n,i),e.abrupt("break",20);case 19:Uu();case 20:case"end":return e.stop()}}),e)}))),Ry.apply(this,arguments)}function Oy(e,t,n){return Ly.apply(this,arguments)}function Ly(){return Ly=v(h().mark((function e(t,n,r){var i,a,o,u,s,c,l,f,d;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=My(t)).fc){e.next=45;break}a=b(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ic.has(u)){e.next=10;break}return Lu("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Xv(i.localStore,u);case 12:return s=e.sent,e.next=15,Hv(i.localStore,s);case 15:return c=e.sent,e.next=18,Km(i,Ay(s),c.targetId,!1,c.resumeToken);case 18:Lp(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:l=b(r),e.prev=30,d=h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=f.value,e.t0=i.ic.has(t),!e.t0){e.next=5;break}return e.next=5,Wv(i.localStore,t,!1).then((function(){Mp(i.remoteStore,t),ly(i,t)})).catch(xs);case 5:case"end":return e.stop()}}),e)})),l.s();case 33:if((f=l.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),l.e(e.t2);case 42:return e.prev=42,l.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Ly.apply(this,arguments)}function My(e){var t=ju(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=$m.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=ky.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ey.bind(null,t),t.nc.zo=Dm.bind(null,t.eventManager),t.nc.wc=Am.bind(null,t.eventManager),t}function Fy(e){var t=ju(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=ny.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=iy.bind(null,t),t}function Vy(e,t,n){var r=ju(e);(function(){var e=v(h().mark((function e(t,n,r){var i,a,o,u,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=ju(e),r=wh(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.xs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Mm(i)),a=new Lm(i,t.localStore,n.serializer),e.next=15,n._c();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.$u(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n._c();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,py(t,s.Bu,void 0);case 31:return e.next=33,function(e,t){var n=ju(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.xs.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Fu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Fu("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var Uy=function(){function e(){y(this,e),this.synchronizeTabs=!1}return k(e,[{key:"initialize",value:function(){var e=v(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=_p(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return Vv(this.persistence,new Mv,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new Sv(Iv.Fs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new hp}},{key:"terminate",value:function(){var e=v(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),By=function(e){_(n,e);var t=T(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this)).mc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return k(n,[{key:"initialize",value:function(){var e=v(h().mark((function e(t){var r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Er(E(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.mc.initialize(this,t);case 4:return e.next=6,Fy(this.mc.syncEngine);case 6:return e.next=8,Jp(this.mc.remoteStore);case 8:return e.next=10,this.persistence.hi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return Vv(this.persistence,new Mv,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new nv(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new Ls(t,this.persistence);return new Os(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=Ov(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?jd.withCacheSize(this.cacheSizeBytes):jd.DEFAULT;return new Nv(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,wp(),xp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new hp}}]),n}(Uy),jy=function(e){_(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e,r,!1)).mc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return k(n,[{key:"initialize",value:function(){var e=v(h().mark((function e(t){var r,i=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Er(E(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.mc.syncEngine,e.t0=this.sharedClientState instanceof fp,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={$r:Ey.bind(null,r),Mr:Py.bind(null,r),Fr:Oy.bind(null,r),bi:Ny.bind(null,r),Or:xy.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.hi(function(){var e=v(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ty(i.mc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=wp();if(!fp.D(t))throw new qu(zu.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Ov(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new fp(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(By),zy=function(){function e(){y(this,e)}return k(e,[{key:"initialize",value:function(){var e=v(h().mark((function e(t,n){var r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Zm(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=yy.bind(null,this.syncEngine),e.next=12,vm(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new Em}},{key:"createDatastore",value:function(e){var t,n=_p(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new bp(t));return function(e,t,n,r){return new Cp(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Zm(o.syncEngine,e,0)},a=vp.D()?new vp:new dp,new Ap(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new zm(e,t,n,r,i,a);return o&&(u.fc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=v(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=ju(t),Lu("RemoteStore","RemoteStore shutting down."),n.du.add(5),e.next=5,Rp(n);case 5:n._u.shutdown(),n.mu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function qy(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return v(h().mark((function r(){var i;return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return v(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var Gy=function(){function e(t){y(this,e),this.observer=t,this.muted=!1}return k(e,[{key:"next",value:function(e){this.observer.next&&this.gc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.gc(this.observer.error,e):Mu("Uncaught Error in snapshot listener:",e.toString())}},{key:"yc",value:function(){this.muted=!0}},{key:"gc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),Ky=function(){function e(t,n){var r=this;y(this,e),this.Ic=t,this.serializer=n,this.metadata=new Gu,this.buffer=new Uint8Array,this.Tc=new TextDecoder("utf-8"),this.Ec().then((function(e){e&&e.ku()?r.metadata.resolve(e.Nu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Nu))))}),(function(e){return r.metadata.reject(e)}))}return k(e,[{key:"close",value:function(){return this.Ic.cancel()}},{key:"getMetadata",value:function(){var e=v(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_c",value:function(){var e=v(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Ec());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ec",value:function(){var e=v(h().mark((function e(){var t,n,r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ac();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Tc.decode(t),r=Number(n),isNaN(r)&&this.Rc("length string (".concat(n,") is not valid number")),e.next=9,this.vc(r);case 9:return i=e.sent,e.abrupt("return",new Rm(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Ac",value:function(){var e=v(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.bc()<0)){e.next=7;break}return e.next=3,this.Pc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.bc())<0&&this.Rc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=v(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Pc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Rc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Tc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Rc",value:function(e){throw this.Ic.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Pc",value:function(){var e=v(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ic.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Hy=function(){function e(t){y(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return k(e,[{key:"lookup",value:function(){var e=v(h().mark((function e(t){var n,r=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new qu(zu.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=v(h().mark((function e(t,n){var r,i,a,o,u,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ju(t),i=Ch(r.serializer)+"/documents",a={documents:n.map((function(e){return Eh(r.serializer,e)}))},e.next=5,r.fo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Ph(r.serializer,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Bu(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Yf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=v(h().mark((function e(){var t,n=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=ls.fromPath(t);n.mutations.push(new Xf(r,n.precondition(r)))})),e.next=7,function(){var e=v(h().mark((function e(t,n){var r,i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=ju(t),i=Ch(r.serializer)+"/documents",a={writes:n.map((function(e){return Rh(r.serializer,e)}))},e.next=3,r.co("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Uu();t=as.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new qu(zu.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(as.min())?Of.exists(!1):Of.updateTime(t):Of.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(as.min()))throw new qu(zu.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Of.updateTime(t)}return Of.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),Wy=function(){function e(t,n,r,i,a){y(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Vc=r.maxAttempts,this.Co=new Ep(this.asyncQueue,"transaction_retry")}return k(e,[{key:"run",value:function(){this.Vc-=1,this.Sc()}},{key:"Sc",value:function(){var e=this;this.Co.Ao(v(h().mark((function t(){var n,r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new Hy(e.datastore),(r=e.Dc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Cc(t)}))}))})).catch((function(t){e.Cc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Dc",value:function(e){try{var t=this.updateFunction(e);return!Fs(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Cc",value:function(e){var t=this;this.Vc>0&&this.xc(e)?(this.Vc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Sc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"xc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!th(t)}return!1}}]),e}(),Qy=function(){function e(t,n,r,i){var a=this;y(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Nu.UNAUTHENTICATED,this.clientId=es.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=v(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Lu("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Lu("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return k(e,[{key:"getConfiguration",value:function(){var e=v(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new qu(zu.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Gu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(v(h().mark((function n(){var r;return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=km(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Yy(e,t){return Xy.apply(this,arguments)}function Xy(){return Xy=v(h().mark((function e(t,n){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Lu("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=v(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Uv(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Xy.apply(this,arguments)}function $y(e,t){return Jy.apply(this,arguments)}function Jy(){return Jy=v(h().mark((function e(t,n){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,eg(t);case 3:return r=e.sent,Lu("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return hm(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return hm(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Jy.apply(this,arguments)}function Zy(e){return"FirebaseError"===e.name?e.code===zu.FAILED_PRECONDITION||e.code===zu.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function eg(e){return tg.apply(this,arguments)}function tg(){return tg=v(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return Lu("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,Yy(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),Zy(n=e.t0)){e.next=13;break}throw n;case 13:return Fu("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,Yy(t,new Uy);case 16:e.next=21;break;case 18:return Lu("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,Yy(t,new Uy);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])}))),tg.apply(this,arguments)}function ng(e){return rg.apply(this,arguments)}function rg(){return rg=v(h().mark((function e(t){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return Lu("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,$y(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return Lu("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,$y(t,new zy);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)}))),rg.apply(this,arguments)}function ig(e){return eg(e).then((function(e){return e.persistence}))}function ag(e){return eg(e).then((function(e){return e.localStore}))}function og(e){return ng(e).then((function(e){return e.remoteStore}))}function ug(e){return ng(e).then((function(e){return e.syncEngine}))}function sg(e){return ng(e).then((function(e){return e.datastore}))}function cg(e){return lg.apply(this,arguments)}function lg(){return lg=v(h().mark((function e(t){var n,r;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ng(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=qm.bind(null,n.syncEngine),r.onUnlisten=Wm.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),lg.apply(this,arguments)}function fg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Gu;return e.asyncQueue.enqueueAndForget(v(h().mark((function i(){return h().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Gy({next:function(a){t.enqueueAndForget((function(){return Im(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new qu(zu.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new qu(zu.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Pm(Bl(n.path),a,{includeMetadataChanges:!0,xu:!0});return Sm(e,o)},i.next=3,cg(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function hg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Gu;return e.asyncQueue.enqueueAndForget(v(h().mark((function i(){return h().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Gy({next:function(n){t.enqueueAndForget((function(){return Im(e,o)})),n.fromCache&&"server"===r.source?i.reject(new qu(zu.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Pm(n,a,{includeMetadataChanges:!0,xu:!0});return Sm(e,o)},i.next=3,cg(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var dg=new Map;function vg(e,t,n){if(!n)throw new qu(zu.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function pg(e,t,n,r){if(!0===t&&!0===r)throw new qu(zu.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function mg(e){if(!ls.isDocumentKey(e))throw new qu(zu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function yg(e){if(ls.isDocumentKey(e))throw new qu(zu.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function gg(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Uu()}function kg(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new qu(zu.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=gg(e);throw new qu(zu.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function bg(e,t){if(t<=0)throw new qu(zu.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var wg=function(){function e(t){var n;if(y(this,e),void 0===t.host){if(void 0!==t.ssl)throw new qu(zu.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new qu(zu.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,pg("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return k(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),xg=function(){function e(t,n,r,i){y(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new wg({}),this._settingsFrozen=!1}return k(e,[{key:"app",get:function(){if(!this._app)throw new qu(zu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new qu(zu.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new wg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Hu;switch(e.type){case"firstParty":return new Xu(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new qu(zu.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=dg.get(e);t&&(Lu("ComponentProvider","Removing Datastore"),dg.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function _g(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=kg(e,xg))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Fu("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Nu.MOCK_USER;else{o=B(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new qu(zu.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Nu(s)}e._authCredentials=new Wu(new Ku(o,u))}}var Eg=function(){function e(t,n,r){y(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return k(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new Tg(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),Sg=function(){function e(t,n,r){y(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return k(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),Tg=function(e){_(n,e);var t=T(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this,e,r,Bl(i)))._path=i,a.type="collection",a}return k(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new Eg(this.firestore,null,new ls(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(Sg);function Ig(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Z(e),vg("collection","path",t),e instanceof xg){var a=us.fromString.apply(us,[t].concat(r));return yg(a),new Tg(e,null,a)}if(!(e instanceof Eg||e instanceof Tg))throw new qu(zu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(us.fromString.apply(us,[t].concat(r)));return yg(o),new Tg(e.firestore,null,o)}function Cg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=Z(e),1===arguments.length&&(t=es.A()),vg("doc","path",t),e instanceof xg){var a=us.fromString.apply(us,[t].concat(r));return mg(a),new Eg(e,null,new ls(a))}if(!(e instanceof Eg||e instanceof Tg))throw new qu(zu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(us.fromString.apply(us,[t].concat(r)));return mg(o),new Eg(e.firestore,e instanceof Tg?e.converter:null,new ls(o))}function Dg(e,t){return e=Z(e),t=Z(t),(e instanceof Eg||e instanceof Tg)&&(t instanceof Eg||t instanceof Tg)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Ag(e,t){return e=Z(e),t=Z(t),e instanceof Sg&&t instanceof Sg&&e.firestore===t.firestore&&Yl(e._query,t._query)&&e.converter===t.converter}var Ng=function(){function e(){var t=this;y(this,e),this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new Ep(this,"async_queue_retry"),this.qc=function(){var e=xp();e&&Lu("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Co.vo()};var n=xp();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.qc)}return k(e,[{key:"isShuttingDown",get:function(){return this.Oc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Uc(),this.Kc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;var t=xp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Uc(),this.Oc)return new Promise((function(){}));var n=new Gu;return this.Kc((function(){return t.Oc&&t.Bc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.kc.push(e),t.Gc()}))}},{key:"Gc",value:function(){var e=v(h().mark((function e(){var t=this;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.kc.length){e.next=14;break}return e.prev=1,e.next=4,this.kc[0]();case 4:this.kc.shift(),this.Co.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Ds(e.t0)){e.next=12;break}throw e.t0;case 12:Lu("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.kc.length>0&&this.Co.Ao((function(){return t.Gc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Kc",value:function(e){var t=this,n=this.Nc.then((function(){return t.Fc=!0,e().catch((function(e){t.Mc=e,t.Fc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Mu("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Fc=!1,e}))}));return this.Nc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);var i=gm.createAndSchedule(this,e,t,n,(function(e){return r.Qc(e)}));return this.$c.push(i),i}},{key:"Uc",value:function(){this.Mc&&Uu()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=v(h().mark((function e(){var t;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Nc,e.next=3,t;case 3:if(t!==this.Nc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"jc",value:function(e){var t,n=b(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Wc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=b(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Hc",value:function(e){this.Lc.push(e)}},{key:"Qc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function Pg(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=b(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var Rg=function(){function e(){y(this,e),this._progressObserver={},this._taskCompletionResolver=new Gu,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return k(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Og=function(e){_(n,e);var t=T(n);function n(e,r,i,a){var o;return y(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new Ng,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return k(n,[{key:"_terminate",value:function(){return this._firestoreClient||Mg(this),this._firestoreClient.terminate()}}]),n}(xg);function Lg(e){return e._firestoreClient||Mg(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Mg(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new Oc(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Qy(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function Fg(e,t,n){var r=new Gu;return e.asyncQueue.enqueue(v(h().mark((function i(){var a;return h().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Yy(e,n);case 3:return i.next=5,$y(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),Zy(a=i.t0)){i.next=13;break}throw a;case 13:Fu("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function Vg(e){return function(e){return e.asyncQueue.enqueue(v(h().mark((function t(){var n,r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ig(e);case 2:return n=t.sent,t.next=5,og(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=ju(e);return t.du.delete(0),Np(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Lg(e=kg(e,Og)))}function Ug(e){return function(e){return e.asyncQueue.enqueue(v(h().mark((function t(){var n,r;return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ig(e);case 2:return n=t.sent,t.next=5,og(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=v(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=ju(t)).du.add(0),e.next=4,Rp(n);case 4:n.mu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Lg(e=kg(e,Og)))}function Bg(e,t){var n=Lg(e=kg(e,Og)),r=new Rg;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new Ky(e,t)}(function(e,t){if(e instanceof Uint8Array)return qy(e,t);if(e instanceof ArrayBuffer)return qy(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,_p(t));e.asyncQueue.enqueueAndForget(v(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Vy,t.next=3,ug(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function jg(e,t){return function(e,t){return e.asyncQueue.enqueue(v(h().mark((function n(){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=ju(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.xs.getNamedQuery(e,t)}))},n.next=3,ag(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Lg(e=kg(e,Og)),t).then((function(t){return t?new Sg(e,null,t.query):null}))}function zg(e){if(e._initialized||e._terminated)throw new qu(zu.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var qg=function(){function e(t){y(this,e),this._byteString=t}return k(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(Tc.fromBase64String(t))}catch(t){throw new qu(zu.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(Tc.fromUint8Array(t))}}]),e}(),Gg=function(){function e(){y(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new qu(zu.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new cs(n)}return k(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var Kg=k((function e(t){y(this,e),this._methodName=t})),Hg=function(){function e(t,n){if(y(this,e),!isFinite(t)||t<-90||t>90)throw new qu(zu.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new qu(zu.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return k(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return ts(this._lat,e._lat)||ts(this._long,e._long)}}]),e}(),Wg=/^__.*__$/,Qg=function(){function e(t,n,r){y(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return k(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new qf(e,this.data,this.fieldMask,t,this.fieldTransforms):new zf(e,this.data,t,this.fieldTransforms)}}]),e}(),Yg=function(){function e(t,n,r){y(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return k(e,[{key:"toMutation",value:function(e,t){return new qf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Xg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Uu()}}var $g=function(){function e(t,n,r,i,a,o){y(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Jc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return k(e,[{key:"path",get:function(){return this.settings.path}},{key:"Yc",get:function(){return this.settings.Yc}},{key:"Zc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Xc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:n,ta:!1});return r.ea(e),r}},{key:"na",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:n,ta:!1});return r.Jc(),r}},{key:"sa",value:function(e){return this.Zc({path:void 0,ta:!0})}},{key:"ia",value:function(e){return yk(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Jc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ea(this.path.get(e))}},{key:"ea",value:function(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(Xg(this.Yc)&&Wg.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}]),e}(),Jg=function(){function e(t,n,r){y(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||_p(t)}return k(e,[{key:"ua",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new $g({Yc:e,methodName:t,oa:n,path:cs.emptyPath(),ta:!1,ra:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function Zg(e){var t=e._freezeSettings(),n=_p(e._databaseId);return new Jg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function ek(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ua(a.merge||a.mergeFields?2:0,t,n,i);dk("Data must be an object, but it was:",o,r);var u,s,c=fk(r,o);if(a.merge)u=new Ec(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=b(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=vk(t,l.value,n);if(!o.contains(d))throw new qu(zu.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));gk(f,d)||f.push(d)}}catch(v){h.e(v)}finally{h.f()}u=new Ec(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new Qg(new rl(c),u,s)}var tk=function(e){_(n,e);var t=T(n);function n(){return y(this,n),t.apply(this,arguments)}return k(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Yc)throw 1===e.Yc?e.ia("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ia("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Kg);function nk(e,t,n){return new $g({Yc:3,oa:t.settings.oa,methodName:e._methodName,ta:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var rk=function(e){_(n,e);var t=T(n);function n(){return y(this,n),t.apply(this,arguments)}return k(n,[{key:"_toFieldTransform",value:function(e){return new Pf(e.path,new Ef)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(Kg),ik=function(e){_(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e)).ca=r,i}return k(n,[{key:"_toFieldTransform",value:function(e){var t=nk(this,e,!0),n=this.ca.map((function(e){return lk(e,t)})),r=new Sf(n);return new Pf(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Kg),ak=function(e){_(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e)).ca=r,i}return k(n,[{key:"_toFieldTransform",value:function(e){var t=nk(this,e,!0),n=this.ca.map((function(e){return lk(e,t)})),r=new If(n);return new Pf(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Kg),ok=function(e){_(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e)).aa=r,i}return k(n,[{key:"_toFieldTransform",value:function(e){var t=new Df(e.serializer,kf(e.serializer,this.aa));return new Pf(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(Kg);function uk(e,t,n,r){var i=e.ua(1,t,n);dk("Data must be an object, but it was:",i,r);var a=[],o=rl.empty();mc(r,(function(e,r){var u=mk(t,e,n);r=Z(r);var s=i.na(u);if(r instanceof tk)a.push(u);else{var c=lk(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new Ec(a);return new Yg(o,u,i.fieldTransforms)}function sk(e,t,n,r,i,a){var o=e.ua(1,t,n),u=[vk(t,r,n)],s=[i];if(a.length%2!=0)throw new qu(zu.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(vk(t,a[c])),s.push(a[c+1]);for(var l=[],f=rl.empty(),h=u.length-1;h>=0;--h)if(!gk(l,u[h])){var d=u[h],v=s[h];v=Z(v);var p=o.na(d);if(v instanceof tk)l.push(d);else{var m=lk(v,p);null!=m&&(l.push(d),f.set(d,m))}}var y=new Ec(l);return new Yg(f,y,o.fieldTransforms)}function ck(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return lk(n,e.ua(r?4:3,t))}function lk(e,t){if(hk(e=Z(e)))return dk("Unsupported field value:",t,e),fk(e,t);if(e instanceof Kg)return function(e,t){if(!Xg(t.Yc))throw t.ia("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ia("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ta&&4!==t.Yc)throw t.ia("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=b(e);try{for(a.s();!(n=a.n()).done;){var o=lk(n.value,t.sa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=Z(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return kf(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=is.fromDate(e);return{timestampValue:gh(t.serializer,n)}}if(e instanceof is){var r=new is(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:gh(t.serializer,r)}}if(e instanceof Hg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof qg)return{bytesValue:kh(t.serializer,e._byteString)};if(e instanceof Eg){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ia("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:xh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ia("Unsupported field value: ".concat(gg(e)))}(e,t)}function fk(e,t){var n={};return yc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):mc(e,(function(e,r){var i=lk(r,t.Xc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function hk(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof is||e instanceof Hg||e instanceof qg||e instanceof Eg||e instanceof Kg)}function dk(e,t,n){if(!hk(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=gg(n);throw"an object"===r?t.ia(e+" a custom object"):t.ia(e+" "+r)}}function vk(e,t,n){if((t=Z(t))instanceof Gg)return t._internalPath;if("string"==typeof t)return mk(e,t);throw yk("Field path arguments must be of type string or ",e,!1,void 0,n)}var pk=new RegExp("[~\\*/\\[\\]]");function mk(e,t,n){if(t.search(pk)>=0)throw yk("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return I(Gg,te(t.split(".")))._internalPath}catch(r){throw yk("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function yk(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new qu(zu.INVALID_ARGUMENT,u+e+s)}function gk(e,t){return e.some((function(e){return e.isEqual(t)}))}var kk=function(){function e(t,n,r,i,a){y(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return k(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new Eg(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new bk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(wk("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),bk=function(e){_(n,e);var t=T(n);function n(){return y(this,n),t.apply(this,arguments)}return k(n,[{key:"data",value:function(){return Er(E(n.prototype),"data",this).call(this)}}]),n}(kk);function wk(e,t){return"string"==typeof t?mk(e,t):t instanceof Gg?t._internalPath:t._delegate._internalPath}function xk(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new qu(zu.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var _k=k((function e(){y(this,e)})),Ek=function(e){_(n,e);var t=T(n);function n(){return y(this,n),t.apply(this,arguments)}return k(n)}(_k);function Sk(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof _k&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof Ik})).length,n=e.filter((function(e){return e instanceof Tk})).length;if(t>1||t>0&&n>0)throw new qu(zu.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=b(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var Tk=function(e){_(n,e);var t=T(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return k(n,[{key:"_apply",value:function(e){var t=this._parse(e);return Uk(e._query,t),new Sg(e.firestore,e.converter,Wl(e._query,t))}},{key:"_parse",value:function(e){var t=Zg(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new qu(zu.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Vk(o,a);var s,c=[],l=b(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(Fk(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=Fk(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Vk(o,a),u=ck(n,"where",o,"in"===a||"not-in"===a);return hl.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Ek);var Ik=function(e){_(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return k(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:dl.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=b(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;Uk(r,a),r=Wl(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new Sg(e.firestore,e.converter,Wl(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(_k);var Ck=function(e){_(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return k(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new qu(zu.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new qu(zu.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new cl(t,n);return function(e,t){if(null===zl(e)){var n=ql(e);null!==n&&Bk(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new Sg(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Vl(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(Ek);var Dk=function(e){_(n,e);var t=T(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return k(n,[{key:"_apply",value:function(e){return new Sg(e.firestore,e.converter,Ql(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Ek);var Ak=function(e){_(n,e);var t=T(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return k(n,[{key:"_apply",value:function(e){var t=Mk(e,this.type,this._docOrFields,this._inclusive);return new Sg(e.firestore,e.converter,function(e,t){return new Vl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Ek);function Nk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ak._create("startAt",t,!0)}function Pk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ak._create("startAfter",t,!1)}var Rk=function(e){_(n,e);var t=T(n);function n(e,r,i){var a;return y(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return k(n,[{key:"_apply",value:function(e){var t=Mk(e,this.type,this._docOrFields,this._inclusive);return new Sg(e.firestore,e.converter,function(e,t){return new Vl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(Ek);function Ok(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Rk._create("endBefore",t,!1)}function Lk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Rk._create("endAt",t,!0)}function Mk(e,t,n,r){if(n[0]=Z(n[0]),n[0]instanceof kk)return function(e,t,n,r,i){if(!r)throw new qu(zu.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=b(Kl(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(Kc(t,r.key));else{var c=r.data.field(s.field);if(Nc(c))throw new qu(zu.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new qu(zu.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new ol(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Zg(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new qu(zu.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new qu(zu.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Gl(e)&&-1!==c.indexOf("/"))throw new qu(zu.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(us.fromString(c));if(!ls.isDocumentKey(l))throw new qu(zu.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new ls(l);u.push(Kc(t,f))}else{var h=ck(n,r,c);u.push(h)}}return new ol(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function Fk(e,t,n){if("string"==typeof(n=Z(n))){if(""===n)throw new qu(zu.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gl(t)&&-1!==n.indexOf("/"))throw new qu(zu.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(us.fromString(n));if(!ls.isDocumentKey(r))throw new qu(zu.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Kc(e,new ls(r))}if(n instanceof Eg)return Kc(e,n._key);throw new qu(zu.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(gg(n),"."))}function Vk(e,t){if(!Array.isArray(e)||0===e.length)throw new qu(zu.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Uk(e,t){if(t.isInequality()){var n=ql(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new qu(zu.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=zl(e);null!==i&&Bk(e,r,i)}var a=function(e,t){var n,r=b(e);try{for(r.s();!(n=r.n()).done;){var i,a=b(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new qu(zu.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new qu(zu.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function Bk(e,t,n){if(!n.isEqual(t))throw new qu(zu.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var jk=function(){function e(){y(this,e)}return k(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Vc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Dc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ac(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Uu()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return mc(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new Hg(Dc(e.latitude),Dc(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Pc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Rc(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Cc(e);return new is(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=us.fromString(e);Bu(Hh(n));var r=new Lc(n.get(1),n.get(3)),i=new ls(n.popFirst(5));return r.isEqual(t)||Mu("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function zk(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var qk=function(e){_(n,e);var t=T(n);function n(e){var r;return y(this,n),(r=t.call(this)).firestore=e,r}return k(n,[{key:"convertBytes",value:function(e){return new qg(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Eg(this.firestore,null,t)}}]),n}(jk);var Gk=function(){function e(t,n){y(this,e),this.hasPendingWrites=t,this.fromCache=n}return k(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),Kk=function(e){_(n,e);var t=T(n);function n(e,r,i,a,o,u){var s;return y(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return k(n,[{key:"exists",value:function(){return Er(E(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new Hk(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(wk("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(kk),Hk=function(e){_(n,e);var t=T(n);function n(){return y(this,n),t.apply(this,arguments)}return k(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Er(E(n.prototype),"data",this).call(this,e)}}]),n}(Kk),Wk=function(){function e(t,n,r,i){y(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Gk(i.hasPendingWrites,i.fromCache),this.query=r}return k(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new Hk(n._firestore,n._userDataWriter,r.key,r,new Gk(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new qu(zu.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new Hk(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Gk(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new Hk(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Gk(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Qk(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function Qk(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Uu()}}function Yk(e,t){return e instanceof Kk&&t instanceof Kk?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Wk&&t instanceof Wk&&e._firestore===t._firestore&&Ag(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var Xk=function(e){_(n,e);var t=T(n);function n(e){var r;return y(this,n),(r=t.call(this)).firestore=e,r}return k(n,[{key:"convertBytes",value:function(e){return new qg(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new Eg(this.firestore,null,t)}}]),n}(jk);function $k(e){e=kg(e,Eg);var t=kg(e.firestore,Og),n=Lg(t),r=new Xk(t);return function(e,t){var n=new Gu;return e.asyncQueue.enqueueAndForget(v(h().mark((function r(){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=v(h().mark((function e(t,n,r){var i,a;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=ju(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new qu(zu.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=km(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,ag(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new Kk(t,r,e._key,n,new Gk(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Jk(e){e=kg(e,Sg);var t=kg(e.firestore,Og),n=Lg(t),r=new Xk(t);return function(e,t){var n=new Gu;return e.asyncQueue.enqueueAndForget(v(h().mark((function r(){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=v(h().mark((function e(t,n,r){var i,a,o,u,s;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Yv(t,n,!0);case 3:i=e.sent,a=new Um(n,i.Wi),o=a.zu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=km(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,ag(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new Wk(t,r,e,n)}))}function Zk(e,t,n){e=kg(e,Eg);var r=kg(e.firestore,Og),i=zk(e.converter,t,n);return rb(r,[ek(Zg(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Of.none())])}function eb(e,t,n){e=kg(e,Eg);for(var r=kg(e.firestore,Og),i=Zg(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return rb(r,[("string"==typeof(t=Z(t))||t instanceof Gg?sk(i,"updateDoc",e._key,t,n,o):uk(i,"updateDoc",e._key,t)).toMutation(e._key,Of.exists(!0))])}function tb(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=Z(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||Pg(n[s])||(u=n[s],s++);var c,l,f,d={includeMetadataChanges:u.includeMetadataChanges};if(Pg(n[s])){var p=n[s];n[s]=null===(i=p.next)||void 0===i?void 0:i.bind(p),n[s+1]=null===(a=p.error)||void 0===a?void 0:a.bind(p),n[s+2]=null===(o=p.complete)||void 0===o?void 0:o.bind(p)}if(e instanceof Eg)l=kg(e.firestore,Og),f=Bl(e._key.path),c={next:function(t){n[s]&&n[s](ib(l,e,t))},error:n[s+1],complete:n[s+2]};else{var m=kg(e,Sg);l=kg(m.firestore,Og),f=m._query;var y=new Xk(l);c={next:function(e){n[s]&&n[s](new Wk(l,y,m,e))},error:n[s+1],complete:n[s+2]},xk(e._query)}return function(e,t,n,r){var i=new Gy(r),a=new Pm(t,i,n);return e.asyncQueue.enqueueAndForget(v(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Sm,t.next=3,cg(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.yc(),e.asyncQueue.enqueueAndForget(v(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Im,t.next=3,cg(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Lg(l),f,d,c)}function nb(e,t){return function(e,t){var n=new Gy(t);return e.asyncQueue.enqueueAndForget(v(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){ju(e).Au.add(t),t.next()},t.next=3,cg(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.yc(),e.asyncQueue.enqueueAndForget(v(h().mark((function t(){return h().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){ju(e).Au.delete(t)},t.next=3,cg(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Lg(e=kg(e,Og)),Pg(t)?t:{next:t})}function rb(e,t){return function(e,t){var n=new Gu;return e.asyncQueue.enqueueAndForget(v(h().mark((function r(){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Ym,r.next=3,ug(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Lg(e),t)}function ib(e,t,n){var r=n.docs.get(t._key),i=new Xk(e);return new Kk(e,i,t._key,r,new Gk(n.hasPendingWrites,n.fromCache),t.converter)}var ab={maxAttempts:5},ob=function(){function e(t,n){y(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Zg(t)}return k(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=ub(e,this._firestore),i=zk(r.converter,t,n),a=ek(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Of.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=ub(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Z(t))||t instanceof Gg?sk(this._dataReader,"WriteBatch.update",i._key,t,n,o):uk(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Of.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=ub(e,this._firestore);return this._mutations=this._mutations.concat(new Yf(t._key,Of.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new qu(zu.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function ub(e,t){if((e=Z(e)).firestore!==t)throw new qu(zu.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var sb=function(e){_(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e,r))._firestore=e,i}return k(n,[{key:"get",value:function(e){var t=this,r=ub(e,this._firestore),i=new Xk(this._firestore);return Er(E(n.prototype),"get",this).call(this,e).then((function(e){return new Kk(t._firestore,i,r._key,e._document,new Gk(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){y(this,e),this._firestore=t,this._transaction=n,this._dataReader=Zg(t)}return k(e,[{key:"get",value:function(e){var t=this,n=ub(e,this._firestore),r=new qk(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Uu();var i=e[0];if(i.isFoundDocument())return new kk(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new kk(t._firestore,r,n._key,null,n.converter);throw Uu()}))}},{key:"set",value:function(e,t,n){var r=ub(e,this._firestore),i=zk(r.converter,t,n),a=ek(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=ub(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=Z(t))||t instanceof Gg?sk(this._dataReader,"Transaction.update",i._key,t,n,o):uk(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=ub(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function cb(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ik("arrayUnion",t)}function lb(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ak("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Pu=e}(Je),Ke(new ne("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new Og(new Qu(e.getProvider("auth-internal")),new Ju(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new qu(zu.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Lc(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),it(Au,"3.10.1",e),it(Au,"3.10.1","esm2017")}();function fb(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new qu("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function hb(){if("undefined"===typeof Uint8Array)throw new qu("unimplemented","Uint8Arrays are not available in this environment.")}function db(){if("undefined"==typeof atob)throw new qu("unimplemented","Blobs are unavailable in Firestore in this environment.")}var vb=function(){function e(t){y(this,e),this._delegate=t}return k(e,[{key:"toBase64",value:function(){return db(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return hb(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return db(),new e(qg.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return hb(),new e(qg.fromUint8Array(t))}}]),e}();function pb(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=b(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var mb=function(){function e(){y(this,e)}return k(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){zg(e=kg(e,Og));var n=Lg(e);if(n._uninitializedComponentsProvider)throw new qu(zu.FAILED_PRECONDITION,"SDK cache is already specified.");Fu("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new zy;return Fg(n,i,new By(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){zg(e=kg(e,Og));var t=Lg(e);if(t._uninitializedComponentsProvider)throw new qu(zu.FAILED_PRECONDITION,"SDK cache is already specified.");Fu("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new zy;return Fg(t,r,new jy(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new qu(zu.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Gu;return e._queue.enqueueAndForgetEvenWhileRestricted(v(h().mark((function n(){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=v(h().mark((function e(t){var n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ts.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,Ts.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Ov(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),yb=function(){function e(t,n,r){var i=this;y(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Lc||(this._appCompat=t)}return k(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Fu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};_g(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Vg(this._delegate)}},{key:"disableNetwork",value:function(){return Ug(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&pg("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Gu;return e.asyncQueue.enqueueAndForget(v(h().mark((function n(){return h().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=oy,n.next=3,ug(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Lg(e=kg(e,Og)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return nb(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new qu("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new Nb(this,Ig(this._delegate,e))}catch(t){throw _b(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new xb(this,Cg(this._delegate,e))}catch(t){throw _b(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new Cb(this,function(e,t){if(e=kg(e,xg),vg("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new qu(zu.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new Sg(e,null,function(e){return new Vl(us.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw _b(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=kg(e,Og);var r=Object.assign(Object.assign({},ab),n);return function(e){if(e.maxAttempts<1)throw new qu(zu.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Gu;return e.asyncQueue.enqueueAndForget(v(h().mark((function i(){var a;return h().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,sg(e);case 2:a=i.sent,new Wy(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(Lg(e),(function(n){return t(new sb(e,n))}),r)}(this._delegate,(function(n){return e(new kb(t,n))}))}},{key:"batch",value:function(){var e=this;return Lg(this._delegate),new bb(new ob(this._delegate,(function(t){return rb(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return Bg(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return jg(this._delegate,e).then((function(e){return e?new Cb(t,e):null}))}}]),e}(),gb=function(e){_(n,e);var t=T(n);function n(e){var r;return y(this,n),(r=t.call(this)).firestore=e,r}return k(n,[{key:"convertBytes",value:function(e){return new vb(new qg(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return xb.forKey(t,this.firestore,null)}}]),n}(jk);var kb=function(){function e(t,n){y(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new gb(t)}return k(e,[{key:"get",value:function(e){var t=this,n=Pb(e);return this._delegate.get(n).then((function(e){return new Tb(t._firestore,new Kk(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=Pb(e);return n?(fb("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Pb(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Pb(e);return this._delegate.delete(t),this}}]),e}(),bb=function(){function e(t){y(this,e),this._delegate=t}return k(e,[{key:"set",value:function(e,t,n){var r=Pb(e);return n?(fb("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Pb(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Pb(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),wb=function(){function e(t,n,r){y(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return k(e,[{key:"fromFirestore",value:function(e,t){var n=new Hk(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Ib(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new gb(t),n),i.set(n,a)),a}}]),e}();wb.INSTANCES=new WeakMap;var xb=function(){function e(t,n){y(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new gb(t)}return k(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new Nb(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new Nb(this.firestore,Ig(this._delegate,e))}catch(t){throw _b(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=Z(e))instanceof Eg&&Dg(this._delegate,e)}},{key:"set",value:function(e,t){t=fb("DocumentReference.set",t);try{return t?Zk(this._delegate,e,t):Zk(this._delegate,e)}catch(n){throw _b(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?eb(this._delegate,e):eb.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw _b(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return rb(kg(e.firestore,Og),[new Yf(e._key,Of.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Eb(n),a=Sb(n,(function(t){return new Tb(e.firestore,new Kk(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return tb(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?$k(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=kg(e,Eg);var t=kg(e.firestore,Og);return fg(Lg(t),e._key,{source:"server"}).then((function(n){return ib(t,e,n)}))}(this._delegate):function(e){e=kg(e,Eg);var t=kg(e.firestore,Og);return fg(Lg(t),e._key).then((function(n){return ib(t,e,n)}))}(this._delegate),t.then((function(e){return new Tb(n.firestore,new Kk(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(wb.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new qu("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new Eg(n._delegate,r,new ls(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new Eg(n._delegate,r,t))}}]),e}();function _b(e,t,n){return e.message=e.message.replace(t,n),e}function Eb(e){var t,n=b(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!pb(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function Sb(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=pb(e[0])?e[0]:pb(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Tb=function(){function e(t,n){y(this,e),this._firestore=t,this._delegate=n}return k(e,[{key:"ref",get:function(){return new xb(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Yk(this._delegate,e._delegate)}}]),e}(),Ib=function(e){_(n,e);var t=T(n);function n(){return y(this,n),t.apply(this,arguments)}return k(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Uu()}(void 0!==t),t}}]),n}(Tb),Cb=function(){function e(t,n){y(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new gb(t)}return k(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,Sk(this._delegate,function(e,t,n){var r=t,i=wk("where",e);return Tk._create(i,r,n)}(t,n,r)))}catch(i){throw _b(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,Sk(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=wk("orderBy",e);return Ck._create(n,t)}(t,n)))}catch(r){throw _b(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,Sk(this._delegate,function(e){return bg("limit",e),Dk._create("limit",e,"F")}(t)))}catch(n){throw _b(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,Sk(this._delegate,function(e){return bg("limitToLast",e),Dk._create("limitToLast",e,"L")}(t)))}catch(n){throw _b(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,Sk(this._delegate,Nk.apply(void 0,arguments)))}catch(t){throw _b(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,Sk(this._delegate,Pk.apply(void 0,arguments)))}catch(t){throw _b(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,Sk(this._delegate,Ok.apply(void 0,arguments)))}catch(t){throw _b(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,Sk(this._delegate,Lk.apply(void 0,arguments)))}catch(t){throw _b(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Ag(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Jk(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=kg(e,Sg);var t=kg(e.firestore,Og),n=Lg(t),r=new Xk(t);return hg(n,e._query,{source:"server"}).then((function(n){return new Wk(t,r,e,n)}))}(this._delegate):function(e){e=kg(e,Sg);var t=kg(e.firestore,Og),n=Lg(t),r=new Xk(t);return xk(e._query),hg(n,e._query).then((function(n){return new Wk(t,r,e,n)}))}(this._delegate),t.then((function(e){return new Ab(n.firestore,new Wk(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=Eb(n),a=Sb(n,(function(t){return new Ab(e.firestore,new Wk(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return tb(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(wb.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),Db=function(){function e(t,n){y(this,e),this._firestore=t,this._delegate=n}return k(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new Ib(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),Ab=function(){function e(t,n){y(this,e),this._firestore=t,this._delegate=n}return k(e,[{key:"query",get:function(){return new Cb(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new Ib(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Db(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new Ib(n._firestore,r))}))}},{key:"isEqual",value:function(e){return Yk(this._delegate,e._delegate)}}]),e}(),Nb=function(e){_(n,e);var t=T(n);function n(e,r){var i;return y(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return k(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new xb(this.firestore,e):null}},{key:"doc",value:function(e){try{return new xb(this.firestore,void 0===e?Cg(this._delegate):Cg(this._delegate,e))}catch(t){throw _b(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=kg(e.firestore,Og),r=Cg(e),i=zk(e.converter,t);return rb(n,[ek(Zg(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Of.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new xb(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Dg(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(wb.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(Cb);function Pb(e){return kg(e,Eg)}var Rb,Ob=function(){function e(){y(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=I(Gg,n)}return k(e,[{key:"isEqual",value:function(e){return(e=Z(e))instanceof Gg&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(cs.keyField().canonicalString())}}]),e}(),Lb=function(){function e(t){y(this,e),this._delegate=t}return k(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new rk("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new tk("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=cb.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=lb.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new ok("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),Mb={Firestore:yb,GeoPoint:Hg,Timestamp:is,Blob:vb,Transaction:kb,WriteBatch:bb,DocumentReference:xb,DocumentSnapshot:Tb,Query:Cb,QueryDocumentSnapshot:Ib,QuerySnapshot:Ab,CollectionReference:Nb,FieldPath:Ob,FieldValue:Lb,setLogLevel:function(e){!function(e){Ru.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new ne("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Mb)))})(Rb=At,(function(e,t){return new yb(e,t,new mb)})),Rb.registerVersion("@firebase/firestore-compat","0.3.7");At.initializeApp({apiKey:"AIzaSyCACtoF-WXPJ3BgFSBby1WvlYJ_jWpE7PI",authDomain:"blender-app-6153d.firebaseapp.com",projectId:"blender-app-6153d",storageBucket:"blender-app-6153d.appspot.com",messagingSenderId:"449208915744",appId:"1:449208915744:web:4574917f5dd21eeb0ba945"});var Fb=At.storage(),Vb=At.firestore(),Ub=At.firestore.FieldValue.serverTimestamp,Bb=function(e){var n=s((0,t.useState)(0),2),r=n[0],i=n[1],a=s((0,t.useState)(null),2),o=a[0],u=a[1],c=s((0,t.useState)(null),2),l=c[0],f=c[1];return(0,t.useEffect)((function(){var t=Fb.ref(e.name),n=Vb.collection("images");t.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;i(t)}),(function(e){u(e)}),v(h().mark((function e(){var r,i;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:r=e.sent,i=Ub(),n.add({url:r,createdAt:i}),f(r);case 6:case"end":return e.stop()}}),e)}))))}),[e]),{progress:r,url:l,error:o}},jb=(0,t.createContext)({transformPagePoint:function(e){return e},isStatic:!1,reducedMotion:"never"}),zb=(0,t.createContext)({}),qb=(0,t.createContext)(null),Gb="undefined"!==typeof document,Kb=Gb?t.useLayoutEffect:t.useEffect,Hb=(0,t.createContext)({strict:!1});function Wb(e){return"object"===typeof e&&Object.prototype.hasOwnProperty.call(e,"current")}function Qb(e){return"string"===typeof e||Array.isArray(e)}function Yb(e){return"object"===typeof e&&"function"===typeof e.start}var Xb=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],$b=["initial"].concat(Xb);function Jb(e){return Yb(e.animate)||$b.some((function(t){return Qb(e[t])}))}function Zb(e){return Boolean(Jb(e)||e.variants)}function ew(e){var n=function(e,t){if(Jb(e)){var n=e.initial,r=e.animate;return{initial:!1===n||Qb(n)?n:void 0,animate:Qb(r)?r:void 0}}return!1!==e.inherit?t:{}}(e,(0,t.useContext)(zb)),r=n.initial,i=n.animate;return(0,t.useMemo)((function(){return{initial:r,animate:i}}),[tw(r),tw(i)])}function tw(e){return Array.isArray(e)?e.join(" "):e}var nw={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},rw={},iw=function(e){rw[e]={isEnabled:function(t){return nw[e].some((function(e){return!!t[e]}))}}};for(var aw in nw)iw(aw);function ow(e){var n=(0,t.useRef)(null);return null===n.current&&(n.current=e()),n.current}var uw={hasAnimatedSinceResize:!0,hasEverUpdated:!1},sw=1;var cw=(0,t.createContext)({}),lw=(0,t.createContext)({}),fw=Symbol.for("motionComponentSymbol");function hw(e){var n=e.preloadedFeatures,r=e.createVisualElement,i=e.useRender,a=e.useVisualState,o=e.Component;n&&function(e){for(var t in e)rw[t]=pe(pe({},rw[t]),e[t])}(n);var u=(0,t.forwardRef)((function(e,u){var s,c=pe(pe(pe({},(0,t.useContext)(jb)),e),{},{layoutId:dw(e)}),l=c.isStatic,f=ew(e),h=l?void 0:ow((function(){if(uw.hasEverUpdated)return sw++})),d=a(e,l);if(!l&&Gb){f.visualElement=function(e,n,r,i){var a=(0,t.useContext)(zb).visualElement,o=(0,t.useContext)(Hb),u=(0,t.useContext)(qb),s=(0,t.useContext)(jb).reducedMotion,c=(0,t.useRef)();i=i||o.renderer,!c.current&&i&&(c.current=i(e,{visualState:n,parent:a,props:r,presenceContext:u,blockInitialAnimation:!!u&&!1===u.initial,reducedMotionConfig:s}));var l=c.current;return(0,t.useInsertionEffect)((function(){l&&l.update(r,u)})),Kb((function(){l&&l.render()})),(0,t.useEffect)((function(){l&&l.updateFeatures()})),(window.HandoffAppearAnimations?Kb:t.useEffect)((function(){l&&l.animationState&&l.animationState.animateChanges()})),l}(o,d,c,r);var v=(0,t.useContext)(lw),p=(0,t.useContext)(Hb).strict;f.visualElement&&(s=f.visualElement.loadFeatures(c,p,n,h,v))}return t.createElement(zb.Provider,{value:f},s&&f.visualElement?t.createElement(s,pe({visualElement:f.visualElement},c)):null,i(o,e,h,function(e,n,r){return(0,t.useCallback)((function(t){t&&e.mount&&e.mount(t),n&&(t?n.mount(t):n.unmount()),r&&("function"===typeof r?r(t):Wb(r)&&(r.current=t))}),[n])}(d,f.visualElement,u),d,l,f.visualElement))}));return u[fw]=o,u}function dw(e){var n=e.layoutId,r=(0,t.useContext)(cw).id;return r&&void 0!==n?r+"-"+n:n}function vw(e){function t(t){return hw(e(t,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}if("undefined"===typeof Proxy)return t;var n=new Map;return new Proxy(t,{get:function(e,r){return n.has(r)||n.set(r,t(r)),n.get(r)}})}var pw=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function mw(e){return"string"===typeof e&&!e.includes("-")&&!!(pw.indexOf(e)>-1||/[A-Z]/.test(e))}var yw={};var gw=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],kw=new Set(gw);function bw(e,t){var n=t.layout,r=t.layoutId;return kw.has(e)||e.startsWith("origin")||(n||void 0!==r)&&(!!yw[e]||"opacity"===e)}var ww=function(e){return Boolean(e&&e.getVelocity)},xw={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},_w=gw.length;var Ew=function(e){return function(t){return"string"===typeof t&&t.startsWith(e)}},Sw=Ew("--"),Tw=Ew("var(--"),Iw=function(e,t){return t&&"number"===typeof e?t.transform(e):e},Cw=function(e,t,n){return Math.min(Math.max(n,e),t)},Dw={test:function(e){return"number"===typeof e},parse:parseFloat,transform:function(e){return e}},Aw=pe(pe({},Dw),{},{transform:function(e){return Cw(0,1,e)}}),Nw=pe(pe({},Dw),{},{default:1}),Pw=function(e){return Math.round(1e5*e)/1e5},Rw=/(-)?([\d]*\.?[\d])+/g,Ow=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,Lw=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Mw(e){return"string"===typeof e}var Fw=function(e){return{test:function(t){return Mw(t)&&t.endsWith(e)&&1===t.split(" ").length},parse:parseFloat,transform:function(t){return"".concat(t).concat(e)}}},Vw=Fw("deg"),Uw=Fw("%"),Bw=Fw("px"),jw=Fw("vh"),zw=Fw("vw"),qw=pe(pe({},Uw),{},{parse:function(e){return Uw.parse(e)/100},transform:function(e){return Uw.transform(100*e)}}),Gw=pe(pe({},Dw),{},{transform:Math.round}),Kw={borderWidth:Bw,borderTopWidth:Bw,borderRightWidth:Bw,borderBottomWidth:Bw,borderLeftWidth:Bw,borderRadius:Bw,radius:Bw,borderTopLeftRadius:Bw,borderTopRightRadius:Bw,borderBottomRightRadius:Bw,borderBottomLeftRadius:Bw,width:Bw,maxWidth:Bw,height:Bw,maxHeight:Bw,size:Bw,top:Bw,right:Bw,bottom:Bw,left:Bw,padding:Bw,paddingTop:Bw,paddingRight:Bw,paddingBottom:Bw,paddingLeft:Bw,margin:Bw,marginTop:Bw,marginRight:Bw,marginBottom:Bw,marginLeft:Bw,rotate:Vw,rotateX:Vw,rotateY:Vw,rotateZ:Vw,scale:Nw,scaleX:Nw,scaleY:Nw,scaleZ:Nw,skew:Vw,skewX:Vw,skewY:Vw,distance:Bw,translateX:Bw,translateY:Bw,translateZ:Bw,x:Bw,y:Bw,z:Bw,perspective:Bw,transformPerspective:Bw,opacity:Aw,originX:qw,originY:qw,originZ:Bw,zIndex:Gw,fillOpacity:Aw,strokeOpacity:Aw,numOctaves:Gw};function Hw(e,t,n,r){var i=e.style,a=e.vars,o=e.transform,u=e.transformOrigin,s=!1,c=!1,l=!0;for(var f in t){var h=t[f];if(Sw(f))a[f]=h;else{var d=Kw[f],v=Iw(h,d);if(kw.has(f)){if(s=!0,o[f]=v,!l)continue;h!==(d.default||0)&&(l=!1)}else f.startsWith("origin")?(c=!0,u[f]=v):i[f]=v}}if(t.transform||(s||r?i.transform=function(e,t,n,r){for(var i=t.enableHardwareAcceleration,a=void 0===i||i,o=t.allowTransformNone,u=void 0===o||o,s="",c=0;c<_w;c++){var l=gw[c];if(void 0!==e[l]){var f=xw[l]||l;s+="".concat(f,"(").concat(e[l],") ")}}return a&&!e.z&&(s+="translateZ(0)"),s=s.trim(),r?s=r(e,n?"":s):u&&n&&(s="none"),s}(e.transform,n,l,r):i.transform&&(i.transform="none")),c){var p=u.originX,m=void 0===p?"50%":p,y=u.originY,g=void 0===y?"50%":y,k=u.originZ,b=void 0===k?0:k;i.transformOrigin="".concat(m," ").concat(g," ").concat(b)}}var Ww=function(){return{style:{},transform:{},transformOrigin:{},vars:{}}};function Qw(e,t,n){for(var r in t)ww(t[r])||bw(r,n)||(e[r]=t[r])}function Yw(e,n,r){var i={};return Qw(i,e.style||{},e),Object.assign(i,function(e,n,r){var i=e.transformTemplate;return(0,t.useMemo)((function(){var e=Ww();return Hw(e,n,{enableHardwareAcceleration:!r},i),Object.assign({},e.vars,e.style)}),[n])}(e,n,r)),e.transformValues?e.transformValues(i):i}function Xw(e,t,n){var r={},i=Yw(e,t,n);return e.drag&&!1!==e.dragListener&&(r.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=!0===e.drag?"none":"pan-".concat("x"===e.drag?"y":"x")),void 0===e.tabIndex&&(e.onTap||e.onTapStart||e.whileTap)&&(r.tabIndex=0),r.style=i,r}var $w=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onLayoutAnimationStart","onLayoutAnimationComplete","onLayoutMeasure","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","ignoreStrict","viewport"]);function Jw(e){return e.startsWith("while")||e.startsWith("drag")&&"draggable"!==e||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||$w.has(e)}var Zw,ex=function(e){return!Jw(e)};try{(Zw=require("@emotion/is-prop-valid").default)&&(ex=function(e){return e.startsWith("on")?!Jw(e):Zw(e)})}catch(zy){}function tx(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function nx(e,t,n){return"string"===typeof e?e:Bw.transform(t+n*e)}var rx={offset:"stroke-dashoffset",array:"stroke-dasharray"},ix={offset:"strokeDashoffset",array:"strokeDasharray"};var ax=["attrX","attrY","attrScale","originX","originY","pathLength","pathSpacing","pathOffset"];function ox(e,t,n,r,i){var a=t.attrX,o=t.attrY,u=t.attrScale,s=t.originX,c=t.originY,l=t.pathLength,f=t.pathSpacing,h=void 0===f?1:f,d=t.pathOffset,v=void 0===d?0:d;if(Hw(e,tx(t,ax),n,i),r)e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);else{e.attrs=e.style,e.style={};var p=e.attrs,m=e.style,y=e.dimensions;p.transform&&(y&&(m.transform=p.transform),delete p.transform),y&&(void 0!==s||void 0!==c||m.transform)&&(m.transformOrigin=function(e,t,n){var r=nx(t,e.x,e.width),i=nx(n,e.y,e.height);return"".concat(r," ").concat(i)}(y,void 0!==s?s:.5,void 0!==c?c:.5)),void 0!==a&&(p.x=a),void 0!==o&&(p.y=o),void 0!==u&&(p.scale=u),void 0!==l&&function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];e.pathLength=1;var a=i?rx:ix;e[a.offset]=Bw.transform(-r);var o=Bw.transform(t),u=Bw.transform(n);e[a.array]="".concat(o," ").concat(u)}(p,l,h,v,!1)}}var ux=function(){return pe(pe({},Ww()),{},{attrs:{}})},sx=function(e){return"string"===typeof e&&"svg"===e.toLowerCase()};function cx(e,n,r,i){var a=(0,t.useMemo)((function(){var t=ux();return ox(t,n,{enableHardwareAcceleration:!1},sx(i),e.transformTemplate),pe(pe({},t.attrs),{},{style:pe({},t.style)})}),[n]);if(e.style){var o={};Qw(o,e.style,e),a.style=pe(pe({},o),a.style)}return a}function lx(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return function(n,r,i,a,o,u){var s=o.latestValues,c=(mw(n)?cx:Xw)(r,s,u,n),l=function(e,t,n){var r={};for(var i in e)"values"===i&&"object"===typeof e.values||(ex(i)||!0===n&&Jw(i)||!t&&!Jw(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}(r,"string"===typeof n,e),f=pe(pe(pe({},l),c),{},{ref:a}),h=r.children,d=(0,t.useMemo)((function(){return ww(h)?h.get():h}),[h]);return i&&(f["data-projection-id"]=i),(0,t.createElement)(n,pe(pe({},f),{},{children:d}))}}var fx=function(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()};function hx(e,t,n,r){var i=t.style,a=t.vars;for(var o in Object.assign(e.style,i,r&&r.getProjectionStyles(n)),a)e.style.setProperty(o,a[o])}var dx=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function vx(e,t,n,r){for(var i in hx(e,t,void 0,r),t.attrs)e.setAttribute(dx.has(i)?i:fx(i),t.attrs[i])}function px(e,t){var n=e.style,r={};for(var i in n)(ww(n[i])||t.style&&ww(t.style[i])||bw(i,e))&&(r[i]=n[i]);return r}function mx(e,t){var n=px(e,t);for(var r in e){if(ww(e[r])||ww(t[r]))n[-1!==gw.indexOf(r)?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r]=e[r]}return n}function yx(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,i)),"string"===typeof t&&(t=e.variants&&e.variants[t]),"function"===typeof t&&(t=t(void 0!==n?n:e.custom,r,i)),t}var gx=function(e){return Array.isArray(e)},kx=function(e){return Boolean(e&&"object"===typeof e&&e.mix&&e.toValue)},bx=function(e){return gx(e)?e[e.length-1]||0:e};function wx(e){var t=ww(e)?e.get():e;return kx(t)?t.toValue():t}var xx=["transitionEnd","transition"];var _x=function(e){return function(n,r){var i=(0,t.useContext)(zb),a=(0,t.useContext)(qb),o=function(){return function(e,t,n,r){var i=e.scrapeMotionValuesFromProps,a=e.createRenderState,o=e.onMount,u={latestValues:Ex(t,n,r,i),renderState:a()};return o&&(u.mount=function(e){return o(t,e,u)}),u}(e,n,i,a)};return r?o():ow(o)}};function Ex(e,t,n,r){var i={},a=r(e,{});for(var o in a)i[o]=wx(a[o]);var u=e.initial,s=e.animate,c=Jb(e),l=Zb(e);t&&l&&!c&&!1!==e.inherit&&(void 0===u&&(u=t.initial),void 0===s&&(s=t.animate));var f=!!n&&!1===n.initial,h=(f=f||!1===u)?s:u;h&&"boolean"!==typeof h&&!Yb(h)&&(Array.isArray(h)?h:[h]).forEach((function(t){var n=yx(e,t);if(n){var r=n.transitionEnd,a=(n.transition,tx(n,xx));for(var o in a){var u=a[o];if(Array.isArray(u))u=u[f?u.length-1:0];null!==u&&(i[o]=u)}for(var s in r)i[s]=r[s]}}));return i}var Sx={useVisualState:_x({scrapeMotionValuesFromProps:mx,createRenderState:ux,onMount:function(e,t,n){var r=n.renderState,i=n.latestValues;try{r.dimensions="function"===typeof t.getBBox?t.getBBox():t.getBoundingClientRect()}catch(a){r.dimensions={x:0,y:0,width:0,height:0}}ox(r,i,{enableHardwareAcceleration:!1},sx(t.tagName),e.transformTemplate),vx(t,r)}})},Tx={useVisualState:_x({scrapeMotionValuesFromProps:px,createRenderState:Ww})};function Ix(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{passive:!0};return e.addEventListener(t,n,r),function(){return e.removeEventListener(t,n)}}var Cx=function(e){return"mouse"===e.pointerType?"number"!==typeof e.button||e.button<=0:!1!==e.isPrimary};function Dx(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"page";return{point:{x:e[t+"X"],y:e[t+"Y"]}}}var Ax=function(e){return function(t){return Cx(t)&&e(t,Dx(t))}};function Nx(e,t,n,r){return Ix(e,t,Ax(n),r)}var Px=function(e,t){return function(n){return t(e(n))}},Rx=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(Px)};function Ox(e){var t=null;return function(){return null===t&&(t=e,function(){t=null})}}var Lx=Ox("dragHorizontal"),Mx=Ox("dragVertical");function Fx(e){var t=!1;if("y"===e)t=Mx();else if("x"===e)t=Lx();else{var n=Lx(),r=Mx();n&&r?t=function(){n(),r()}:(n&&n(),r&&r())}return t}function Vx(){var e=Fx(!0);return!e||(e(),!1)}var Ux=function(){function e(t){y(this,e),this.isMounted=!1,this.node=t}return k(e,[{key:"update",value:function(){}}]),e}();var Bx={delta:0,timestamp:0,isProcessing:!1},jx=!0,zx=!1,qx=["read","update","preRender","render","postRender"],Gx=qx.reduce((function(e,t){return e[t]=function(e){var t=[],n=[],r=0,i=!1,a=!1,o=new WeakSet,u={schedule:function(e){var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2]&&i,u=a?t:n;return arguments.length>1&&void 0!==arguments[1]&&arguments[1]&&o.add(e),-1===u.indexOf(e)&&(u.push(e),a&&i&&(r=t.length)),e},cancel:function(e){var t=n.indexOf(e);-1!==t&&n.splice(t,1),o.delete(e)},process:function(s){if(i)a=!0;else{i=!0;var c=[n,t];if(t=c[0],(n=c[1]).length=0,r=t.length)for(var l=0;l<r;l++){var f=t[l];f(s),o.has(f)&&(u.schedule(f),e())}i=!1,a&&(a=!1,u.process(s))}}};return u}((function(){return zx=!0})),e}),{}),Kx=function(e){return Gx[e].process(Bx)},Hx=function e(t){zx=!1,Bx.delta=jx?1e3/60:Math.max(Math.min(t-Bx.timestamp,40),1),Bx.timestamp=t,Bx.isProcessing=!0,qx.forEach(Kx),Bx.isProcessing=!1,zx&&(jx=!1,requestAnimationFrame(e))},Wx=qx.reduce((function(e,t){var n=Gx[t];return e[t]=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return zx||(zx=!0,jx=!0,Bx.isProcessing||requestAnimationFrame(Hx)),n.schedule(e,t,r)},e}),{});function Qx(e){qx.forEach((function(t){return Gx[t].cancel(e)}))}function Yx(e,t){var n="pointer"+(t?"enter":"leave"),r="onHover"+(t?"Start":"End");return Nx(e.current,n,(function(n,i){if("touch"!==n.type&&!Vx()){var a=e.getProps();e.animationState&&a.whileHover&&e.animationState.setActive("whileHover",t),a[r]&&Wx.update((function(){return a[r](n,i)}))}}),{passive:!e.getProps()[r]})}var Xx=function(e){_(n,e);var t=T(n);function n(){return y(this,n),t.apply(this,arguments)}return k(n,[{key:"mount",value:function(){this.unmount=Rx(Yx(this.node,!0),Yx(this.node,!1))}},{key:"unmount",value:function(){}}]),n}(Ux),$x=function(e){_(n,e);var t=T(n);function n(){var e;return y(this,n),(e=t.apply(this,arguments)).isActive=!1,e}return k(n,[{key:"onFocus",value:function(){var e=!1;try{e=this.node.current.matches(":focus-visible")}catch(t){e=!0}e&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}},{key:"onBlur",value:function(){this.isActive&&this.node.animationState&&(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}},{key:"mount",value:function(){var e=this;this.unmount=Rx(Ix(this.node.current,"focus",(function(){return e.onFocus()})),Ix(this.node.current,"blur",(function(){return e.onBlur()})))}},{key:"unmount",value:function(){}}]),n}(Ux),Jx=function e(t,n){return!!n&&(t===n||e(t,n.parentElement))},Zx=function(e){return e};function e_(e,t){if(t){var n=new PointerEvent("pointer"+e);t(n,Dx(n))}}var t_=function(e){_(n,e);var t=T(n);function n(){var e;return y(this,n),(e=t.apply(this,arguments)).removeStartListeners=Zx,e.removeEndListeners=Zx,e.removeAccessibleListeners=Zx,e.startPointerPress=function(t,n){if(e.removeEndListeners(),!e.isPressing){var r=e.node.getProps(),i=Nx(window,"pointerup",(function(t,n){if(e.checkPressEnd()){var r=e.node.getProps(),i=r.onTap,a=r.onTapCancel;Wx.update((function(){Jx(e.node.current,t.target)?i&&i(t,n):a&&a(t,n)}))}}),{passive:!(r.onTap||r.onPointerUp)}),a=Nx(window,"pointercancel",(function(t,n){return e.cancelPress(t,n)}),{passive:!(r.onTapCancel||r.onPointerCancel)});e.removeEndListeners=Rx(i,a),e.startPress(t,n)}},e.startAccessiblePress=function(){var t=Ix(e.node.current,"keydown",(function(t){if("Enter"===t.key&&!e.isPressing){e.removeEndListeners(),e.removeEndListeners=Ix(e.node.current,"keyup",(function(t){"Enter"===t.key&&e.checkPressEnd()&&e_("up",(function(t,n){var r=e.node.getProps().onTap;r&&Wx.update((function(){return r(t,n)}))}))})),e_("down",(function(t,n){e.startPress(t,n)}))}})),n=Ix(e.node.current,"blur",(function(){e.isPressing&&e_("cancel",(function(t,n){return e.cancelPress(t,n)}))}));e.removeAccessibleListeners=Rx(t,n)},e}return k(n,[{key:"startPress",value:function(e,t){this.isPressing=!0;var n=this.node.getProps(),r=n.onTapStart;n.whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),r&&Wx.update((function(){return r(e,t)}))}},{key:"checkPressEnd",value:function(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!Vx()}},{key:"cancelPress",value:function(e,t){if(this.checkPressEnd()){var n=this.node.getProps().onTapCancel;n&&Wx.update((function(){return n(e,t)}))}}},{key:"mount",value:function(){var e=this.node.getProps(),t=Nx(this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=Ix(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Rx(t,n)}},{key:"unmount",value:function(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}]),n}(Ux),n_=["root"],r_=new WeakMap,i_=new WeakMap,a_=function(e){var t=r_.get(e.target);t&&t(e)},o_=function(e){e.forEach(a_)};function u_(e,t,n){var r=function(e){var t=e.root,n=tx(e,n_),r=t||document;i_.has(r)||i_.set(r,{});var i=i_.get(r),a=JSON.stringify(n);return i[a]||(i[a]=new IntersectionObserver(o_,pe({root:t},n))),i[a]}(t);return r_.set(e,n),r.observe(e),function(){r_.delete(e),r.unobserve(e)}}var s_={some:0,all:1},c_=function(e){_(n,e);var t=T(n);function n(){var e;return y(this,n),(e=t.apply(this,arguments)).hasEnteredView=!1,e.isInView=!1,e}return k(n,[{key:"startObserver",value:function(){var e=this;this.unmount();var t=this.node.getProps().viewport,n=void 0===t?{}:t,r=n.root,i=n.margin,a=n.amount,o=void 0===a?"some":a,u=n.once,s={root:r?r.current:void 0,rootMargin:i,threshold:"number"===typeof o?o:s_[o]};return u_(this.node.current,s,(function(t){var n=t.isIntersecting;if(e.isInView!==n&&(e.isInView=n,!u||n||!e.hasEnteredView)){n&&(e.hasEnteredView=!0),e.node.animationState&&e.node.animationState.setActive("whileInView",n);var r=e.node.getProps(),i=r.onViewportEnter,a=r.onViewportLeave,o=n?i:a;o&&o(t)}}))}},{key:"mount",value:function(){this.startObserver()}},{key:"update",value:function(){if("undefined"!==typeof IntersectionObserver){var e=this.node,t=e.props,n=e.prevProps,r=["amount","margin","root"].some(function(e){var t=e.viewport,n=void 0===t?{}:t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.viewport,a=void 0===i?{}:i;return function(e){return n[e]!==a[e]}}(t,n));r&&this.startObserver()}}},{key:"unmount",value:function(){}}]),n}(Ux);var l_={inView:{Feature:c_},tap:{Feature:t_},focus:{Feature:$x},hover:{Feature:Xx}};function f_(e,t){if(!Array.isArray(t))return!1;var n=t.length;if(n!==e.length)return!1;for(var r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}function h_(e,t,n){var r=e.getProps();return yx(r,t,void 0!==n?n:r.custom,function(e){var t={};return e.values.forEach((function(e,n){return t[n]=e.get()})),t}(e),function(e){var t={};return e.values.forEach((function(e,n){return t[n]=e.getVelocity()})),t}(e))}var d_="data-"+fx("framerAppearId"),v_=Zx,p_=Zx;var m_=function(e){return 1e3*e},y_=function(e){return e/1e3},g_=!1,k_=function(e){return Array.isArray(e)&&"number"===typeof e[0]};function b_(e){return Boolean(!e||"string"===typeof e&&x_[e]||k_(e)||Array.isArray(e)&&e.every(b_))}var w_=function(e){var t=s(e,4),n=t[0],r=t[1],i=t[2],a=t[3];return"cubic-bezier(".concat(n,", ").concat(r,", ").concat(i,", ").concat(a,")")},x_={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:w_([0,.65,.55,1]),circOut:w_([.55,0,1,.45]),backIn:w_([.31,.01,.66,-.59]),backOut:w_([.33,1.53,.69,.99])};function __(e){if(e)return k_(e)?w_(e):Array.isArray(e)?e.map(__):x_[e]}var E_={waapi:function(){return Object.hasOwnProperty.call(Element.prototype,"animate")}},S_={},T_={},I_=function(e){T_[e]=function(){return void 0===S_[e]&&(S_[e]=E_[e]()),S_[e]}};for(var C_ in E_)I_(C_);var D_=function(e,t,n){return(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e},A_=1e-7,N_=12;function P_(e,t,n,r){if(e===t&&n===r)return Zx;var i=function(t){return function(e,t,n,r,i){var a,o,u=0;do{(a=D_(o=t+(n-t)/2,r,i)-e)>0?n=o:t=o}while(Math.abs(a)>A_&&++u<N_);return o}(t,0,1,e,n)};return function(e){return 0===e||1===e?e:D_(i(e),t,r)}}var R_=P_(.42,0,1,1),O_=P_(0,0,.58,1),L_=P_(.42,0,.58,1),M_=function(e){return Array.isArray(e)&&"number"!==typeof e[0]},F_=function(e){return function(t){return t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2}},V_=function(e){return function(t){return 1-e(1-t)}},U_=function(e){return 1-Math.sin(Math.acos(e))},B_=V_(U_),j_=F_(B_),z_=P_(.33,1.53,.69,.99),q_=V_(z_),G_=F_(q_),K_={linear:Zx,easeIn:R_,easeInOut:L_,easeOut:O_,circIn:U_,circInOut:j_,circOut:B_,backIn:q_,backInOut:G_,backOut:z_,anticipate:function(e){return(e*=2)<1?.5*q_(e):.5*(2-Math.pow(2,-10*(e-1)))}},H_=function(e){if(Array.isArray(e)){p_(4===e.length,"Cubic bezier arrays must contain four numerical values.");var t=s(e,4);return P_(t[0],t[1],t[2],t[3])}return"string"===typeof e?(p_(void 0!==K_[e],"Invalid easing type '".concat(e,"'")),K_[e]):e},W_=function(e,t){return function(n){return Boolean(Mw(n)&&Lw.test(n)&&n.startsWith(e)||t&&Object.prototype.hasOwnProperty.call(n,t))}},Q_=function(e,t,n){return function(r){var i;if(!Mw(r))return r;var a=s(r.match(Rw),4),o=a[0],u=a[1],c=a[2],l=a[3];return m(i={},e,parseFloat(o)),m(i,t,parseFloat(u)),m(i,n,parseFloat(c)),m(i,"alpha",void 0!==l?parseFloat(l):1),i}},Y_=pe(pe({},Dw),{},{transform:function(e){return Math.round(function(e){return Cw(0,255,e)}(e))}}),X_={test:W_("rgb","red"),parse:Q_("red","green","blue"),transform:function(e){var t=e.red,n=e.green,r=e.blue,i=e.alpha,a=void 0===i?1:i;return"rgba("+Y_.transform(t)+", "+Y_.transform(n)+", "+Y_.transform(r)+", "+Pw(Aw.transform(a))+")"}};var $_={test:W_("#"),parse:function(e){var t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}},transform:X_.transform},J_={test:W_("hsl","hue"),parse:Q_("hue","saturation","lightness"),transform:function(e){var t=e.hue,n=e.saturation,r=e.lightness,i=e.alpha,a=void 0===i?1:i;return"hsla("+Math.round(t)+", "+Uw.transform(Pw(n))+", "+Uw.transform(Pw(r))+", "+Pw(Aw.transform(a))+")"}},Z_={test:function(e){return X_.test(e)||$_.test(e)||J_.test(e)},parse:function(e){return X_.test(e)?X_.parse(e):J_.test(e)?J_.parse(e):$_.parse(e)},transform:function(e){return Mw(e)?e:e.hasOwnProperty("red")?X_.transform(e):J_.transform(e)}},eE=function(e,t,n){return-n*e+n*t+e};function tE(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var nE=function(e,t,n){var r=e*e;return Math.sqrt(Math.max(0,n*(t*t-r)+r))},rE=[$_,X_,J_];function iE(e){var t=function(e){return rE.find((function(t){return t.test(e)}))}(e);p_(Boolean(t),"'".concat(e,"' is not an animatable color. Use the equivalent color code instead."));var n=t.parse(e);return t===J_&&(n=function(e){var t=e.hue,n=e.saturation,r=e.lightness,i=e.alpha;t/=360,r/=100;var a=0,o=0,u=0;if(n/=100){var s=r<.5?r*(1+n):r+n-r*n,c=2*r-s;a=tE(c,s,t+1/3),o=tE(c,s,t),u=tE(c,s,t-1/3)}else a=o=u=r;return{red:Math.round(255*a),green:Math.round(255*o),blue:Math.round(255*u),alpha:i}}(n)),n}var aE=function(e,t){var n=iE(e),r=iE(t),i=pe({},n);return function(e){return i.red=nE(n.red,r.red,e),i.green=nE(n.green,r.green,e),i.blue=nE(n.blue,r.blue,e),i.alpha=eE(n.alpha,r.alpha,e),X_.transform(i)}};var oE={regex:/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,countKey:"Vars",token:"${v}",parse:Zx},uE={regex:Ow,countKey:"Colors",token:"${c}",parse:Z_.parse},sE={regex:Rw,countKey:"Numbers",token:"${n}",parse:Dw.parse};function cE(e,t){var n,r=t.regex,i=t.countKey,a=t.token,o=t.parse,u=e.tokenised.match(r);u&&(e["num"+i]=u.length,e.tokenised=e.tokenised.replace(r,a),(n=e.values).push.apply(n,te(u.map(o))))}function lE(e){var t=e.toString(),n={value:t,tokenised:t,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&cE(n,oE),cE(n,uE),cE(n,sE),n}function fE(e){return lE(e).values}function hE(e){var t=lE(e),n=t.values,r=t.numColors,i=t.numVars,a=t.tokenised,o=n.length;return function(e){for(var t=a,n=0;n<o;n++)t=n<i?t.replace(oE.token,e[n]):n<i+r?t.replace(uE.token,Z_.transform(e[n])):t.replace(sE.token,Pw(e[n]));return t}}var dE=function(e){return"number"===typeof e?0:e};var vE={test:function(e){var t,n;return isNaN(e)&&Mw(e)&&((null===(t=e.match(Rw))||void 0===t?void 0:t.length)||0)+((null===(n=e.match(Ow))||void 0===n?void 0:n.length)||0)>0},parse:fE,createTransformer:hE,getAnimatableNone:function(e){var t=fE(e);return hE(e)(t.map(dE))}},pE=function(e,t){return function(n){return"".concat(n>0?t:e)}};function mE(e,t){return"number"===typeof e?function(n){return eE(e,t,n)}:Z_.test(e)?aE(e,t):e.startsWith("var(")?pE(e,t):kE(e,t)}var yE=function(e,t){var n=te(e),r=n.length,i=e.map((function(e,n){return mE(e,t[n])}));return function(e){for(var t=0;t<r;t++)n[t]=i[t](e);return n}},gE=function(e,t){var n=pe(pe({},e),t),r={};for(var i in n)void 0!==e[i]&&void 0!==t[i]&&(r[i]=mE(e[i],t[i]));return function(e){for(var t in r)n[t]=r[t](e);return n}},kE=function(e,t){var n=vE.createTransformer(t),r=lE(e),i=lE(t);return r.numVars===i.numVars&&r.numColors===i.numColors&&r.numNumbers>=i.numNumbers?Rx(yE(r.values,i.values),n):(v_(!0,"Complex values '".concat(e,"' and '").concat(t,"' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.")),pE(e,t))},bE=function(e,t,n){var r=t-e;return 0===r?1:(n-e)/r},wE=function(e,t){return function(n){return eE(e,t,n)}};function xE(e,t,n){for(var r=[],i=n||function(e){return"number"===typeof e?wE:"string"===typeof e?Z_.test(e)?aE:kE:Array.isArray(e)?yE:"object"===typeof e?gE:wE}(e[0]),a=e.length-1,o=0;o<a;o++){var u=i(e[o],e[o+1]);if(t){var s=Array.isArray(t)?t[o]||Zx:t;u=Rx(s,u)}r.push(u)}return r}function _E(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.clamp,i=void 0===r||r,a=n.ease,o=n.mixer,u=e.length;if(p_(u===t.length,"Both input and output ranges must be the same length"),1===u)return function(){return t[0]};e[0]>e[u-1]&&(e=te(e).reverse(),t=te(t).reverse());var s=xE(t,a,o),c=s.length,l=function(t){var n=0;if(c>1)for(;n<e.length-2&&!(t<e[n+1]);n++);var r=bE(e[n],e[n+1],t);return s[n](r)};return i?function(t){return l(Cw(e[0],e[u-1],t))}:l}function EE(e){var t=[0];return function(e,t){for(var n=e[e.length-1],r=1;r<=t;r++){var i=bE(0,t,r);e.push(eE(n,1,i))}}(t,e.length-1),t}function SE(e){var t,n,r=e.duration,i=void 0===r?300:r,a=e.keyframes,o=e.times,u=e.ease,s=void 0===u?"easeInOut":u,c=M_(s)?s.map(H_):H_(s),l={done:!1,value:a[0]},f=function(e,t){return e.map((function(e){return e*t}))}(o&&o.length===a.length?o:EE(a),i),h=_E(f,a,{ease:Array.isArray(c)?c:(t=a,n=c,t.map((function(){return n||L_})).splice(0,t.length-1))});return{calculatedDuration:i,next:function(e){return l.value=h(e),l.done=e>=i,l}}}function TE(e,t){return t?e*(1e3/t):0}var IE=5;function CE(e,t,n){var r=Math.max(t-IE,0);return TE(n-e(r),t-r)}var DE=.001,AE=.01,NE=10,PE=.05,RE=1;function OE(e){var t,n,r=e.duration,i=void 0===r?800:r,a=e.bounce,o=void 0===a?.25:a,u=e.velocity,s=void 0===u?0:u,c=e.mass,l=void 0===c?1:c;v_(i<=m_(NE),"Spring duration must be 10 seconds or less");var f=1-o;f=Cw(PE,RE,f),i=Cw(AE,NE,y_(i)),f<1?(t=function(e){var t=e*f,n=t*i,r=t-s,a=ME(e,f),o=Math.exp(-n);return DE-r/a*o},n=function(e){var n=e*f*i,r=n*s+s,a=Math.pow(f,2)*Math.pow(e,2)*i,o=Math.exp(-n),u=ME(Math.pow(e,2),f);return(-t(e)+DE>0?-1:1)*((r-a)*o)/u}):(t=function(e){return Math.exp(-e*i)*((e-s)*i+1)-DE},n=function(e){return Math.exp(-e*i)*(i*i*(s-e))});var h=function(e,t,n){for(var r=n,i=1;i<LE;i++)r-=e(r)/t(r);return r}(t,n,5/i);if(i=m_(i),isNaN(h))return{stiffness:100,damping:10,duration:i};var d=Math.pow(h,2)*l;return{stiffness:d,damping:2*f*Math.sqrt(l*d),duration:i}}var LE=12;function ME(e,t){return e*Math.sqrt(1-t*t)}var FE=["keyframes","restDelta","restSpeed"],VE=["duration","bounce"],UE=["stiffness","damping","mass"];function BE(e,t){return t.some((function(t){return void 0!==e[t]}))}function jE(e){var t,n=e.keyframes,r=e.restDelta,i=e.restSpeed,a=tx(e,FE),o=n[0],u=n[n.length-1],s={done:!1,value:o},c=function(e){var t=pe({velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1},e);if(!BE(e,UE)&&BE(e,VE)){var n=OE(e);(t=pe(pe(pe({},t),n),{},{velocity:0,mass:1})).isResolvedFromDuration=!0}return t}(a),l=c.stiffness,f=c.damping,h=c.mass,d=c.velocity,v=c.duration,p=c.isResolvedFromDuration,m=d?-y_(d):0,y=f/(2*Math.sqrt(l*h)),g=u-o,k=y_(Math.sqrt(l/h)),b=Math.abs(g)<5;if(i||(i=b?.01:2),r||(r=b?.005:.5),y<1){var w=ME(k,y);t=function(e){var t=Math.exp(-y*k*e);return u-t*((m+y*k*g)/w*Math.sin(w*e)+g*Math.cos(w*e))}}else if(1===y)t=function(e){return u-Math.exp(-k*e)*(g+(m+k*g)*e)};else{var x=k*Math.sqrt(y*y-1);t=function(e){var t=Math.exp(-y*k*e),n=Math.min(x*e,300);return u-t*((m+y*k*g)*Math.sinh(n)+x*g*Math.cosh(n))/x}}return{calculatedDuration:p&&v||null,next:function(e){var n=t(e);if(p)s.done=e>=v;else{var a=m;0!==e&&(a=y<1?CE(t,e,n):0);var o=Math.abs(a)<=i,c=Math.abs(u-n)<=r;s.done=o&&c}return s.value=s.done?u:n,s}}}function zE(e){var t=e.keyframes,n=e.velocity,r=void 0===n?0:n,i=e.power,a=void 0===i?.8:i,o=e.timeConstant,u=void 0===o?325:o,s=e.bounceDamping,c=void 0===s?10:s,l=e.bounceStiffness,f=void 0===l?500:l,h=e.modifyTarget,d=e.min,v=e.max,p=e.restDelta,m=void 0===p?.5:p,y=e.restSpeed,g=t[0],k={done:!1,value:g},b=function(e){return void 0===d?v:void 0===v||Math.abs(d-e)<Math.abs(v-e)?d:v},w=a*r,x=g+w,_=void 0===h?x:h(x);_!==x&&(w=_-g);var E,S,T=function(e){return-w*Math.exp(-e/u)},I=function(e){return _+T(e)},C=function(e){var t=T(e),n=I(e);k.done=Math.abs(t)<=m,k.value=k.done?_:n},D=function(e){(function(e){return void 0!==d&&e<d||void 0!==v&&e>v})(k.value)&&(E=e,S=jE({keyframes:[k.value,b(k.value)],velocity:CE(I,e,k.value),damping:c,stiffness:f,restDelta:m,restSpeed:y}))};return D(0),{calculatedDuration:null,next:function(e){var t=!1;return S||void 0!==E||(t=!0,C(e),D(e)),void 0!==E&&e>E?S.next(e-E):(!t&&C(e),k)}}}var qE=function(e){var t=function(t){var n=t.timestamp;return e(n)};return{start:function(){return Wx.update(t,!0)},stop:function(){return Qx(t)},now:function(){return Bx.isProcessing?Bx.timestamp:performance.now()}}},GE=2e4;function KE(e){for(var t=0,n=e.next(t);!n.done&&t<GE;)t+=50,n=e.next(t);return t>=GE?1/0:t}var HE=["autoplay","delay","driver","keyframes","type","repeat","repeatDelay","repeatType","onPlay","onStop","onComplete","onUpdate"],WE={decay:zE,inertia:zE,tween:SE,keyframes:SE,spring:jE};function QE(e){var t,n,r,i=e.autoplay,a=void 0===i||i,o=e.delay,u=void 0===o?0:o,s=e.driver,c=void 0===s?qE:s,l=e.keyframes,f=e.type,h=void 0===f?"keyframes":f,d=e.repeat,v=void 0===d?0:d,p=e.repeatDelay,m=void 0===p?0:p,y=e.repeatType,g=void 0===y?"loop":y,k=e.onPlay,b=e.onStop,w=e.onComplete,x=e.onUpdate,_=tx(e,HE),E=1,S=!1,T=function(){t&&t(),n=new Promise((function(e){t=e}))};T();var I,C=WE[h]||SE;C!==SE&&"number"!==typeof l[0]&&(I=_E([0,100],l,{clamp:!1}),l=[0,100]);var D,A=C(pe(pe({},_),{},{keyframes:l}));"mirror"===g&&(D=C(pe(pe({},_),{},{keyframes:te(l).reverse(),velocity:-(_.velocity||0)})));var N="idle",P=null,R=null,O=null;null===A.calculatedDuration&&v&&(A.calculatedDuration=KE(A));var L=A.calculatedDuration,M=1/0,F=1/0;null!==L&&(F=(M=L+m)*(v+1)-m);var V=0,U=function(e){if(null!==R){E>0&&(R=Math.min(R,e));var t=(V=null!==P?P:(e-R)*E)-u,n=t<0;V=Math.max(t,0),"finished"===N&&null===P&&(V=F);var r=V,i=A;if(v){var a=V/M,o=Math.floor(a),s=a%1;!s&&a>=1&&(s=1),1===s&&o--,o=Math.min(o,v+1);var c=Boolean(o%2);c&&("reverse"===g?(s=1-s,m&&(s-=m/M)):"mirror"===g&&(i=D));var f=Cw(0,1,s);V>F&&(f="reverse"===g&&c?1:0),r=f*M}var h=n?{done:!1,value:l[0]}:i.next(r);I&&(h.value=I(h.value));var d=h.done;n||null===L||(d=V>=F);var p=null===P&&("finished"===N||"running"===N&&d||E<0&&V<=0);return x&&x(h.value),p&&z(),h}},B=function(){r&&r.stop(),r=void 0},j=function(){N="idle",B(),T(),R=O=null},z=function(){N="finished",w&&w(),B(),T()},q=function(){if(!S){r||(r=c(U));var e=r.now();k&&k(),null!==P?R=e-P:R&&"finished"!==N||(R=e),O=R,P=null,N="running",r.start()}};a&&q();var G={then:function(e,t){return n.then(e,t)},get time(){return y_(V)},set time(e){e=m_(e),V=e,null===P&&r&&0!==E?R=r.now()-e/E:P=e},get duration(){var e=null===A.calculatedDuration?KE(A):A.calculatedDuration;return y_(e)},get speed(){return E},set speed(e){e!==E&&r&&(E=e,G.time=y_(V))},get state(){return N},play:q,pause:function(){N="paused",P=V},stop:function(){S=!0,"idle"!==N&&(N="idle",b&&b(),j())},cancel:function(){null!==O&&U(O),j()},complete:function(){N="finished"},sample:function(e){return R=0,U(e)}};return G}var YE=["onUpdate","onComplete"],XE=new Set(["opacity","clipPath","filter","transform","backgroundColor"]);function $E(e,t,n){n.onUpdate;var r=n.onComplete,i=tx(n,YE);if(!(T_.waapi()&&XE.has(t)&&!i.repeatDelay&&"mirror"!==i.repeatType&&0!==i.damping&&"inertia"!==i.type))return!1;var a,o,u=!1,s=function(){o=new Promise((function(e){a=e}))};s();var c=i.keyframes,l=i.duration,f=void 0===l?300:l,h=i.ease,d=i.times;if(function(e,t){return"spring"===t.type||"backgroundColor"===e||!b_(t.ease)}(t,i)){for(var v=QE(pe(pe({},i),{},{repeat:0,delay:0})),p={done:!1,value:c[0]},y=[],g=0;!p.done&&g<2e4;)p=v.sample(g),y.push(p.value),g+=10;d=void 0,c=y,f=g-10,h="linear"}var k=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.delay,a=void 0===i?0:i,o=r.duration,u=r.repeat,s=void 0===u?0:u,c=r.repeatType,l=void 0===c?"loop":c,f=r.ease,h=r.times,d=m({},t,n);h&&(d.offset=h);var v=__(f);return Array.isArray(v)&&(d.easing=v),e.animate(d,{delay:a,duration:o,easing:Array.isArray(v)?"linear":v,fill:"both",iterations:s+1,direction:"reverse"===l?"alternate":"normal"})}(e.owner.current,t,c,pe(pe({},i),{},{duration:f,ease:h,times:d})),b=function(){return k.cancel()},w=function(){Wx.update(b),a(),s()};return k.onfinish=function(){e.set(function(e,t){var n=t.repeat,r=t.repeatType;return e[n&&"loop"!==(void 0===r?"loop":r)&&n%2===1?0:e.length-1]}(c,i)),r&&r(),w()},{then:function(e,t){return o.then(e,t)},get time(){return y_(k.currentTime||0)},set time(e){k.currentTime=m_(e)},get speed(){return k.playbackRate},set speed(e){k.playbackRate=e},get duration(){return y_(f)},play:function(){u||(k.play(),Qx(b))},pause:function(){return k.pause()},stop:function(){if(u=!0,"idle"!==k.playState){var t=k.currentTime;if(t){var n=QE(pe(pe({},i),{},{autoplay:!1}));e.setWithVelocity(n.sample(t-10).value,n.sample(t).value,10)}w()}},complete:function(){return k.finish()},cancel:w}}var JE={type:"spring",stiffness:500,damping:25,restSpeed:10},ZE={type:"keyframes",duration:.8},eS={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},tS=function(e,t){var n=t.keyframes;return n.length>2?ZE:kw.has(e)?e.startsWith("scale")?{type:"spring",stiffness:550,damping:0===n[1]?2*Math.sqrt(550):30,restSpeed:10}:JE:eS},nS=function(e,t){return"zIndex"!==e&&(!("number"!==typeof t&&!Array.isArray(t))||!("string"!==typeof t||!vE.test(t)||t.startsWith("url(")))},rS=new Set(["brightness","contrast","saturate","opacity"]);function iS(e){var t=s(e.slice(0,-1).split("("),2),n=t[0],r=t[1];if("drop-shadow"===n)return e;var i=s(r.match(Rw)||[],1)[0];if(!i)return e;var a=r.replace(i,""),o=rS.has(n)?1:0;return i!==r&&(o*=100),n+"("+o+a+")"}var aS=/([a-z-]*)\(.*?\)/g,oS=pe(pe({},vE),{},{getAnimatableNone:function(e){var t=e.match(aS);return t?t.map(iS).join(" "):e}}),uS=pe(pe({},Kw),{},{color:Z_,backgroundColor:Z_,outlineColor:Z_,fill:Z_,stroke:Z_,borderColor:Z_,borderTopColor:Z_,borderRightColor:Z_,borderBottomColor:Z_,borderLeftColor:Z_,filter:oS,WebkitFilter:oS}),sS=function(e){return uS[e]};function cS(e,t){var n=sS(e);return n!==oS&&(n=vE),n.getAnimatableNone?n.getAnimatableNone(t):void 0}var lS=["when","delay","delayChildren","staggerChildren","staggerDirection","repeat","repeatType","repeatDelay","from","elapsed"];function fS(e){return 0===e||"string"===typeof e&&0===parseFloat(e)&&-1===e.indexOf(" ")}function hS(e){return"number"===typeof e?0:cS("",e)}function dS(e,t){return e[t]||e.default||e}function vS(e,t){for(var n,r=(i(n=t)||ee(n)||o(n)||u()).slice(0),a=0;a<r.length;a++)null===r[a]&&(r[a]=0===a?e:r[a-1]);return r}var pS=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return function(i){var a=dS(r,e)||{},o=a.delay||r.delay||0,u=r.elapsed,s=void 0===u?0:u;s-=m_(o);var c=function(e,t,n,r){var i=nS(t,n),a=void 0!==r.from?r.from:e.get();return"none"===a&&i&&"string"===typeof n?a=cS(t,n):fS(a)&&"string"===typeof n?a=hS(n):!Array.isArray(n)&&fS(n)&&"string"===typeof a&&(n=hS(a)),Array.isArray(n)?vS(a,n):[a,n]}(t,e,n,a),l=c[0],f=c[c.length-1],h=nS(e,l),d=nS(e,f);v_(h===d,"You are trying to animate ".concat(e,' from "').concat(l,'" to "').concat(f,'". ').concat(l," is not an animatable value - to enable this animation set ").concat(l," to a value animatable to ").concat(f," via the `style` property."));var v=pe(pe({keyframes:c,velocity:t.getVelocity(),ease:"easeOut"},a),{},{delay:-s,onUpdate:function(e){t.set(e),a.onUpdate&&a.onUpdate(e)},onComplete:function(){i(),a.onComplete&&a.onComplete()}});if(function(e){e.when,e.delay,e.delayChildren,e.staggerChildren,e.staggerDirection,e.repeat,e.repeatType,e.repeatDelay,e.from,e.elapsed;var t=tx(e,lS);return!!Object.keys(t).length}(a)||(v=pe(pe({},v),tS(e,v))),v.duration&&(v.duration=m_(v.duration)),v.repeatDelay&&(v.repeatDelay=m_(v.repeatDelay)),!h||!d||g_||!1===a.type)return function(e){var t=e.keyframes,n=e.delay,r=e.onUpdate,i=e.onComplete,a=function(){return r&&r(t[t.length-1]),i&&i(),{time:0,speed:1,duration:0,play:Zx,pause:Zx,stop:Zx,then:function(e){return e(),Promise.resolve()},cancel:Zx,complete:Zx}};return n?QE({keyframes:[0,1],duration:0,delay:n,onComplete:a}):a()}(v);if(t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate){var p=$E(t,e,v);if(p)return p}return QE(v)}};function mS(e){return Boolean(ww(e)&&e.add)}var yS=function(e){return/^\-?\d*\.?\d+$/.test(e)},gS=function(e){return/^0[^.\s]+$/.test(e)};function kS(e,t){-1===e.indexOf(t)&&e.push(t)}function bS(e,t){var n=e.indexOf(t);n>-1&&e.splice(n,1)}var wS=function(){function e(){y(this,e),this.subscriptions=[]}return k(e,[{key:"add",value:function(e){var t=this;return kS(this.subscriptions,e),function(){return bS(t.subscriptions,e)}}},{key:"notify",value:function(e,t,n){var r=this.subscriptions.length;if(r)if(1===r)this.subscriptions[0](e,t,n);else for(var i=0;i<r;i++){var a=this.subscriptions[i];a&&a(e,t,n)}}},{key:"getSize",value:function(){return this.subscriptions.length}},{key:"clear",value:function(){this.subscriptions.length=0}}]),e}(),xS=function(){function e(t){var n,r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(this,e),this.version="10.12.4",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];r.prev=r.current,r.current=e;var n=Bx.delta,i=Bx.timestamp;r.lastUpdated!==i&&(r.timeDelta=n,r.lastUpdated=i,Wx.postRender(r.scheduleVelocityCheck)),r.prev!==r.current&&r.events.change&&r.events.change.notify(r.current),r.events.velocityChange&&r.events.velocityChange.notify(r.getVelocity()),t&&r.events.renderRequest&&r.events.renderRequest.notify(r.current)},this.scheduleVelocityCheck=function(){return Wx.postRender(r.velocityCheck)},this.velocityCheck=function(e){e.timestamp!==r.lastUpdated&&(r.prev=r.current,r.events.velocityChange&&r.events.velocityChange.notify(r.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=t,this.canTrackVelocity=(n=this.current,!isNaN(parseFloat(n))),this.owner=i.owner}return k(e,[{key:"onChange",value:function(e){return this.on("change",e)}},{key:"on",value:function(e,t){var n=this;this.events[e]||(this.events[e]=new wS);var r=this.events[e].add(t);return"change"===e?function(){r(),Wx.read((function(){n.events.change.getSize()||n.stop()}))}:r}},{key:"clearListeners",value:function(){for(var e in this.events)this.events[e].clear()}},{key:"attach",value:function(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}},{key:"set",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];t&&this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e,t)}},{key:"setWithVelocity",value:function(e,t,n){this.set(t),this.prev=e,this.timeDelta=n}},{key:"jump",value:function(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}},{key:"get",value:function(){return this.current}},{key:"getPrevious",value:function(){return this.prev}},{key:"getVelocity",value:function(){return this.canTrackVelocity?TE(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}},{key:"start",value:function(e){var t=this;return this.stop(),new Promise((function(n){t.hasAnimated=!0,t.animation=e(n),t.events.animationStart&&t.events.animationStart.notify()})).then((function(){t.events.animationComplete&&t.events.animationComplete.notify(),t.clearAnimation()}))}},{key:"stop",value:function(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}},{key:"isAnimating",value:function(){return!!this.animation}},{key:"clearAnimation",value:function(){delete this.animation}},{key:"destroy",value:function(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}]),e}();function _S(e,t){return new xS(e,t)}var ES=function(e){return function(t){return t.test(e)}},SS=[Dw,Bw,Uw,Vw,zw,jw,{test:function(e){return"auto"===e},parse:function(e){return e}}],TS=function(e){return SS.find(ES(e))},IS=[].concat(te(SS),[Z_,vE]),CS=function(e){return IS.find(ES(e))},DS=["transitionEnd","transition"];function AS(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,_S(n))}function NS(e,t){var n=h_(e,t),r=n?e.makeTargetAnimatable(n,!1):{},i=r.transitionEnd,a=void 0===i?{}:i,o=(r.transition,tx(r,DS));for(var u in o=pe(pe({},o),a)){AS(e,u,bx(o[u]))}}function PS(e,t){if(t)return(t[e]||t.default||t).from}var RS=["transition","transitionEnd"];function OS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.delay,i=void 0===r?0:r,a=n.transitionOverride,o=n.type,u=e.makeTargetAnimatable(t),s=u.transition,c=void 0===s?e.getDefaultTransition():s,l=u.transitionEnd,f=tx(u,RS),h=e.getValue("willChange");a&&(c=a);var d=[],v=o&&e.animationState&&e.animationState.getState()[o],p=function(t){var n=e.getValue(t),r=f[t];if(!n||void 0===r||v&&function(e,t){var n=e.protectedKeys,r=e.needsAnimating,i=n.hasOwnProperty(t)&&!0!==r[t];return r[t]=!1,i}(v,t))return"continue";var a=pe({delay:i,elapsed:0},c);if(window.HandoffAppearAnimations&&!n.hasAnimated){var o=e.getProps()[d_];o&&(a.elapsed=window.HandoffAppearAnimations(o,t,n,Wx))}n.start(pS(t,n,r,e.shouldReduceMotion&&kw.has(t)?{type:!1}:a));var u=n.animation;mS(h)&&(h.add(t),u.then((function(){return h.remove(t)}))),d.push(u)};for(var m in f)p(m);return l&&Promise.all(d).then((function(){l&&NS(e,l)})),d}function LS(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=h_(e,t,n.custom),i=(r||{}).transition,a=void 0===i?e.getDefaultTransition()||{}:i;n.transitionOverride&&(a=n.transitionOverride);var o=r?function(){return Promise.all(OS(e,r,n))}:function(){return Promise.resolve()},u=e.variantChildren&&e.variantChildren.size?function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=a,o=i.delayChildren,u=void 0===o?0:o,s=i.staggerChildren,c=i.staggerDirection;return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1,a=arguments.length>5?arguments[5]:void 0,o=[],u=(e.variantChildren.size-1)*r,s=1===i?function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r}:function(){return u-(arguments.length>0&&void 0!==arguments[0]?arguments[0]:0)*r};return Array.from(e.variantChildren).sort(MS).forEach((function(e,r){e.notify("AnimationStart",t),o.push(LS(e,t,pe(pe({},a),{},{delay:n+s(r)})).then((function(){return e.notify("AnimationComplete",t)})))})),Promise.all(o)}(e,t,u+r,s,c,n)}:function(){return Promise.resolve()},c=a.when;if(c){var l=s("beforeChildren"===c?[o,u]:[u,o],2),f=l[0],h=l[1];return f().then((function(){return h()}))}return Promise.all([o(),u(n.delay)])}function MS(e,t){return e.sortNodePosition(t)}var FS=["transition","transitionEnd"],VS=te(Xb).reverse(),US=Xb.length;function BS(e){return function(t){return Promise.all(t.map((function(t){var n=t.animation,r=t.options;return function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e.notify("AnimationStart",t),Array.isArray(t)){var i=t.map((function(t){return LS(e,t,r)}));n=Promise.all(i)}else if("string"===typeof t)n=LS(e,t,r);else{var a="function"===typeof t?h_(e,t,r.custom):t;n=Promise.all(OS(e,a,r))}return n.then((function(){return e.notify("AnimationComplete",t)}))}(e,n,r)})))}}function jS(e){var t=BS(e),n={animate:zS(!0),whileInView:zS(),whileHover:zS(),whileTap:zS(),whileDrag:zS(),whileFocus:zS(),exit:zS()},r=!0,i=function(t,n){var r=h_(e,n);if(r){r.transition;var i=r.transitionEnd,a=tx(r,FS);t=pe(pe(pe({},t),a),i)}return t};function a(a,o){for(var u=e.getProps(),s=e.getVariantContext(!0)||{},c=[],l=new Set,f={},h=1/0,d=function(){var t=VS[v],d=n[t],p=void 0!==u[t]?u[t]:s[t],m=Qb(p),y=t===o?d.isActive:null;!1===y&&(h=v);var g=p===s[t]&&p!==u[t]&&m;if(g&&r&&e.manuallyAnimateOnMount&&(g=!1),d.protectedKeys=pe({},f),!d.isActive&&null===y||!p&&!d.prevProp||Yb(p)||"boolean"===typeof p)return"continue";var k=function(e,t){if("string"===typeof t)return t!==e;if(Array.isArray(t))return!f_(t,e);return!1}(d.prevProp,p),b=k||t===o&&d.isActive&&!g&&m||v>h&&m,w=Array.isArray(p)?p:[p],x=w.reduce(i,{});!1===y&&(x={});var _=d.prevResolvedValues,E=void 0===_?{}:_,S=pe(pe({},E),x),T=function(e){b=!0,l.delete(e),d.needsAnimating[e]=!0};for(var I in S){var C=x[I],D=E[I];f.hasOwnProperty(I)||(C!==D?gx(C)&&gx(D)?!f_(C,D)||k?T(I):d.protectedKeys[I]=!0:void 0!==C?T(I):l.add(I):void 0!==C&&l.has(I)?T(I):d.protectedKeys[I]=!0)}d.prevProp=p,d.prevResolvedValues=x,d.isActive&&(f=pe(pe({},f),x)),r&&e.blockInitialAnimation&&(b=!1),b&&!g&&c.push.apply(c,te(w.map((function(e){return{animation:e,options:pe({type:t},a)}}))))},v=0;v<US;v++)d();if(l.size){var p={};l.forEach((function(t){var n=e.getBaseTarget(t);void 0!==n&&(p[t]=n)})),c.push({animation:p})}var m=Boolean(c.length);return r&&!1===u.initial&&!e.manuallyAnimateOnMount&&(m=!1),r=!1,m?t(c):Promise.resolve()}return{animateChanges:a,setActive:function(t,r,i){var o;if(n[t].isActive===r)return Promise.resolve();null===(o=e.variantChildren)||void 0===o||o.forEach((function(e){var n;return null===(n=e.animationState)||void 0===n?void 0:n.setActive(t,r)})),n[t].isActive=r;var u=a(i,t);for(var s in n)n[s].protectedKeys={};return u},setAnimateFunction:function(n){t=n(e)},getState:function(){return n}}}function zS(){return{isActive:arguments.length>0&&void 0!==arguments[0]&&arguments[0],protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}var qS=function(e){_(n,e);var t=T(n);function n(e){var r;return y(this,n),r=t.call(this,e),e.animationState||(e.animationState=jS(e)),r}return k(n,[{key:"updateAnimationControlsSubscription",value:function(){var e=this.node.getProps().animate;this.unmount(),Yb(e)&&(this.unmount=e.subscribe(this.node))}},{key:"mount",value:function(){this.updateAnimationControlsSubscription()}},{key:"update",value:function(){this.node.getProps().animate!==(this.node.prevProps||{}).animate&&this.updateAnimationControlsSubscription()}},{key:"unmount",value:function(){}}]),n}(Ux),GS=0,KS=function(e){_(n,e);var t=T(n);function n(){var e;return y(this,n),(e=t.apply(this,arguments)).id=GS++,e}return k(n,[{key:"update",value:function(){var e=this;if(this.node.presenceContext){var t=this.node.presenceContext,n=t.isPresent,r=t.onExitComplete,i=t.custom,a=(this.node.prevPresenceContext||{}).isPresent;if(this.node.animationState&&n!==a){var o=this.node.animationState.setActive("exit",!n,{custom:null!==i&&void 0!==i?i:this.node.getProps().custom});r&&!n&&o.then((function(){return r(e.id)}))}}}},{key:"mount",value:function(){var e=(this.node.presenceContext||{}).register;e&&(this.unmount=e(this.id))}},{key:"unmount",value:function(){}}]),n}(Ux),HS={animation:{Feature:qS},exit:{Feature:KS}},WS=function(e,t){return Math.abs(e-t)};var QS=function(){function e(t,n){var r=this,i=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).transformPagePoint;if(y(this,e),this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.updatePoint=function(){if(r.lastMoveEvent&&r.lastMoveEventInfo){var e=$S(r.lastMoveEventInfo,r.history),t=null!==r.startEvent,n=function(e,t){var n=WS(e.x,t.x),r=WS(e.y,t.y);return Math.sqrt(Math.pow(n,2)+Math.pow(r,2))}(e.offset,{x:0,y:0})>=3;if(t||n){var i=e.point,a=Bx.timestamp;r.history.push(pe(pe({},i),{},{timestamp:a}));var o=r.handlers,u=o.onStart,s=o.onMove;t||(u&&u(r.lastMoveEvent,e),r.startEvent=r.lastMoveEvent),s&&s(r.lastMoveEvent,e)}}},this.handlePointerMove=function(e,t){r.lastMoveEvent=e,r.lastMoveEventInfo=YS(t,r.transformPagePoint),Wx.update(r.updatePoint,!0)},this.handlePointerUp=function(e,t){if(r.end(),r.lastMoveEvent&&r.lastMoveEventInfo){var n=r.handlers,i=n.onEnd,a=n.onSessionEnd,o=$S("pointercancel"===e.type?r.lastMoveEventInfo:YS(t,r.transformPagePoint),r.history);r.startEvent&&i&&i(e,o),a&&a(e,o)}},Cx(t)){this.handlers=n,this.transformPagePoint=i;var a=YS(Dx(t),this.transformPagePoint),o=a.point,u=Bx.timestamp;this.history=[pe(pe({},o),{},{timestamp:u})];var s=n.onSessionStart;s&&s(t,$S(a,this.history)),this.removeListeners=Rx(Nx(window,"pointermove",this.handlePointerMove),Nx(window,"pointerup",this.handlePointerUp),Nx(window,"pointercancel",this.handlePointerUp))}}return k(e,[{key:"updateHandlers",value:function(e){this.handlers=e}},{key:"end",value:function(){this.removeListeners&&this.removeListeners(),Qx(this.updatePoint)}}]),e}();function YS(e,t){return t?{point:t(e.point)}:e}function XS(e,t){return{x:e.x-t.x,y:e.y-t.y}}function $S(e,t){var n=e.point;return{point:n,delta:XS(n,ZS(t)),offset:XS(n,JS(t)),velocity:eT(t,.1)}}function JS(e){return e[0]}function ZS(e){return e[e.length-1]}function eT(e,t){if(e.length<2)return{x:0,y:0};for(var n=e.length-1,r=null,i=ZS(e);n>=0&&(r=e[n],!(i.timestamp-r.timestamp>m_(t)));)n--;if(!r)return{x:0,y:0};var a=y_(i.timestamp-r.timestamp);if(0===a)return{x:0,y:0};var o={x:(i.x-r.x)/a,y:(i.y-r.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function tT(e){return e.max-e.min}function nT(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.01;return Math.abs(e-t)<=n}function rT(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;e.origin=r,e.originPoint=eE(t.min,t.max,e.origin),e.scale=tT(n)/tT(t),(nT(e.scale,1,1e-4)||isNaN(e.scale))&&(e.scale=1),e.translate=eE(n.min,n.max,e.origin)-e.originPoint,(nT(e.translate)||isNaN(e.translate))&&(e.translate=0)}function iT(e,t,n,r){rT(e.x,t.x,n.x,r?r.originX:void 0),rT(e.y,t.y,n.y,r?r.originY:void 0)}function aT(e,t,n){e.min=n.min+t.min,e.max=e.min+tT(t)}function oT(e,t,n){e.min=t.min-n.min,e.max=e.min+tT(t)}function uT(e,t,n){oT(e.x,t.x,n.x),oT(e.y,t.y,n.y)}function sT(e,t,n){return{min:void 0!==t?e.min+t:void 0,max:void 0!==n?e.max+n-(e.max-e.min):void 0}}function cT(e,t){var n=t.min-e.min,r=t.max-e.max;if(t.max-t.min<e.max-e.min){var i=[r,n];n=i[0],r=i[1]}return{min:n,max:r}}var lT=.35;function fT(e,t,n){return{min:hT(e,t),max:hT(e,n)}}function hT(e,t){return"number"===typeof e?e:e[t]||0}var dT=function(){return{x:{translate:0,scale:1,origin:0,originPoint:0},y:{translate:0,scale:1,origin:0,originPoint:0}}},vT=function(){return{x:{min:0,max:0},y:{min:0,max:0}}};function pT(e){return[e("x"),e("y")]}function mT(e){var t=e.top;return{x:{min:e.left,max:e.right},y:{min:t,max:e.bottom}}}function yT(e){return void 0===e||1===e}function gT(e){var t=e.scale,n=e.scaleX,r=e.scaleY;return!yT(t)||!yT(n)||!yT(r)}function kT(e){return gT(e)||bT(e)||e.z||e.rotate||e.rotateX||e.rotateY}function bT(e){return wT(e.x)||wT(e.y)}function wT(e){return e&&"0%"!==e}function xT(e,t,n){return n+t*(e-n)}function _T(e,t,n,r,i){return void 0!==i&&(e=xT(e,i,r)),xT(e,n,r)+t}function ET(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0;e.min=_T(e.min,t,n,r,i),e.max=_T(e.max,t,n,r,i)}function ST(e,t){var n=t.x,r=t.y;ET(e.x,n.translate,n.scale,n.originPoint),ET(e.y,r.translate,r.scale,r.originPoint)}function TT(e){return Number.isInteger(e)||e>1.0000000000001||e<.999999999999?e:1}function IT(e,t){e.min=e.min+t,e.max=e.max+t}function CT(e,t,n){var r=s(n,3),i=r[0],a=r[1],o=r[2],u=void 0!==t[o]?t[o]:.5,c=eE(e.min,e.max,u);ET(e,t[i],t[a],c,t.scale)}var DT=["x","scaleX","originX"],AT=["y","scaleY","originY"];function NT(e,t){CT(e.x,t,DT),CT(e.y,t,AT)}function PT(e,t){return mT(function(e,t){if(!t)return e;var n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}(e.getBoundingClientRect(),t))}var RT=new WeakMap,OT=function(){function e(t){y(this,e),this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=vT(),this.visualElement=t}return k(e,[{key:"start",value:function(e){var t=this,n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).snapToCursor,r=void 0!==n&&n,i=this.visualElement.presenceContext;if(!i||!1!==i.isPresent){this.panSession=new QS(e,{onSessionStart:function(e){t.stopAnimation(),r&&t.snapToCursor(Dx(e,"page").point)},onStart:function(e,n){var r=t.getProps(),i=r.drag,a=r.dragPropagation,o=r.onDragStart;if(!i||a||(t.openGlobalLock&&t.openGlobalLock(),t.openGlobalLock=Fx(i),t.openGlobalLock)){t.isDragging=!0,t.currentDirection=null,t.resolveConstraints(),t.visualElement.projection&&(t.visualElement.projection.isAnimationBlocked=!0,t.visualElement.projection.target=void 0),pT((function(e){var n=t.getAxisMotionValue(e).get()||0;if(Uw.test(n)){var r=t.visualElement.projection;if(r&&r.layout){var i=r.layout.layoutBox[e];if(i)n=tT(i)*(parseFloat(n)/100)}}t.originPoint[e]=n})),o&&Wx.update((function(){return o(e,n)}),!1,!0);var u=t.visualElement.animationState;u&&u.setActive("whileDrag",!0)}},onMove:function(e,n){var r=t.getProps(),i=r.dragPropagation,a=r.dragDirectionLock,o=r.onDirectionLock,u=r.onDrag;if(i||t.openGlobalLock){var s=n.offset;if(a&&null===t.currentDirection)return t.currentDirection=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=null;Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x");return n}(s),void(null!==t.currentDirection&&o&&o(t.currentDirection));t.updateAxis("x",n.point,s),t.updateAxis("y",n.point,s),t.visualElement.render(),u&&u(e,n)}},onSessionEnd:function(e,n){return t.stop(e,n)}},{transformPagePoint:this.visualElement.getTransformPagePoint()})}}},{key:"stop",value:function(e,t){var n=this.isDragging;if(this.cancel(),n){var r=t.velocity;this.startAnimation(r);var i=this.getProps().onDragEnd;i&&Wx.update((function(){return i(e,t)}))}}},{key:"cancel",value:function(){this.isDragging=!1;var e=this.visualElement,t=e.projection,n=e.animationState;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0,!this.getProps().dragPropagation&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}},{key:"updateAxis",value:function(e,t,n){var r=this.getProps().drag;if(n&&LT(e,r,this.currentDirection)){var i=this.getAxisMotionValue(e),a=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(a=function(e,t,n){var r=t.min,i=t.max;return void 0!==r&&e<r?e=n?eE(r,e,n.min):Math.max(e,r):void 0!==i&&e>i&&(e=n?eE(i,e,n.max):Math.min(e,i)),e}(a,this.constraints[e],this.elastic[e])),i.set(a)}}},{key:"resolveConstraints",value:function(){var e=this,t=this.getProps(),n=t.dragConstraints,r=t.dragElastic,i=(this.visualElement.projection||{}).layout,a=this.constraints;n&&Wb(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):this.constraints=!(!n||!i)&&function(e,t){var n=t.top,r=t.left,i=t.bottom,a=t.right;return{x:sT(e.x,r,a),y:sT(e.y,n,i)}}(i.layoutBox,n),this.elastic=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lT;return!1===e?e=0:!0===e&&(e=lT),{x:fT(e,"left","right"),y:fT(e,"top","bottom")}}(r),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&pT((function(t){e.getAxisMotionValue(t)&&(e.constraints[t]=function(e,t){var n={};return void 0!==t.min&&(n.min=t.min-e.min),void 0!==t.max&&(n.max=t.max-e.min),n}(i.layoutBox[t],e.constraints[t]))}))}},{key:"resolveRefConstraints",value:function(){var e=this.getProps(),t=e.dragConstraints,n=e.onMeasureDragConstraints;if(!t||!Wb(t))return!1;var r=t.current;p_(null!==r,"If `dragConstraints` is set as a React ref, that ref must be passed to another component's `ref` prop.");var i=this.visualElement.projection;if(!i||!i.layout)return!1;var a=function(e,t,n){var r=PT(e,n),i=t.scroll;return i&&(IT(r.x,i.offset.x),IT(r.y,i.offset.y)),r}(r,i.root,this.visualElement.getTransformPagePoint()),o=function(e,t){return{x:cT(e.x,t.x),y:cT(e.y,t.y)}}(i.layout.layoutBox,a);if(n){var u=n(function(e){var t=e.x,n=e.y;return{top:n.min,right:t.max,bottom:n.max,left:t.min}}(o));this.hasMutatedConstraints=!!u,u&&(o=mT(u))}return o}},{key:"startAnimation",value:function(e){var t=this,n=this.getProps(),r=n.drag,i=n.dragMomentum,a=n.dragElastic,o=n.dragTransition,u=n.dragSnapToOrigin,s=n.onDragTransitionEnd,c=this.constraints||{},l=pT((function(n){if(LT(n,r,t.currentDirection)){var s=c&&c[n]||{};u&&(s={min:0,max:0});var l=a?200:1e6,f=a?40:1e7,h=pe(pe({type:"inertia",velocity:i?e[n]:0,bounceStiffness:l,bounceDamping:f,timeConstant:750,restDelta:1,restSpeed:10},o),s);return t.startAxisValueAnimation(n,h)}}));return Promise.all(l).then(s)}},{key:"startAxisValueAnimation",value:function(e,t){var n=this.getAxisMotionValue(e);return n.start(pS(e,n,0,t))}},{key:"stopAnimation",value:function(){var e=this;pT((function(t){return e.getAxisMotionValue(t).stop()}))}},{key:"getAxisMotionValue",value:function(e){var t="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),r=n[t];return r||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}},{key:"snapToCursor",value:function(e){var t=this;pT((function(n){if(LT(n,t.getProps().drag,t.currentDirection)){var r=t.visualElement.projection,i=t.getAxisMotionValue(n);if(r&&r.layout){var a=r.layout.layoutBox[n],o=a.min,u=a.max;i.set(e[n]-eE(o,u,.5))}}}))}},{key:"scalePositionWithinConstraints",value:function(){var e=this;if(this.visualElement.current){var t=this.getProps(),n=t.drag,r=t.dragConstraints,i=this.visualElement.projection;if(Wb(r)&&i&&this.constraints){this.stopAnimation();var a={x:0,y:0};pT((function(t){var n=e.getAxisMotionValue(t);if(n){var r=n.get();a[t]=function(e,t){var n=.5,r=tT(e),i=tT(t);return i>r?n=bE(t.min,t.max-r,e.min):r>i&&(n=bE(e.min,e.max-i,t.min)),Cw(0,1,n)}({min:r,max:r},e.constraints[t])}}));var o=this.visualElement.getProps().transformTemplate;this.visualElement.current.style.transform=o?o({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),pT((function(t){if(LT(t,n,null)){var r=e.getAxisMotionValue(t),i=e.constraints[t],o=i.min,u=i.max;r.set(eE(o,u,a[t]))}}))}}}},{key:"addListeners",value:function(){var e=this;if(this.visualElement.current){RT.set(this.visualElement,this);var t=Nx(this.visualElement.current,"pointerdown",(function(t){var n=e.getProps(),r=n.drag,i=n.dragListener;r&&(void 0===i||i)&&e.start(t)})),n=function(){Wb(e.getProps().dragConstraints)&&(e.constraints=e.resolveRefConstraints())},r=this.visualElement.projection,i=r.addEventListener("measure",n);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),n();var a=Ix(window,"resize",(function(){return e.scalePositionWithinConstraints()})),o=r.addEventListener("didUpdate",(function(t){var n=t.delta,r=t.hasLayoutChanged;e.isDragging&&r&&(pT((function(t){var r=e.getAxisMotionValue(t);r&&(e.originPoint[t]+=n[t].translate,r.set(r.get()+n[t].translate))})),e.visualElement.render())}));return function(){a(),t(),i(),o&&o()}}}},{key:"getProps",value:function(){var e=this.visualElement.getProps(),t=e.drag,n=void 0!==t&&t,r=e.dragDirectionLock,i=void 0!==r&&r,a=e.dragPropagation,o=void 0!==a&&a,u=e.dragConstraints,s=void 0!==u&&u,c=e.dragElastic,l=void 0===c?lT:c,f=e.dragMomentum,h=void 0===f||f;return pe(pe({},e),{},{drag:n,dragDirectionLock:i,dragPropagation:o,dragConstraints:s,dragElastic:l,dragMomentum:h})}}]),e}();function LT(e,t,n){return(!0===t||t===e)&&(null===n||n===e)}var MT=function(e){_(n,e);var t=T(n);function n(e){var r;return y(this,n),(r=t.call(this,e)).removeGroupControls=Zx,r.removeListeners=Zx,r.controls=new OT(e),r}return k(n,[{key:"mount",value:function(){var e=this.node.getProps().dragControls;e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Zx}},{key:"unmount",value:function(){this.removeGroupControls(),this.removeListeners()}}]),n}(Ux),FT=function(e){return function(t,n){e&&Wx.update((function(){return e(t,n)}))}},VT=function(e){_(n,e);var t=T(n);function n(){var e;return y(this,n),(e=t.apply(this,arguments)).removePointerDownListener=Zx,e}return k(n,[{key:"onPointerDown",value:function(e){this.session=new QS(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint()})}},{key:"createPanHandlers",value:function(){var e=this,t=this.node.getProps(),n=t.onPanSessionStart,r=t.onPanStart,i=t.onPan,a=t.onPanEnd;return{onSessionStart:FT(n),onStart:FT(r),onMove:i,onEnd:function(t,n){delete e.session,a&&Wx.update((function(){return a(t,n)}))}}}},{key:"mount",value:function(){var e=this;this.removePointerDownListener=Nx(this.node.current,"pointerdown",(function(t){return e.onPointerDown(t)}))}},{key:"update",value:function(){this.session&&this.session.updateHandlers(this.createPanHandlers())}},{key:"unmount",value:function(){this.removePointerDownListener(),this.session&&this.session.end()}}]),n}(Ux);function UT(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}var BT={correct:function(e,t){if(!t.target)return e;if("string"===typeof e){if(!Bw.test(e))return e;e=parseFloat(e)}var n=UT(e,t.target.x),r=UT(e,t.target.y);return"".concat(n,"% ").concat(r,"%")}},jT={correct:function(e,t){var n=t.treeScale,r=t.projectionDelta,i=e,a=vE.parse(e);if(a.length>5)return i;var o=vE.createTransformer(e),u="number"!==typeof a[0]?1:0,s=r.x.scale*n.x,c=r.y.scale*n.y;a[0+u]/=s,a[1+u]/=c;var l=eE(s,c,.5);return"number"===typeof a[2+u]&&(a[2+u]/=l),"number"===typeof a[3+u]&&(a[3+u]/=l),o(a)}},zT=function(e){_(n,e);var t=T(n);function n(){return y(this,n),t.apply(this,arguments)}return k(n,[{key:"componentDidMount",value:function(){var e,t=this,n=this.props,r=n.visualElement,i=n.layoutGroup,a=n.switchLayoutGroup,o=n.layoutId,u=r.projection;e=GT,Object.assign(yw,e),u&&(i.group&&i.group.add(u),a&&a.register&&o&&a.register(u),u.root.didUpdate(),u.addEventListener("animationComplete",(function(){t.safeToRemove()})),u.setOptions(pe(pe({},u.options),{},{onExitComplete:function(){return t.safeToRemove()}}))),uw.hasEverUpdated=!0}},{key:"getSnapshotBeforeUpdate",value:function(e){var t=this,n=this.props,r=n.layoutDependency,i=n.visualElement,a=n.drag,o=n.isPresent,u=i.projection;return u?(u.isPresent=o,a||e.layoutDependency!==r||void 0===r?u.willUpdate():this.safeToRemove(),e.isPresent!==o&&(o?u.promote():u.relegate()||Wx.postRender((function(){var e=u.getStack();e&&e.members.length||t.safeToRemove()}))),null):null}},{key:"componentDidUpdate",value:function(){var e=this.props.visualElement.projection;e&&(e.root.didUpdate(),!e.currentAnimation&&e.isLead()&&this.safeToRemove())}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.visualElement,n=e.layoutGroup,r=e.switchLayoutGroup,i=t.projection;i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}},{key:"safeToRemove",value:function(){var e=this.props.safeToRemove;e&&e()}},{key:"render",value:function(){return null}}]),n}(t.Component);function qT(e){var n=function(){var e=(0,t.useContext)(qb);if(null===e)return[!0,null];var n=e.isPresent,r=e.onExitComplete,i=e.register,a=(0,t.useId)();return(0,t.useEffect)((function(){return i(a)}),[]),!n&&r?[!1,function(){return r&&r(a)}]:[!0]}(),r=s(n,2),i=r[0],a=r[1],o=(0,t.useContext)(cw);return t.createElement(zT,pe(pe({},e),{},{layoutGroup:o,switchLayoutGroup:(0,t.useContext)(lw),isPresent:i,safeToRemove:a}))}var GT={borderRadius:pe(pe({},BT),{},{applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]}),borderTopLeftRadius:BT,borderTopRightRadius:BT,borderBottomLeftRadius:BT,borderBottomRightRadius:BT,boxShadow:jT},KT=["TopLeft","TopRight","BottomLeft","BottomRight"],HT=KT.length,WT=function(e){return"string"===typeof e?parseFloat(e):e},QT=function(e){return"number"===typeof e||Bw.test(e)};function YT(e,t){return void 0!==e[t]?e[t]:e.borderRadius}var XT=JT(0,.5,B_),$T=JT(.5,.95,Zx);function JT(e,t,n){return function(r){return r<e?0:r>t?1:n(bE(e,t,r))}}function ZT(e,t){e.min=t.min,e.max=t.max}function eI(e,t){ZT(e.x,t.x),ZT(e.y,t.y)}function tI(e,t,n,r,i){return e=xT(e-=t,1/n,r),void 0!==i&&(e=xT(e,1/i,r)),e}function nI(e,t,n,r,i){var a=s(n,3),o=a[0],u=a[1],c=a[2];!function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5,i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:e,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:e;if(Uw.test(t)&&(t=parseFloat(t),t=eE(o.min,o.max,t/100)-o.min),"number"===typeof t){var u=eE(a.min,a.max,r);e===a&&(u-=t),e.min=tI(e.min,t,n,u,i),e.max=tI(e.max,t,n,u,i)}}(e,t[o],t[u],t[c],t.scale,r,i)}var rI=["x","scaleX","originX"],iI=["y","scaleY","originY"];function aI(e,t,n,r){nI(e.x,t,rI,n?n.x:void 0,r?r.x:void 0),nI(e.y,t,iI,n?n.y:void 0,r?r.y:void 0)}function oI(e){return 0===e.translate&&1===e.scale}function uI(e){return oI(e.x)&&oI(e.y)}function sI(e,t){return e.x.min===t.x.min&&e.x.max===t.x.max&&e.y.min===t.y.min&&e.y.max===t.y.max}function cI(e){return tT(e.x)/tT(e.y)}var lI=function(){function e(){y(this,e),this.members=[]}return k(e,[{key:"add",value:function(e){kS(this.members,e),e.scheduleRender()}},{key:"remove",value:function(e){if(bS(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){var t=this.members[this.members.length-1];t&&this.promote(t)}}},{key:"relegate",value:function(e){var t,n=this.members.findIndex((function(t){return e===t}));if(0===n)return!1;for(var r=n;r>=0;r--){var i=this.members[r];if(!1!==i.isPresent){t=i;break}}return!!t&&(this.promote(t),!0)}},{key:"promote",value:function(e,t){var n=this.lead;e!==n&&(this.prevLead=n,this.lead=e,e.show(),n&&(n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,t&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0),!1===e.options.crossfade&&n.hide()))}},{key:"exitAnimationComplete",value:function(){this.members.forEach((function(e){var t=e.options,n=e.resumingFrom;t.onExitComplete&&t.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()}))}},{key:"scheduleRender",value:function(){this.members.forEach((function(e){e.instance&&e.scheduleRender(!1)}))}},{key:"removeLeadSnapshot",value:function(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}]),e}();function fI(e,t,n){var r="",i=e.x.translate/t.x,a=e.y.translate/t.y;if((i||a)&&(r="translate3d(".concat(i,"px, ").concat(a,"px, 0) ")),1===t.x&&1===t.y||(r+="scale(".concat(1/t.x,", ").concat(1/t.y,") ")),n){var o=n.rotate,u=n.rotateX,s=n.rotateY;o&&(r+="rotate(".concat(o,"deg) ")),u&&(r+="rotateX(".concat(u,"deg) ")),s&&(r+="rotateY(".concat(s,"deg) "))}var c=e.x.scale*t.x,l=e.y.scale*t.y;return 1===c&&1===l||(r+="scale(".concat(c,", ").concat(l,")")),r||"none"}var hI=function(e,t){return e.depth-t.depth},dI=function(){function e(){y(this,e),this.children=[],this.isDirty=!1}return k(e,[{key:"add",value:function(e){kS(this.children,e),this.isDirty=!0}},{key:"remove",value:function(e){bS(this.children,e),this.isDirty=!0}},{key:"forEach",value:function(e){this.isDirty&&this.children.sort(hI),this.isDirty=!1,this.children.forEach(e)}}]),e}();var vI=["","X","Y","Z"],pI=0,mI={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function yI(e){var t=e.attachResizeListener,n=e.defaultParent,r=e.measureScroll,i=e.checkIsScrollRoot,a=e.resetTransform;return function(){function e(t){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null===n||void 0===n?void 0:n();y(this,e),this.id=pI++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.potentialNodes=new Map,this.checkUpdateFailed=function(){r.isUpdating&&(r.isUpdating=!1,r.clearAllSnapshots())},this.updateProjection=function(){var e;mI.totalNodes=mI.resolvedTargetDeltas=mI.recalculatedProjection=0,r.nodes.forEach(bI),r.nodes.forEach(TI),r.nodes.forEach(II),r.nodes.forEach(wI),e=mI,window.MotionDebug&&window.MotionDebug.record(e)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.elementId=t,this.latestValues=i,this.root=a?a.root||a:this,this.path=a?[].concat(te(a.path),[a]):[],this.parent=a,this.depth=a?a.depth+1:0,t&&this.root.registerPotentialNode(t,this);for(var o=0;o<this.path.length;o++)this.path[o].shouldResetTransform=!0;this.root===this&&(this.nodes=new dI)}return k(e,[{key:"addEventListener",value:function(e,t){return this.eventHandlers.has(e)||this.eventHandlers.set(e,new wS),this.eventHandlers.get(e).add(t)}},{key:"notifyListeners",value:function(e){for(var t=this.eventHandlers.get(e),n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t&&t.notify.apply(t,r)}},{key:"hasListeners",value:function(e){return this.eventHandlers.has(e)}},{key:"registerPotentialNode",value:function(e,t){this.potentialNodes.set(e,t)}},{key:"mount",value:function(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.instance){var i;this.isSVG=(i=e)instanceof SVGElement&&"svg"!==i.tagName,this.instance=e;var a=this.options,o=a.layoutId,u=a.layout,s=a.visualElement;if(s&&!s.current&&s.mount(e),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.elementId&&this.root.potentialNodes.delete(this.elementId),r&&(u||o)&&(this.isLayoutDirty=!0),t){var c,l=function(){return n.root.updateBlockedByResize=!1};t(e,(function(){n.root.updateBlockedByResize=!0,c&&c(),c=function(e,t){var n=performance.now(),r=function r(i){var a=i.timestamp-n;a>=t&&(Qx(r),e(a-t))};return Wx.read(r,!0),function(){return Qx(r)}}(l,250),uw.hasAnimatedSinceResize&&(uw.hasAnimatedSinceResize=!1,n.nodes.forEach(SI))}))}o&&this.root.registerSharedNode(o,this),!1!==this.options.animate&&s&&(o||u)&&this.addEventListener("didUpdate",(function(e){var t=e.delta,r=e.hasLayoutChanged,i=e.hasRelativeTargetChanged,a=e.layout;if(n.isTreeAnimationBlocked())return n.target=void 0,void(n.relativeTarget=void 0);var o=n.options.transition||s.getDefaultTransition()||RI,u=s.getProps(),c=u.onLayoutAnimationStart,l=u.onLayoutAnimationComplete,f=!n.targetLayout||!sI(n.targetLayout,a)||i,h=!r&&i;if(n.options.layoutRoot||n.resumeFrom&&n.resumeFrom.instance||h||r&&(f||!n.currentAnimation)){n.resumeFrom&&(n.resumingFrom=n.resumeFrom,n.resumingFrom.resumingFrom=void 0),n.setAnimationOrigin(t,h);var d=pe(pe({},dS(o,"layout")),{},{onPlay:c,onComplete:l});(s.shouldReduceMotion||n.options.layoutRoot)&&(d.delay=0,d.type=!1),n.startAnimation(d)}else r||0!==n.animationProgress||SI(n),n.isLead()&&n.options.onExitComplete&&n.options.onExitComplete();n.targetLayout=a}))}}},{key:"unmount",value:function(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);var e=this.getStack();e&&e.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Qx(this.updateProjection)}},{key:"blockUpdate",value:function(){this.updateManuallyBlocked=!0}},{key:"unblockUpdate",value:function(){this.updateManuallyBlocked=!1}},{key:"isUpdateBlocked",value:function(){return this.updateManuallyBlocked||this.updateBlockedByResize}},{key:"isTreeAnimationBlocked",value:function(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}},{key:"startUpdate",value:function(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(CI),this.animationId++)}},{key:"getTransformTemplate",value:function(){var e=this.options.visualElement;return e&&e.getProps().transformTemplate}},{key:"willUpdate",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.root.isUpdateBlocked())this.options.onExitComplete&&this.options.onExitComplete();else if(!this.root.isUpdating&&this.root.startUpdate(),!this.isLayoutDirty){this.isLayoutDirty=!0;for(var t=0;t<this.path.length;t++){var n=this.path[t];n.shouldResetTransform=!0,n.updateScroll("snapshot"),n.options.layoutRoot&&n.willUpdate(!1)}var r=this.options,i=r.layoutId,a=r.layout;if(void 0!==i||a){var o=this.getTransformTemplate();this.prevTransformTemplateValue=o?o(this.latestValues,""):void 0,this.updateSnapshot(),e&&this.notifyListeners("willUpdate")}}}},{key:"didUpdate",value:function(){if(this.isUpdateBlocked())return this.unblockUpdate(),this.clearAllSnapshots(),void this.nodes.forEach(_I);this.isUpdating&&(this.isUpdating=!1,this.potentialNodes.size&&(this.potentialNodes.forEach(OI),this.potentialNodes.clear()),this.nodes.forEach(EI),this.nodes.forEach(gI),this.nodes.forEach(kI),this.clearAllSnapshots(),Gx.update.process(Bx),Gx.preRender.process(Bx),Gx.render.process(Bx))}},{key:"clearAllSnapshots",value:function(){this.nodes.forEach(xI),this.sharedNodes.forEach(DI)}},{key:"scheduleUpdateProjection",value:function(){Wx.preRender(this.updateProjection,!1,!0)}},{key:"scheduleCheckAfterUnmount",value:function(){var e=this;Wx.postRender((function(){e.isLayoutDirty?e.root.didUpdate():e.root.checkUpdateFailed()}))}},{key:"updateSnapshot",value:function(){!this.snapshot&&this.instance&&(this.snapshot=this.measure())}},{key:"updateLayout",value:function(){if(this.instance&&(this.updateScroll(),this.options.alwaysMeasureLayout&&this.isLead()||this.isLayoutDirty)){if(this.resumeFrom&&!this.resumeFrom.instance)for(var e=0;e<this.path.length;e++){this.path[e].updateScroll()}var t=this.layout;this.layout=this.measure(!1),this.layoutCorrected=vT(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);var n=this.options.visualElement;n&&n.notify("LayoutMeasure",this.layout.layoutBox,t?t.layoutBox:void 0)}}},{key:"updateScroll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"measure",t=Boolean(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===e&&(t=!1),t&&(this.scroll={animationId:this.root.animationId,phase:e,isRoot:i(this.instance),offset:r(this.instance)})}},{key:"resetTransform",value:function(){if(a){var e=this.isLayoutDirty||this.shouldResetTransform,t=this.projectionDelta&&!uI(this.projectionDelta),n=this.getTransformTemplate(),r=n?n(this.latestValues,""):void 0,i=r!==this.prevTransformTemplateValue;e&&(t||kT(this.latestValues)||i)&&(a(this.instance,r),this.shouldResetTransform=!1,this.scheduleRender())}}},{key:"measure",value:function(){var e,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=this.measurePageBox(),r=this.removeElementScroll(n);return t&&(r=this.removeTransform(r)),LI((e=r).x),LI(e.y),{animationId:this.root.animationId,measuredBox:n,layoutBox:r,latestValues:{},source:this.id}}},{key:"measurePageBox",value:function(){var e=this.options.visualElement;if(!e)return vT();var t=e.measureViewportBox(),n=this.root.scroll;return n&&(IT(t.x,n.offset.x),IT(t.y,n.offset.y)),t}},{key:"removeElementScroll",value:function(e){var t=vT();eI(t,e);for(var n=0;n<this.path.length;n++){var r=this.path[n],i=r.scroll,a=r.options;if(r!==this.root&&i&&a.layoutScroll){if(i.isRoot){eI(t,e);var o=this.root.scroll;o&&(IT(t.x,-o.offset.x),IT(t.y,-o.offset.y))}IT(t.x,i.offset.x),IT(t.y,i.offset.y)}}return t}},{key:"applyTransform",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=vT();eI(n,e);for(var r=0;r<this.path.length;r++){var i=this.path[r];!t&&i.options.layoutScroll&&i.scroll&&i!==i.root&&NT(n,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),kT(i.latestValues)&&NT(n,i.latestValues)}return kT(this.latestValues)&&NT(n,this.latestValues),n}},{key:"removeTransform",value:function(e){var t=vT();eI(t,e);for(var n=0;n<this.path.length;n++){var r=this.path[n];if(r.instance&&kT(r.latestValues)){gT(r.latestValues)&&r.updateSnapshot();var i=vT();eI(i,r.measurePageBox()),aI(t,r.latestValues,r.snapshot?r.snapshot.layoutBox:void 0,i)}}return kT(this.latestValues)&&aI(t,this.latestValues),t}},{key:"setTargetDelta",value:function(e){this.targetDelta=e,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}},{key:"setOptions",value:function(e){this.options=pe(pe(pe({},this.options),e),{},{crossfade:void 0===e.crossfade||e.crossfade})}},{key:"clearMeasurements",value:function(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}},{key:"forceRelativeParentToResolveTarget",value:function(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Bx.timestamp&&this.relativeParent.resolveTargetDelta(!0)}},{key:"resolveTargetDelta",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=n.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=n.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=n.isSharedProjectionDirty);var r=Boolean(this.resumingFrom)||this!==n;if(!!(t||r&&this.isSharedProjectionDirty||this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty)||this.attemptToResolveRelativeTarget)){var i=this.options,a=i.layout,o=i.layoutId;if(this.layout&&(a||o)){if(this.resolvedRelativeTargetAt=Bx.timestamp,!this.targetDelta&&!this.relativeTarget){var u=this.getClosestProjectingParent();u&&u.layout?(this.relativeParent=u,this.forceRelativeParentToResolveTarget(),this.relativeTarget=vT(),this.relativeTargetOrigin=vT(),uT(this.relativeTargetOrigin,this.layout.layoutBox,u.layout.layoutBox),eI(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(this.relativeTarget||this.targetDelta){var s,c,l;if(this.target||(this.target=vT(),this.targetWithTransforms=vT()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),s=this.target,c=this.relativeTarget,l=this.relativeParent.target,aT(s.x,c.x,l.x),aT(s.y,c.y,l.y)):this.targetDelta?(Boolean(this.resumingFrom)?this.target=this.applyTransform(this.layout.layoutBox):eI(this.target,this.layout.layoutBox),ST(this.target,this.targetDelta)):eI(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;var f=this.getClosestProjectingParent();f&&Boolean(f.resumingFrom)===Boolean(this.resumingFrom)&&!f.options.layoutScroll&&f.target?(this.relativeParent=f,this.forceRelativeParentToResolveTarget(),this.relativeTarget=vT(),this.relativeTargetOrigin=vT(),uT(this.relativeTargetOrigin,this.target,f.target),eI(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}mI.resolvedTargetDeltas++}}}}},{key:"getClosestProjectingParent",value:function(){if(this.parent&&!gT(this.parent.latestValues)&&!bT(this.parent.latestValues))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}},{key:"isProjecting",value:function(){return Boolean((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}},{key:"calcProjection",value:function(){var e,t=this.getLead(),n=Boolean(this.resumingFrom)||this!==t,r=!0;if((this.isProjectionDirty||(null===(e=this.parent)||void 0===e?void 0:e.isProjectionDirty))&&(r=!1),n&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(r=!1),this.resolvedRelativeTargetAt===Bx.timestamp&&(r=!1),!r){var i=this.options,a=i.layout,o=i.layoutId;if(this.isTreeAnimating=Boolean(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),this.layout&&(a||o)){eI(this.layoutCorrected,this.layout.layoutBox),function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=n.length;if(i){var a,o;t.x=t.y=1;for(var u=0;u<i;u++){o=(a=n[u]).projectionDelta;var s=a.instance;s&&s.style&&"contents"===s.style.display||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&NT(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,ST(e,o)),r&&kT(a.latestValues)&&NT(e,a.latestValues))}t.x=TT(t.x),t.y=TT(t.y)}}(this.layoutCorrected,this.treeScale,this.path,n);var u=t.target;if(u){this.projectionDelta||(this.projectionDelta=dT(),this.projectionDeltaWithTransform=dT());var s=this.treeScale.x,c=this.treeScale.y,l=this.projectionTransform;iT(this.projectionDelta,this.layoutCorrected,u,this.latestValues),this.projectionTransform=fI(this.projectionDelta,this.treeScale),this.projectionTransform===l&&this.treeScale.x===s&&this.treeScale.y===c||(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",u)),mI.recalculatedProjection++}}}}},{key:"hide",value:function(){this.isVisible=!1}},{key:"show",value:function(){this.isVisible=!0}},{key:"scheduleRender",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.options.scheduleRender&&this.options.scheduleRender(),e){var t=this.getStack();t&&t.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}},{key:"setAnimationOrigin",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=this.snapshot,i=r?r.latestValues:{},a=pe({},this.latestValues),o=dT();this.relativeParent&&this.relativeParent.options.layoutRoot||(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!n;var u,s=vT(),c=(r?r.source:void 0)!==(this.layout?this.layout.source:void 0),l=this.getStack(),f=!l||l.members.length<=1,h=Boolean(c&&!f&&!0===this.options.crossfade&&!this.path.some(PI));this.animationProgress=0,this.mixTargetDelta=function(n){var r=n/1e3;AI(o.x,e.x,r),AI(o.y,e.y,r),t.setTargetDelta(o),t.relativeTarget&&t.relativeTargetOrigin&&t.layout&&t.relativeParent&&t.relativeParent.layout&&(uT(s,t.layout.layoutBox,t.relativeParent.layout.layoutBox),function(e,t,n,r){NI(e.x,t.x,n.x,r),NI(e.y,t.y,n.y,r)}(t.relativeTarget,t.relativeTargetOrigin,s,r),u&&sI(t.relativeTarget,u)&&(t.isProjectionDirty=!1),u||(u=vT()),eI(u,t.relativeTarget)),c&&(t.animationValues=a,function(e,t,n,r,i,a){i?(e.opacity=eE(0,void 0!==n.opacity?n.opacity:1,XT(r)),e.opacityExit=eE(void 0!==t.opacity?t.opacity:1,0,$T(r))):a&&(e.opacity=eE(void 0!==t.opacity?t.opacity:1,void 0!==n.opacity?n.opacity:1,r));for(var o=0;o<HT;o++){var u="border".concat(KT[o],"Radius"),s=YT(t,u),c=YT(n,u);void 0===s&&void 0===c||(s||(s=0),c||(c=0),0===s||0===c||QT(s)===QT(c)?(e[u]=Math.max(eE(WT(s),WT(c),r),0),(Uw.test(c)||Uw.test(s))&&(e[u]+="%")):e[u]=c)}(t.rotate||n.rotate)&&(e.rotate=eE(t.rotate||0,n.rotate||0,r))}(a,i,t.latestValues,r,h,f)),t.root.scheduleUpdateProjection(),t.scheduleRender(),t.animationProgress=r},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}},{key:"startAnimation",value:function(e){var t=this;this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Qx(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Wx.update((function(){uw.hasAnimatedSinceResize=!0,t.currentAnimation=function(e,t,n){var r=ww(e)?e:_S(e);return r.start(pS("",r,t,n)),r.animation}(0,1e3,pe(pe({},e),{},{onUpdate:function(n){t.mixTargetDelta(n),e.onUpdate&&e.onUpdate(n)},onComplete:function(){e.onComplete&&e.onComplete(),t.completeAnimation()}})),t.resumingFrom&&(t.resumingFrom.currentAnimation=t.currentAnimation),t.pendingAnimation=void 0}))}},{key:"completeAnimation",value:function(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);var e=this.getStack();e&&e.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}},{key:"finishAnimation",value:function(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(1e3),this.currentAnimation.stop()),this.completeAnimation()}},{key:"applyTransformsToTarget",value:function(){var e=this.getLead(),t=e.targetWithTransforms,n=e.target,r=e.layout,i=e.latestValues;if(t&&n&&r){if(this!==e&&this.layout&&r&&MI(this.options.animationType,this.layout.layoutBox,r.layoutBox)){n=this.target||vT();var a=tT(this.layout.layoutBox.x);n.x.min=e.target.x.min,n.x.max=n.x.min+a;var o=tT(this.layout.layoutBox.y);n.y.min=e.target.y.min,n.y.max=n.y.min+o}eI(t,n),NT(t,i),iT(this.projectionDeltaWithTransform,this.layoutCorrected,t,i)}}},{key:"registerSharedNode",value:function(e,t){this.sharedNodes.has(e)||this.sharedNodes.set(e,new lI),this.sharedNodes.get(e).add(t);var n=t.options.initialPromotionConfig;t.promote({transition:n?n.transition:void 0,preserveFollowOpacity:n&&n.shouldPreserveFollowOpacity?n.shouldPreserveFollowOpacity(t):void 0})}},{key:"isLead",value:function(){var e=this.getStack();return!e||e.lead===this}},{key:"getLead",value:function(){var e;return this.options.layoutId&&(null===(e=this.getStack())||void 0===e?void 0:e.lead)||this}},{key:"getPrevLead",value:function(){var e;return this.options.layoutId?null===(e=this.getStack())||void 0===e?void 0:e.prevLead:void 0}},{key:"getStack",value:function(){var e=this.options.layoutId;if(e)return this.root.sharedNodes.get(e)}},{key:"promote",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.needsReset,n=e.transition,r=e.preserveFollowOpacity,i=this.getStack();i&&i.promote(this,r),t&&(this.projectionDelta=void 0,this.needsReset=!0),n&&this.setOptions({transition:n})}},{key:"relegate",value:function(){var e=this.getStack();return!!e&&e.relegate(this)}},{key:"resetRotation",value:function(){var e=this.options.visualElement;if(e){var t=!1,n=e.latestValues;if((n.rotate||n.rotateX||n.rotateY||n.rotateZ)&&(t=!0),t){for(var r={},i=0;i<vI.length;i++){var a="rotate"+vI[i];n[a]&&(r[a]=n[a],e.setStaticValue(a,0))}for(var o in e.render(),r)e.setStaticValue(o,r[o]);e.scheduleRender()}}}},{key:"getProjectionStyles",value:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r={};if(!this.instance||this.isSVG)return r;if(!this.isVisible)return{visibility:"hidden"};r.visibility="";var i=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,r.opacity="",r.pointerEvents=wx(n.pointerEvents)||"",r.transform=i?i(this.latestValues,""):"none",r;var a=this.getLead();if(!this.projectionDelta||!this.layout||!a.target){var o={};return this.options.layoutId&&(o.opacity=void 0!==this.latestValues.opacity?this.latestValues.opacity:1,o.pointerEvents=wx(n.pointerEvents)||""),this.hasProjected&&!kT(this.latestValues)&&(o.transform=i?i({},""):"none",this.hasProjected=!1),o}var u=a.animationValues||a.latestValues;this.applyTransformsToTarget(),r.transform=fI(this.projectionDeltaWithTransform,this.treeScale,u),i&&(r.transform=i(u,r.transform));var s=this.projectionDelta,c=s.x,l=s.y;for(var f in r.transformOrigin="".concat(100*c.origin,"% ").concat(100*l.origin,"% 0"),a.animationValues?r.opacity=a===this?null!==(t=null!==(e=u.opacity)&&void 0!==e?e:this.latestValues.opacity)&&void 0!==t?t:1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:r.opacity=a===this?void 0!==u.opacity?u.opacity:"":void 0!==u.opacityExit?u.opacityExit:0,yw)if(void 0!==u[f]){var h=yw[f],d=h.correct,v=h.applyTo,p="none"===r.transform?u[f]:d(u[f],a);if(v)for(var m=v.length,y=0;y<m;y++)r[v[y]]=p;else r[f]=p}return this.options.layoutId&&(r.pointerEvents=a===this?wx(n.pointerEvents)||"":"none"),r}},{key:"clearSnapshot",value:function(){this.resumeFrom=this.snapshot=void 0}},{key:"resetTree",value:function(){this.root.nodes.forEach((function(e){var t;return null===(t=e.currentAnimation)||void 0===t?void 0:t.stop()})),this.root.nodes.forEach(_I),this.root.sharedNodes.clear()}}]),e}()}function gI(e){e.updateLayout()}function kI(e){var t,n=(null===(t=e.resumeFrom)||void 0===t?void 0:t.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&n&&e.hasListeners("didUpdate")){var r=e.layout,i=r.layoutBox,a=r.measuredBox,o=e.options.animationType,u=n.source!==e.layout.source;"size"===o?pT((function(e){var t=u?n.measuredBox[e]:n.layoutBox[e],r=tT(t);t.min=i[e].min,t.max=t.min+r})):MI(o,n.layoutBox,i)&&pT((function(t){var r=u?n.measuredBox[t]:n.layoutBox[t],a=tT(i[t]);r.max=r.min+a,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[t].max=e.relativeTarget[t].min+a)}));var s=dT();iT(s,i,n.layoutBox);var c=dT();u?iT(c,e.applyTransform(a,!0),n.measuredBox):iT(c,i,n.layoutBox);var l=!uI(s),f=!1;if(!e.resumeFrom){var h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){var d=h.snapshot,v=h.layout;if(d&&v){var p=vT();uT(p,n.layoutBox,d.layoutBox);var m=vT();uT(m,i,v.layoutBox),sI(p,m)||(f=!0),h.options.layoutRoot&&(e.relativeTarget=m,e.relativeTargetOrigin=p,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:i,snapshot:n,delta:c,layoutDelta:s,hasLayoutChanged:l,hasRelativeTargetChanged:f})}else if(e.isLead()){var y=e.options.onExitComplete;y&&y()}e.options.transition=void 0}function bI(e){mI.totalNodes++,e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=Boolean(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function wI(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function xI(e){e.clearSnapshot()}function _I(e){e.clearMeasurements()}function EI(e){var t=e.options.visualElement;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function SI(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0}function TI(e){e.resolveTargetDelta()}function II(e){e.calcProjection()}function CI(e){e.resetRotation()}function DI(e){e.removeLeadSnapshot()}function AI(e,t,n){e.translate=eE(t.translate,0,n),e.scale=eE(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function NI(e,t,n,r){e.min=eE(t.min,n.min,r),e.max=eE(t.max,n.max,r)}function PI(e){return e.animationValues&&void 0!==e.animationValues.opacityExit}var RI={duration:.45,ease:[.4,0,.1,1]};function OI(e,t){for(var n=e.root,r=e.path.length-1;r>=0;r--)if(Boolean(e.path[r].instance)){n=e.path[r];break}var i=(n&&n!==e.root?n.instance:document).querySelector('[data-projection-id="'.concat(t,'"]'));i&&e.mount(i,!0)}function LI(e){e.min=Math.round(e.min),e.max=Math.round(e.max)}function MI(e,t,n){return"position"===e||"preserve-aspect"===e&&!nT(cI(t),cI(n),.2)}var FI=yI({attachResizeListener:function(e,t){return Ix(e,"resize",t)},measureScroll:function(){return{x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}},checkIsScrollRoot:function(){return!0}}),VI={current:void 0},UI=yI({measureScroll:function(e){return{x:e.scrollLeft,y:e.scrollTop}},defaultParent:function(){if(!VI.current){var e=new FI(0,{});e.mount(window),e.setOptions({layoutScroll:!0}),VI.current=e}return VI.current},resetTransform:function(e,t){e.style.transform=void 0!==t?t:"none"},checkIsScrollRoot:function(e){return Boolean("fixed"===window.getComputedStyle(e).position)}}),BI={pan:{Feature:VT},drag:{Feature:MT,ProjectionNode:UI,MeasureLayout:qT}};var jI=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;var zI=4;function qI(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;p_(n<=zI,'Max CSS variable fallback depth detected in property "'.concat(e,'". This may indicate a circular fallback dependency.'));var r=function(e){var t=jI.exec(e);if(!t)return[,];var n=s(t,3);return[n[1],n[2]]}(e),i=s(r,2),a=i[0],o=i[1];if(a){var u=window.getComputedStyle(t).getPropertyValue(a);return u?u.trim():Tw(o)?qI(o,t,n+1):o}}function GI(e,t,n){var r=Object.assign({},(function(e){if(null==e)throw new TypeError("Cannot destructure "+e)}(t),t)),i=e.current;if(!(i instanceof Element))return{target:r,transitionEnd:n};for(var a in n&&(n=pe({},n)),e.values.forEach((function(e){var t=e.get();if(Tw(t)){var n=qI(t,i);n&&e.set(n)}})),r){var o=r[a];if(Tw(o)){var u=qI(o,i);u&&(r[a]=u,n||(n={}),void 0===n[a]&&(n[a]=o))}}return{target:r,transitionEnd:n}}var KI=new Set(["width","height","top","left","right","bottom","x","y"]),HI=function(e){return KI.has(e)},WI=function(e){return e===Dw||e===Bw},QI=function(e,t){return parseFloat(e.split(", ")[t])},YI=function(e,t){return function(n,r){var i=r.transform;if("none"===i||!i)return 0;var a=i.match(/^matrix3d\((.+)\)$/);if(a)return QI(a[1],t);var o=i.match(/^matrix\((.+)\)$/);return o?QI(o[1],e):0}},XI=new Set(["x","y","z"]),$I=gw.filter((function(e){return!XI.has(e)}));var JI={width:function(e,t){var n=e.x,r=t.paddingLeft,i=void 0===r?"0":r,a=t.paddingRight,o=void 0===a?"0":a;return n.max-n.min-parseFloat(i)-parseFloat(o)},height:function(e,t){var n=e.y,r=t.paddingTop,i=void 0===r?"0":r,a=t.paddingBottom,o=void 0===a?"0":a;return n.max-n.min-parseFloat(i)-parseFloat(o)},top:function(e,t){var n=t.top;return parseFloat(n)},left:function(e,t){var n=t.left;return parseFloat(n)},bottom:function(e,t){var n=e.y,r=t.top;return parseFloat(r)+(n.max-n.min)},right:function(e,t){var n=e.x,r=t.left;return parseFloat(r)+(n.max-n.min)},x:YI(4,13),y:YI(5,14)},ZI=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};t=pe({},t),r=pe({},r);var i=Object.keys(t).filter(HI),a=[],o=!1,u=[];if(i.forEach((function(i){var s=e.getValue(i);if(e.hasValue(i)){var c,l=n[i],f=TS(l),h=t[i];if(gx(h)){var d=h.length,v=null===h[0]?1:0;l=h[v],f=TS(l);for(var p=v;p<d&&null!==h[p];p++)c?p_(TS(h[p])===c,"All keyframes must be of the same type"):(c=TS(h[p]),p_(c===f||WI(f)&&WI(c),"Keyframes must be of the same dimension as the current value"))}else c=TS(h);if(f!==c)if(WI(f)&&WI(c)){var m=s.get();"string"===typeof m&&s.set(parseFloat(m)),"string"===typeof h?t[i]=parseFloat(h):Array.isArray(h)&&c===Bw&&(t[i]=h.map(parseFloat))}else(null===f||void 0===f?void 0:f.transform)&&(null===c||void 0===c?void 0:c.transform)&&(0===l||0===h)?0===l?s.set(c.transform(l)):t[i]=f.transform(h):(o||(a=function(e){var t=[];return $I.forEach((function(n){var r=e.getValue(n);void 0!==r&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))})),t.length&&e.render(),t}(e),o=!0),u.push(i),r[i]=void 0!==r[i]?r[i]:t[i],s.jump(h))}})),u.length){var c=u.indexOf("height")>=0?window.pageYOffset:null,l=function(e,t,n){var r=t.measureViewportBox(),i=t.current,a=getComputedStyle(i),o=a.display,u={};"none"===o&&t.setStaticValue("display",e.display||"block"),n.forEach((function(e){u[e]=JI[e](r,a)})),t.render();var s=t.measureViewportBox();return n.forEach((function(n){var r=t.getValue(n);r&&r.jump(u[n]),e[n]=JI[n](s,a)})),e}(t,e,u);return a.length&&a.forEach((function(t){var n=s(t,2),r=n[0],i=n[1];e.getValue(r).set(i)})),e.render(),Gb&&null!==c&&window.scrollTo({top:c}),{target:l,transitionEnd:r}}return{target:t,transitionEnd:r}};function eC(e,t,n,r){return function(e){return Object.keys(e).some(HI)}(t)?ZI(e,t,n,r):{target:t,transitionEnd:r}}var tC={current:null},nC={current:!1};var rC=new WeakMap,iC=["willChange"],aC=["children"],oC=Object.keys(rw),uC=oC.length,sC=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],cC=$b.length,lC=function(){function e(t){var n=this,r=t.parent,i=t.props,a=t.presenceContext,o=t.reducedMotionConfig,u=t.visualState,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};y(this,e),this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=function(){return n.notify("Update",n.latestValues)},this.render=function(){n.current&&(n.triggerBuild(),n.renderInstance(n.current,n.renderState,n.props.style,n.projection))},this.scheduleRender=function(){return Wx.render(n.render,!1,!0)};var c=u.latestValues,l=u.renderState;this.latestValues=c,this.baseTarget=pe({},c),this.initialValues=i.initial?pe({},c):{},this.renderState=l,this.parent=r,this.props=i,this.presenceContext=a,this.depth=r?r.depth+1:0,this.reducedMotionConfig=o,this.options=s,this.isControllingVariants=Jb(i),this.isVariantNode=Zb(i),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=Boolean(r&&r.current);var f=this.scrapeMotionValuesFromProps(i,{}),h=f.willChange,d=tx(f,iC);for(var v in d){var p=d[v];void 0!==c[v]&&ww(p)&&(p.set(c[v],!1),mS(h)&&h.add(v))}}return k(e,[{key:"scrapeMotionValuesFromProps",value:function(e,t){return{}}},{key:"mount",value:function(e){var t=this;this.current=e,rC.set(e,this),this.projection&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((function(e,n){return t.bindToMotionValue(n,e)})),nC.current||function(){if(nC.current=!0,Gb)if(window.matchMedia){var e=window.matchMedia("(prefers-reduced-motion)"),t=function(){return tC.current=e.matches};e.addListener(t),t()}else tC.current=!1}(),this.shouldReduceMotion="never"!==this.reducedMotionConfig&&("always"===this.reducedMotionConfig||tC.current),this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}},{key:"unmount",value:function(){for(var e in rC.delete(this.current),this.projection&&this.projection.unmount(),Qx(this.notifyUpdate),Qx(this.render),this.valueSubscriptions.forEach((function(e){return e()})),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this),this.events)this.events[e].clear();for(var t in this.features)this.features[t].unmount();this.current=null}},{key:"bindToMotionValue",value:function(e,t){var n=this,r=kw.has(e),i=t.on("change",(function(t){n.latestValues[e]=t,n.props.onUpdate&&Wx.update(n.notifyUpdate,!1,!0),r&&n.projection&&(n.projection.isTransformDirty=!0)})),a=t.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,(function(){i(),a()}))}},{key:"sortNodePosition",value:function(e){return this.current&&this.sortInstanceNodePosition&&this.type===e.type?this.sortInstanceNodePosition(this.current,e.current):0}},{key:"loadFeatures",value:function(e,t,n,r,i){for(var a,o,u=this,s=(e.children,tx(e,aC)),c=0;c<uC;c++){var l=oC[c],f=rw[l],h=f.isEnabled,d=f.Feature,v=f.ProjectionNode,p=f.MeasureLayout;v&&(a=v),h(s)&&(!this.features[l]&&d&&(this.features[l]=new d(this)),p&&(o=p))}if(!this.projection&&a){this.projection=new a(r,this.latestValues,this.parent&&this.parent.projection);var m=s.layoutId,y=s.layout,g=s.drag,k=s.dragConstraints,b=s.layoutScroll,w=s.layoutRoot;this.projection.setOptions({layoutId:m,layout:y,alwaysMeasureLayout:Boolean(g)||k&&Wb(k),visualElement:this,scheduleRender:function(){return u.scheduleRender()},animationType:"string"===typeof y?y:"both",initialPromotionConfig:i,layoutScroll:b,layoutRoot:w})}return o}},{key:"updateFeatures",value:function(){for(var e in this.features){var t=this.features[e];t.isMounted?t.update(this.props,this.prevProps):(t.mount(),t.isMounted=!0)}}},{key:"triggerBuild",value:function(){this.build(this.renderState,this.latestValues,this.options,this.props)}},{key:"measureViewportBox",value:function(){return this.current?this.measureInstanceViewportBox(this.current,this.props):vT()}},{key:"getStaticValue",value:function(e){return this.latestValues[e]}},{key:"setStaticValue",value:function(e,t){this.latestValues[e]=t}},{key:"makeTargetAnimatable",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return this.makeTargetAnimatableFromInstance(e,this.props,t)}},{key:"update",value:function(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(var n=0;n<sC.length;n++){var r=sC[n];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);var i=e["on"+r];i&&(this.propEventSubscriptions[r]=this.on(r,i))}this.prevMotionValues=function(e,t,n){var r=t.willChange;for(var i in t){var a=t[i],o=n[i];if(ww(a))e.addValue(i,a),mS(r)&&r.add(i);else if(ww(o))e.addValue(i,_S(a,{owner:e})),mS(r)&&r.remove(i);else if(o!==a)if(e.hasValue(i)){var u=e.getValue(i);!u.hasAnimated&&u.set(a)}else{var s=e.getStaticValue(i);e.addValue(i,_S(void 0!==s?s:a,{owner:e}))}}for(var c in n)void 0===t[c]&&e.removeValue(c);return t}(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}},{key:"getProps",value:function(){return this.props}},{key:"getVariant",value:function(e){return this.props.variants?this.props.variants[e]:void 0}},{key:"getDefaultTransition",value:function(){return this.props.transition}},{key:"getTransformPagePoint",value:function(){return this.props.transformPagePoint}},{key:"getClosestVariantNode",value:function(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}},{key:"getVariantContext",value:function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0])return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){var e=this.parent&&this.parent.getVariantContext()||{};return void 0!==this.props.initial&&(e.initial=this.props.initial),e}for(var t={},n=0;n<cC;n++){var r=$b[n],i=this.props[r];(Qb(i)||!1===i)&&(t[r]=i)}return t}},{key:"addVariantChild",value:function(e){var t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),function(){return t.variantChildren.delete(e)}}},{key:"addValue",value:function(e,t){t!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,t)),this.values.set(e,t),this.latestValues[e]=t.get()}},{key:"removeValue",value:function(e){this.values.delete(e);var t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}},{key:"hasValue",value:function(e){return this.values.has(e)}},{key:"getValue",value:function(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];var n=this.values.get(e);return void 0===n&&void 0!==t&&(n=_S(t,{owner:this}),this.addValue(e,n)),n}},{key:"readValue",value:function(e){return void 0===this.latestValues[e]&&this.current?this.readValueFromInstance(this.current,e,this.options):this.latestValues[e]}},{key:"setBaseTarget",value:function(e,t){this.baseTarget[e]=t}},{key:"getBaseTarget",value:function(e){var t,n=this.props.initial,r="string"===typeof n||"object"===typeof n?null===(t=yx(this.props,n))||void 0===t?void 0:t[e]:void 0;if(n&&void 0!==r)return r;var i=this.getBaseTargetFromProps(this.props,e);return void 0===i||ww(i)?void 0!==this.initialValues[e]&&void 0===r?void 0:this.baseTarget[e]:i}},{key:"on",value:function(e,t){return this.events[e]||(this.events[e]=new wS),this.events[e].add(t)}},{key:"notify",value:function(e){if(this.events[e]){for(var t,n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];(t=this.events[e]).notify.apply(t,r)}}}]),e}(),fC=["transition","transitionEnd"],hC=function(e){_(n,e);var t=T(n);function n(){return y(this,n),t.apply(this,arguments)}return k(n,[{key:"sortInstanceNodePosition",value:function(e,t){return 2&e.compareDocumentPosition(t)?1:-1}},{key:"getBaseTargetFromProps",value:function(e,t){return e.style?e.style[t]:void 0}},{key:"removeValueFromRenderState",value:function(e,t){var n=t.vars,r=t.style;delete n[e],delete r[e]}},{key:"makeTargetAnimatableFromInstance",value:function(e,t,n){var r=e.transition,i=e.transitionEnd,a=tx(e,fC),o=t.transformValues,u=function(e,t,n){var r={};for(var i in e){var a=PS(i,t);if(void 0!==a)r[i]=a;else{var o=n.getValue(i);o&&(r[i]=o.get())}}return r}(a,r||{},this);if(o&&(i&&(i=o(i)),a&&(a=o(a)),u&&(u=o(u))),n){!function(e,t,n){var r,i,a=Object.keys(t).filter((function(t){return!e.hasValue(t)})),o=a.length;if(o)for(var u=0;u<o;u++){var s=a[u],c=t[s],l=null;Array.isArray(c)&&(l=c[0]),null===l&&(l=null!==(i=null!==(r=n[s])&&void 0!==r?r:e.readValue(s))&&void 0!==i?i:t[s]),void 0!==l&&null!==l&&("string"===typeof l&&(yS(l)||gS(l))?l=parseFloat(l):!CS(l)&&vE.test(c)&&(l=cS(s,c)),e.addValue(s,_S(l,{owner:e})),void 0===n[s]&&(n[s]=l),null!==l&&e.setBaseTarget(s,l))}}(this,a,u);var s=function(e,t,n,r){var i=GI(e,t,r);return eC(e,t=i.target,n,r=i.transitionEnd)}(this,a,u,i);i=s.transitionEnd,a=s.target}return pe({transition:r,transitionEnd:i},a)}}]),n}(lC);var dC=function(e){_(n,e);var t=T(n);function n(){return y(this,n),t.apply(this,arguments)}return k(n,[{key:"readValueFromInstance",value:function(e,t){if(kw.has(t)){var n=sS(t);return n&&n.default||0}var r,i=(r=e,window.getComputedStyle(r)),a=(Sw(t)?i.getPropertyValue(t):i[t])||0;return"string"===typeof a?a.trim():a}},{key:"measureInstanceViewportBox",value:function(e,t){return PT(e,t.transformPagePoint)}},{key:"build",value:function(e,t,n,r){Hw(e,t,n,r.transformTemplate)}},{key:"scrapeMotionValuesFromProps",value:function(e,t){return px(e,t)}},{key:"handleChildMotionValue",value:function(){var e=this;this.childSubscription&&(this.childSubscription(),delete this.childSubscription);var t=this.props.children;ww(t)&&(this.childSubscription=t.on("change",(function(t){e.current&&(e.current.textContent="".concat(t))})))}},{key:"renderInstance",value:function(e,t,n,r){hx(e,t,n,r)}}]),n}(hC),vC=function(e){_(n,e);var t=T(n);function n(){var e;return y(this,n),(e=t.apply(this,arguments)).isSVGTag=!1,e}return k(n,[{key:"getBaseTargetFromProps",value:function(e,t){return e[t]}},{key:"readValueFromInstance",value:function(e,t){if(kw.has(t)){var n=sS(t);return n&&n.default||0}return t=dx.has(t)?t:fx(t),e.getAttribute(t)}},{key:"measureInstanceViewportBox",value:function(){return vT()}},{key:"scrapeMotionValuesFromProps",value:function(e,t){return mx(e,t)}},{key:"build",value:function(e,t,n,r){ox(e,t,n,this.isSVGTag,r.transformTemplate)}},{key:"renderInstance",value:function(e,t,n,r){vx(e,t,0,r)}},{key:"mount",value:function(e){this.isSVGTag=sx(e.tagName),Er(E(n.prototype),"mount",this).call(this,e)}}]),n}(hC),pC=function(e,t){return mw(e)?new vC(t,{enableHardwareAcceleration:!1}):new dC(t,{enableHardwareAcceleration:!0})},mC={layout:{ProjectionNode:UI,MeasureLayout:qT}},yC=pe(pe(pe(pe({},HS),l_),BI),mC),gC=vw((function(e,t){return function(e,t,n,r){var i=t.forwardMotionProps,a=void 0!==i&&i;return pe(pe({},mw(e)?Sx:Tx),{},{preloadedFeatures:n,useRender:lx(a),createVisualElement:r,Component:e})}(e,t,yC,pC)}));var kC=function(e){var n=e.file,r=e.setFile,i=Bb(n),a=i.url,o=i.progress;return console.log(o,a),(0,t.useEffect)((function(){a&&r(null)}),[a,r]),(0,c.jsx)(gC.div,{className:"progress-bar",initial:{width:0},animate:{width:o+"%"}})},bC=function(){var e=s((0,t.useState)(null),2),n=e[0],r=e[1],i=s((0,t.useState)(null),2),a=i[0],o=i[1],u=["image/png","image/jpeg"];return(0,c.jsxs)("form",{children:[(0,c.jsxs)("label",{children:[(0,c.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0];t&&u.includes(t.type)?(r(t),o("")):(r(null),o("Please select an image file (png or jpeg"))}}),(0,c.jsx)("span",{children:"+"})]}),(0,c.jsxs)("div",{className:"output",children:[a&&(0,c.jsx)("div",{className:"error",children:a}),n&&(0,c.jsx)("div",{children:n.name}),n&&(0,c.jsx)(kC,{file:n,setFile:r})]})]})},wC=function(e){var n=s((0,t.useState)([]),2),r=n[0],i=n[1];return(0,t.useEffect)((function(){var t=Vb.collection(e).orderBy("createdAt","desc").onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(pe(pe({},e.data()),{},{id:e.id}))})),i(t)}));return function(){return t()}}),[e]),{docs:r}},xC=function(e){var t=e.setSelectedImg,n=wC("images").docs;return(0,c.jsx)("div",{className:"img-grid",children:n&&n.map((function(e){return(0,c.jsx)(gC.div,{className:"img-wrap",layout:!0,whileHover:{opacity:1},onClick:function(){return t(e.url)},children:(0,c.jsx)(gC.img,{src:e.url,alt:"upload",initial:{opacity:0},animate:{opacity:1},transition:{delay:1}})},e.id)}))})},_C=function(e){var t=e.selectedImg,n=e.setSelectedImg;return(0,c.jsx)(gC.div,{className:"backdrop",onClick:function(e){e.target.classList.contains("backdrop")&&n(null)},initial:{opacity:0},animate:{opacity:1},children:(0,c.jsx)(gC.img,{src:t,alt:"modal-pic",initial:{scale:.1},animate:{scale:1}})})};var EC=function(){var e=s((0,t.useState)(null),2),n=e[0],r=e[1];return(0,c.jsxs)("div",{className:"App",children:[(0,c.jsx)(l,{}),(0,c.jsx)(bC,{}),(0,c.jsx)(xC,{setSelectedImg:r}),n&&(0,c.jsx)(_C,{selectedImg:n,setSelectedImg:r})]})};r.createRoot(document.getElementById("root")).render((0,c.jsx)(t.StrictMode,{children:(0,c.jsx)(EC,{})}))}()}();
//# sourceMappingURL=main.78515f67.js.map