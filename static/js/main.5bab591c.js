/*! For license information please see main.5bab591c.js.LICENSE.txt */
!function(){"use strict";var e={463:function(e,t,n){var r=n(791),i=n(296);function a(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o=new Set,u={};function s(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(u[e]=t,e=0;e<t.length;e++)o.add(t[e])}var l=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),f=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},v={};function p(e,t,n,r,i,a,o){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=o}var y={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(e){y[e]=new p(e,0,!1,e,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(e){var t=e[0];y[t]=new p(t,1,!1,e[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(e){y[e]=new p(e,2,!1,e.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(e){y[e]=new p(e,2,!1,e,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(e){y[e]=new p(e,3,!1,e.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(e){y[e]=new p(e,3,!0,e,null,!1,!1)})),["capture","download"].forEach((function(e){y[e]=new p(e,4,!1,e,null,!1,!1)})),["cols","rows","size","span"].forEach((function(e){y[e]=new p(e,6,!1,e,null,!1,!1)})),["rowSpan","start"].forEach((function(e){y[e]=new p(e,5,!1,e.toLowerCase(),null,!1,!1)}));var m=/[\-:]([a-z])/g;function g(e){return e[1].toUpperCase()}function k(e,t,n,r){var i=y.hasOwnProperty(t)?y[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!f.call(v,e)||!f.call(d,e)&&(h.test(e)?v[e]=!0:(d[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new p(t,1,!1,e,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(e){var t=e.replace(m,g);y[t]=new p(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(e){var t=e.replace(m,g);y[t]=new p(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(e){y[e]=new p(e,1,!1,e.toLowerCase(),null,!1,!1)})),y.xlinkHref=new p("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(e){y[e]=new p(e,1,!1,e.toLowerCase(),null,!0,!0)}));var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),_=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),S=Symbol.for("react.profiler"),I=Symbol.for("react.provider"),T=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),D=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),R=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var O=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var P=Symbol.iterator;function L(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=P&&e[P]||e["@@iterator"])?e:null}var M,F=Object.assign;function U(e){if(void 0===M)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||""}return"\n"+M+e}var V=!1;function B(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),a=r.stack.split("\n"),o=i.length-1,u=a.length-1;1<=o&&0<=u&&i[o]!==a[u];)u--;for(;1<=o&&0<=u;o--,u--)if(i[o]!==a[u]){if(1!==o||1!==u)do{if(o--,0>--u||i[o]!==a[u]){var s="\n"+i[o].replace(" at new "," at ");return e.displayName&&s.includes("<anonymous>")&&(s=s.replace("<anonymous>",e.displayName)),s}}while(1<=o&&0<=u);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?U(e):""}function z(e){switch(e.tag){case 5:return U(e.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return e=B(e.type,!1);case 11:return e=B(e.type.render,!1);case 1:return e=B(e.type,!0);default:return""}}function j(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case x:return"Fragment";case _:return"Portal";case S:return"Profiler";case E:return"StrictMode";case D:return"Suspense";case N:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case T:return(e.displayName||"Context")+".Consumer";case I:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case A:return null!==(t=e.displayName||null)?t:j(e.type)||"Memo";case R:t=e._payload,e=e._init;try{return j(e(t))}catch(n){}}return null}function q(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(t);case 8:return t===E?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function G(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function H(e){e._valueTracker||(e._valueTracker=function(e){var t=G(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function W(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=G(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return F({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function $(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&k(e,"checked",t,!1)}function J(e,t){X(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(a(91));return F({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(a(92));if(te(n)){if(1<n.length)throw Error(a(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function ae(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function oe(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function se(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?ue(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,le,fe=(le=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction((function(){return le(e,t)}))}:le);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var de={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ve=["Webkit","ms","Moz","O"];function pe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||de.hasOwnProperty(e)&&de[e]?(""+t).trim():t+"px"}function ye(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=pe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(de).forEach((function(e){ve.forEach((function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),de[t]=de[e]}))}));var me=F({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ge(e,t){if(t){if(me[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(a(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(a(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(a(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(a(62))}}function ke(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,xe=null,Ee=null;function Se(e){if(e=ki(e)){if("function"!==typeof _e)throw Error(a(280));var t=e.stateNode;t&&(t=wi(t),_e(e.stateNode,e.type,t))}}function Ie(e){xe?Ee?Ee.push(e):Ee=[e]:xe=e}function Te(){if(xe){var e=xe,t=Ee;if(Ee=xe=null,Se(e),t)for(e=0;e<t.length;e++)Se(t[e])}}function Ce(e,t){return e(t)}function De(){}var Ne=!1;function Ae(e,t,n){if(Ne)return e(t,n);Ne=!0;try{return Ce(e,t,n)}finally{Ne=!1,(null!==xe||null!==Ee)&&(De(),Te())}}function Re(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Oe=!1;if(l)try{var Pe={};Object.defineProperty(Pe,"passive",{get:function(){Oe=!0}}),window.addEventListener("test",Pe,Pe),window.removeEventListener("test",Pe,Pe)}catch(le){Oe=!1}function Le(e,t,n,r,i,a,o,u,s){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(l){this.onError(l)}}var Me=!1,Fe=null,Ue=!1,Ve=null,Be={onError:function(e){Me=!0,Fe=e}};function ze(e,t,n,r,i,a,o,u,s){Me=!1,Fe=null,Le.apply(Be,arguments)}function je(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function qe(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(je(e)!==e)throw Error(a(188))}function Ge(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=je(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(r=i.return)){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return Ke(i),e;if(o===r)return Ke(i),t;o=o.sibling}throw Error(a(188))}if(n.return!==r.return)n=i,r=o;else{for(var u=!1,s=i.child;s;){if(s===n){u=!0,n=i,r=o;break}if(s===r){u=!0,r=i,n=o;break}s=s.sibling}if(!u){for(s=o.child;s;){if(s===n){u=!0,n=o,r=i;break}if(s===r){u=!0,r=o,n=i;break}s=s.sibling}if(!u)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(e))?He(e):null}function He(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=He(e);if(null!==t)return t;e=e.sibling}return null}var We=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,$e=i.unstable_requestPaint,Xe=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,at=null;var ot=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ut(e)/st|0)|0},ut=Math.log,st=Math.LN2;var ct=64,lt=4194304;function ft(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,o=268435455&n;if(0!==o){var u=o&~i;0!==u?r=ft(u):0!==(a&=o)&&(r=ft(a))}else 0!==(o=n&~i)?r=ft(o):0!==a&&(r=ft(a));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(a=t&-t)||16===i&&0!==(4194240&a)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-ot(t)),r|=e[n],t&=~i;return r}function dt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function vt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function pt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function yt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-ot(t)]=n}function gt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-ot(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var kt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,_t,xt,Et,St,It=!1,Tt=[],Ct=null,Dt=null,Nt=null,At=new Map,Rt=new Map,Ot=[],Pt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Lt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Dt=null;break;case"mouseover":case"mouseout":Nt=null;break;case"pointerover":case"pointerout":At.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Rt.delete(t.pointerId)}}function Mt(e,t,n,r,i,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},null!==t&&(null!==(t=ki(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Ft(e){var t=gi(e.target);if(null!==t){var n=je(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=qe(n)))return e.blockedOn=t,void St(e.priority,(function(){xt(n)}))}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ut(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=ki(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Vt(e,t,n){Ut(e)&&n.delete(t)}function Bt(){It=!1,null!==Ct&&Ut(Ct)&&(Ct=null),null!==Dt&&Ut(Dt)&&(Dt=null),null!==Nt&&Ut(Nt)&&(Nt=null),At.forEach(Vt),Rt.forEach(Vt)}function zt(e,t){e.blockedOn===t&&(e.blockedOn=null,It||(It=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Bt)))}function jt(e){function t(t){return zt(t,e)}if(0<Tt.length){zt(Tt[0],e);for(var n=1;n<Tt.length;n++){var r=Tt[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&zt(Ct,e),null!==Dt&&zt(Dt,e),null!==Nt&&zt(Nt,e),At.forEach(t),Rt.forEach(t),n=0;n<Ot.length;n++)(r=Ot[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ot.length&&null===(n=Ot[0]).blockedOn;)Ft(n),null===n.blockedOn&&Ot.shift()}var qt=b.ReactCurrentBatchConfig,Kt=!0;function Gt(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=1,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Ht(e,t,n,r){var i=kt,a=qt.transition;qt.transition=null;try{kt=4,Wt(e,t,n,r)}finally{kt=i,qt.transition=a}}function Wt(e,t,n,r){if(Kt){var i=Yt(e,t,n,r);if(null===i)Kr(e,t,r,Qt,n),Lt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Mt(Ct,e,t,n,r,i),!0;case"dragenter":return Dt=Mt(Dt,e,t,n,r,i),!0;case"mouseover":return Nt=Mt(Nt,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return At.set(a,Mt(At.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Rt.set(a,Mt(Rt.get(a)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Lt(e,r),4&t&&-1<Pt.indexOf(e)){for(;null!==i;){var a=ki(i);if(null!==a&&wt(a),null===(a=Yt(e,t,n,r))&&Kr(e,t,r,Qt,n),a===i)break;i=a}null!==i&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=gi(e=we(r))))if(null===(t=je(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=qe(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function $t(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,i="value"in Xt?Xt.value:Xt.textContent,a=i.length;for(e=0;e<r&&n[e]===i[e];e++);var o=r-e;for(t=1;t<=o&&n[r-t]===i[a-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,i,a){for(var o in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(i):i[o]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return F(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var on,un,sn,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ln=an(cn),fn=F({},cn,{view:0,detail:0}),hn=an(fn),dn=F({},fn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==sn&&(sn&&"mousemove"===e.type?(on=e.screenX-sn.screenX,un=e.screenY-sn.screenY):un=on=0,sn=e),on)},movementY:function(e){return"movementY"in e?e.movementY:un}}),vn=an(dn),pn=an(F({},dn,{dataTransfer:0})),yn=an(F({},fn,{relatedTarget:0})),mn=an(F({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),gn=F({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),kn=an(gn),bn=an(F({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},xn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function En(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=xn[e])&&!!t[e]}function Sn(){return En}var In=F({},fn,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sn,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),Tn=an(In),Cn=an(F({},dn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Dn=an(F({},fn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sn})),Nn=an(F({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),An=F({},dn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Rn=an(An),On=[9,13,27,32],Pn=l&&"CompositionEvent"in window,Ln=null;l&&"documentMode"in document&&(Ln=document.documentMode);var Mn=l&&"TextEvent"in window&&!Ln,Fn=l&&(!Pn||Ln&&8<Ln&&11>=Ln),Un=String.fromCharCode(32),Vn=!1;function Bn(e,t){switch(e){case"keyup":return-1!==On.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function zn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var qn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!qn[e.type]:"textarea"===t}function Gn(e,t,n,r){Ie(r),0<(t=Hr(t,"onChange")).length&&(n=new ln("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Hn=null,Wn=null;function Qn(e){Ur(e,0)}function Yn(e){if(W(bi(e)))return e}function $n(e,t){if("change"===e)return t}var Xn=!1;if(l){var Jn;if(l){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Hn&&(Hn.detachEvent("onpropertychange",nr),Wn=Hn=null)}function nr(e){if("value"===e.propertyName&&Yn(Wn)){var t=[];Gn(t,Wn,e,we(e)),Ae(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Wn=n,(Hn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Wn)}function ar(e,t){if("click"===e)return Yn(t)}function or(e,t){if("input"===e||"change"===e)return Yn(t)}var ur="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function sr(e,t){if(ur(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!f.call(t,i)||!ur(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function lr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function fr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?fr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function vr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&fr(n.ownerDocument.documentElement,n)){if(null!==r&&dr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=void 0===r.end?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=lr(n,a);var o=lr(n,r);i&&o&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var pr=l&&"documentMode"in document&&11>=document.documentMode,yr=null,mr=null,gr=null,kr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;kr||null==yr||yr!==Q(r)||("selectionStart"in(r=yr)&&dr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},gr&&sr(gr,r)||(gr=r,0<(r=Hr(mr,"onSelect")).length&&(t=new ln("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=yr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},xr={},Er={};function Sr(e){if(xr[e])return xr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Er)return xr[e]=n[t];return e}l&&(Er=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Ir=Sr("animationend"),Tr=Sr("animationiteration"),Cr=Sr("animationstart"),Dr=Sr("transitionend"),Nr=new Map,Ar="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(e,t){Nr.set(e,t),s(t,[e])}for(var Or=0;Or<Ar.length;Or++){var Pr=Ar[Or];Rr(Pr.toLowerCase(),"on"+(Pr[0].toUpperCase()+Pr.slice(1)))}Rr(Ir,"onAnimationEnd"),Rr(Tr,"onAnimationIteration"),Rr(Cr,"onAnimationStart"),Rr("dblclick","onDoubleClick"),Rr("focusin","onFocus"),Rr("focusout","onBlur"),Rr(Dr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Lr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Mr=new Set("cancel close invalid load scroll toggle".split(" ").concat(Lr));function Fr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,o,u,s,c){if(ze.apply(this,arguments),Me){if(!Me)throw Error(a(198));var l=Fe;Me=!1,Fe=null,Ue||(Ue=!0,Ve=l)}}(r,t,void 0,e),e.currentTarget=null}function Ur(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var o=r.length-1;0<=o;o--){var u=r[o],s=u.instance,c=u.currentTarget;if(u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}else for(o=0;o<r.length;o++){if(s=(u=r[o]).instance,c=u.currentTarget,u=u.listener,s!==a&&i.isPropagationStopped())break e;Fr(i,u,c),a=s}}}if(Ue)throw e=Ve,Ue=!1,Ve=null,e}function Vr(e,t){var n=t[pi];void 0===n&&(n=t[pi]=new Set);var r=e+"__bubble";n.has(r)||(qr(t,e,2,!1),n.add(r))}function Br(e,t,n){var r=0;t&&(r|=4),qr(n,e,r,t)}var zr="_reactListening"+Math.random().toString(36).slice(2);function jr(e){if(!e[zr]){e[zr]=!0,o.forEach((function(t){"selectionchange"!==t&&(Mr.has(t)||Br(t,!1,e),Br(t,!0,e))}));var t=9===e.nodeType?e:e.ownerDocument;null===t||t[zr]||(t[zr]=!0,Br("selectionchange",!1,t))}}function qr(e,t,n,r){switch($t(t)){case 1:var i=Gt;break;case 4:i=Ht;break;default:i=Wt}n=i.bind(null,t,n,e),i=void 0,!Oe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,i){var a=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var o=r.tag;if(3===o||4===o){var u=r.stateNode.containerInfo;if(u===i||8===u.nodeType&&u.parentNode===i)break;if(4===o)for(o=r.return;null!==o;){var s=o.tag;if((3===s||4===s)&&((s=o.stateNode.containerInfo)===i||8===s.nodeType&&s.parentNode===i))return;o=o.return}for(;null!==u;){if(null===(o=gi(u)))return;if(5===(s=o.tag)||6===s){r=a=o;continue e}u=u.parentNode}}r=r.return}Ae((function(){var r=a,i=we(n),o=[];e:{var u=Nr.get(e);if(void 0!==u){var s=ln,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":s=Tn;break;case"focusin":c="focus",s=yn;break;case"focusout":c="blur",s=yn;break;case"beforeblur":case"afterblur":s=yn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":s=vn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":s=pn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":s=Dn;break;case Ir:case Tr:case Cr:s=mn;break;case Dr:s=Nn;break;case"scroll":s=hn;break;case"wheel":s=Rn;break;case"copy":case"cut":case"paste":s=kn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":s=Cn}var l=0!==(4&t),f=!l&&"scroll"===e,h=l?null!==u?u+"Capture":null:u;l=[];for(var d,v=r;null!==v;){var p=(d=v).stateNode;if(5===d.tag&&null!==p&&(d=p,null!==h&&(null!=(p=Re(v,h))&&l.push(Gr(v,p,d)))),f)break;v=v.return}0<l.length&&(u=new s(u,c,null,n,i),o.push({event:u,listeners:l}))}}if(0===(7&t)){if(s="mouseout"===e||"pointerout"===e,(!(u="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!gi(c)&&!c[vi])&&(s||u)&&(u=i.window===i?i:(u=i.ownerDocument)?u.defaultView||u.parentWindow:window,s?(s=r,null!==(c=(c=n.relatedTarget||n.toElement)?gi(c):null)&&(c!==(f=je(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(s=null,c=r),s!==c)){if(l=vn,p="onMouseLeave",h="onMouseEnter",v="mouse","pointerout"!==e&&"pointerover"!==e||(l=Cn,p="onPointerLeave",h="onPointerEnter",v="pointer"),f=null==s?u:bi(s),d=null==c?u:bi(c),(u=new l(p,v+"leave",s,n,i)).target=f,u.relatedTarget=d,p=null,gi(i)===r&&((l=new l(h,v+"enter",c,n,i)).target=d,l.relatedTarget=f,p=l),f=p,s&&c)e:{for(h=c,v=0,d=l=s;d;d=Wr(d))v++;for(d=0,p=h;p;p=Wr(p))d++;for(;0<v-d;)l=Wr(l),v--;for(;0<d-v;)h=Wr(h),d--;for(;v--;){if(l===h||null!==h&&l===h.alternate)break e;l=Wr(l),h=Wr(h)}l=null}else l=null;null!==s&&Qr(o,u,s,l,!1),null!==c&&null!==f&&Qr(o,f,c,l,!0)}if("select"===(s=(u=r?bi(r):window).nodeName&&u.nodeName.toLowerCase())||"input"===s&&"file"===u.type)var y=$n;else if(Kn(u))if(Xn)y=or;else{y=ir;var m=rr}else(s=u.nodeName)&&"input"===s.toLowerCase()&&("checkbox"===u.type||"radio"===u.type)&&(y=ar);switch(y&&(y=y(e,r))?Gn(o,y,n,i):(m&&m(e,u,r),"focusout"===e&&(m=u._wrapperState)&&m.controlled&&"number"===u.type&&ee(u,"number",u.value)),m=r?bi(r):window,e){case"focusin":(Kn(m)||"true"===m.contentEditable)&&(yr=m,mr=r,gr=null);break;case"focusout":gr=mr=yr=null;break;case"mousedown":kr=!0;break;case"contextmenu":case"mouseup":case"dragend":kr=!1,br(o,n,i);break;case"selectionchange":if(pr)break;case"keydown":case"keyup":br(o,n,i)}var g;if(Pn)e:{switch(e){case"compositionstart":var k="onCompositionStart";break e;case"compositionend":k="onCompositionEnd";break e;case"compositionupdate":k="onCompositionUpdate";break e}k=void 0}else jn?Bn(e,n)&&(k="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(k="onCompositionStart");k&&(Fn&&"ko"!==n.locale&&(jn||"onCompositionStart"!==k?"onCompositionEnd"===k&&jn&&(g=en()):(Jt="value"in(Xt=i)?Xt.value:Xt.textContent,jn=!0)),0<(m=Hr(r,k)).length&&(k=new bn(k,e,null,n,i),o.push({event:k,listeners:m}),g?k.data=g:null!==(g=zn(n))&&(k.data=g))),(g=Mn?function(e,t){switch(e){case"compositionend":return zn(t);case"keypress":return 32!==t.which?null:(Vn=!0,Un);case"textInput":return(e=t.data)===Un&&Vn?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!Pn&&Bn(e,t)?(e=en(),Zt=Jt=Xt=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Fn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Hr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),o.push({event:i,listeners:r}),i.data=g))}Ur(o,t)}))}function Gr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Hr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,a=i.stateNode;5===i.tag&&null!==a&&(i=a,null!=(a=Re(e,n))&&r.unshift(Gr(e,a,i)),null!=(a=Re(e,t))&&r.push(Gr(e,a,i))),e=e.return}return r}function Wr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var a=t._reactName,o=[];null!==n&&n!==r;){var u=n,s=u.alternate,c=u.stateNode;if(null!==s&&s===r)break;5===u.tag&&null!==c&&(u=c,i?null!=(s=Re(n,a))&&o.unshift(Gr(n,s,u)):i||null!=(s=Re(n,a))&&o.push(Gr(n,s,u))),n=n.return}0!==o.length&&e.push({event:t,listeners:o})}var Yr=/\r\n?/g,$r=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace($r,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(a(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,ai="function"===typeof Promise?Promise:void 0,oi="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof ai?function(e){return ai.resolve(null).then(e).catch(ui)}:ri;function ui(e){setTimeout((function(){throw e}))}function si(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void jt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);jt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function li(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var fi=Math.random().toString(36).slice(2),hi="__reactFiber$"+fi,di="__reactProps$"+fi,vi="__reactContainer$"+fi,pi="__reactEvents$"+fi,yi="__reactListeners$"+fi,mi="__reactHandles$"+fi;function gi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[vi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=li(e);null!==e;){if(n=e[hi])return n;e=li(e)}return t}n=(e=n).parentNode}return null}function ki(e){return!(e=e[hi]||e[vi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(a(33))}function wi(e){return e[di]||null}var _i=[],xi=-1;function Ei(e){return{current:e}}function Si(e){0>xi||(e.current=_i[xi],_i[xi]=null,xi--)}function Ii(e,t){xi++,_i[xi]=e.current,e.current=t}var Ti={},Ci=Ei(Ti),Di=Ei(!1),Ni=Ti;function Ai(e,t){var n=e.type.contextTypes;if(!n)return Ti;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,a={};for(i in n)a[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function Ri(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Oi(){Si(Di),Si(Ci)}function Pi(e,t,n){if(Ci.current!==Ti)throw Error(a(168));Ii(Ci,t),Ii(Di,n)}function Li(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(a(108,q(e)||"Unknown",i));return F({},n,r)}function Mi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ti,Ni=Ci.current,Ii(Ci,e),Ii(Di,Di.current),!0}function Fi(e,t,n){var r=e.stateNode;if(!r)throw Error(a(169));n?(e=Li(e,t,Ni),r.__reactInternalMemoizedMergedChildContext=e,Si(Di),Si(Ci),Ii(Ci,e)):Si(Di),Ii(Di,n)}var Ui=null,Vi=!1,Bi=!1;function zi(e){null===Ui?Ui=[e]:Ui.push(e)}function ji(){if(!Bi&&null!==Ui){Bi=!0;var e=0,t=kt;try{var n=Ui;for(kt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Ui=null,Vi=!1}catch(i){throw null!==Ui&&(Ui=Ui.slice(e+1)),We(Ze,ji),i}finally{kt=t,Bi=!1}}return null}var qi=[],Ki=0,Gi=null,Hi=0,Wi=[],Qi=0,Yi=null,$i=1,Xi="";function Ji(e,t){qi[Ki++]=Hi,qi[Ki++]=Gi,Gi=e,Hi=t}function Zi(e,t,n){Wi[Qi++]=$i,Wi[Qi++]=Xi,Wi[Qi++]=Yi,Yi=e;var r=$i;e=Xi;var i=32-ot(r)-1;r&=~(1<<i),n+=1;var a=32-ot(t)+i;if(30<a){var o=i-i%5;a=(r&(1<<o)-1).toString(32),r>>=o,i-=o,$i=1<<32-ot(t)+i|n<<i|r,Xi=a+e}else $i=1<<a|n<<i|r,Xi=e}function ea(e){null!==e.return&&(Ji(e,1),Zi(e,1,0))}function ta(e){for(;e===Gi;)Gi=qi[--Ki],qi[Ki]=null,Hi=qi[--Ki],qi[Ki]=null;for(;e===Yi;)Yi=Wi[--Qi],Wi[Qi]=null,Xi=Wi[--Qi],Wi[Qi]=null,$i=Wi[--Qi],Wi[Qi]=null}var na=null,ra=null,ia=!1,aa=null;function oa(e,t){var n=Rc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function ua(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,na=e,ra=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,na=e,ra=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:$i,overflow:Xi}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Rc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,na=e,ra=null,!0);default:return!1}}function sa(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function ca(e){if(ia){var t=ra;if(t){var n=t;if(!ua(e,t)){if(sa(e))throw Error(a(418));t=ci(n.nextSibling);var r=na;t&&ua(e,t)?oa(r,n):(e.flags=-4097&e.flags|2,ia=!1,na=e)}}else{if(sa(e))throw Error(a(418));e.flags=-4097&e.flags|2,ia=!1,na=e}}}function la(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;na=e}function fa(e){if(e!==na)return!1;if(!ia)return la(e),ia=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=ra)){if(sa(e))throw ha(),Error(a(418));for(;t;)oa(e,t),t=ci(t.nextSibling)}if(la(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){ra=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}ra=null}}else ra=na?ci(e.stateNode.nextSibling):null;return!0}function ha(){for(var e=ra;e;)e=ci(e.nextSibling)}function da(){ra=na=null,ia=!1}function va(e){null===aa?aa=[e]:aa.push(e)}var pa=b.ReactCurrentBatchConfig;function ya(e,t){if(e&&e.defaultProps){for(var n in t=F({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var ma=Ei(null),ga=null,ka=null,ba=null;function wa(){ba=ka=ga=null}function _a(e){var t=ma.current;Si(ma),e._currentValue=t}function xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ea(e,t){ga=e,ba=ka=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bu=!0),e.firstContext=null)}function Sa(e){var t=e._currentValue;if(ba!==e)if(e={context:e,memoizedValue:t,next:null},null===ka){if(null===ga)throw Error(a(308));ka=e,ga.dependencies={lanes:0,firstContext:e}}else ka=ka.next=e;return t}var Ia=null;function Ta(e){null===Ia?Ia=[e]:Ia.push(e)}function Ca(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ta(t)):(n.next=i.next,i.next=n),t.interleaved=n,Da(e,r)}function Da(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Na=!1;function Aa(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ra(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Oa(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pa(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Ds)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Da(e,n)}return null===(i=r.interleaved)?(t.next=t,Ta(r)):(t.next=i.next,i.next=t),r.interleaved=t,Da(e,n)}function La(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}function Ma(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,a=null;if(null!==(n=n.firstBaseUpdate)){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===a?i=a=o:a=a.next=o,n=n.next}while(null!==n);null===a?i=a=t:a=a.next=t}else i=a=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Fa(e,t,n,r){var i=e.updateQueue;Na=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,u=i.shared.pending;if(null!==u){i.shared.pending=null;var s=u,c=s.next;s.next=null,null===o?a=c:o.next=c,o=s;var l=e.alternate;null!==l&&((u=(l=l.updateQueue).lastBaseUpdate)!==o&&(null===u?l.firstBaseUpdate=c:u.next=c,l.lastBaseUpdate=s))}if(null!==a){var f=i.baseState;for(o=0,l=c=s=null,u=a;;){var h=u.lane,d=u.eventTime;if((r&h)===h){null!==l&&(l=l.next={eventTime:d,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var v=e,p=u;switch(h=t,d=n,p.tag){case 1:if("function"===typeof(v=p.payload)){f=v.call(d,f,h);break e}f=v;break e;case 3:v.flags=-65537&v.flags|128;case 0:if(null===(h="function"===typeof(v=p.payload)?v.call(d,f,h):v)||void 0===h)break e;f=F({},f,h);break e;case 2:Na=!0}}null!==u.callback&&0!==u.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[u]:h.push(u))}else d={eventTime:d,lane:h,tag:u.tag,payload:u.payload,callback:u.callback,next:null},null===l?(c=l=d,s=f):l=l.next=d,o|=h;if(null===(u=u.next)){if(null===(u=i.shared.pending))break;u=(h=u).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===l&&(s=f),i.baseState=s,i.firstBaseUpdate=c,i.lastBaseUpdate=l,null!==(t=i.shared.interleaved)){i=t;do{o|=i.lane,i=i.next}while(i!==t)}else null===a&&(i.shared.lanes=0);Fs|=o,e.lanes=o,e.memoizedState=f}}function Ua(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(a(191,i));i.call(r)}}}var Va=(new r.Component).refs;function Ba(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:F({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var za={isMounted:function(e){return!!(e=e._reactInternals)&&je(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Pa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=tc(),i=nc(e),a=Oa(r,i);a.tag=1,a.payload=t,void 0!==n&&null!==n&&(a.callback=n),null!==(t=Pa(e,a,i))&&(rc(t,e,i,r),La(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=tc(),r=nc(e),i=Oa(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Pa(e,i,r))&&(rc(t,e,r,n),La(t,e,r))}};function ja(e,t,n,r,i,a,o){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,a,o):!t.prototype||!t.prototype.isPureReactComponent||(!sr(n,r)||!sr(i,a))}function qa(e,t,n){var r=!1,i=Ti,a=t.contextType;return"object"===typeof a&&null!==a?a=Sa(a):(i=Ri(t)?Ni:Ci.current,a=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ai(e,i):Ti),t=new t(n,a),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=za,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function Ka(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&za.enqueueReplaceState(t,t.state,null)}function Ga(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs=Va,Aa(e);var a=t.contextType;"object"===typeof a&&null!==a?i.context=Sa(a):(a=Ri(t)?Ni:Ci.current,i.context=Ai(e,a)),i.state=e.memoizedState,"function"===typeof(a=t.getDerivedStateFromProps)&&(Ba(e,t,a,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&za.enqueueReplaceState(i,i.state,null),Fa(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function Ha(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(a(309));var r=n.stateNode}if(!r)throw Error(a(147,e));var i=r,o=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===o?t.ref:(t=function(e){var t=i.refs;t===Va&&(t=i.refs={}),null===e?delete t[o]:t[o]=e},t._stringRef=o,t)}if("string"!==typeof e)throw Error(a(284));if(!n._owner)throw Error(a(290,e))}return e}function Wa(e,t){throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Qa(e){return(0,e._init)(e._payload)}function Ya(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Pc(e,t)).index=0,e.sibling=null,e}function o(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function u(t){return e&&null===t.alternate&&(t.flags|=2),t}function s(e,t,n,r){return null===t||6!==t.tag?((t=Uc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var a=n.type;return a===x?f(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===a||"object"===typeof a&&null!==a&&a.$$typeof===R&&Qa(a)===t.type)?((r=i(t,n.props)).ref=Ha(e,t,n),r.return=e,r):((r=Lc(n.type,n.key,n.props,null,e.mode,r)).ref=Ha(e,t,n),r.return=e,r)}function l(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Vc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function f(e,t,n,r,a){return null===t||7!==t.tag?((t=Mc(n,e.mode,r,a)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Uc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Lc(t.type,t.key,t.props,null,e.mode,n)).ref=Ha(e,null,t),n.return=e,n;case _:return(t=Vc(t,e.mode,n)).return=e,t;case R:return h(e,(0,t._init)(t._payload),n)}if(te(t)||L(t))return(t=Mc(t,e.mode,n,null)).return=e,t;Wa(e,t)}return null}function d(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:s(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?l(e,t,n,r):null;case R:return d(e,t,(i=n._init)(n._payload),r)}if(te(n)||L(n))return null!==i?null:f(e,t,n,r,null);Wa(e,n)}return null}function v(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return s(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return l(t,e=e.get(null===r.key?n:r.key)||null,r,i);case R:return v(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||L(r))return f(t,e=e.get(n)||null,r,i,null);Wa(t,r)}return null}function p(i,a,u,s){for(var c=null,l=null,f=a,p=a=0,y=null;null!==f&&p<u.length;p++){f.index>p?(y=f,f=null):y=f.sibling;var m=d(i,f,u[p],s);if(null===m){null===f&&(f=y);break}e&&f&&null===m.alternate&&t(i,f),a=o(m,a,p),null===l?c=m:l.sibling=m,l=m,f=y}if(p===u.length)return n(i,f),ia&&Ji(i,p),c;if(null===f){for(;p<u.length;p++)null!==(f=h(i,u[p],s))&&(a=o(f,a,p),null===l?c=f:l.sibling=f,l=f);return ia&&Ji(i,p),c}for(f=r(i,f);p<u.length;p++)null!==(y=v(f,i,p,u[p],s))&&(e&&null!==y.alternate&&f.delete(null===y.key?p:y.key),a=o(y,a,p),null===l?c=y:l.sibling=y,l=y);return e&&f.forEach((function(e){return t(i,e)})),ia&&Ji(i,p),c}function y(i,u,s,c){var l=L(s);if("function"!==typeof l)throw Error(a(150));if(null==(s=l.call(s)))throw Error(a(151));for(var f=l=null,p=u,y=u=0,m=null,g=s.next();null!==p&&!g.done;y++,g=s.next()){p.index>y?(m=p,p=null):m=p.sibling;var k=d(i,p,g.value,c);if(null===k){null===p&&(p=m);break}e&&p&&null===k.alternate&&t(i,p),u=o(k,u,y),null===f?l=k:f.sibling=k,f=k,p=m}if(g.done)return n(i,p),ia&&Ji(i,y),l;if(null===p){for(;!g.done;y++,g=s.next())null!==(g=h(i,g.value,c))&&(u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return ia&&Ji(i,y),l}for(p=r(i,p);!g.done;y++,g=s.next())null!==(g=v(p,i,y,g.value,c))&&(e&&null!==g.alternate&&p.delete(null===g.key?y:g.key),u=o(g,u,y),null===f?l=g:f.sibling=g,f=g);return e&&p.forEach((function(e){return t(i,e)})),ia&&Ji(i,y),l}return function e(r,a,o,s){if("object"===typeof o&&null!==o&&o.type===x&&null===o.key&&(o=o.props.children),"object"===typeof o&&null!==o){switch(o.$$typeof){case w:e:{for(var c=o.key,l=a;null!==l;){if(l.key===c){if((c=o.type)===x){if(7===l.tag){n(r,l.sibling),(a=i(l,o.props.children)).return=r,r=a;break e}}else if(l.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===R&&Qa(c)===l.type){n(r,l.sibling),(a=i(l,o.props)).ref=Ha(r,l,o),a.return=r,r=a;break e}n(r,l);break}t(r,l),l=l.sibling}o.type===x?((a=Mc(o.props.children,r.mode,s,o.key)).return=r,r=a):((s=Lc(o.type,o.key,o.props,null,r.mode,s)).ref=Ha(r,a,o),s.return=r,r=s)}return u(r);case _:e:{for(l=o.key;null!==a;){if(a.key===l){if(4===a.tag&&a.stateNode.containerInfo===o.containerInfo&&a.stateNode.implementation===o.implementation){n(r,a.sibling),(a=i(a,o.children||[])).return=r,r=a;break e}n(r,a);break}t(r,a),a=a.sibling}(a=Vc(o,r.mode,s)).return=r,r=a}return u(r);case R:return e(r,a,(l=o._init)(o._payload),s)}if(te(o))return p(r,a,o,s);if(L(o))return y(r,a,o,s);Wa(r,o)}return"string"===typeof o&&""!==o||"number"===typeof o?(o=""+o,null!==a&&6===a.tag?(n(r,a.sibling),(a=i(a,o)).return=r,r=a):(n(r,a),(a=Uc(o,r.mode,s)).return=r,r=a),u(r)):n(r,a)}}var $a=Ya(!0),Xa=Ya(!1),Ja={},Za=Ei(Ja),eo=Ei(Ja),to=Ei(Ja);function no(e){if(e===Ja)throw Error(a(174));return e}function ro(e,t){switch(Ii(to,t),Ii(eo,e),Ii(Za,Ja),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:se(null,"");break;default:t=se(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Si(Za),Ii(Za,t)}function io(){Si(Za),Si(eo),Si(to)}function ao(e){no(to.current);var t=no(Za.current),n=se(t,e.type);t!==n&&(Ii(eo,e),Ii(Za,n))}function oo(e){eo.current===e&&(Si(Za),Si(eo))}var uo=Ei(0);function so(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var co=[];function lo(){for(var e=0;e<co.length;e++)co[e]._workInProgressVersionPrimary=null;co.length=0}var fo=b.ReactCurrentDispatcher,ho=b.ReactCurrentBatchConfig,vo=0,po=null,yo=null,mo=null,go=!1,ko=!1,bo=0,wo=0;function _o(){throw Error(a(321))}function xo(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!ur(e[n],t[n]))return!1;return!0}function Eo(e,t,n,r,i,o){if(vo=o,po=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,fo.current=null===e||null===e.memoizedState?uu:su,e=n(r,i),ko){o=0;do{if(ko=!1,bo=0,25<=o)throw Error(a(301));o+=1,mo=yo=null,t.updateQueue=null,fo.current=cu,e=n(r,i)}while(ko)}if(fo.current=ou,t=null!==yo&&null!==yo.next,vo=0,mo=yo=po=null,go=!1,t)throw Error(a(300));return e}function So(){var e=0!==bo;return bo=0,e}function Io(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mo?po.memoizedState=mo=e:mo=mo.next=e,mo}function To(){if(null===yo){var e=po.alternate;e=null!==e?e.memoizedState:null}else e=yo.next;var t=null===mo?po.memoizedState:mo.next;if(null!==t)mo=t,yo=e;else{if(null===e)throw Error(a(310));e={memoizedState:(yo=e).memoizedState,baseState:yo.baseState,baseQueue:yo.baseQueue,queue:yo.queue,next:null},null===mo?po.memoizedState=mo=e:mo=mo.next=e}return mo}function Co(e,t){return"function"===typeof t?t(e):t}function Do(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=yo,i=r.baseQueue,o=n.pending;if(null!==o){if(null!==i){var u=i.next;i.next=o.next,o.next=u}r.baseQueue=i=o,n.pending=null}if(null!==i){o=i.next,r=r.baseState;var s=u=null,c=null,l=o;do{var f=l.lane;if((vo&f)===f)null!==c&&(c=c.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var h={lane:f,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};null===c?(s=c=h,u=r):c=c.next=h,po.lanes|=f,Fs|=f}l=l.next}while(null!==l&&l!==o);null===c?u=r:c.next=s,ur(r,t.memoizedState)||(bu=!0),t.memoizedState=r,t.baseState=u,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{o=i.lane,po.lanes|=o,Fs|=o,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function No(e){var t=To(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,o=t.memoizedState;if(null!==i){n.pending=null;var u=i=i.next;do{o=e(o,u.action),u=u.next}while(u!==i);ur(o,t.memoizedState)||(bu=!0),t.memoizedState=o,null===t.baseQueue&&(t.baseState=o),n.lastRenderedState=o}return[o,r]}function Ao(){}function Ro(e,t){var n=po,r=To(),i=t(),o=!ur(r.memoizedState,i);if(o&&(r.memoizedState=i,bu=!0),r=r.queue,Ko(Lo.bind(null,n,r,e),[e]),r.getSnapshot!==t||o||null!==mo&&1&mo.memoizedState.tag){if(n.flags|=2048,Vo(9,Po.bind(null,n,r,i,t),void 0,null),null===Ns)throw Error(a(349));0!==(30&vo)||Oo(n,t,i)}return i}function Oo(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Po(e,t,n,r){t.value=n,t.getSnapshot=r,Mo(t)&&Fo(e)}function Lo(e,t,n){return n((function(){Mo(t)&&Fo(e)}))}function Mo(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!ur(e,n)}catch(r){return!0}}function Fo(e){var t=Da(e,1);null!==t&&rc(t,e,1,-1)}function Uo(e){var t=Io();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Co,lastRenderedState:e},t.queue=e,e=e.dispatch=nu.bind(null,po,e),[t.memoizedState,e]}function Vo(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=po.updateQueue)?(t={lastEffect:null,stores:null},po.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Bo(){return To().memoizedState}function zo(e,t,n,r){var i=Io();po.flags|=e,i.memoizedState=Vo(1|t,n,void 0,void 0===r?null:r)}function jo(e,t,n,r){var i=To();r=void 0===r?null:r;var a=void 0;if(null!==yo){var o=yo.memoizedState;if(a=o.destroy,null!==r&&xo(r,o.deps))return void(i.memoizedState=Vo(t,n,a,r))}po.flags|=e,i.memoizedState=Vo(1|t,n,a,r)}function qo(e,t){return zo(8390656,8,e,t)}function Ko(e,t){return jo(2048,8,e,t)}function Go(e,t){return jo(4,2,e,t)}function Ho(e,t){return jo(4,4,e,t)}function Wo(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Qo(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,jo(4,4,Wo.bind(null,t,e),n)}function Yo(){}function $o(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Xo(e,t){var n=To();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&xo(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Jo(e,t,n){return 0===(21&vo)?(e.baseState&&(e.baseState=!1,bu=!0),e.memoizedState=n):(ur(n,t)||(n=pt(),po.lanes|=n,Fs|=n,e.baseState=!0),t)}function Zo(e,t){var n=kt;kt=0!==n&&4>n?n:4,e(!0);var r=ho.transition;ho.transition={};try{e(!1),t()}finally{kt=n,ho.transition=r}}function eu(){return To().memoizedState}function tu(e,t,n){var r=nc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},ru(e))iu(t,n);else if(null!==(n=Ca(e,t,n,r))){rc(n,e,r,tc()),au(n,t,r)}}function nu(e,t,n){var r=nc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(ru(e))iu(t,i);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var o=t.lastRenderedState,u=a(o,n);if(i.hasEagerState=!0,i.eagerState=u,ur(u,o)){var s=t.interleaved;return null===s?(i.next=i,Ta(t)):(i.next=s.next,s.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ca(e,t,i,r))&&(rc(n,e,r,i=tc()),au(n,t,r))}}function ru(e){var t=e.alternate;return e===po||null!==t&&t===po}function iu(e,t){ko=go=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function au(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,gt(e,n)}}var ou={readContext:Sa,useCallback:_o,useContext:_o,useEffect:_o,useImperativeHandle:_o,useInsertionEffect:_o,useLayoutEffect:_o,useMemo:_o,useReducer:_o,useRef:_o,useState:_o,useDebugValue:_o,useDeferredValue:_o,useTransition:_o,useMutableSource:_o,useSyncExternalStore:_o,useId:_o,unstable_isNewReconciler:!1},uu={readContext:Sa,useCallback:function(e,t){return Io().memoizedState=[e,void 0===t?null:t],e},useContext:Sa,useEffect:qo,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,zo(4194308,4,Wo.bind(null,t,e),n)},useLayoutEffect:function(e,t){return zo(4194308,4,e,t)},useInsertionEffect:function(e,t){return zo(4,2,e,t)},useMemo:function(e,t){var n=Io();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Io();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=tu.bind(null,po,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Io().memoizedState=e},useState:Uo,useDebugValue:Yo,useDeferredValue:function(e){return Io().memoizedState=e},useTransition:function(){var e=Uo(!1),t=e[0];return e=Zo.bind(null,e[1]),Io().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=po,i=Io();if(ia){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===Ns)throw Error(a(349));0!==(30&vo)||Oo(r,t,n)}i.memoizedState=n;var o={value:n,getSnapshot:t};return i.queue=o,qo(Lo.bind(null,r,o,e),[e]),r.flags|=2048,Vo(9,Po.bind(null,r,o,n,t),void 0,null),n},useId:function(){var e=Io(),t=Ns.identifierPrefix;if(ia){var n=Xi;t=":"+t+"R"+(n=($i&~(1<<32-ot($i)-1)).toString(32)+n),0<(n=bo++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=wo++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},su={readContext:Sa,useCallback:$o,useContext:Sa,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:Xo,useReducer:Do,useRef:Bo,useState:function(){return Do(Co)},useDebugValue:Yo,useDeferredValue:function(e){return Jo(To(),yo.memoizedState,e)},useTransition:function(){return[Do(Co)[0],To().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1},cu={readContext:Sa,useCallback:$o,useContext:Sa,useEffect:Ko,useImperativeHandle:Qo,useInsertionEffect:Go,useLayoutEffect:Ho,useMemo:Xo,useReducer:No,useRef:Bo,useState:function(){return No(Co)},useDebugValue:Yo,useDeferredValue:function(e){var t=To();return null===yo?t.memoizedState=e:Jo(t,yo.memoizedState,e)},useTransition:function(){return[No(Co)[0],To().memoizedState]},useMutableSource:Ao,useSyncExternalStore:Ro,useId:eu,unstable_isNewReconciler:!1};function lu(e,t){try{var n="",r=t;do{n+=z(r),r=r.return}while(r);var i=n}catch(a){i="\nError generating stack: "+a.message+"\n"+a.stack}return{value:e,source:t,stack:i,digest:null}}function fu(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function hu(e,t){try{console.error(t.value)}catch(n){setTimeout((function(){throw n}))}}var du="function"===typeof WeakMap?WeakMap:Map;function vu(e,t,n){(n=Oa(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Gs||(Gs=!0,Hs=r),hu(0,t)},n}function pu(e,t,n){(n=Oa(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){hu(0,t)}}var a=e.stateNode;return null!==a&&"function"===typeof a.componentDidCatch&&(n.callback=function(){hu(0,t),"function"!==typeof r&&(null===Ws?Ws=new Set([this]):Ws.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function yu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new du;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ic.bind(null,e,t,n),t.then(e,e))}function mu(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gu(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Oa(-1,1)).tag=2,Pa(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var ku=b.ReactCurrentOwner,bu=!1;function wu(e,t,n,r){t.child=null===e?Xa(t,null,n,r):$a(t,e.child,n,r)}function _u(e,t,n,r,i){n=n.render;var a=t.ref;return Ea(t,i),r=Eo(e,t,n,r,a,i),n=So(),null===e||bu?(ia&&n&&ea(t),t.flags|=1,wu(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function xu(e,t,n,r,i){if(null===e){var a=n.type;return"function"!==typeof a||Oc(a)||void 0!==a.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Lc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Eu(e,t,a,r,i))}if(a=e.child,0===(e.lanes&i)){var o=a.memoizedProps;if((n=null!==(n=n.compare)?n:sr)(o,r)&&e.ref===t.ref)return Gu(e,t,i)}return t.flags|=1,(e=Pc(a,r)).ref=t.ref,e.return=t,t.child=e}function Eu(e,t,n,r,i){if(null!==e){var a=e.memoizedProps;if(sr(a,r)&&e.ref===t.ref){if(bu=!1,t.pendingProps=r=a,0===(e.lanes&i))return t.lanes=e.lanes,Gu(e,t,i);0!==(131072&e.flags)&&(bu=!0)}}return Tu(e,t,n,r,i)}function Su(e,t,n){var r=t.pendingProps,i=r.children,a=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ii(Ps,Os),Os|=n;else{if(0===(1073741824&n))return e=null!==a?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ii(Ps,Os),Os|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==a?a.baseLanes:n,Ii(Ps,Os),Os|=r}else null!==a?(r=a.baseLanes|n,t.memoizedState=null):r=n,Ii(Ps,Os),Os|=r;return wu(e,t,i,n),t.child}function Iu(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Tu(e,t,n,r,i){var a=Ri(n)?Ni:Ci.current;return a=Ai(t,a),Ea(t,i),n=Eo(e,t,n,r,a,i),r=So(),null===e||bu?(ia&&r&&ea(t),t.flags|=1,wu(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Gu(e,t,i))}function Cu(e,t,n,r,i){if(Ri(n)){var a=!0;Mi(t)}else a=!1;if(Ea(t,i),null===t.stateNode)Ku(e,t),qa(t,n,r),Ga(t,n,r,i),r=!0;else if(null===e){var o=t.stateNode,u=t.memoizedProps;o.props=u;var s=o.context,c=n.contextType;"object"===typeof c&&null!==c?c=Sa(c):c=Ai(t,c=Ri(n)?Ni:Ci.current);var l=n.getDerivedStateFromProps,f="function"===typeof l||"function"===typeof o.getSnapshotBeforeUpdate;f||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==r||s!==c)&&Ka(t,o,r,c),Na=!1;var h=t.memoizedState;o.state=h,Fa(t,r,o,i),s=t.memoizedState,u!==r||h!==s||Di.current||Na?("function"===typeof l&&(Ba(t,n,l,r),s=t.memoizedState),(u=Na||ja(t,n,u,r,h,s,c))?(f||"function"!==typeof o.UNSAFE_componentWillMount&&"function"!==typeof o.componentWillMount||("function"===typeof o.componentWillMount&&o.componentWillMount(),"function"===typeof o.UNSAFE_componentWillMount&&o.UNSAFE_componentWillMount()),"function"===typeof o.componentDidMount&&(t.flags|=4194308)):("function"===typeof o.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=s),o.props=r,o.state=s,o.context=c,r=u):("function"===typeof o.componentDidMount&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,Ra(e,t),u=t.memoizedProps,c=t.type===t.elementType?u:ya(t.type,u),o.props=c,f=t.pendingProps,h=o.context,"object"===typeof(s=n.contextType)&&null!==s?s=Sa(s):s=Ai(t,s=Ri(n)?Ni:Ci.current);var d=n.getDerivedStateFromProps;(l="function"===typeof d||"function"===typeof o.getSnapshotBeforeUpdate)||"function"!==typeof o.UNSAFE_componentWillReceiveProps&&"function"!==typeof o.componentWillReceiveProps||(u!==f||h!==s)&&Ka(t,o,r,s),Na=!1,h=t.memoizedState,o.state=h,Fa(t,r,o,i);var v=t.memoizedState;u!==f||h!==v||Di.current||Na?("function"===typeof d&&(Ba(t,n,d,r),v=t.memoizedState),(c=Na||ja(t,n,c,r,h,v,s)||!1)?(l||"function"!==typeof o.UNSAFE_componentWillUpdate&&"function"!==typeof o.componentWillUpdate||("function"===typeof o.componentWillUpdate&&o.componentWillUpdate(r,v,s),"function"===typeof o.UNSAFE_componentWillUpdate&&o.UNSAFE_componentWillUpdate(r,v,s)),"function"===typeof o.componentDidUpdate&&(t.flags|=4),"function"===typeof o.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=v),o.props=r,o.state=v,o.context=s,r=c):("function"!==typeof o.componentDidUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof o.getSnapshotBeforeUpdate||u===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Du(e,t,n,r,a,i)}function Du(e,t,n,r,i,a){Iu(e,t);var o=0!==(128&t.flags);if(!r&&!o)return i&&Fi(t,n,!1),Gu(e,t,a);r=t.stateNode,ku.current=t;var u=o&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&o?(t.child=$a(t,e.child,null,a),t.child=$a(t,null,u,a)):wu(e,t,u,a),t.memoizedState=r.state,i&&Fi(t,n,!0),t.child}function Nu(e){var t=e.stateNode;t.pendingContext?Pi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Pi(0,t.context,!1),ro(e,t.containerInfo)}function Au(e,t,n,r,i){return da(),va(i),t.flags|=256,wu(e,t,n,r),t.child}var Ru,Ou,Pu,Lu,Mu={dehydrated:null,treeContext:null,retryLane:0};function Fu(e){return{baseLanes:e,cachePool:null,transitions:null}}function Uu(e,t,n){var r,i=t.pendingProps,o=uo.current,u=!1,s=0!==(128&t.flags);if((r=s)||(r=(null===e||null!==e.memoizedState)&&0!==(2&o)),r?(u=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(o|=1),Ii(uo,1&o),null===e)return ca(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(s=i.children,e=i.fallback,u?(i=t.mode,u=t.child,s={mode:"hidden",children:s},0===(1&i)&&null!==u?(u.childLanes=0,u.pendingProps=s):u=Fc(s,i,0,null),e=Mc(e,i,n,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=Fu(n),t.memoizedState=Mu,e):Vu(t,s));if(null!==(o=e.memoizedState)&&null!==(r=o.dehydrated))return function(e,t,n,r,i,o,u){if(n)return 256&t.flags?(t.flags&=-257,Bu(e,t,u,r=fu(Error(a(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(o=r.fallback,i=t.mode,r=Fc({mode:"visible",children:r.children},i,0,null),(o=Mc(o,i,u,null)).flags|=2,r.return=t,o.return=t,r.sibling=o,t.child=r,0!==(1&t.mode)&&$a(t,e.child,null,u),t.child.memoizedState=Fu(u),t.memoizedState=Mu,o);if(0===(1&t.mode))return Bu(e,t,u,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var s=r.dgst;return r=s,Bu(e,t,u,r=fu(o=Error(a(419)),r,void 0))}if(s=0!==(u&e.childLanes),bu||s){if(null!==(r=Ns)){switch(u&-u){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|u))?0:i)&&i!==o.retryLane&&(o.retryLane=i,Da(e,i),rc(r,e,i,-1))}return yc(),Bu(e,t,u,r=fu(Error(a(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Cc.bind(null,e),i._reactRetry=t,null):(e=o.treeContext,ra=ci(i.nextSibling),na=t,ia=!0,aa=null,null!==e&&(Wi[Qi++]=$i,Wi[Qi++]=Xi,Wi[Qi++]=Yi,$i=e.id,Xi=e.overflow,Yi=t),t=Vu(t,r.children),t.flags|=4096,t)}(e,t,s,i,r,o,n);if(u){u=i.fallback,s=t.mode,r=(o=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&s)&&t.child!==o?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Pc(o,c)).subtreeFlags=14680064&o.subtreeFlags,null!==r?u=Pc(r,u):(u=Mc(u,s,n,null)).flags|=2,u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,s=null===(s=e.child.memoizedState)?Fu(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},u.memoizedState=s,u.childLanes=e.childLanes&~n,t.memoizedState=Mu,i}return e=(u=e.child).sibling,i=Pc(u,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Vu(e,t){return(t=Fc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bu(e,t,n,r){return null!==r&&va(r),$a(t,e.child,null,n),(e=Vu(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zu(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xa(e.return,t,n)}function ju(e,t,n,r,i){var a=e.memoizedState;null===a?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function qu(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(wu(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zu(e,n,t);else if(19===e.tag)zu(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ii(uo,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===so(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),ju(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===so(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}ju(t,!0,n,null,a);break;case"together":ju(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ku(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Gu(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Fs|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Pc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Pc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Hu(e,t){if(!ia)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Wu(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Qu(e,t,n){var r=t.pendingProps;switch(ta(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wu(t),null;case 1:case 17:return Ri(t.type)&&Oi(),Wu(t),null;case 3:return r=t.stateNode,io(),Si(Di),Si(Ci),lo(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(fa(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==aa&&(uc(aa),aa=null))),Ou(e,t),Wu(t),null;case 5:oo(t);var i=no(to.current);if(n=t.type,null!==e&&null!=t.stateNode)Pu(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(a(166));return Wu(t),null}if(e=no(Za.current),fa(t)){r=t.stateNode,n=t.type;var o=t.memoizedProps;switch(r[hi]=t,r[di]=o,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":$(r,o),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Vr("invalid",r);break;case"textarea":ie(r,o),Vr("invalid",r)}for(var s in ge(n,o),i=null,o)if(o.hasOwnProperty(s)){var c=o[s];"children"===s?"string"===typeof c?r.textContent!==c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==o.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):u.hasOwnProperty(s)&&null!=c&&"onScroll"===s&&Vr("scroll",r)}switch(n){case"input":H(r),Z(r,o,!0);break;case"textarea":H(r),oe(r);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{s=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=ue(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=s.createElement(n,{is:r.is}):(e=s.createElement(n),"select"===n&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,n),e[hi]=t,e[di]=r,Ru(e,t,!1,!1),t.stateNode=e;e:{switch(s=ke(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Lr.length;i++)Vr(Lr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":$(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=F({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(o in ge(n,i),c=i)if(c.hasOwnProperty(o)){var l=c[o];"style"===o?ye(e,l):"dangerouslySetInnerHTML"===o?null!=(l=l?l.__html:void 0)&&fe(e,l):"children"===o?"string"===typeof l?("textarea"!==n||""!==l)&&he(e,l):"number"===typeof l&&he(e,""+l):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(u.hasOwnProperty(o)?null!=l&&"onScroll"===o&&Vr("scroll",e):null!=l&&k(e,o,l,s))}switch(n){case"input":H(e),Z(e,r,!1);break;case"textarea":H(e),oe(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(o=r.value)?ne(e,!!r.multiple,o,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Wu(t),null;case 6:if(e&&null!=t.stateNode)Lu(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(n=no(to.current),no(Za.current),fa(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(o=r.nodeValue!==n)&&null!==(e=na))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}o&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Wu(t),null;case 13:if(Si(uo),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(ia&&null!==ra&&0!==(1&t.mode)&&0===(128&t.flags))ha(),da(),t.flags|=98560,o=!1;else if(o=fa(t),null!==r&&null!==r.dehydrated){if(null===e){if(!o)throw Error(a(318));if(!(o=null!==(o=t.memoizedState)?o.dehydrated:null))throw Error(a(317));o[hi]=t}else da(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Wu(t),o=!1}else null!==aa&&(uc(aa),aa=null),o=!0;if(!o)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&uo.current)?0===Ls&&(Ls=3):yc())),null!==t.updateQueue&&(t.flags|=4),Wu(t),null);case 4:return io(),Ou(e,t),null===e&&jr(t.stateNode.containerInfo),Wu(t),null;case 10:return _a(t.type._context),Wu(t),null;case 19:if(Si(uo),null===(o=t.memoizedState))return Wu(t),null;if(r=0!==(128&t.flags),null===(s=o.rendering))if(r)Hu(o,!1);else{if(0!==Ls||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(s=so(e))){for(t.flags|=128,Hu(o,!1),null!==(r=s.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(o=n).flags&=14680066,null===(s=o.alternate)?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,e=s.dependencies,o.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ii(uo,1&uo.current|2),t.child}e=e.sibling}null!==o.tail&&Xe()>qs&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=so(s))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Hu(o,!0),null===o.tail&&"hidden"===o.tailMode&&!s.alternate&&!ia)return Wu(t),null}else 2*Xe()-o.renderingStartTime>qs&&1073741824!==n&&(t.flags|=128,r=!0,Hu(o,!1),t.lanes=4194304);o.isBackwards?(s.sibling=t.child,t.child=s):(null!==(n=o.last)?n.sibling=s:t.child=s,o.last=s)}return null!==o.tail?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=Xe(),t.sibling=null,n=uo.current,Ii(uo,r?1&n|2:1&n),t):(Wu(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Os)&&(Wu(t),6&t.subtreeFlags&&(t.flags|=8192)):Wu(t),null;case 24:case 25:return null}throw Error(a(156,t.tag))}function Yu(e,t){switch(ta(t),t.tag){case 1:return Ri(t.type)&&Oi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return io(),Si(Di),Si(Ci),lo(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return oo(t),null;case 13:if(Si(uo),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));da()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Si(uo),null;case 4:return io(),null;case 10:return _a(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Ru=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ou=function(){},Pu=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,no(Za.current);var a,o=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),o=[];break;case"select":i=F({},i,{value:void 0}),r=F({},r,{value:void 0}),o=[];break;case"textarea":i=re(e,i),r=re(e,r),o=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(l in ge(n,r),n=null,i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&null!=i[l])if("style"===l){var s=i[l];for(a in s)s.hasOwnProperty(a)&&(n||(n={}),n[a]="")}else"dangerouslySetInnerHTML"!==l&&"children"!==l&&"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&"autoFocus"!==l&&(u.hasOwnProperty(l)?o||(o=[]):(o=o||[]).push(l,null));for(l in r){var c=r[l];if(s=null!=i?i[l]:void 0,r.hasOwnProperty(l)&&c!==s&&(null!=c||null!=s))if("style"===l)if(s){for(a in s)!s.hasOwnProperty(a)||c&&c.hasOwnProperty(a)||(n||(n={}),n[a]="");for(a in c)c.hasOwnProperty(a)&&s[a]!==c[a]&&(n||(n={}),n[a]=c[a])}else n||(o||(o=[]),o.push(l,n)),n=c;else"dangerouslySetInnerHTML"===l?(c=c?c.__html:void 0,s=s?s.__html:void 0,null!=c&&s!==c&&(o=o||[]).push(l,c)):"children"===l?"string"!==typeof c&&"number"!==typeof c||(o=o||[]).push(l,""+c):"suppressContentEditableWarning"!==l&&"suppressHydrationWarning"!==l&&(u.hasOwnProperty(l)?(null!=c&&"onScroll"===l&&Vr("scroll",e),o||s===c||(o=[])):(o=o||[]).push(l,c))}n&&(o=o||[]).push("style",n);var l=o;(t.updateQueue=l)&&(t.flags|=4)}},Lu=function(e,t,n,r){n!==r&&(t.flags|=4)};var $u=!1,Xu=!1,Ju="function"===typeof WeakSet?WeakSet:Set,Zu=null;function es(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function ts(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var ns=!1;function rs(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,void 0!==a&&ts(t,n,a)}i=i.next}while(i!==r)}}function is(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function as(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function os(e){var t=e.alternate;null!==t&&(e.alternate=null,os(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[di],delete t[pi],delete t[yi],delete t[mi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function us(e){return 5===e.tag||3===e.tag||4===e.tag}function ss(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||us(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function cs(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(cs(e,t,n),e=e.sibling;null!==e;)cs(e,t,n),e=e.sibling}function ls(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(ls(e,t,n),e=e.sibling;null!==e;)ls(e,t,n),e=e.sibling}var fs=null,hs=!1;function ds(e,t,n){for(n=n.child;null!==n;)vs(e,t,n),n=n.sibling}function vs(e,t,n){if(at&&"function"===typeof at.onCommitFiberUnmount)try{at.onCommitFiberUnmount(it,n)}catch(u){}switch(n.tag){case 5:Xu||es(n,t);case 6:var r=fs,i=hs;fs=null,ds(e,t,n),hs=i,null!==(fs=r)&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):fs.removeChild(n.stateNode));break;case 18:null!==fs&&(hs?(e=fs,n=n.stateNode,8===e.nodeType?si(e.parentNode,n):1===e.nodeType&&si(e,n),jt(e)):si(fs,n.stateNode));break;case 4:r=fs,i=hs,fs=n.stateNode.containerInfo,hs=!0,ds(e,t,n),fs=r,hs=i;break;case 0:case 11:case 14:case 15:if(!Xu&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var a=i,o=a.destroy;a=a.tag,void 0!==o&&(0!==(2&a)||0!==(4&a))&&ts(n,t,o),i=i.next}while(i!==r)}ds(e,t,n);break;case 1:if(!Xu&&(es(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(u){Sc(n,t,u)}ds(e,t,n);break;case 21:ds(e,t,n);break;case 22:1&n.mode?(Xu=(r=Xu)||null!==n.memoizedState,ds(e,t,n),Xu=r):ds(e,t,n);break;default:ds(e,t,n)}}function ps(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new Ju),t.forEach((function(t){var r=Dc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))}))}}function ys(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var o=e,u=t,s=u;e:for(;null!==s;){switch(s.tag){case 5:fs=s.stateNode,hs=!1;break e;case 3:case 4:fs=s.stateNode.containerInfo,hs=!0;break e}s=s.return}if(null===fs)throw Error(a(160));vs(o,u,i),fs=null,hs=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(l){Sc(i,t,l)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ms(t,e),t=t.sibling}function ms(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(ys(t,e),gs(e),4&r){try{rs(3,e,e.return),is(3,e)}catch(y){Sc(e,e.return,y)}try{rs(5,e,e.return)}catch(y){Sc(e,e.return,y)}}break;case 1:ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return);break;case 5:if(ys(t,e),gs(e),512&r&&null!==n&&es(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(y){Sc(e,e.return,y)}}if(4&r&&null!=(i=e.stateNode)){var o=e.memoizedProps,u=null!==n?n.memoizedProps:o,s=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===s&&"radio"===o.type&&null!=o.name&&X(i,o),ke(s,u);var l=ke(s,o);for(u=0;u<c.length;u+=2){var f=c[u],h=c[u+1];"style"===f?ye(i,h):"dangerouslySetInnerHTML"===f?fe(i,h):"children"===f?he(i,h):k(i,f,h,l)}switch(s){case"input":J(i,o);break;case"textarea":ae(i,o);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var v=o.value;null!=v?ne(i,!!o.multiple,v,!1):d!==!!o.multiple&&(null!=o.defaultValue?ne(i,!!o.multiple,o.defaultValue,!0):ne(i,!!o.multiple,o.multiple?[]:"",!1))}i[di]=o}catch(y){Sc(e,e.return,y)}}break;case 6:if(ys(t,e),gs(e),4&r){if(null===e.stateNode)throw Error(a(162));i=e.stateNode,o=e.memoizedProps;try{i.nodeValue=o}catch(y){Sc(e,e.return,y)}}break;case 3:if(ys(t,e),gs(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{jt(t.containerInfo)}catch(y){Sc(e,e.return,y)}break;case 4:default:ys(t,e),gs(e);break;case 13:ys(t,e),gs(e),8192&(i=e.child).flags&&(o=null!==i.memoizedState,i.stateNode.isHidden=o,!o||null!==i.alternate&&null!==i.alternate.memoizedState||(js=Xe())),4&r&&ps(e);break;case 22:if(f=null!==n&&null!==n.memoizedState,1&e.mode?(Xu=(l=Xu)||f,ys(t,e),Xu=l):ys(t,e),gs(e),8192&r){if(l=null!==e.memoizedState,(e.stateNode.isHidden=l)&&!f&&0!==(1&e.mode))for(Zu=e,f=e.child;null!==f;){for(h=Zu=f;null!==Zu;){switch(v=(d=Zu).child,d.tag){case 0:case 11:case 14:case 15:rs(4,d,d.return);break;case 1:es(d,d.return);var p=d.stateNode;if("function"===typeof p.componentWillUnmount){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(y){Sc(r,n,y)}}break;case 5:es(d,d.return);break;case 22:if(null!==d.memoizedState){_s(h);continue}}null!==v?(v.return=d,Zu=v):_s(h)}f=f.sibling}e:for(f=null,h=e;;){if(5===h.tag){if(null===f){f=h;try{i=h.stateNode,l?"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none":(s=h.stateNode,u=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,s.style.display=pe("display",u))}catch(y){Sc(e,e.return,y)}}}else if(6===h.tag){if(null===f)try{h.stateNode.nodeValue=l?"":h.memoizedProps}catch(y){Sc(e,e.return,y)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;f===h&&(f=null),h=h.return}f===h&&(f=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:ys(t,e),gs(e),4&r&&ps(e);case 21:}}function gs(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(us(n)){var r=n;break e}n=n.return}throw Error(a(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),ls(e,ss(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;cs(e,ss(e),o);break;default:throw Error(a(161))}}catch(u){Sc(e,e.return,u)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function ks(e,t,n){Zu=e,bs(e,t,n)}function bs(e,t,n){for(var r=0!==(1&e.mode);null!==Zu;){var i=Zu,a=i.child;if(22===i.tag&&r){var o=null!==i.memoizedState||$u;if(!o){var u=i.alternate,s=null!==u&&null!==u.memoizedState||Xu;u=$u;var c=Xu;if($u=o,(Xu=s)&&!c)for(Zu=i;null!==Zu;)s=(o=Zu).child,22===o.tag&&null!==o.memoizedState?xs(i):null!==s?(s.return=o,Zu=s):xs(i);for(;null!==a;)Zu=a,bs(a,t,n),a=a.sibling;Zu=i,$u=u,Xu=c}ws(e)}else 0!==(8772&i.subtreeFlags)&&null!==a?(a.return=i,Zu=a):ws(e)}}function ws(e){for(;null!==Zu;){var t=Zu;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Xu||is(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Xu)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:ya(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;null!==o&&Ua(t,o,r);break;case 3:var u=t.updateQueue;if(null!==u){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ua(t,u,n)}break;case 5:var s=t.stateNode;if(null===n&&4&t.flags){n=s;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var l=t.alternate;if(null!==l){var f=l.memoizedState;if(null!==f){var h=f.dehydrated;null!==h&&jt(h)}}}break;default:throw Error(a(163))}Xu||512&t.flags&&as(t)}catch(d){Sc(t,t.return,d)}}if(t===e){Zu=null;break}if(null!==(n=t.sibling)){n.return=t.return,Zu=n;break}Zu=t.return}}function _s(e){for(;null!==Zu;){var t=Zu;if(t===e){Zu=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Zu=n;break}Zu=t.return}}function xs(e){for(;null!==Zu;){var t=Zu;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{is(4,t)}catch(s){Sc(t,n,s)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(s){Sc(t,i,s)}}var a=t.return;try{as(t)}catch(s){Sc(t,a,s)}break;case 5:var o=t.return;try{as(t)}catch(s){Sc(t,o,s)}}}catch(s){Sc(t,t.return,s)}if(t===e){Zu=null;break}var u=t.sibling;if(null!==u){u.return=t.return,Zu=u;break}Zu=t.return}}var Es,Ss=Math.ceil,Is=b.ReactCurrentDispatcher,Ts=b.ReactCurrentOwner,Cs=b.ReactCurrentBatchConfig,Ds=0,Ns=null,As=null,Rs=0,Os=0,Ps=Ei(0),Ls=0,Ms=null,Fs=0,Us=0,Vs=0,Bs=null,zs=null,js=0,qs=1/0,Ks=null,Gs=!1,Hs=null,Ws=null,Qs=!1,Ys=null,$s=0,Xs=0,Js=null,Zs=-1,ec=0;function tc(){return 0!==(6&Ds)?Xe():-1!==Zs?Zs:Zs=Xe()}function nc(e){return 0===(1&e.mode)?1:0!==(2&Ds)&&0!==Rs?Rs&-Rs:null!==pa.transition?(0===ec&&(ec=pt()),ec):0!==(e=kt)?e:e=void 0===(e=window.event)?16:$t(e.type)}function rc(e,t,n,r){if(50<Xs)throw Xs=0,Js=null,Error(a(185));mt(e,n,r),0!==(2&Ds)&&e===Ns||(e===Ns&&(0===(2&Ds)&&(Us|=n),4===Ls&&sc(e,Rs)),ic(e,r),1===n&&0===Ds&&0===(1&t.mode)&&(qs=Xe()+500,Vi&&ji()))}function ic(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var o=31-ot(a),u=1<<o,s=i[o];-1===s?0!==(u&n)&&0===(u&r)||(i[o]=dt(u,t)):s<=t&&(e.expiredLanes|=u),a&=~u}}(e,t);var r=ht(e,e===Ns?Rs:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,zi(e)}(cc.bind(null,e)):zi(cc.bind(null,e)),oi((function(){0===(6&Ds)&&ji()})),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Nc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Zs=-1,ec=0,0!==(6&Ds))throw Error(a(327));var n=e.callbackNode;if(xc()&&e.callbackNode!==n)return null;var r=ht(e,e===Ns?Rs:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Ds;Ds|=2;var o=pc();for(Ns===e&&Rs===t||(Ks=null,qs=Xe()+500,dc(e,t));;)try{kc();break}catch(s){vc(e,s)}wa(),Is.current=o,Ds=i,null!==As?t=0:(Ns=null,Rs=0,t=Ls)}if(0!==t){if(2===t&&(0!==(i=vt(e))&&(r=i,t=oc(e,i))),1===t)throw n=Ms,dc(e,0),sc(e,r),ic(e,Xe()),n;if(6===t)sc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!ur(a(),i))return!1}catch(u){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(o=vt(e))&&(r=o,t=oc(e,o))),1===t))throw n=Ms,dc(e,0),sc(e,r),ic(e,Xe()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(a(345));case 2:case 5:_c(e,zs,Ks);break;case 3:if(sc(e,r),(130023424&r)===r&&10<(t=js+500-Xe())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){tc(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(_c.bind(null,e,zs,Ks),t);break}_c(e,zs,Ks);break;case 4:if(sc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var u=31-ot(r);o=1<<u,(u=t[u])>i&&(i=u),r&=~o}if(r=i,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ss(r/1960))-r)){e.timeoutHandle=ri(_c.bind(null,e,zs,Ks),r);break}_c(e,zs,Ks);break;default:throw Error(a(329))}}}return ic(e,Xe()),e.callbackNode===n?ac.bind(null,e):null}function oc(e,t){var n=Bs;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=zs,zs=n,null!==t&&uc(t)),e}function uc(e){null===zs?zs=e:zs.push.apply(zs,e)}function sc(e,t){for(t&=~Vs,t&=~Us,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-ot(t),r=1<<n;e[n]=-1,t&=~r}}function cc(e){if(0!==(6&Ds))throw Error(a(327));xc();var t=ht(e,0);if(0===(1&t))return ic(e,Xe()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=vt(e);0!==r&&(t=r,n=oc(e,r))}if(1===n)throw n=Ms,dc(e,0),sc(e,t),ic(e,Xe()),n;if(6===n)throw Error(a(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_c(e,zs,Ks),ic(e,Xe()),null}function lc(e,t){var n=Ds;Ds|=1;try{return e(t)}finally{0===(Ds=n)&&(qs=Xe()+500,Vi&&ji())}}function fc(e){null!==Ys&&0===Ys.tag&&0===(6&Ds)&&xc();var t=Ds;Ds|=1;var n=Cs.transition,r=kt;try{if(Cs.transition=null,kt=1,e)return e()}finally{kt=r,Cs.transition=n,0===(6&(Ds=t))&&ji()}}function hc(){Os=Ps.current,Si(Ps)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==As)for(n=As.return;null!==n;){var r=n;switch(ta(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Oi();break;case 3:io(),Si(Di),Si(Ci),lo();break;case 5:oo(r);break;case 4:io();break;case 13:case 19:Si(uo);break;case 10:_a(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Ns=e,As=e=Pc(e.current,null),Rs=Os=t,Ls=0,Ms=null,Vs=Us=Fs=0,zs=Bs=null,null!==Ia){for(t=0;t<Ia.length;t++)if(null!==(r=(n=Ia[t]).interleaved)){n.interleaved=null;var i=r.next,a=n.pending;if(null!==a){var o=a.next;a.next=i,r.next=o}n.pending=r}Ia=null}return e}function vc(e,t){for(;;){var n=As;try{if(wa(),fo.current=ou,go){for(var r=po.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}go=!1}if(vo=0,mo=yo=po=null,ko=!1,bo=0,Ts.current=null,null===n||null===n.return){Ls=1,Ms=t,As=null;break}e:{var o=e,u=n.return,s=n,c=t;if(t=Rs,s.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var l=c,f=s,h=f.tag;if(0===(1&f.mode)&&(0===h||11===h||15===h)){var d=f.alternate;d?(f.updateQueue=d.updateQueue,f.memoizedState=d.memoizedState,f.lanes=d.lanes):(f.updateQueue=null,f.memoizedState=null)}var v=mu(u);if(null!==v){v.flags&=-257,gu(v,u,s,0,t),1&v.mode&&yu(o,l,t),c=l;var p=(t=v).updateQueue;if(null===p){var y=new Set;y.add(c),t.updateQueue=y}else p.add(c);break e}if(0===(1&t)){yu(o,l,t),yc();break e}c=Error(a(426))}else if(ia&&1&s.mode){var m=mu(u);if(null!==m){0===(65536&m.flags)&&(m.flags|=256),gu(m,u,s,0,t),va(lu(c,s));break e}}o=c=lu(c,s),4!==Ls&&(Ls=2),null===Bs?Bs=[o]:Bs.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,vu(0,c,t));break e;case 1:s=c;var g=o.type,k=o.stateNode;if(0===(128&o.flags)&&("function"===typeof g.getDerivedStateFromError||null!==k&&"function"===typeof k.componentDidCatch&&(null===Ws||!Ws.has(k)))){o.flags|=65536,t&=-t,o.lanes|=t,Ma(o,pu(o,s,t));break e}}o=o.return}while(null!==o)}wc(n)}catch(b){t=b,As===n&&null!==n&&(As=n=n.return);continue}break}}function pc(){var e=Is.current;return Is.current=ou,null===e?ou:e}function yc(){0!==Ls&&3!==Ls&&2!==Ls||(Ls=4),null===Ns||0===(268435455&Fs)&&0===(268435455&Us)||sc(Ns,Rs)}function mc(e,t){var n=Ds;Ds|=2;var r=pc();for(Ns===e&&Rs===t||(Ks=null,dc(e,t));;)try{gc();break}catch(i){vc(e,i)}if(wa(),Ds=n,Is.current=r,null!==As)throw Error(a(261));return Ns=null,Rs=0,Ls}function gc(){for(;null!==As;)bc(As)}function kc(){for(;null!==As&&!Ye();)bc(As)}function bc(e){var t=Es(e.alternate,e,Os);e.memoizedProps=e.pendingProps,null===t?wc(e):As=t,Ts.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Qu(n,t,Os)))return void(As=n)}else{if(null!==(n=Yu(n,t)))return n.flags&=32767,void(As=n);if(null===e)return Ls=6,void(As=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(As=t);As=t=e}while(null!==t);0===Ls&&(Ls=5)}function _c(e,t,n){var r=kt,i=Cs.transition;try{Cs.transition=null,kt=1,function(e,t,n,r){do{xc()}while(null!==Ys);if(0!==(6&Ds))throw Error(a(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(a(177));e.callbackNode=null,e.callbackPriority=0;var o=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-ot(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}(e,o),e===Ns&&(As=Ns=null,Rs=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Qs||(Qs=!0,Nc(tt,(function(){return xc(),null}))),o=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||o){o=Cs.transition,Cs.transition=null;var u=kt;kt=1;var s=Ds;Ds|=4,Ts.current=null,function(e,t){if(ei=Kt,dr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch(w){n=null;break e}var u=0,s=-1,c=-1,l=0,f=0,h=e,d=null;t:for(;;){for(var v;h!==n||0!==i&&3!==h.nodeType||(s=u+i),h!==o||0!==r&&3!==h.nodeType||(c=u+r),3===h.nodeType&&(u+=h.nodeValue.length),null!==(v=h.firstChild);)d=h,h=v;for(;;){if(h===e)break t;if(d===n&&++l===i&&(s=u),d===o&&++f===r&&(c=u),null!==(v=h.nextSibling))break;d=(h=d).parentNode}h=v}n=-1===s||-1===c?null:{start:s,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Kt=!1,Zu=t;null!==Zu;)if(e=(t=Zu).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Zu=e;else for(;null!==Zu;){t=Zu;try{var p=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==p){var y=p.memoizedProps,m=p.memoizedState,g=t.stateNode,k=g.getSnapshotBeforeUpdate(t.elementType===t.type?y:ya(t.type,y),m);g.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(a(163))}}catch(w){Sc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Zu=e;break}Zu=t.return}p=ns,ns=!1}(e,n),ms(n,e),vr(ti),Kt=!!ei,ti=ei=null,e.current=n,ks(n,e,i),$e(),Ds=s,kt=u,Cs.transition=o}else e.current=n;if(Qs&&(Qs=!1,Ys=e,$s=i),o=e.pendingLanes,0===o&&(Ws=null),function(e){if(at&&"function"===typeof at.onCommitFiberRoot)try{at.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),ic(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Gs)throw Gs=!1,e=Hs,Hs=null,e;0!==(1&$s)&&0!==e.tag&&xc(),o=e.pendingLanes,0!==(1&o)?e===Js?Xs++:(Xs=0,Js=e):Xs=0,ji()}(e,t,n,r)}finally{Cs.transition=i,kt=r}return null}function xc(){if(null!==Ys){var e=bt($s),t=Cs.transition,n=kt;try{if(Cs.transition=null,kt=16>e?16:e,null===Ys)var r=!1;else{if(e=Ys,Ys=null,$s=0,0!==(6&Ds))throw Error(a(331));var i=Ds;for(Ds|=4,Zu=e.current;null!==Zu;){var o=Zu,u=o.child;if(0!==(16&Zu.flags)){var s=o.deletions;if(null!==s){for(var c=0;c<s.length;c++){var l=s[c];for(Zu=l;null!==Zu;){var f=Zu;switch(f.tag){case 0:case 11:case 15:rs(8,f,o)}var h=f.child;if(null!==h)h.return=f,Zu=h;else for(;null!==Zu;){var d=(f=Zu).sibling,v=f.return;if(os(f),f===l){Zu=null;break}if(null!==d){d.return=v,Zu=d;break}Zu=v}}}var p=o.alternate;if(null!==p){var y=p.child;if(null!==y){p.child=null;do{var m=y.sibling;y.sibling=null,y=m}while(null!==y)}}Zu=o}}if(0!==(2064&o.subtreeFlags)&&null!==u)u.return=o,Zu=u;else e:for(;null!==Zu;){if(0!==(2048&(o=Zu).flags))switch(o.tag){case 0:case 11:case 15:rs(9,o,o.return)}var g=o.sibling;if(null!==g){g.return=o.return,Zu=g;break e}Zu=o.return}}var k=e.current;for(Zu=k;null!==Zu;){var b=(u=Zu).child;if(0!==(2064&u.subtreeFlags)&&null!==b)b.return=u,Zu=b;else e:for(u=k;null!==Zu;){if(0!==(2048&(s=Zu).flags))try{switch(s.tag){case 0:case 11:case 15:is(9,s)}}catch(_){Sc(s,s.return,_)}if(s===u){Zu=null;break e}var w=s.sibling;if(null!==w){w.return=s.return,Zu=w;break e}Zu=s.return}}if(Ds=i,ji(),at&&"function"===typeof at.onPostCommitFiberRoot)try{at.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{kt=n,Cs.transition=t}}return!1}function Ec(e,t,n){e=Pa(e,t=vu(0,t=lu(n,t),1),1),t=tc(),null!==e&&(mt(e,1,t),ic(e,t))}function Sc(e,t,n){if(3===e.tag)Ec(e,e,n);else for(;null!==t;){if(3===t.tag){Ec(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ws||!Ws.has(r))){t=Pa(t,e=pu(t,e=lu(n,e),1),1),e=tc(),null!==t&&(mt(t,1,e),ic(t,e));break}}t=t.return}}function Ic(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=tc(),e.pingedLanes|=e.suspendedLanes&n,Ns===e&&(Rs&n)===n&&(4===Ls||3===Ls&&(130023424&Rs)===Rs&&500>Xe()-js?dc(e,0):Vs|=n),ic(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=lt,0===(130023424&(lt<<=1))&&(lt=4194304)));var n=tc();null!==(e=Da(e,t))&&(mt(e,t,n),ic(e,n))}function Cc(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Dc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(a(314))}null!==r&&r.delete(t),Tc(e,n)}function Nc(e,t){return We(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rc(e,t,n,r){return new Ac(e,t,n,r)}function Oc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Pc(e,t){var n=e.alternate;return null===n?((n=Rc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Lc(e,t,n,r,i,o){var u=2;if(r=e,"function"===typeof e)Oc(e)&&(u=1);else if("string"===typeof e)u=5;else e:switch(e){case x:return Mc(n.children,i,o,t);case E:u=8,i|=8;break;case S:return(e=Rc(12,n,t,2|i)).elementType=S,e.lanes=o,e;case D:return(e=Rc(13,n,t,i)).elementType=D,e.lanes=o,e;case N:return(e=Rc(19,n,t,i)).elementType=N,e.lanes=o,e;case O:return Fc(n,i,o,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case I:u=10;break e;case T:u=9;break e;case C:u=11;break e;case A:u=14;break e;case R:u=16,r=null;break e}throw Error(a(130,null==e?e:typeof e,""))}return(t=Rc(u,n,t,i)).elementType=e,t.type=r,t.lanes=o,t}function Mc(e,t,n,r){return(e=Rc(7,e,r,t)).lanes=n,e}function Fc(e,t,n,r){return(e=Rc(22,e,r,t)).elementType=O,e.lanes=n,e.stateNode={isHidden:!1},e}function Uc(e,t,n){return(e=Rc(6,e,null,t)).lanes=n,e}function Vc(e,t,n){return(t=Rc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yt(0),this.expirationTimes=yt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,a,o,u,s){return e=new Bc(e,t,n,u,s),1===t?(t=1,!0===a&&(t|=8)):t=0,a=Rc(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Aa(a),e}function jc(e){if(!e)return Ti;e:{if(je(e=e._reactInternals)!==e||1!==e.tag)throw Error(a(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ri(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(a(171))}if(1===e.tag){var n=e.type;if(Ri(n))return Li(e,n,t)}return t}function qc(e,t,n,r,i,a,o,u,s){return(e=zc(n,r,!0,e,0,a,0,u,s)).context=jc(null),n=e.current,(a=Oa(r=tc(),i=nc(n))).callback=void 0!==t&&null!==t?t:null,Pa(n,a,i),e.current.lanes=i,mt(e,i,r),ic(e,r),e}function Kc(e,t,n,r){var i=t.current,a=tc(),o=nc(i);return n=jc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Oa(a,o)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Pa(i,t,o))&&(rc(e,i,o,a),La(e,i,o)),o}function Gc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}Es=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Di.current)bu=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bu=!1,function(e,t,n){switch(t.tag){case 3:Nu(t),da();break;case 5:ao(t);break;case 1:Ri(t.type)&&Mi(t);break;case 4:ro(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ii(ma,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ii(uo,1&uo.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Uu(e,t,n):(Ii(uo,1&uo.current),null!==(e=Gu(e,t,n))?e.sibling:null);Ii(uo,1&uo.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return qu(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ii(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Su(e,t,n)}return Gu(e,t,n)}(e,t,n);bu=0!==(131072&e.flags)}else bu=!1,ia&&0!==(1048576&t.flags)&&Zi(t,Hi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Ku(e,t),e=t.pendingProps;var i=Ai(t,Ci.current);Ea(t,n),i=Eo(null,t,r,e,i,n);var o=So();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ri(r)?(o=!0,Mi(t)):o=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Aa(t),i.updater=za,t.stateNode=i,i._reactInternals=t,Ga(t,r,e,n),t=Du(null,t,r,!0,o,n)):(t.tag=0,ia&&o&&ea(t),wu(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Ku(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Oc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===A)return 14}return 2}(r),e=ya(r,e),i){case 0:t=Tu(null,t,r,e,n);break e;case 1:t=Cu(null,t,r,e,n);break e;case 11:t=_u(null,t,r,e,n);break e;case 14:t=xu(null,t,r,ya(r.type,e),n);break e}throw Error(a(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,Tu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 1:return r=t.type,i=t.pendingProps,Cu(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 3:e:{if(Nu(t),null===e)throw Error(a(387));r=t.pendingProps,i=(o=t.memoizedState).element,Ra(e,t),Fa(t,r,null,n);var u=t.memoizedState;if(r=u.element,o.isDehydrated){if(o={element:r,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,256&t.flags){t=Au(e,t,r,n,i=lu(Error(a(423)),t));break e}if(r!==i){t=Au(e,t,r,n,i=lu(Error(a(424)),t));break e}for(ra=ci(t.stateNode.containerInfo.firstChild),na=t,ia=!0,aa=null,n=Xa(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(da(),r===i){t=Gu(e,t,n);break e}wu(e,t,r,n)}t=t.child}return t;case 5:return ao(t),null===e&&ca(t),r=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,u=i.children,ni(r,i)?u=null:null!==o&&ni(r,o)&&(t.flags|=32),Iu(e,t),wu(e,t,u,n),t.child;case 6:return null===e&&ca(t),null;case 13:return Uu(e,t,n);case 4:return ro(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=$a(t,null,r,n):wu(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,_u(e,t,r,i=t.elementType===r?i:ya(r,i),n);case 7:return wu(e,t,t.pendingProps,n),t.child;case 8:case 12:return wu(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,o=t.memoizedProps,u=i.value,Ii(ma,r._currentValue),r._currentValue=u,null!==o)if(ur(o.value,u)){if(o.children===i.children&&!Di.current){t=Gu(e,t,n);break e}}else for(null!==(o=t.child)&&(o.return=t);null!==o;){var s=o.dependencies;if(null!==s){u=o.child;for(var c=s.firstContext;null!==c;){if(c.context===r){if(1===o.tag){(c=Oa(-1,n&-n)).tag=2;var l=o.updateQueue;if(null!==l){var f=(l=l.shared).pending;null===f?c.next=c:(c.next=f.next,f.next=c),l.pending=c}}o.lanes|=n,null!==(c=o.alternate)&&(c.lanes|=n),xa(o.return,n,t),s.lanes|=n;break}c=c.next}}else if(10===o.tag)u=o.type===t.type?null:o.child;else if(18===o.tag){if(null===(u=o.return))throw Error(a(341));u.lanes|=n,null!==(s=u.alternate)&&(s.lanes|=n),xa(u,n,t),u=o.sibling}else u=o.child;if(null!==u)u.return=o;else for(u=o;null!==u;){if(u===t){u=null;break}if(null!==(o=u.sibling)){o.return=u.return,u=o;break}u=u.return}o=u}wu(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Ea(t,n),r=r(i=Sa(i)),t.flags|=1,wu(e,t,r,n),t.child;case 14:return i=ya(r=t.type,t.pendingProps),xu(e,t,r,i=ya(r.type,i),n);case 15:return Eu(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:ya(r,i),Ku(e,t),t.tag=1,Ri(r)?(e=!0,Mi(t)):e=!1,Ea(t,n),qa(t,r,i),Ga(t,r,i,n),Du(null,t,r,!0,e,n);case 19:return qu(e,t,n);case 22:return Su(e,t,n)}throw Error(a(156,t.tag))};var Qc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function $c(e){this._internalRoot=e}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Zc(){}function el(e,t,n,r,i){var a=n._reactRootContainer;if(a){var o=a;if("function"===typeof i){var u=i;i=function(){var e=Gc(o);u.call(e)}}Kc(t,o,e,i)}else o=function(e,t,n,r,i){if(i){if("function"===typeof r){var a=r;r=function(){var e=Gc(o);a.call(e)}}var o=qc(t,r,e,0,null,!1,0,"",Zc);return e._reactRootContainer=o,e[vi]=o.current,jr(8===e.nodeType?e.parentNode:e),fc(),o}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var u=r;r=function(){var e=Gc(s);u.call(e)}}var s=zc(e,0,!1,null,0,!1,0,"",Zc);return e._reactRootContainer=s,e[vi]=s.current,jr(8===e.nodeType?e.parentNode:e),fc((function(){Kc(t,s,n,r)})),s}(n,t,e,i,r);return Gc(o)}$c.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Kc(e,t,null,null)},$c.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;fc((function(){Kc(null,e,null,null)})),t[vi]=null}},$c.prototype.unstable_scheduleHydration=function(e){if(e){var t=Et();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ot.length&&0!==t&&t<Ot[n].priority;n++);Ot.splice(n,0,e),0===n&&Ft(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ft(t.pendingLanes);0!==n&&(gt(t,1|n),ic(t,Xe()),0===(6&Ds)&&(qs=Xe()+500,ji()))}break;case 13:fc((function(){var t=Da(e,1);if(null!==t){var n=tc();rc(t,e,1,n)}})),Wc(e,1)}},_t=function(e){if(13===e.tag){var t=Da(e,134217728);if(null!==t)rc(t,e,134217728,tc());Wc(e,134217728)}},xt=function(e){if(13===e.tag){var t=nc(e),n=Da(e,t);if(null!==n)rc(n,e,t,tc());Wc(e,t)}},Et=function(){return kt},St=function(e,t){var n=kt;try{return kt=e,t()}finally{kt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(a(90));W(r),J(r,i)}}}break;case"textarea":ae(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=lc,De=fc;var tl={usingClientEntryPoint:!1,Events:[ki,bi,wi,Ie,Te,lc]},nl={findFiberByHostInstance:gi,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},rl={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Ge(e))?null:e.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var il=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!il.isDisabled&&il.supportsFiber)try{it=il.inject(rl),at=il}catch(le){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Xc(t))throw Error(a(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Xc(e))throw Error(a(299));var n=!1,r="",i=Qc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[vi]=t.current,jr(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=null===(e=Ge(t))?null:e.stateNode},t.flushSync=function(e){return fc(e)},t.hydrate=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Xc(e))throw Error(a(405));var r=null!=n&&n.hydratedSources||null,i=!1,o="",u=Qc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(o=n.identifierPrefix),void 0!==n.onRecoverableError&&(u=n.onRecoverableError)),t=qc(t,null,e,1,null!=n?n:null,i,0,o,u),e[vi]=t.current,jr(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new $c(t)},t.render=function(e,t,n){if(!Jc(t))throw Error(a(200));return el(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Jc(e))throw Error(a(40));return!!e._reactRootContainer&&(fc((function(){el(null,null,e,!1,(function(){e._reactRootContainer=null,e[vi]=null}))})),!0)},t.unstable_batchedUpdates=lc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Jc(n))throw Error(a(200));if(null==e||void 0===e._reactInternals)throw Error(a(38));return el(e,t,n,!1,r)},t.version="18.2.0-next-9e3b772b8-20220608"},250:function(e,t,n){var r=n(164);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},164:function(e,t,n){!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(463)},374:function(e,t,n){var r=n(791),i=Symbol.for("react.element"),a=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,u=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,a={},c=null,l=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(l=t.ref),t)o.call(t,r)&&!s.hasOwnProperty(r)&&(a[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===a[r]&&(a[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:l,props:a,_owner:u.current}}t.jsx=c,t.jsxs=c},117:function(e,t){var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.provider"),s=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),d=Symbol.iterator;var v={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,y={};function m(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||v}function g(){}function k(e,t,n){this.props=e,this.context=t,this.refs=y,this.updater=n||v}m.prototype.isReactComponent={},m.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},m.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},g.prototype=m.prototype;var b=k.prototype=new g;b.constructor=k,p(b,m.prototype),b.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},E={key:!0,ref:!0,__self:!0,__source:!0};function S(e,t,r){var i,a={},o=null,u=null;if(null!=t)for(i in void 0!==t.ref&&(u=t.ref),void 0!==t.key&&(o=""+t.key),t)_.call(t,i)&&!E.hasOwnProperty(i)&&(a[i]=t[i]);var s=arguments.length-2;if(1===s)a.children=r;else if(1<s){for(var c=Array(s),l=0;l<s;l++)c[l]=arguments[l+2];a.children=c}if(e&&e.defaultProps)for(i in s=e.defaultProps)void 0===a[i]&&(a[i]=s[i]);return{$$typeof:n,type:e,key:o,ref:u,props:a,_owner:x.current}}function I(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var T=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function D(e,t,i,a,o){var u=typeof e;"undefined"!==u&&"boolean"!==u||(e=null);var s=!1;if(null===e)s=!0;else switch(u){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case n:case r:s=!0}}if(s)return o=o(s=e),e=""===a?"."+C(s,0):a,w(o)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),D(o,t,i,"",(function(e){return e}))):null!=o&&(I(o)&&(o=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(o,i+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(T,"$&/")+"/")+e)),t.push(o)),1;if(s=0,a=""===a?".":a+":",w(e))for(var c=0;c<e.length;c++){var l=a+C(u=e[c],c);s+=D(u,t,i,l,o)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),c=0;!(u=e.next()).done;)s+=D(u=u.value,t,i,l=a+C(u,c++),o);else if("object"===u)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return s}function N(e,t,n){if(null==e)return e;var r=[],i=0;return D(e,r,"","",(function(e){return t.call(n,e,i++)})),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var R={current:null},O={transition:null},P={ReactCurrentDispatcher:R,ReactCurrentBatchConfig:O,ReactCurrentOwner:x};t.Children={map:N,forEach:function(e,t,n){N(e,(function(){t.apply(this,arguments)}),n)},count:function(e){var t=0;return N(e,(function(){t++})),t},toArray:function(e){return N(e,(function(e){return e}))||[]},only:function(e){if(!I(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=m,t.Fragment=i,t.Profiler=o,t.PureComponent=k,t.StrictMode=a,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=P,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=p({},e.props),a=e.key,o=e.ref,u=e._owner;if(null!=t){if(void 0!==t.ref&&(o=t.ref,u=x.current),void 0!==t.key&&(a=""+t.key),e.type&&e.type.defaultProps)var s=e.type.defaultProps;for(c in t)_.call(t,c)&&!E.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==s?s[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){s=Array(c);for(var l=0;l<c;l++)s[l]=arguments[l+2];i.children=s}return{$$typeof:n,type:e.type,key:a,ref:o,props:i,_owner:u}},t.createContext=function(e){return(e={$$typeof:s,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:u,_context:e},e.Consumer=e},t.createElement=S,t.createFactory=function(e){var t=S.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=I,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:f,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=O.transition;O.transition={};try{e()}finally{O.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return R.current.useCallback(e,t)},t.useContext=function(e){return R.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return R.current.useDeferredValue(e)},t.useEffect=function(e,t){return R.current.useEffect(e,t)},t.useId=function(){return R.current.useId()},t.useImperativeHandle=function(e,t,n){return R.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return R.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return R.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return R.current.useMemo(e,t)},t.useReducer=function(e,t,n){return R.current.useReducer(e,t,n)},t.useRef=function(e){return R.current.useRef(e)},t.useState=function(e){return R.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return R.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return R.current.useTransition()},t.version="18.2.0"},791:function(e,t,n){e.exports=n(117)},184:function(e,t,n){e.exports=n(374)},813:function(e,t){function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<a(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,o=i>>>1;r<o;){var u=2*(r+1)-1,s=e[u],c=u+1,l=e[c];if(0>a(s,n))c<i&&0>a(l,s)?(e[r]=l,e[c]=n,r=c):(e[r]=s,e[u]=n,r=u);else{if(!(c<i&&0>a(l,n)))break e;e[r]=l,e[c]=n,r=c}}}return t}function a(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var o=performance;t.unstable_now=function(){return o.now()}}else{var u=Date,s=u.now();t.unstable_now=function(){return u.now()-s}}var c=[],l=[],f=1,h=null,d=3,v=!1,p=!1,y=!1,m="function"===typeof setTimeout?setTimeout:null,g="function"===typeof clearTimeout?clearTimeout:null,k="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(l);null!==t;){if(null===t.callback)i(l);else{if(!(t.startTime<=e))break;i(l),t.sortIndex=t.expirationTime,n(c,t)}t=r(l)}}function w(e){if(y=!1,b(e),!p)if(null!==r(c))p=!0,O(_);else{var t=r(l);null!==t&&P(w,t.startTime-e)}}function _(e,n){p=!1,y&&(y=!1,g(I),I=-1),v=!0;var a=d;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!D());){var o=h.callback;if("function"===typeof o){h.callback=null,d=h.priorityLevel;var u=o(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof u?h.callback=u:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var s=!0;else{var f=r(l);null!==f&&P(w,f.startTime-n),s=!1}return s}finally{h=null,d=a,v=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var x,E=!1,S=null,I=-1,T=5,C=-1;function D(){return!(t.unstable_now()-C<T)}function N(){if(null!==S){var e=t.unstable_now();C=e;var n=!0;try{n=S(!0,e)}finally{n?x():(E=!1,S=null)}}else E=!1}if("function"===typeof k)x=function(){k(N)};else if("undefined"!==typeof MessageChannel){var A=new MessageChannel,R=A.port2;A.port1.onmessage=N,x=function(){R.postMessage(null)}}else x=function(){m(N,0)};function O(e){S=e,E||(E=!0,x())}function P(e,n){I=m((function(){e(t.unstable_now())}),n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){p||v||(p=!0,O(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(d){case 1:case 2:case 3:var t=3;break;default:t=d}var n=d;d=t;try{return e()}finally{d=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=d;d=e;try{return t()}finally{d=n}},t.unstable_scheduleCallback=function(e,i,a){var o=t.unstable_now();switch("object"===typeof a&&null!==a?a="number"===typeof(a=a.delay)&&0<a?o+a:o:a=o,e){case 1:var u=-1;break;case 2:u=250;break;case 5:u=1073741823;break;case 4:u=1e4;break;default:u=5e3}return e={id:f++,callback:i,priorityLevel:e,startTime:a,expirationTime:u=a+u,sortIndex:-1},a>o?(e.sortIndex=a,n(l,e),null===r(c)&&e===r(l)&&(y?(g(I),I=-1):y=!0,P(w,a-o))):(e.sortIndex=u,n(c,e),p||v||(p=!0,O(_))),e},t.unstable_shouldYield=D,t.unstable_wrapCallback=function(e){var t=d;return function(){var n=d;d=t;try{return e.apply(this,arguments)}finally{d=n}}}},296:function(e,t,n){e.exports=n(813)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var a=t[r]={exports:{}};return e[r](a,a.exports,n),a.exports}n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){var e={};n.r(e),n.d(e,{FirebaseError:function(){return z},SDK_VERSION:function(){return Qe},_DEFAULT_ENTRY_NAME:function(){return Le},_addComponent:function(){return Ve},_addOrOverwriteComponent:function(){return Be},_apps:function(){return Fe},_clearComponents:function(){return Ke},_components:function(){return Ue},_getProvider:function(){return je},_registerComponent:function(){return ze},_removeServiceInstance:function(){return qe},deleteApp:function(){return Je},getApp:function(){return $e},getApps:function(){return Xe},initializeApp:function(){return Ye},onLog:function(){return tt},registerVersion:function(){return et},setLogLevel:function(){return nt}});var t=n(791),r=n(250),i=n(184),a=function(){return(0,i.jsxs)("div",{className:"title",children:[(0,i.jsx)("h1",{children:"3D Workshop"}),(0,i.jsx)("h2",{children:"Gallery"}),(0,i.jsx)("p",{children:"Lorem ipsum, dolor sit amet consectetur ad"})]})};function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){if(e){if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?o(e,t):void 0}}function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a,o,u=[],s=!0,c=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;s=!1}else for(;!(s=(r=a.call(n)).done)&&(u.push(r.value),u.length!==t);s=!0);}catch(l){c=!0,i=l}finally{try{if(!s&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(c)throw i}}return u}}(e,t)||u(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function l(){l=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},i="function"==typeof Symbol?Symbol:{},a=i.iterator||"@@iterator",o=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function s(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{s({},"")}catch(N){s=function(e,t,n){return e[t]=n}}function f(e,t,n,i){var a=t&&t.prototype instanceof v?t:v,o=Object.create(a.prototype),u=new T(i||[]);return r(o,"_invoke",{value:x(e,n,u)}),o}function h(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(N){return{type:"throw",arg:N}}}e.wrap=f;var d={};function v(){}function p(){}function y(){}var m={};s(m,a,(function(){return this}));var g=Object.getPrototypeOf,k=g&&g(g(C([])));k&&k!==t&&n.call(k,a)&&(m=k);var b=y.prototype=v.prototype=Object.create(m);function w(e){["next","throw","return"].forEach((function(t){s(e,t,(function(e){return this._invoke(t,e)}))}))}function _(e,t){function i(r,a,o,u){var s=h(e[r],e,a);if("throw"!==s.type){var l=s.arg,f=l.value;return f&&"object"==c(f)&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){i("next",e,o,u)}),(function(e){i("throw",e,o,u)})):t.resolve(f).then((function(e){l.value=e,o(l)}),(function(e){return i("throw",e,o,u)}))}u(s.arg)}var a;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){i(e,n,t,r)}))}return a=a?a.then(r,r):r()}})}function x(e,t,n){var r="suspendedStart";return function(i,a){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===i)throw a;return D()}for(n.method=i,n.arg=a;;){var o=n.delegate;if(o){var u=E(o,n);if(u){if(u===d)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var s=h(e,t,n);if("normal"===s.type){if(r=n.done?"completed":"suspendedYield",s.arg===d)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(r="completed",n.method="throw",n.arg=s.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),d;var i=h(r,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var a=i.arg;return a?a.done?(t[e.resultName]=a.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):a:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function S(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function I(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(S,this),this.reset(!0)}function C(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,i=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return i.next=i}}return{next:D}}function D(){return{value:void 0,done:!0}}return p.prototype=y,r(b,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:p,configurable:!0}),p.displayName=s(y,u,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===p||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,s(e,u,"GeneratorFunction")),e.prototype=Object.create(b),e},e.awrap=function(e){return{__await:e}},w(_.prototype),s(_.prototype,o,(function(){return this})),e.AsyncIterator=_,e.async=function(t,n,r,i,a){void 0===a&&(a=Promise);var o=new _(f(t,n,r,i),a);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},w(b),s(b,u,"Generator"),s(b,a,(function(){return this})),s(b,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=C,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(I),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return o.type="throw",o.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],o=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),s=n.call(a,"finallyLoc");if(u&&s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var i=this.tryEntries[r];if(i.tryLoc<=this.prev&&n.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var a=i;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var o=a?a.completion:{};return o.type=e,o.arg=t,a?(this.method="next",this.next=a.finallyLoc,d):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),I(n),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var i=r.arg;I(n)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:C(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),d}},e}function f(e,t,n,r,i,a,o){try{var u=e[a](o),s=u.value}catch(c){return void n(c)}u.done?t(s):Promise.resolve(s).then(r,i)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){f(a,r,i,o,u,"next",e)}function u(e){f(a,r,i,o,u,"throw",e)}o(void 0)}))}}function d(e){var t=function(e,t){if("object"!==c(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==c(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===c(t)?t:String(t)}function v(e,t,n){return(t=d(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function m(e,t,n){return t&&y(e.prototype,t),n&&y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function g(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=u(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw a}}}}function k(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e,t){return b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},b(e,t)}function w(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&b(e,t)}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function x(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function E(e){var t=x();return function(){var n,r=_(e);if(t){var i=_(this).constructor;n=Reflect.construct(r,arguments,i)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===c(t)||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return k(e)}(this,n)}}function S(e,t,n){return S=x()?Reflect.construct.bind():function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&b(i,n.prototype),i},S.apply(null,arguments)}function I(e){var t="function"===typeof Map?new Map:void 0;return I=function(e){if(null===e||!function(e){return-1!==Function.toString.call(e).indexOf("[native code]")}(e))return e;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return S(e,arguments,_(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),b(n,e)},I(e)}var T=function(e){for(var t=[],n=0,r=0;r<e.length;r++){var i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},C={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,u=o?e[i+1]:0,s=i+2<e.length,c=s?e[i+2]:0,l=a>>2,f=(3&a)<<4|u>>4,h=(15&u)<<2|c>>6,d=63&c;s||(d=64,o||(h=64)),r.push(n[l],n[f],n[h],n[d])}return r.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(T(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],n=0,r=0;n<e.length;){var i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){var a=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&a)}else if(i>239&&i<365){var o=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(o>>10)),t[r++]=String.fromCharCode(56320+(1023&o))}else{var u=e[n++],s=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&u)<<6|63&s)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<e.length;){var a=n[e.charAt(i++)],o=i<e.length?n[e.charAt(i)]:0,u=++i<e.length?n[e.charAt(i)]:64,s=++i<e.length?n[e.charAt(i)]:64;if(++i,null==a||null==o||null==u||null==s)throw new D;var c=a<<2|o>>4;if(r.push(c),64!==u){var l=o<<4&240|u>>2;if(r.push(l),64!==s){var f=u<<6&192|s;r.push(f)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},D=function(e){w(n,e);var t=E(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments)).name="DecodeBase64StringError",e}return m(n)}(I(Error)),N=function(e){return function(e){var t=T(e);return C.encodeByteArray(t,!0)}(e).replace(/\./g,"")},A=function(e){try{return C.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function R(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var n in t)t.hasOwnProperty(n)&&"__proto__"!==n&&(e[n]=R(e[n],t[n]));return e}var O=function(){return function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__},P=function(){try{return O()||function(){if("undefined"!==typeof process){var e={NODE_ENV:"production",PUBLIC_URL:"/blender-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0}}()||function(){if("undefined"!==typeof document){var e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}var t=e&&A(e[1]);return t&&JSON.parse(t)}}()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},L=function(){var e;return null===(e=P())||void 0===e?void 0:e.config},M=function(){function e(){var t=this;p(this,e),this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return m(e,[{key:"wrapCallback",value:function(e){var t=this;return function(n,r){n?t.reject(n):t.resolve(r),"function"===typeof e&&(t.promise.catch((function(){})),1===e.length?e(n):e(n,r))}}}]),e}();function F(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[N(JSON.stringify({alg:"none",type:"JWT"})),N(JSON.stringify(a)),""].join(".")}function U(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function V(){var e,t=null===(e=P())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function B(){try{return"object"===typeof indexedDB}catch(e){return!1}}var z=function(e){w(n,e);var t=E(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this,r)).code=e,a.customData=i,a.name="FirebaseError",Object.setPrototypeOf(k(a),n.prototype),Error.captureStackTrace&&Error.captureStackTrace(k(a),j.prototype.create),a}return m(n)}(I(Error)),j=function(){function e(t,n,r){p(this,e),this.service=t,this.serviceName=n,this.errors=r}return m(e,[{key:"create",value:function(e){var t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(q,(function(e,n){var r=t[n];return null!=r?String(r):"<".concat(n,"?>")}))}(r,t):"Error",a="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new z(n,a,t)}}]),e}();var q=/\{\$([^}]+)}/g;function K(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function G(e,t){if(e===t)return!0;for(var n=Object.keys(e),r=Object.keys(t),i=0,a=n;i<a.length;i++){var o=a[i];if(!r.includes(o))return!1;var u=e[o],s=t[o];if(H(u)&&H(s)){if(!G(u,s))return!1}else if(u!==s)return!1}for(var c=0,l=r;c<l.length;c++){var f=l[c];if(!n.includes(f))return!1}return!0}function H(e){return null!==e&&"object"===typeof e}function W(e,t){var n=new Q(e,t);return n.subscribe.bind(n)}var Q=function(){function e(t,n){var r=this;p(this,e),this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then((function(){t(r)})).catch((function(e){r.error(e)}))}return m(e,[{key:"next",value:function(e){this.forEachObserver((function(t){t.next(e)}))}},{key:"error",value:function(e){this.forEachObserver((function(t){t.error(e)})),this.close(e)}},{key:"complete",value:function(){this.forEachObserver((function(e){e.complete()})),this.close()}},{key:"subscribe",value:function(e,t,n){var r,i=this;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=g(t);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i in e&&"function"===typeof e[i])return!0}}catch(a){r.e(a)}finally{r.f()}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n}).next&&(r.next=Y),void 0===r.error&&(r.error=Y),void 0===r.complete&&(r.complete=Y);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(e){}})),this.observers.push(r),a}},{key:"unsubscribeOne",value:function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}},{key:"forEachObserver",value:function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)}},{key:"sendOne",value:function(e,t){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[e])try{t(n.observers[e])}catch(r){"undefined"!==typeof console&&console.error&&console.error(r)}}))}},{key:"close",value:function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then((function(){t.observers=void 0,t.onNoObservers=void 0})))}}]),e}();function Y(){}function $(e){return e&&e._delegate?e._delegate:e}function X(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||u(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var J=function(){function e(t,n,r){p(this,e),this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return m(e,[{key:"setInstantiationMode",value:function(e){return this.instantiationMode=e,this}},{key:"setMultipleInstances",value:function(e){return this.multipleInstances=e,this}},{key:"setServiceProps",value:function(e){return this.serviceProps=e,this}},{key:"setInstanceCreatedCallback",value:function(e){return this.onInstanceCreated=e,this}}]),e}(),Z="[DEFAULT]",ee=function(){function e(t,n){p(this,e),this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return m(e,[{key:"get",value:function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var n=new M;if(this.instancesDeferred.set(t,n),this.isInitialized(t)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:t});r&&n.resolve(r)}catch(i){}}return this.instancesDeferred.get(t).promise}},{key:"getImmediate",value:function(e){var t,n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}},{key:"getComponent",value:function(){return this.component}},{key:"setComponent",value:function(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:Z})}catch(c){}var t,n=g(this.instancesDeferred.entries());try{for(n.s();!(t=n.n()).done;){var r=s(t.value,2),i=r[0],a=r[1],o=this.normalizeInstanceIdentifier(i);try{var u=this.getOrInitializeService({instanceIdentifier:o});a.resolve(u)}catch(c){}}}catch(l){n.e(l)}finally{n.f()}}}},{key:"clearInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}},{key:"delete",value:function(){var e=h(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Array.from(this.instances.values()),e.next=3,Promise.all([].concat(X(t.filter((function(e){return"INTERNAL"in e})).map((function(e){return e.INTERNAL.delete()}))),X(t.filter((function(e){return"_delete"in e})).map((function(e){return e._delete()})))));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"isComponentSet",value:function(){return null!=this.component}},{key:"isInitialized",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;return this.instances.has(e)}},{key:"getOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;return this.instancesOptions.get(e)||{}}},{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.options,n=void 0===t?{}:t,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error("".concat(this.name,"(").concat(r,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));var i,a=this.getOrInitializeService({instanceIdentifier:r,options:n}),o=g(this.instancesDeferred.entries());try{for(o.s();!(i=o.n()).done;){var u=s(i.value,2),c=u[0],l=u[1];r===this.normalizeInstanceIdentifier(c)&&l.resolve(a)}}catch(f){o.e(f)}finally{o.f()}return a}},{key:"onInit",value:function(e,t){var n,r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);var a=this.instances.get(r);return a&&e(a,r),function(){i.delete(e)}}},{key:"invokeOnInitCallbacks",value:function(e,t){var n=this.onInitCallbacks.get(t);if(n){var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;try{a(e,t)}catch(Um){}}}catch(o){i.e(o)}finally{i.f()}}}},{key:"getOrInitializeService",value:function(e){var t,n=e.instanceIdentifier,r=e.options,i=void 0===r?{}:r,a=this.instances.get(n);if(!a&&this.component&&(a=this.component.instanceFactory(this.container,{instanceIdentifier:(t=n,t===Z?void 0:t),options:i}),this.instances.set(n,a),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(a,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,a)}catch(Um){}return a||null}},{key:"normalizeInstanceIdentifier",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Z;return this.component?this.component.multipleInstances?e:Z:e}},{key:"shouldAutoInitialize",value:function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}]),e}();var te,ne,re=function(){function e(t){p(this,e),this.name=t,this.providers=new Map}return m(e,[{key:"addComponent",value:function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}},{key:"addOrOverwriteComponent",value:function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}},{key:"getProvider",value:function(e){if(this.providers.has(e))return this.providers.get(e);var t=new ee(e,this);return this.providers.set(e,t),t}},{key:"getProviders",value:function(){return Array.from(this.providers.values())}}]),e}(),ie=[];!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(ne||(ne={}));var ae={debug:ne.DEBUG,verbose:ne.VERBOSE,info:ne.INFO,warn:ne.WARN,error:ne.ERROR,silent:ne.SILENT},oe=ne.INFO,ue=(v(te={},ne.DEBUG,"log"),v(te,ne.VERBOSE,"log"),v(te,ne.INFO,"info"),v(te,ne.WARN,"warn"),v(te,ne.ERROR,"error"),te),se=function(e,t){if(!(t<e.logLevel)){var n=(new Date).toISOString(),r=ue[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i,a=arguments.length,o=new Array(a>2?a-2:0),u=2;u<a;u++)o[u-2]=arguments[u];(i=console)[r].apply(i,["[".concat(n,"]  ").concat(e.name,":")].concat(o))}},ce=function(){function e(t){p(this,e),this.name=t,this._logLevel=oe,this._logHandler=se,this._userLogHandler=null,ie.push(this)}return m(e,[{key:"logLevel",get:function(){return this._logLevel},set:function(e){if(!(e in ne))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}},{key:"setLogLevel",value:function(e){this._logLevel="string"===typeof e?ae[e]:e}},{key:"logHandler",get:function(){return this._logHandler},set:function(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}},{key:"userLogHandler",get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e}},{key:"debug",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ne.DEBUG].concat(t)),this._logHandler.apply(this,[this,ne.DEBUG].concat(t))}},{key:"log",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ne.VERBOSE].concat(t)),this._logHandler.apply(this,[this,ne.VERBOSE].concat(t))}},{key:"info",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ne.INFO].concat(t)),this._logHandler.apply(this,[this,ne.INFO].concat(t))}},{key:"warn",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ne.WARN].concat(t)),this._logHandler.apply(this,[this,ne.WARN].concat(t))}},{key:"error",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler.apply(this,[this,ne.ERROR].concat(t)),this._logHandler.apply(this,[this,ne.ERROR].concat(t))}}]),e}();function le(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?le(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):le(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var he,de,ve=function(e,t){return t.some((function(t){return e instanceof t}))};var pe=new WeakMap,ye=new WeakMap,me=new WeakMap,ge=new WeakMap,ke=new WeakMap;var be={get:function(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ye.get(e);if("objectStoreNames"===t)return e.objectStoreNames||me.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return xe(e[t])},set:function(e,t,n){return e[t]=n,!0},has:function(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function we(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(de||(de=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(Ee(this),n),xe(pe.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return xe(e.apply(Ee(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];var a=e.call.apply(e,[Ee(this),t].concat(r));return me.set(a,t.sort?t.sort():[t]),xe(a)}}function _e(e){return"function"===typeof e?we(e):(e instanceof IDBTransaction&&function(e){if(!ye.has(e)){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=function(){t(),r()},a=function(){n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));ye.set(e,t)}}(e),ve(e,he||(he=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,be):e)}function xe(e){if(e instanceof IDBRequest)return function(e){var t=new Promise((function(t,n){var r=function(){e.removeEventListener("success",i),e.removeEventListener("error",a)},i=function(){t(xe(e.result)),r()},a=function(){n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((function(t){t instanceof IDBCursor&&pe.set(t,e)})).catch((function(){})),ke.set(t,e),t}(e);if(ge.has(e))return ge.get(e);var t=_e(e);return t!==e&&(ge.set(e,t),ke.set(t,e)),t}var Ee=function(e){return ke.get(e)};var Se,Ie,Te=["get","getKey","getAll","getAllKeys","count"],Ce=["put","add","delete","clear"],De=new Map;function Ne(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"===typeof t){if(De.get(t))return De.get(t);var n=t.replace(/FromIndex$/,""),r=t!==n,i=Ce.includes(n);if(n in(r?IDBIndex:IDBObjectStore).prototype&&(i||Te.includes(n))){var a=function(){var e=h(l().mark((function e(t){var a,o,u,s,c,f,h=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(o=this.transaction(t,i?"readwrite":"readonly"),u=o.store,s=h.length,c=new Array(s>1?s-1:0),f=1;f<s;f++)c[f-1]=h[f];return r&&(u=u.index(c.shift())),e.next=6,Promise.all([(a=u)[n].apply(a,c),i&&o.done]);case 6:return e.abrupt("return",e.sent[0]);case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}();return De.set(t,a),a}}}be=function(e){return fe(fe({},e),{},{get:function(t,n,r){return Ne(t,n)||e.get(t,n,r)},has:function(t,n){return!!Ne(t,n)||e.has(t,n)}})}(be);var Ae=function(){function e(t){p(this,e),this.container=t}return m(e,[{key:"getPlatformInfoString",value:function(){return this.container.getProviders().map((function(e){if(function(e){var t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){var t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null})).filter((function(e){return e})).join(" ")}}]),e}();var Re="@firebase/app",Oe="0.9.8",Pe=new ce("@firebase/app"),Le="[DEFAULT]",Me=(v(Se={},Re,"fire-core"),v(Se,"@firebase/app-compat","fire-core-compat"),v(Se,"@firebase/analytics","fire-analytics"),v(Se,"@firebase/analytics-compat","fire-analytics-compat"),v(Se,"@firebase/app-check","fire-app-check"),v(Se,"@firebase/app-check-compat","fire-app-check-compat"),v(Se,"@firebase/auth","fire-auth"),v(Se,"@firebase/auth-compat","fire-auth-compat"),v(Se,"@firebase/database","fire-rtdb"),v(Se,"@firebase/database-compat","fire-rtdb-compat"),v(Se,"@firebase/functions","fire-fn"),v(Se,"@firebase/functions-compat","fire-fn-compat"),v(Se,"@firebase/installations","fire-iid"),v(Se,"@firebase/installations-compat","fire-iid-compat"),v(Se,"@firebase/messaging","fire-fcm"),v(Se,"@firebase/messaging-compat","fire-fcm-compat"),v(Se,"@firebase/performance","fire-perf"),v(Se,"@firebase/performance-compat","fire-perf-compat"),v(Se,"@firebase/remote-config","fire-rc"),v(Se,"@firebase/remote-config-compat","fire-rc-compat"),v(Se,"@firebase/storage","fire-gcs"),v(Se,"@firebase/storage-compat","fire-gcs-compat"),v(Se,"@firebase/firestore","fire-fst"),v(Se,"@firebase/firestore-compat","fire-fst-compat"),v(Se,"fire-js","fire-js"),v(Se,"firebase","fire-js-all"),Se),Fe=new Map,Ue=new Map;function Ve(e,t){try{e.container.addComponent(t)}catch(n){Pe.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Be(e,t){e.container.addOrOverwriteComponent(t)}function ze(e){var t=e.name;if(Ue.has(t))return Pe.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ue.set(t,e);var n,r=g(Fe.values());try{for(r.s();!(n=r.n()).done;){Ve(n.value,e)}}catch(i){r.e(i)}finally{r.f()}return!0}function je(e,t){var n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function qe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Le;je(e,t).clearInstance(n)}function Ke(){Ue.clear()}var Ge=(v(Ie={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),v(Ie,"bad-app-name","Illegal App name: '{$appName}"),v(Ie,"duplicate-app","Firebase App named '{$appName}' already exists with different options or config"),v(Ie,"app-deleted","Firebase App named '{$appName}' already deleted"),v(Ie,"no-options","Need to provide options, when not being deployed to hosting via source."),v(Ie,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),v(Ie,"invalid-log-argument","First argument to `onLog` must be null or a function."),v(Ie,"idb-open","Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}."),v(Ie,"idb-get","Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}."),v(Ie,"idb-set","Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}."),v(Ie,"idb-delete","Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."),Ie),He=new j("app","Firebase",Ge),We=function(){function e(t,n,r){var i=this;p(this,e),this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new J("app",(function(){return i}),"PUBLIC"))}return m(e,[{key:"automaticDataCollectionEnabled",get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this.checkDestroyed(),this._name}},{key:"options",get:function(){return this.checkDestroyed(),this._options}},{key:"config",get:function(){return this.checkDestroyed(),this._config}},{key:"container",get:function(){return this._container}},{key:"isDeleted",get:function(){return this._isDeleted},set:function(e){this._isDeleted=e}},{key:"checkDestroyed",value:function(){if(this.isDeleted)throw He.create("app-deleted",{appName:this._name})}}]),e}(),Qe="9.20.0";function Ye(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;"object"!==typeof t&&(t={name:t});var r=Object.assign({name:Le,automaticDataCollectionEnabled:!1},t),i=r.name;if("string"!==typeof i||!i)throw He.create("bad-app-name",{appName:String(i)});if(n||(n=L()),!n)throw He.create("no-options");var a=Fe.get(i);if(a){if(G(n,a.options)&&G(r,a.config))return a;throw He.create("duplicate-app",{appName:i})}var o,u=new re(i),s=g(Ue.values());try{for(s.s();!(o=s.n()).done;){var c=o.value;u.addComponent(c)}}catch(f){s.e(f)}finally{s.f()}var l=new We(n,r,u);return Fe.set(i,l),l}function $e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Le,t=Fe.get(e);if(!t&&e===Le)return Ye();if(!t)throw He.create("no-app",{appName:e});return t}function Xe(){return Array.from(Fe.values())}function Je(e){return Ze.apply(this,arguments)}function Ze(){return(Ze=h(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.name,!Fe.has(n)){e.next=6;break}return Fe.delete(n),e.next=5,Promise.all(t.container.getProviders().map((function(e){return e.delete()})));case 5:t.isDeleted=!0;case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(e,t,n){var r,i=null!==(r=Me[e])&&void 0!==r?r:e;n&&(i+="-".concat(n));var a=i.match(/\s|\//),o=t.match(/\s|\//);if(a||o){var u=['Unable to register library "'.concat(i,'" with version "').concat(t,'":')];return a&&u.push('library name "'.concat(i,'" contains illegal characters (whitespace or "/")')),a&&o&&u.push("and"),o&&u.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void Pe.warn(u.join(" "))}ze(new J("".concat(i,"-version"),(function(){return{library:i,version:t}}),"VERSION"))}function tt(e,t){if(null!==e&&"function"!==typeof e)throw He.create("invalid-log-argument");!function(e,t){var n,r=g(ie);try{var i=function(){var r=n.value,i=null;t&&t.level&&(i=ae[t.level]),r.userLogHandler=null===e?null:function(t,n){for(var r=arguments.length,a=new Array(r>2?r-2:0),o=2;o<r;o++)a[o-2]=arguments[o];var u=a.map((function(e){if(null==e)return null;if("string"===typeof e)return e;if("number"===typeof e||"boolean"===typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(t){return null}})).filter((function(e){return e})).join(" ");n>=(null!==i&&void 0!==i?i:t.logLevel)&&e({level:ne[n].toLowerCase(),message:u,args:a,type:t.name})}};for(r.s();!(n=r.n()).done;)i()}catch(a){r.e(a)}finally{r.f()}}(e,t)}function nt(e){var t;t=e,ie.forEach((function(e){e.setLogLevel(t)}))}var rt="firebase-heartbeat-database",it=1,at="firebase-heartbeat-store",ot=null;function ut(){return ot||(ot=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.blocked,i=n.upgrade,a=n.blocking,o=n.terminated,u=indexedDB.open(e,t),s=xe(u);return i&&u.addEventListener("upgradeneeded",(function(e){i(xe(u.result),e.oldVersion,e.newVersion,xe(u.transaction))})),r&&u.addEventListener("blocked",(function(){return r()})),s.then((function(e){o&&e.addEventListener("close",(function(){return o()})),a&&e.addEventListener("versionchange",(function(){return a()}))})).catch((function(){})),s}(rt,it,{upgrade:function(e,t){if(0===t)e.createObjectStore(at)}}).catch((function(e){throw He.create("idb-open",{originalErrorMessage:e.message})}))),ot}function st(e){return ct.apply(this,arguments)}function ct(){return ct=h(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ut();case 3:return n=e.sent,e.abrupt("return",n.transaction(at).objectStore(at).get(ht(t)));case 7:e.prev=7,e.t0=e.catch(0),e.t0 instanceof z?Pe.warn(e.t0.message):(r=He.create("idb-get",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Pe.warn(r.message));case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),ct.apply(this,arguments)}function lt(e,t){return ft.apply(this,arguments)}function ft(){return ft=h(l().mark((function e(t,n){var r,i,a,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ut();case 3:return r=e.sent,i=r.transaction(at,"readwrite"),a=i.objectStore(at),e.next=8,a.put(n,ht(t));case 8:return e.abrupt("return",i.done);case 11:e.prev=11,e.t0=e.catch(0),e.t0 instanceof z?Pe.warn(e.t0.message):(o=He.create("idb-set",{originalErrorMessage:null===e.t0||void 0===e.t0?void 0:e.t0.message}),Pe.warn(o.message));case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),ft.apply(this,arguments)}function ht(e){return"".concat(e.name,"!").concat(e.options.appId)}var dt=function(){function e(t){var n=this;p(this,e),this.container=t,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new gt(r),this._heartbeatsCachePromise=this._storage.read().then((function(e){return n._heartbeatsCache=e,e}))}return m(e,[{key:"triggerHeartbeat",value:function(){var e=h(l().mark((function e(){var t,n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.container.getProvider("platform-logger").getImmediate(),n=t.getPlatformInfoString(),r=vt(),null!==this._heartbeatsCache){e.next=7;break}return e.next=6,this._heartbeatsCachePromise;case 6:this._heartbeatsCache=e.sent;case 7:if(this._heartbeatsCache.lastSentHeartbeatDate!==r&&!this._heartbeatsCache.heartbeats.some((function(e){return e.date===r}))){e.next=11;break}return e.abrupt("return");case 11:this._heartbeatsCache.heartbeats.push({date:r,agent:n});case 12:return this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter((function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6})),e.abrupt("return",this._storage.overwrite(this._heartbeatsCache));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getHeartbeatsHeader",value:function(){var e=h(l().mark((function e(){var t,n,r,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==this._heartbeatsCache){e.next=3;break}return e.next=3,this._heartbeatsCachePromise;case 3:if(null!==this._heartbeatsCache&&0!==this._heartbeatsCache.heartbeats.length){e.next=5;break}return e.abrupt("return","");case 5:if(t=vt(),n=pt(this._heartbeatsCache.heartbeats),r=n.heartbeatsToSend,i=n.unsentEntries,a=N(JSON.stringify({version:2,heartbeats:r})),this._heartbeatsCache.lastSentHeartbeatDate=t,!(i.length>0)){e.next=15;break}return this._heartbeatsCache.heartbeats=i,e.next=13,this._storage.overwrite(this._heartbeatsCache);case 13:e.next=17;break;case 15:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache);case 17:return e.abrupt("return",a);case 18:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}();function vt(){return(new Date).toISOString().substring(0,10)}function pt(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024,r=[],i=e.slice(),a=g(e);try{var o=function(){var e=t.value,a=r.find((function(t){return t.agent===e.agent}));if(a){if(a.dates.push(e.date),kt(r)>n)return a.dates.pop(),"break"}else if(r.push({agent:e.agent,dates:[e.date]}),kt(r)>n)return r.pop(),"break";i=i.slice(1)};for(a.s();!(t=a.n()).done;){if("break"===o())break}}catch(u){a.e(u)}finally{a.f()}return{heartbeatsToSend:r,unsentEntries:i}}var yt,mt,gt=function(){function e(t){p(this,e),this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}return m(e,[{key:"runIndexedDBEnvironmentCheck",value:function(){var e=h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(B()){e.next=4;break}return e.abrupt("return",!1);case 4:return e.abrupt("return",new Promise((function(e,t){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(a){t(a)}})).then((function(){return!0})).catch((function(){return!1})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"read",value:function(){var e=h(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return",{heartbeats:[]});case 7:return e.next=9,st(this.app);case 9:return t=e.sent,e.abrupt("return",t||{heartbeats:[]});case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"overwrite",value:function(){var e=h(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",lt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:t.heartbeats}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"add",value:function(){var e=h(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._canUseIndexedDBPromise;case 2:if(e.sent){e.next=7;break}return e.abrupt("return");case 7:return e.next=9,this.read();case 9:return r=e.sent,e.abrupt("return",lt(this.app,{lastSentHeartbeatDate:null!==(n=t.lastSentHeartbeatDate)&&void 0!==n?n:r.lastSentHeartbeatDate,heartbeats:[].concat(X(r.heartbeats),X(t.heartbeats))}));case 11:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function kt(e){return N(JSON.stringify({version:2,heartbeats:e})).length}yt="",ze(new J("platform-logger",(function(e){return new Ae(e)}),"PRIVATE")),ze(new J("heartbeat",(function(e){return new dt(e)}),"PRIVATE")),et(Re,Oe,yt),et(Re,Oe,"esm2017"),et("fire-js","");var bt=function(){function e(t,n){var r=this;p(this,e),this._delegate=t,this.firebase=n,Ve(t,new J("app-compat",(function(){return r}),"PUBLIC")),this.container=t.container}return m(e,[{key:"automaticDataCollectionEnabled",get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e}},{key:"name",get:function(){return this._delegate.name}},{key:"options",get:function(){return this._delegate.options}},{key:"delete",value:function(){var e=this;return new Promise((function(t){e._delegate.checkDestroyed(),t()})).then((function(){return e.firebase.INTERNAL.removeApp(e.name),Je(e._delegate)}))}},{key:"_getService",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Le;this._delegate.checkDestroyed();var r=this._delegate.container.getProvider(e);return r.isInitialized()||"EXPLICIT"!==(null===(t=r.getComponent())||void 0===t?void 0:t.instantiationMode)||r.initialize(),r.getImmediate({identifier:n})}},{key:"_removeServiceInstance",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Le;this._delegate.container.getProvider(e).clearInstance(t)}},{key:"_addComponent",value:function(e){Ve(this._delegate,e)}},{key:"_addOrOverwriteComponent",value:function(e){Be(this._delegate,e)}},{key:"toJSON",value:function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}]),e}(),wt=(v(mt={},"no-app","No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()"),v(mt,"invalid-app-argument","firebase.{$appName}() takes either no argument or a Firebase App instance."),mt),_t=new j("app-compat","Firebase",wt);var xt=function t(){var n=function(t){var n={},r={__esModule:!0,initializeApp:function(e){var i=Ye(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{});if(K(n,i.name))return n[i.name];var a=new t(i,r);return n[i.name]=a,a},app:i,registerVersion:et,setLogLevel:nt,onLog:tt,apps:null,SDK_VERSION:Qe,INTERNAL:{registerComponent:function(e){var n=e.name,a=n.replace("-compat","");if(ze(e)&&"PUBLIC"===e.type){var o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i();if("function"!==typeof e[a])throw _t.create("invalid-app-argument",{appName:n});return e[a]()};void 0!==e.serviceProps&&R(o,e.serviceProps),r[a]=o,t.prototype[a]=function(){for(var t=this._getService.bind(this,n),r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return t.apply(this,e.multipleInstances?i:[])}}return"PUBLIC"===e.type?r[a]:null},removeApp:function(e){delete n[e]},useAsService:function(e,t){return"serverAuth"===t?null:t},modularAPIs:e}};function i(e){if(!K(n,e=e||Le))throw _t.create("no-app",{appName:e});return n[e]}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(n).map((function(e){return n[e]}))}}),i.App=t,r}(bt);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(e){R(n,e)},createSubscribe:W,ErrorFactory:j,deepExtend:R}),n}(),Et=new ce("@firebase/app-compat");if("object"===typeof self&&self.self===self&&void 0!==self.firebase){Et.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var St=self.firebase.SDK_VERSION;St&&St.indexOf("LITE")>=0&&Et.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var It=xt;!function(e){et("@firebase/app-compat","0.2.8",e)}();It.registerVersion("firebase","9.20.0","app-compat");var Tt,Ct="firebasestorage.googleapis.com",Dt="storageBucket",Nt=function(e){w(n,e);var t=E(n);function n(e,r){var i,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return p(this,n),(i=t.call(this,At(e),"Firebase Storage: ".concat(r," (").concat(At(e),")"))).status_=a,i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(k(i),n.prototype),i}return m(n,[{key:"status",get:function(){return this.status_},set:function(e){this.status_=e}},{key:"_codeEquals",value:function(e){return At(e)===this.code}},{key:"serverResponse",get:function(){return this.customData.serverResponse},set:function(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message="".concat(this._baseMessage,"\n").concat(this.customData.serverResponse):this.message=this._baseMessage}}]),n}(z);function At(e){return"storage/"+e}function Rt(){return new Nt(Tt.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function Ot(){return new Nt(Tt.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Pt(){return new Nt(Tt.CANCELED,"User canceled the upload/download.")}function Lt(){return new Nt(Tt.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Mt(e){return new Nt(Tt.INVALID_ARGUMENT,e)}function Ft(){return new Nt(Tt.APP_DELETED,"The Firebase app was deleted.")}function Ut(e){return new Nt(Tt.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Vt(e,t){return new Nt(Tt.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Bt(e){throw new Nt(Tt.INTERNAL_ERROR,"Internal error: "+e)}!function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(Tt||(Tt={}));var zt,jt=function(){function e(t,n){p(this,e),this.bucket=t,this.path_=n}return m(e,[{key:"path",get:function(){return this.path_}},{key:"isRoot",get:function(){return 0===this.path.length}},{key:"fullServerUrl",value:function(){var e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}},{key:"bucketOnlyServerUrl",value:function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}}],[{key:"makeFromBucketSpec",value:function(t,n){var r,i;try{r=e.makeFromUrl(t,n)}catch(a){return new e(t,"")}if(""===r.path)return r;throw i=t,new Nt(Tt.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}},{key:"makeFromUrl",value:function(t,n){var r=null,i="([A-Za-z0-9.\\-_]+)";var a=new RegExp("^gs://"+i+"(/(.*))?$","i");function o(e){e.path_=decodeURIComponent(e.path)}for(var u=n.replace(/[.]/g,"\\."),s=[{regex:a,indices:{bucket:1,path:3},postModify:function(e){"/"===e.path.charAt(e.path.length-1)&&(e.path_=e.path_.slice(0,-1))}},{regex:new RegExp("^https?://".concat(u,"/").concat("v[A-Za-z0-9_]+","/b/").concat(i,"/o").concat("(/([^?#]*).*)?$"),"i"),indices:{bucket:1,path:3},postModify:o},{regex:new RegExp("^https?://".concat(n===Ct?"(?:storage.googleapis.com|storage.cloud.google.com)":n,"/").concat(i,"/").concat("([^?#]*)"),"i"),indices:{bucket:1,path:2},postModify:o}],c=0;c<s.length;c++){var l=s[c],f=l.regex.exec(t);if(f){var h=f[l.indices.bucket],d=f[l.indices.path];d||(d=""),r=new e(h,d),l.postModify(r);break}}if(null==r)throw function(e){return new Nt(Tt.INVALID_URL,"Invalid URL '"+e+"'.")}(t);return r}}]),e}(),qt=function(){function e(t){p(this,e),this.promise_=Promise.reject(t)}return m(e,[{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(){}}]),e}();function Kt(e){return"string"===typeof e||e instanceof String}function Gt(e){return Ht()&&e instanceof Blob}function Ht(){return"undefined"!==typeof Blob&&!V()}function Wt(e,t,n,r){if(r<t)throw Mt("Invalid value for '".concat(e,"'. Expected ").concat(t," or greater."));if(r>n)throw Mt("Invalid value for '".concat(e,"'. Expected ").concat(n," or less."))}function Qt(e,t,n){var r=t;return null==n&&(r="https://".concat(t)),"".concat(n,"://").concat(r,"/v0").concat(e)}function Yt(e){var t=encodeURIComponent,n="?";for(var r in e){if(e.hasOwnProperty(r))n=n+(t(r)+"="+t(e[r]))+"&"}return n=n.slice(0,-1)}function $t(e,t){var n=e>=500&&e<600,r=-1!==[408,429].indexOf(e),i=-1!==t.indexOf(e);return n||r||i}!function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"}(zt||(zt={}));var Xt=function(){function e(t,n,r,i,a,o,u,s,c,l,f){var h=this,d=!(arguments.length>11&&void 0!==arguments[11])||arguments[11];p(this,e),this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=o,this.callback_=u,this.errorCallback_=s,this.timeout_=c,this.progressCallback_=l,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((function(e,t){h.resolve_=e,h.reject_=t,h.start_()}))}return m(e,[{key:"start_",value:function(){var e=this,t=function(t,n){var r=e.resolve_,i=e.reject_,a=n.connection;if(n.wasSuccessCode)try{var o=e.callback_(a,a.getResponse());!function(e){return void 0!==e}(o)?r():r(o)}catch(s){i(s)}else if(null!==a){var u=Rt();u.serverResponse=a.getErrorText(),e.errorCallback_?i(e.errorCallback_(a,u)):i(u)}else{if(n.canceled)i(e.appDelete_?Ft():Pt());else i(Ot())}};this.canceled_?t(0,new Jt(!1,null,!0)):this.backoffId_=function(e,t,n){var r=1,i=null,a=null,o=!1,u=0;function s(){return 2===u}var c=!1;function l(){if(!c){c=!0;for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];t.apply(null,n)}}function f(t){i=setTimeout((function(){i=null,e(d,s())}),t)}function h(){a&&clearTimeout(a)}function d(e){if(c)h();else{for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(e)return h(),void l.call.apply(l,[null,e].concat(n));var a;if(s()||o)return h(),void l.call.apply(l,[null,e].concat(n));r<64&&(r*=2),1===u?(u=2,a=0):a=1e3*(r+Math.random()),f(a)}}var v=!1;function p(e){v||(v=!0,h(),c||(null!==i?(e||(u=2),clearTimeout(i),f(0)):e||(u=1)))}return f(0),a=setTimeout((function(){o=!0,p(!0)}),n),p}((function(t,n){if(n)t(!1,new Jt(!1,null,!0));else{var r=e.connectionFactory_();e.pendingConnection_=r;var i=function(t){var n=t.loaded,r=t.lengthComputable?t.total:-1;null!==e.progressCallback_&&e.progressCallback_(n,r)};null!==e.progressCallback_&&r.addUploadProgressListener(i),r.send(e.url_,e.method_,e.body_,e.headers_).then((function(){null!==e.progressCallback_&&r.removeUploadProgressListener(i),e.pendingConnection_=null;var n=r.getErrorCode()===zt.NO_ERROR,a=r.getStatus();if(!n||$t(a,e.additionalRetryCodes_)&&e.retry){var o=r.getErrorCode()===zt.ABORT;t(!1,new Jt(!1,null,o))}else{var u=-1!==e.successCodes_.indexOf(a);t(!0,new Jt(u,r))}}))}}),t,this.timeout_)}},{key:"getPromise",value:function(){return this.promise_}},{key:"cancel",value:function(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function(e){e(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}]),e}(),Jt=m((function e(t,n,r){p(this,e),this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}));function Zt(){return"undefined"!==typeof BlobBuilder?BlobBuilder:"undefined"!==typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function en(){for(var e=Zt(),t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(void 0!==e){for(var i=new e,a=0;a<n.length;a++)i.append(n[a]);return i.getBlob()}if(Ht())return new Blob(n);throw new Nt(Tt.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}function tn(e){if("undefined"===typeof atob)throw t="base-64",new Nt(Tt.UNSUPPORTED_ENVIRONMENT,"".concat(t," is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information."));var t;return atob(e)}var nn={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},rn=m((function e(t,n){p(this,e),this.data=t,this.contentType=n||null}));function an(e,t){switch(e){case nn.RAW:return new rn(on(t));case nn.BASE64:case nn.BASE64URL:return new rn(un(e,t));case nn.DATA_URL:return new rn(function(e){var t=new sn(e);return t.base64?un(nn.BASE64,t.rest):function(e){var t;try{t=decodeURIComponent(e)}catch(n){throw Vt(nn.DATA_URL,"Malformed data URL.")}return on(t)}(t.rest)}(t),new sn(t).contentType)}throw Rt()}function on(e){for(var t=[],n=0;n<e.length;n++){var r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|63&r);else if(55296===(64512&r))if(n<e.length-1&&56320===(64512&e.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&e.charCodeAt(++n),t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else t.push(239,191,189);else 56320===(64512&r)?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(t)}function un(e,t){switch(e){case nn.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw Vt(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case nn.BASE64URL:var i=-1!==t.indexOf("+"),a=-1!==t.indexOf("/");if(i||a)throw Vt(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var o;try{o=tn(t)}catch(c){if(c.message.includes("polyfill"))throw c;throw Vt(e,"Invalid character found")}for(var u=new Uint8Array(o.length),s=0;s<o.length;s++)u[s]=o.charCodeAt(s);return u}var sn=m((function e(t){p(this,e),this.base64=!1,this.contentType=null;var n=t.match(/^data:([^,]+)?,/);if(null===n)throw Vt(nn.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var r=n[1]||null;null!=r&&(this.base64=function(e,t){if(!(e.length>=t.length))return!1;return e.substring(e.length-t.length)===t}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}));var cn=function(){function e(t,n){p(this,e);var r=0,i="";Gt(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}return m(e,[{key:"size",value:function(){return this.size_}},{key:"type",value:function(){return this.type_}},{key:"slice",value:function(t,n){if(Gt(this.data_)){var r=function(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}(this.data_,t,n);return null===r?null:new e(r)}var i=new Uint8Array(this.data_.buffer,t,n-t);return new e(i,!0)}},{key:"uploadData",value:function(){return this.data_}}],[{key:"getBlob",value:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(Ht()){var i=n.map((function(t){return t instanceof e?t.data_:t}));return new e(en.apply(null,i))}var a=n.map((function(e){return Kt(e)?an(nn.RAW,e).data:e.data_})),o=0;a.forEach((function(e){o+=e.byteLength}));var u=new Uint8Array(o),s=0;return a.forEach((function(e){for(var t=0;t<e.length;t++)u[s++]=e[t]})),new e(u,!0)}}]),e}();function ln(e){var t;try{t=JSON.parse(e)}catch(n){return null}return function(e){return"object"===typeof e&&!Array.isArray(e)}(t)?t:null}function fn(e){var t=e.lastIndexOf("/",e.length-2);return-1===t?e:e.slice(t+1)}function hn(e,t){return t}var dn=m((function e(t,n,r,i){p(this,e),this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||hn})),vn=null;function pn(){if(vn)return vn;var e=[];e.push(new dn("bucket")),e.push(new dn("generation")),e.push(new dn("metageneration")),e.push(new dn("name","fullPath",!0));var t=new dn("name");t.xform=function(e,t){return function(e){return!Kt(e)||e.length<2?e:fn(e)}(t)},e.push(t);var n=new dn("size");return n.xform=function(e,t){return void 0!==t?Number(t):t},e.push(n),e.push(new dn("timeCreated")),e.push(new dn("updated")),e.push(new dn("md5Hash",null,!0)),e.push(new dn("cacheControl",null,!0)),e.push(new dn("contentDisposition",null,!0)),e.push(new dn("contentEncoding",null,!0)),e.push(new dn("contentLanguage",null,!0)),e.push(new dn("contentType",null,!0)),e.push(new dn("metadata","customMetadata",!0)),vn=e}function yn(e,t,n){for(var r={type:"file"},i=n.length,a=0;a<i;a++){var o=n[a];r[o.local]=o.xform(r,t[o.server])}return function(e,t){Object.defineProperty(e,"ref",{get:function(){var n=e.bucket,r=e.fullPath,i=new jt(n,r);return t._makeStorageReference(i)}})}(r,e),r}function mn(e,t,n){var r=ln(t);return null===r?null:yn(e,r,n)}function gn(e,t){for(var n={},r=t.length,i=0;i<r;i++){var a=t[i];a.writable&&(n[a.server]=e[a.local])}return JSON.stringify(n)}var kn="prefixes",bn="items";function wn(e,t,n){var r=ln(n);return null===r?null:function(e,t,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[kn]){var i,a=g(n[kn]);try{for(a.s();!(i=a.n()).done;){var o=i.value.replace(/\/$/,""),u=e._makeStorageReference(new jt(t,o));r.prefixes.push(u)}}catch(h){a.e(h)}finally{a.f()}}if(n[bn]){var s,c=g(n[bn]);try{for(c.s();!(s=c.n()).done;){var l=s.value,f=e._makeStorageReference(new jt(t,l.name));r.items.push(f)}}catch(h){c.e(h)}finally{c.f()}}return r}(e,t,r)}var _n=m((function e(t,n,r,i){p(this,e),this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}));function xn(e){if(!e)throw Rt()}function En(e,t){return function(n,r){var i=mn(e,r,t);return xn(null!==i),i}}function Sn(e,t){return function(n,r){var i=mn(e,r,t);return xn(null!==i),function(e,t,n,r){var i=ln(t);if(null===i)return null;if(!Kt(i.downloadTokens))return null;var a=i.downloadTokens;if(0===a.length)return null;var o=encodeURIComponent;return a.split(",").map((function(t){var i=e.bucket,a=e.fullPath;return Qt("/b/"+o(i)+"/o/"+o(a),n,r)+Yt({alt:"media",token:t})}))[0]}(i,r,e.host,e._protocol)}}function In(e){return function(t,n){var r,i,a;return 401===t.getStatus()?r=t.getErrorText().includes("Firebase App Check token is invalid")?new Nt(Tt.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project."):new Nt(Tt.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(a=e.bucket,r=new Nt(Tt.QUOTA_EXCEEDED,"Quota for bucket '"+a+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(i=e.path,r=new Nt(Tt.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")):r=n,r.status=t.getStatus(),r.serverResponse=n.serverResponse,r}}function Tn(e){var t=In(e);return function(n,r){var i,a=t(n,r);return 404===n.getStatus()&&(i=e.path,a=new Nt(Tt.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")),a.serverResponse=r.serverResponse,a}}function Cn(e,t,n){var r=Qt(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new _n(r,"GET",En(e,n),i);return a.errorHandler=Tn(t),a}function Dn(e,t,n,r,i){var a={};t.isRoot?a.prefix="":a.prefix=t.path+"/",n&&n.length>0&&(a.delimiter=n),r&&(a.pageToken=r),i&&(a.maxResults=i);var o=Qt(t.bucketOnlyServerUrl(),e.host,e._protocol),u=e.maxOperationRetryTime,s=new _n(o,"GET",function(e,t){return function(n,r){var i=wn(e,t,r);return xn(null!==i),i}}(e,t.bucket),u);return s.urlParams=a,s.errorHandler=In(t),s}function Nn(e,t,n){var r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=function(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}(null,t)),r}function An(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};var u=function(){for(var e="",t=0;t<2;t++)e+=Math.random().toString().slice(2);return e}();o["Content-Type"]="multipart/related; boundary="+u;var s=Nn(t,r,i),c="--"+u+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+gn(s,n)+"\r\n--"+u+"\r\nContent-Type: "+s.contentType+"\r\n\r\n",l="\r\n--"+u+"--",f=cn.getBlob(c,r,l);if(null===f)throw Lt();var h={name:s.fullPath},d=Qt(a,e.host,e._protocol),v=e.maxUploadRetryTime,p=new _n(d,"POST",En(e,n),v);return p.urlParams=h,p.headers=o,p.body=f.uploadData(),p.errorHandler=In(t),p}var Rn=m((function e(t,n,r,i){p(this,e),this.current=t,this.total=n,this.finalized=!!r,this.metadata=i||null}));function On(e,t){var n=null;try{n=e.getResponseHeader("X-Goog-Upload-Status")}catch(r){xn(!1)}return xn(!!n&&-1!==(t||["active"]).indexOf(n)),n}var Pn=262144;function Ln(e,t,n,r,i,a,o,u){var s=new Rn(0,0);if(o?(s.current=o.current,s.total=o.total):(s.current=0,s.total=r.size()),r.size()!==s.total)throw new Nt(Tt.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=s.total-s.current,l=c;i>0&&(l=Math.min(l,i));var f=s.current,h=f+l,d={"X-Goog-Upload-Command":0===l?"finalize":c===l?"upload, finalize":"upload","X-Goog-Upload-Offset":"".concat(s.current)},v=r.slice(f,h);if(null===v)throw Lt();var p=t.maxUploadRetryTime,y=new _n(n,"POST",(function(e,n){var i,o=On(e,["active","final"]),u=s.current+l,c=r.size();return i="final"===o?En(t,a)(e,n):null,new Rn(u,c,"final"===o,i)}),p);return y.headers=d,y.body=v.uploadData(),y.progressCallback=u||null,y.errorHandler=In(e),y}var Mn={STATE_CHANGED:"state_changed"},Fn={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Un(e){switch(e){case"running":case"pausing":case"canceling":return Fn.RUNNING;case"paused":return Fn.PAUSED;case"success":return Fn.SUCCESS;case"canceled":return Fn.CANCELED;default:return Fn.ERROR}}var Vn=m((function e(t,n,r){p(this,e);var i=function(e){return"function"===typeof e}(t)||null!=n||null!=r;if(i)this.next=t,this.error=null!==n&&void 0!==n?n:void 0,this.complete=null!==r&&void 0!==r?r:void 0;else{var a=t;this.next=a.next,this.error=a.error,this.complete=a.complete}}));function Bn(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];Promise.resolve().then((function(){return e.apply(void 0,n)}))}}var zn=null,jn=function(){function e(){var t=this;p(this,e),this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=zt.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=zt.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=zt.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return m(e,[{key:"send",value:function(e,t,n,r){if(this.sent_)throw Bt("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_}},{key:"getErrorCode",value:function(){if(!this.sent_)throw Bt("cannot .getErrorCode() before sending");return this.errorCode_}},{key:"getStatus",value:function(){if(!this.sent_)throw Bt("cannot .getStatus() before sending");try{return this.xhr_.status}catch(e){return-1}}},{key:"getResponse",value:function(){if(!this.sent_)throw Bt("cannot .getResponse() before sending");return this.xhr_.response}},{key:"getErrorText",value:function(){if(!this.sent_)throw Bt("cannot .getErrorText() before sending");return this.xhr_.statusText}},{key:"abort",value:function(){this.xhr_.abort()}},{key:"getResponseHeader",value:function(e){return this.xhr_.getResponseHeader(e)}},{key:"addUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}},{key:"removeUploadProgressListener",value:function(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}]),e}(),qn=function(e){w(n,e);var t=E(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"initXhr",value:function(){this.xhr_.responseType="text"}}]),n}(jn);function Kn(){return zn?zn():new qn}var Gn=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;p(this,e),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=n,this._metadata=i,this._mappings=pn(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(e){if(r._request=void 0,r._chunkMultiplier=1,e._codeEquals(Tt.CANCELED))r._needToFetchStatus=!0,r.completeTransitions_();else{var t=r.isExponentialBackoffExpired();if($t(e.status,[])){if(!t)return r.sleepTime=Math.max(2*r.sleepTime,1e3),r._needToFetchStatus=!0,void r.completeTransitions_();e=Ot()}r._error=e,r._transition("error")}},this._metadataErrorHandler=function(e){r._request=void 0,e._codeEquals(Tt.CANCELED)?r.completeTransitions_():(r._error=e,r._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((function(e,t){r._resolve=e,r._reject=t,r._start()})),this._promise.then(null,(function(){}))}return m(e,[{key:"isExponentialBackoffExpired",value:function(){return this.sleepTime>this.maxSleepTime}},{key:"_makeProgressCallback",value:function(){var e=this,t=this._transferred;return function(n){return e._updateProgress(t+n)}}},{key:"_shouldDoResumable",value:function(e){return e.size()>262144}},{key:"_start",value:function(){var e=this;"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout((function(){e.pendingTimeout=void 0,e._continueUpload()}),this.sleepTime):this._oneShotUpload())}},{key:"_resolveToken",value:function(e){var t=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=s(n,2),i=r[0],a=r[1];switch(t._state){case"running":e(i,a);break;case"canceling":t._transition("canceled");break;case"pausing":t._transition("paused")}}))}},{key:"_createResumable",value:function(){var e=this;this._resolveToken((function(t,n){var r=function(e,t,n,r,i){var a=t.bucketOnlyServerUrl(),o=Nn(t,r,i),u={name:o.fullPath},s=Qt(a,e.host,e._protocol),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":"".concat(r.size()),"X-Goog-Upload-Header-Content-Type":o.contentType,"Content-Type":"application/json; charset=utf-8"},l=gn(o,n),f=e.maxUploadRetryTime,h=new _n(s,"POST",(function(e){var t;On(e);try{t=e.getResponseHeader("X-Goog-Upload-URL")}catch(n){xn(!1)}return xn(Kt(t)),t}),f);return h.urlParams=u,h.headers=c,h.body=l,h.errorHandler=In(t),h}(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,Kn,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._uploadUrl=t,e._needToFetchStatus=!1,e.completeTransitions_()}),e._errorHandler)}))}},{key:"_fetchStatus",value:function(){var e=this,t=this._uploadUrl;this._resolveToken((function(n,r){var i=function(e,t,n,r){var i=e.maxUploadRetryTime,a=new _n(n,"POST",(function(e){var t=On(e,["active","final"]),n=null;try{n=e.getResponseHeader("X-Goog-Upload-Size-Received")}catch(a){xn(!1)}n||xn(!1);var i=Number(n);return xn(!isNaN(i)),new Rn(i,r.size(),"final"===t)}),i);return a.headers={"X-Goog-Upload-Command":"query"},a.errorHandler=In(t),a}(e._ref.storage,e._ref._location,t,e._blob),a=e._ref.storage._makeRequest(i,Kn,n,r);e._request=a,a.getPromise().then((function(t){e._request=void 0,e._updateProgress(t.current),e._needToFetchStatus=!1,t.finalized&&(e._needToFetchMetadata=!0),e.completeTransitions_()}),e._errorHandler)}))}},{key:"_continueUpload",value:function(){var e=this,t=Pn*this._chunkMultiplier,n=new Rn(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,a){var o;try{o=Ln(e._ref._location,e._ref.storage,r,e._blob,t,e._mappings,n,e._makeProgressCallback())}catch(s){return e._error=s,void e._transition("error")}var u=e._ref.storage._makeRequest(o,Kn,i,a,!1);e._request=u,u.getPromise().then((function(t){e._increaseMultiplier(),e._request=void 0,e._updateProgress(t.current),t.finalized?(e._metadata=t.metadata,e._transition("success")):e.completeTransitions_()}),e._errorHandler)}))}},{key:"_increaseMultiplier",value:function(){2*(Pn*this._chunkMultiplier)<33554432&&(this._chunkMultiplier*=2)}},{key:"_fetchMetadata",value:function(){var e=this;this._resolveToken((function(t,n){var r=Cn(e._ref.storage,e._ref._location,e._mappings),i=e._ref.storage._makeRequest(r,Kn,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._transition("success")}),e._metadataErrorHandler)}))}},{key:"_oneShotUpload",value:function(){var e=this;this._resolveToken((function(t,n){var r=An(e._ref.storage,e._ref._location,e._mappings,e._blob,e._metadata),i=e._ref.storage._makeRequest(r,Kn,t,n);e._request=i,i.getPromise().then((function(t){e._request=void 0,e._metadata=t,e._updateProgress(e._blob.size()),e._transition("success")}),e._errorHandler)}))}},{key:"_updateProgress",value:function(e){var t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}},{key:"_transition",value:function(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":var t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Pt(),this._state=e,this._notifyObservers()}}},{key:"completeTransitions_",value:function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}},{key:"snapshot",get:function(){var e=Un(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}},{key:"on",value:function(e,t,n,r){var i=this,a=new Vn(t||void 0,n||void 0,r||void 0);return this._addObserver(a),function(){i._removeObserver(a)}}},{key:"then",value:function(e,t){return this._promise.then(e,t)}},{key:"catch",value:function(e){return this.then(null,e)}},{key:"_addObserver",value:function(e){this._observers.push(e),this._notifyObserver(e)}},{key:"_removeObserver",value:function(e){var t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}},{key:"_notifyObservers",value:function(){var e=this;this._finishPromise(),this._observers.slice().forEach((function(t){e._notifyObserver(t)}))}},{key:"_finishPromise",value:function(){if(void 0!==this._resolve){var e=!0;switch(Un(this._state)){case Fn.SUCCESS:Bn(this._resolve.bind(null,this.snapshot))();break;case Fn.CANCELED:case Fn.ERROR:Bn(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}},{key:"_notifyObserver",value:function(e){switch(Un(this._state)){case Fn.RUNNING:case Fn.PAUSED:e.next&&Bn(e.next.bind(e,this.snapshot))();break;case Fn.SUCCESS:e.complete&&Bn(e.complete.bind(e))();break;case Fn.CANCELED:case Fn.ERROR:default:e.error&&Bn(e.error.bind(e,this._error))()}}},{key:"resume",value:function(){var e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}},{key:"pause",value:function(){var e="running"===this._state;return e&&this._transition("pausing"),e}},{key:"cancel",value:function(){var e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}]),e}(),Hn=function(){function e(t,n){p(this,e),this._service=t,this._location=n instanceof jt?n:jt.makeFromUrl(n,t.host)}return m(e,[{key:"toString",value:function(){return"gs://"+this._location.bucket+"/"+this._location.path}},{key:"_newRef",value:function(t,n){return new e(t,n)}},{key:"root",get:function(){var e=new jt(this._location.bucket,"");return this._newRef(this._service,e)}},{key:"bucket",get:function(){return this._location.bucket}},{key:"fullPath",get:function(){return this._location.path}},{key:"name",get:function(){return fn(this._location.path)}},{key:"storage",get:function(){return this._service}},{key:"parent",get:function(){var t=function(e){if(0===e.length)return null;var t=e.lastIndexOf("/");return-1===t?"":e.slice(0,t)}(this._location.path);if(null===t)return null;var n=new jt(this._location.bucket,t);return new e(this._service,n)}},{key:"_throwIfRoot",value:function(e){if(""===this._location.path)throw Ut(e)}}]),e}();function Wn(e,t,n){return Qn.apply(this,arguments)}function Qn(){return(Qn=h(l().mark((function e(t,n,r){var i,a,o,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o={pageToken:r},e.next=3,Yn(t,o);case 3:if(u=e.sent,(i=n.prefixes).push.apply(i,X(u.prefixes)),(a=n.items).push.apply(a,X(u.items)),null==u.nextPageToken){e.next=9;break}return e.next=9,Wn(t,n,u.nextPageToken);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Yn(e,t){null!=t&&"number"===typeof t.maxResults&&Wt("options.maxResults",1,1e3,t.maxResults);var n=t||{},r=Dn(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,Kn)}function $n(e,t){e._throwIfRoot("updateMetadata");var n=function(e,t,n,r){var i=Qt(t.fullServerUrl(),e.host,e._protocol),a=gn(n,r),o=e.maxOperationRetryTime,u=new _n(i,"PATCH",En(e,r),o);return u.headers={"Content-Type":"application/json; charset=utf-8"},u.body=a,u.errorHandler=Tn(t),u}(e.storage,e._location,t,pn());return e.storage.makeRequestWithTokens(n,Kn)}function Xn(e){e._throwIfRoot("getDownloadURL");var t=function(e,t,n){var r=Qt(t.fullServerUrl(),e.host,e._protocol),i=e.maxOperationRetryTime,a=new _n(r,"GET",Sn(e,n),i);return a.errorHandler=Tn(t),a}(e.storage,e._location,pn());return e.storage.makeRequestWithTokens(t,Kn).then((function(e){if(null===e)throw new Nt(Tt.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return e}))}function Jn(e){e._throwIfRoot("deleteObject");var t=function(e,t){var n=Qt(t.fullServerUrl(),e.host,e._protocol),r=e.maxOperationRetryTime,i=new _n(n,"DELETE",(function(e,t){}),r);return i.successCodes=[200,204],i.errorHandler=Tn(t),i}(e.storage,e._location);return e.storage.makeRequestWithTokens(t,Kn)}function Zn(e,t){var n=function(e,t){var n=t.split("/").filter((function(e){return e.length>0})).join("/");return 0===e.length?n:e+"/"+n}(e._location.path,t),r=new jt(e._location.bucket,n);return new Hn(e.storage,r)}function er(e,t){if(e instanceof rr){var n=e;if(null==n._bucket)throw new Nt(Tt.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Dt+"' property when initializing the app?");var r=new Hn(n,n._bucket);return null!=t?er(r,t):r}return void 0!==t?Zn(e,t):e}function tr(e,t){if(t&&/^[A-Za-z]+:\/\//.test(t)){if(e instanceof rr)return new Hn(e,t);throw Mt("To use ref(service, url), the first argument must be a Storage instance.")}return er(e,t)}function nr(e,t){var n=null===t||void 0===t?void 0:t[Dt];return null==n?null:jt.makeFromBucketSpec(n,e)}var rr=function(){function e(t,n,r,i,a){p(this,e),this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=Ct,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?jt.makeFromBucketSpec(i,this._host):nr(this._host,this.app.options)}return m(e,[{key:"host",get:function(){return this._host},set:function(e){this._host=e,null!=this._url?this._bucket=jt.makeFromBucketSpec(this._url,e):this._bucket=nr(e,this.app.options)}},{key:"maxUploadRetryTime",get:function(){return this._maxUploadRetryTime},set:function(e){Wt("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}},{key:"maxOperationRetryTime",get:function(){return this._maxOperationRetryTime},set:function(e){Wt("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}},{key:"_getAuthToken",value:function(){var e=h(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._overrideAuthToken){e.next=2;break}return e.abrupt("return",this._overrideAuthToken);case 2:if(!(t=this._authProvider.getImmediate({optional:!0}))){e.next=9;break}return e.next=6,t.getToken();case 6:if(null===(n=e.sent)){e.next=9;break}return e.abrupt("return",n.accessToken);case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_getAppCheckToken",value:function(){var e=h(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this._appCheckProvider.getImmediate({optional:!0}))){e.next=6;break}return e.next=4,t.getToken();case 4:return n=e.sent,e.abrupt("return",n.token);case 6:return e.abrupt("return",null);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_delete",value:function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(e){return e.cancel()})),this._requests.clear()),Promise.resolve()}},{key:"_makeStorageReference",value:function(e){return new Hn(this,e)}},{key:"_makeRequest",value:function(e,t,n,r){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(this._deleted)return new qt(Ft());var o=function(e,t,n,r,i,a){var o=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],u=Yt(e.urlParams),s=e.url+u,c=Object.assign({},e.headers);return function(e,t){t&&(e["X-Firebase-GMPID"]=t)}(c,t),function(e,t){null!==t&&t.length>0&&(e.Authorization="Firebase "+t)}(c,n),function(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(null!==t&&void 0!==t?t:"AppManager")}(c,a),function(e,t){null!==t&&(e["X-Firebase-AppCheck"]=t)}(c,r),new Xt(s,e.method,c,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}(e,this._appId,n,r,t,this._firebaseVersion,a);return this._requests.add(o),o.getPromise().then((function(){return i._requests.delete(o)}),(function(){return i._requests.delete(o)})),o}},{key:"makeRequestWithTokens",value:function(){var e=h(l().mark((function e(t,n){var r,i,a,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([this._getAuthToken(),this._getAppCheckToken()]);case 2:return r=e.sent,i=s(r,2),a=i[0],o=i[1],e.abrupt("return",this._makeRequest(t,n,a,o).getPromise());case 7:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),ir="@firebase/storage",ar="0.11.2",or="storage";function ur(e,t,n){return function(e,t,n){return e._throwIfRoot("uploadBytesResumable"),new Gn(e,new cn(t),n)}(e=$(e),t,n)}function sr(e){return function(e){e._throwIfRoot("getMetadata");var t=Cn(e.storage,e._location,pn());return e.storage.makeRequestWithTokens(t,Kn)}(e=$(e))}function cr(e){return function(e){var t={prefixes:[],items:[]};return Wn(e,t).then((function(){return t}))}(e=$(e))}function lr(e,t){return tr(e=$(e),t)}function fr(e,t,n){!function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e.host="".concat(t,":").concat(n),e._protocol="http";var i=r.mockUserToken;i&&(e._overrideAuthToken="string"===typeof i?i:F(i,e.app.options.projectId))}(e,t,n,arguments.length>3&&void 0!==arguments[3]?arguments[3]:{})}function hr(e,t){var n=t.instanceIdentifier,r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new rr(r,i,a,n,Qe)}ze(new J(or,hr,"PUBLIC").setMultipleInstances(!0)),et(ir,ar,""),et(ir,ar,"esm2017");var dr=function(){function e(t,n,r){p(this,e),this._delegate=t,this.task=n,this.ref=r}return m(e,[{key:"bytesTransferred",get:function(){return this._delegate.bytesTransferred}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"state",get:function(){return this._delegate.state}},{key:"totalBytes",get:function(){return this._delegate.totalBytes}}]),e}(),vr=function(){function e(t,n){p(this,e),this._delegate=t,this._ref=n,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return m(e,[{key:"snapshot",get:function(){return new dr(this._delegate.snapshot,this,this._ref)}},{key:"then",value:function(e,t){var n=this;return this._delegate.then((function(t){if(e)return e(new dr(t,n,n._ref))}),t)}},{key:"on",value:function(e,t,n,r){var i=this,a=void 0;return t&&(a="function"===typeof t?function(e){return t(new dr(e,i,i._ref))}:{next:t.next?function(e){return t.next(new dr(e,i,i._ref))}:void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,n||void 0,r||void 0)}}]),e}(),pr=function(){function e(t,n){p(this,e),this._delegate=t,this._service=n}return m(e,[{key:"prefixes",get:function(){var e=this;return this._delegate.prefixes.map((function(t){return new yr(t,e._service)}))}},{key:"items",get:function(){var e=this;return this._delegate.items.map((function(t){return new yr(t,e._service)}))}},{key:"nextPageToken",get:function(){return this._delegate.nextPageToken||null}}]),e}(),yr=function(){function e(t,n){p(this,e),this._delegate=t,this.storage=n}return m(e,[{key:"name",get:function(){return this._delegate.name}},{key:"bucket",get:function(){return this._delegate.bucket}},{key:"fullPath",get:function(){return this._delegate.fullPath}},{key:"toString",value:function(){return this._delegate.toString()}},{key:"child",value:function(t){var n=function(e,t){return Zn(e,t)}(this._delegate,t);return new e(n,this.storage)}},{key:"root",get:function(){return new e(this._delegate.root,this.storage)}},{key:"parent",get:function(){var t=this._delegate.parent;return null==t?null:new e(t,this.storage)}},{key:"put",value:function(e,t){return this._throwIfRoot("put"),new vr(ur(this._delegate,e,t),this)}},{key:"putString",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:nn.RAW,n=arguments.length>2?arguments[2]:void 0;this._throwIfRoot("putString");var r=an(t,e),i=Object.assign({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new vr(new Gn(this._delegate,new cn(r.data,!0),i),this)}},{key:"listAll",value:function(){var e=this;return cr(this._delegate).then((function(t){return new pr(t,e.storage)}))}},{key:"list",value:function(e){var t=this;return function(e,t){return Yn(e=$(e),t)}(this._delegate,e||void 0).then((function(e){return new pr(e,t.storage)}))}},{key:"getMetadata",value:function(){return sr(this._delegate)}},{key:"updateMetadata",value:function(e){return function(e,t){return $n(e=$(e),t)}(this._delegate,e)}},{key:"getDownloadURL",value:function(){return Xn($(this._delegate))}},{key:"delete",value:function(){return this._throwIfRoot("delete"),Jn($(this._delegate))}},{key:"_throwIfRoot",value:function(e){if(""===this._delegate._location.path)throw Ut(e)}}]),e}(),mr=function(){function e(t,n){p(this,e),this.app=t,this._delegate=n}return m(e,[{key:"maxOperationRetryTime",get:function(){return this._delegate.maxOperationRetryTime}},{key:"maxUploadRetryTime",get:function(){return this._delegate.maxUploadRetryTime}},{key:"ref",value:function(e){if(gr(e))throw Mt("ref() expected a child path but got a URL, use refFromURL instead.");return new yr(lr(this._delegate,e),this)}},{key:"refFromURL",value:function(e){if(!gr(e))throw Mt("refFromURL() expected a full URL but got a child path, use ref() instead.");try{jt.makeFromUrl(e,this._delegate.host)}catch(t){throw Mt("refFromUrl() expected a valid full URL but got an invalid one.")}return new yr(lr(this._delegate,e),this)}},{key:"setMaxUploadRetryTime",value:function(e){this._delegate.maxUploadRetryTime=e}},{key:"setMaxOperationRetryTime",value:function(e){this._delegate.maxOperationRetryTime=e}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};fr(this._delegate,e,t,n)}}]),e}();function gr(e){return/^[A-Za-z]+:\/\//.test(e)}function kr(e,t){var n=t.instanceIdentifier,r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("storage").getImmediate({identifier:n});return new mr(r,i)}function br(){return br="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(arguments.length<3?e:n):i.value}},br.apply(this,arguments)}!function(e){var t={TaskState:Fn,TaskEvent:Mn,StringFormat:nn,Storage:mr,Reference:yr};e.INTERNAL.registerComponent(new J("storage-compat",kr,"PUBLIC").setServiceProps(t).setMultipleInstances(!0)),e.registerVersion("@firebase/storage-compat","0.3.2")}(It);var wr,_r="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof n.g?n.g:"undefined"!==typeof self?self:{},xr={},Er=Er||{},Sr=_r||self;function Ir(){}function Tr(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function Cr(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}var Dr="closure_uid_"+(1e9*Math.random()>>>0),Nr=0;function Ar(e,t,n){return e.call.apply(e.bind,arguments)}function Rr(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function Or(e,t,n){return(Or=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Ar:Rr).apply(null,arguments)}function Pr(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function Lr(e,t){function n(){}n.prototype=t.prototype,e.X=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Wb=function(e,n,r){for(var i=Array(arguments.length-2),a=2;a<arguments.length;a++)i[a-2]=arguments[a];return t.prototype[n].apply(e,i)}}function Mr(){this.s=this.s,this.o=this.o}Mr.prototype.s=!1,Mr.prototype.na=function(){var e;!this.s&&(this.s=!0,this.M(),0)&&(e=this,Object.prototype.hasOwnProperty.call(e,Dr)&&e[Dr]||(e[Dr]=++Nr))},Mr.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var Fr=Array.prototype.indexOf?function(e,t){return Array.prototype.indexOf.call(e,t,void 0)}:function(e,t){if("string"===typeof e)return"string"!==typeof t||1!=t.length?-1:e.indexOf(t,0);for(var n=0;n<e.length;n++)if(n in e&&e[n]===t)return n;return-1};function Ur(e){var t=e.length;if(0<t){for(var n=Array(t),r=0;r<t;r++)n[r]=e[r];return n}return[]}function Vr(e,t){for(var n=1;n<arguments.length;n++){var r=arguments[n];if(Tr(r)){var i=e.length||0,a=r.length||0;e.length=i+a;for(var o=0;o<a;o++)e[i+o]=r[o]}else e.push(r)}}function Br(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}Br.prototype.h=function(){this.defaultPrevented=!0};var zr=function(){if(!Sr.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{Sr.addEventListener("test",Ir,t),Sr.removeEventListener("test",Ir,t)}catch(n){}return e}();function jr(e){return/^[\s\xa0]*$/.test(e)}var qr=String.prototype.trim?function(e){return e.trim()}:function(e){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(e)[1]};function Kr(e,t){return e<t?-1:e>t?1:0}function Gr(){var e=Sr.navigator;return e&&(e=e.userAgent)?e:""}function Hr(e){return-1!=Gr().indexOf(e)}function Wr(e){return Wr[" "](e),e}Wr[" "]=Ir;var Qr,Yr=Hr("Opera"),$r=Hr("Trident")||Hr("MSIE"),Xr=Hr("Edge"),Jr=Xr||$r,Zr=Hr("Gecko")&&!(-1!=Gr().toLowerCase().indexOf("webkit")&&!Hr("Edge"))&&!(Hr("Trident")||Hr("MSIE"))&&!Hr("Edge"),ei=-1!=Gr().toLowerCase().indexOf("webkit")&&!Hr("Edge");function ti(){var e=Sr.document;return e?e.documentMode:void 0}e:{var ni="",ri=function(){var e=Gr();return Zr?/rv:([^\);]+)(\)|;)/.exec(e):Xr?/Edge\/([\d\.]+)/.exec(e):$r?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(e):ei?/WebKit\/(\S+)/.exec(e):Yr?/(?:Version)[ \/]?(\S+)/.exec(e):void 0}();if(ri&&(ni=ri?ri[1]:""),$r){var ii=ti();if(null!=ii&&ii>parseFloat(ni)){Qr=String(ii);break e}}Qr=ni}var ai,oi={};function ui(){return function(e){var t=oi;return Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=e(9)}((function(){for(var e=0,t=qr(String(Qr)).split("."),n=qr("9").split("."),r=Math.max(t.length,n.length),i=0;0==e&&i<r;i++){var a=t[i]||"",o=n[i]||"";do{if(a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],0==a[0].length&&0==o[0].length)break;e=Kr(0==a[1].length?0:parseInt(a[1],10),0==o[1].length?0:parseInt(o[1],10))||Kr(0==a[2].length,0==o[2].length)||Kr(a[2],o[2]),a=a[3],o=o[3]}while(0==e)}return 0<=e}))}if(Sr.document&&$r){var si=ti();ai=si||(parseInt(Qr,10)||void 0)}else ai=void 0;var ci=ai;function li(e,t){if(Br.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(Zr){e:{try{Wr(t.nodeName);var i=!0;break e}catch(a){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:fi[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&li.X.h.call(this)}}Lr(li,Br);var fi={2:"touch",3:"pen",4:"mouse"};li.prototype.h=function(){li.X.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var hi="closure_listenable_"+(1e6*Math.random()|0),di=0;function vi(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++di,this.ba=this.ea=!1}function pi(e){e.ba=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function yi(e,t,n){for(var r in e)t.call(n,e[r],r,e)}function mi(e){var t={};for(var n in e)t[n]=e[n];return t}var gi="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ki(e,t){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])e[n]=r[n];for(var a=0;a<gi.length;a++)n=gi[a],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function bi(e){this.src=e,this.g={},this.h=0}function wi(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],a=Fr(i,t);(r=0<=a)&&Array.prototype.splice.call(i,a,1),r&&(pi(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function _i(e,t,n,r){for(var i=0;i<e.length;++i){var a=e[i];if(!a.ba&&a.listener==t&&a.capture==!!n&&a.ha==r)return i}return-1}bi.prototype.add=function(e,t,n,r,i){var a=e.toString();(e=this.g[a])||(e=this.g[a]=[],this.h++);var o=_i(e,t,r,i);return-1<o?(t=e[o],n||(t.ea=!1)):((t=new vi(t,this.src,a,!!r,i)).ea=n,e.push(t)),t};var xi="closure_lm_"+(1e6*Math.random()|0),Ei={};function Si(e,t,n,r,i){if(r&&r.once)return Ti(e,t,n,r,i);if(Array.isArray(t)){for(var a=0;a<t.length;a++)Si(e,t[a],n,r,i);return null}return n=Pi(n),e&&e[hi]?e.N(t,n,Cr(r)?!!r.capture:!!r,i):Ii(e,t,n,!1,r,i)}function Ii(e,t,n,r,i,a){if(!t)throw Error("Invalid event type");var o=Cr(i)?!!i.capture:!!i,u=Ri(e);if(u||(e[xi]=u=new bi(e)),(n=u.add(t,n,r,o,a)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}var t=Ai;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)zr||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(Ni(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Ti(e,t,n,r,i){if(Array.isArray(t)){for(var a=0;a<t.length;a++)Ti(e,t[a],n,r,i);return null}return n=Pi(n),e&&e[hi]?e.O(t,n,Cr(r)?!!r.capture:!!r,i):Ii(e,t,n,!0,r,i)}function Ci(e,t,n,r,i){if(Array.isArray(t))for(var a=0;a<t.length;a++)Ci(e,t[a],n,r,i);else r=Cr(r)?!!r.capture:!!r,n=Pi(n),e&&e[hi]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=_i(a=e.g[t],n,r,i))&&(pi(a[n]),Array.prototype.splice.call(a,n,1),0==a.length&&(delete e.g[t],e.h--)))):e&&(e=Ri(e))&&(t=e.g[t.toString()],e=-1,t&&(e=_i(t,n,r,i)),(n=-1<e?t[e]:null)&&Di(n))}function Di(e){if("number"!==typeof e&&e&&!e.ba){var t=e.src;if(t&&t[hi])wi(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(Ni(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Ri(t))?(wi(n,e),0==n.h&&(n.src=null,t[xi]=null)):pi(e)}}}function Ni(e){return e in Ei?Ei[e]:Ei[e]="on"+e}function Ai(e,t){if(e.ba)e=!0;else{t=new li(t,this);var n=e.listener,r=e.ha||e.src;e.ea&&Di(e),e=n.call(r,t)}return e}function Ri(e){return(e=e[xi])instanceof bi?e:null}var Oi="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pi(e){return"function"===typeof e?e:(e[Oi]||(e[Oi]=function(t){return e.handleEvent(t)}),e[Oi])}function Li(){Mr.call(this),this.i=new bi(this),this.P=this,this.I=null}function Mi(e,t){var n,r=e.I;if(r)for(n=[];r;r=r.I)n.push(r);if(e=e.P,r=t.type||t,"string"===typeof t)t=new Br(t,e);else if(t instanceof Br)t.target=t.target||e;else{var i=t;ki(t=new Br(r,e),i)}if(i=!0,n)for(var a=n.length-1;0<=a;a--){var o=t.g=n[a];i=Fi(o,r,!0,t)&&i}if(i=Fi(o=t.g=e,r,!0,t)&&i,i=Fi(o,r,!1,t)&&i,n)for(a=0;a<n.length;a++)i=Fi(o=t.g=n[a],r,!1,t)&&i}function Fi(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,a=0;a<t.length;++a){var o=t[a];if(o&&!o.ba&&o.capture==n){var u=o.listener,s=o.ha||o.src;o.ea&&wi(e.i,o),i=!1!==u.call(s,r)&&i}}return i&&!r.defaultPrevented}Lr(Li,Mr),Li.prototype[hi]=!0,Li.prototype.removeEventListener=function(e,t,n,r){Ci(this,e,t,n,r)},Li.prototype.M=function(){if(Li.X.M.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)pi(n[r]);delete t.g[e],t.h--}}this.I=null},Li.prototype.N=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},Li.prototype.O=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};var Ui=Sr.JSON.stringify;function Vi(){var e=Wi,t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var Bi,zi=function(){function e(){p(this,e),this.h=this.g=null}return m(e,[{key:"add",value:function(e,t){var n=ji.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}}]),e}(),ji=new(function(){function e(t,n){p(this,e),this.i=t,this.j=n,this.h=0,this.g=null}return m(e,[{key:"get",value:function(){var e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}]),e}())((function(){return new qi}),(function(e){return e.reset()})),qi=function(){function e(){p(this,e),this.next=this.g=this.h=null}return m(e,[{key:"set",value:function(e,t){this.h=e,this.g=t,this.next=null}},{key:"reset",value:function(){this.next=this.g=this.h=null}}]),e}();function Ki(e){Sr.setTimeout((function(){throw e}),0)}function Gi(e,t){Bi||function(){var e=Sr.Promise.resolve(void 0);Bi=function(){e.then(Qi)}}(),Hi||(Bi(),Hi=!0),Wi.add(e,t)}var Hi=!1,Wi=new zi;function Qi(){for(var e;e=Vi();){try{e.h.call(e.g)}catch(n){Ki(n)}var t=ji;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}Hi=!1}function Yi(e,t){Li.call(this),this.h=e||1,this.g=t||Sr,this.j=Or(this.lb,this),this.l=Date.now()}function $i(e){e.ca=!1,e.R&&(e.g.clearTimeout(e.R),e.R=null)}function Xi(e,t,n){if("function"===typeof e)n&&(e=Or(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=Or(e.handleEvent,e)}return 2147483647<Number(t)?-1:Sr.setTimeout(e,t||0)}function Ji(e){e.g=Xi((function(){e.g=null,e.i&&(e.i=!1,Ji(e))}),e.j);var t=e.h;e.h=null,e.m.apply(null,t)}Lr(Yi,Li),(wr=Yi.prototype).ca=!1,wr.R=null,wr.lb=function(){if(this.ca){var e=Date.now()-this.l;0<e&&e<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-e):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Mi(this,"tick"),this.ca&&($i(this),this.start()))}},wr.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},wr.M=function(){Yi.X.M.call(this),$i(this),delete this.g};var Zi=function(e){w(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).m=e,i.j=r,i.h=null,i.i=!1,i.g=null,i}return m(n,[{key:"l",value:function(e){this.h=arguments,this.g?this.i=!0:Ji(this)}},{key:"M",value:function(){br(_(n.prototype),"M",this).call(this),this.g&&(Sr.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}]),n}(Mr);function ea(e){Mr.call(this),this.h=e,this.g={}}Lr(ea,Mr);var ta=[];function na(e,t,n,r){Array.isArray(n)||(n&&(ta[0]=n.toString()),n=ta);for(var i=0;i<n.length;i++){var a=Si(t,n[i],r||e.handleEvent,!1,e.h||e);if(!a)break;e.g[a.key]=a}}function ra(e){yi(e.g,(function(e,t){this.g.hasOwnProperty(t)&&Di(e)}),e),e.g={}}function ia(){this.g=!0}function aa(e,t,n,r){e.info((function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var o=1;o<i.length;o++)i[o]=""}}}return Ui(n)}catch(u){return t}}(e,n)+(r?" "+r:"")}))}ea.prototype.M=function(){ea.X.M.call(this),ra(this)},ea.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ia.prototype.Aa=function(){this.g=!1},ia.prototype.info=function(){};var oa={},ua=null;function sa(){return ua=ua||new Li}function ca(e){Br.call(this,oa.Pa,e)}function la(e){var t=sa();Mi(t,new ca(t))}function fa(e,t){Br.call(this,oa.STAT_EVENT,e),this.stat=t}function ha(e){var t=sa();Mi(t,new fa(t,e))}function da(e,t){Br.call(this,oa.Qa,e),this.size=t}function va(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return Sr.setTimeout((function(){e()}),t)}oa.Pa="serverreachability",Lr(ca,Br),oa.STAT_EVENT="statevent",Lr(fa,Br),oa.Qa="timingevent",Lr(da,Br);var pa={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},ya={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function ma(){}function ga(e){return e.h||(e.h=e.i())}function ka(){}ma.prototype.h=null;var ba,wa={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function _a(){Br.call(this,"d")}function xa(){Br.call(this,"c")}function Ea(){}function Sa(e,t,n,r){this.l=e,this.j=t,this.m=n,this.U=r||1,this.S=new ea(this),this.O=Ta,e=Jr?125:void 0,this.T=new Yi(e),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new Ia}function Ia(){this.i=null,this.g="",this.h=!1}Lr(_a,Br),Lr(xa,Br),Lr(Ea,ma),Ea.prototype.g=function(){return new XMLHttpRequest},Ea.prototype.i=function(){return{}},ba=new Ea;var Ta=45e3,Ca={},Da={};function Na(e,t,n){e.K=1,e.v=Ya(Ka(t)),e.s=n,e.P=!0,Aa(e,null)}function Aa(e,t){e.F=Date.now(),La(e),e.A=Ka(e.v);var n=e.A,r=e.U;Array.isArray(r)||(r=[String(r)]),so(n.i,"t",r),e.C=0,n=e.l.H,e.h=new Ia,e.g=lu(e.l,n?t:null,!e.s),0<e.N&&(e.L=new Zi(Or(e.La,e,e.g),e.N)),na(e.S,e.g,"readystatechange",e.ib),t=e.H?mi(e.H):{},e.s?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.da(e.A,e.u,e.s,t)):(e.u="GET",e.g.da(e.A,e.u,null,t)),la(),function(e,t,n,r,i,a){e.info((function(){if(e.g)if(a)for(var o="",u=a.split("&"),s=0;s<u.length;s++){var c=u[s].split("=");if(1<c.length){var l=c[0];c=c[1];var f=l.split("_");o=2<=f.length&&"type"==f[1]?o+(l+"=")+c+"&":o+(l+"=redacted&")}}else o=null;else o=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+o}))}(e.j,e.u,e.A,e.m,e.U,e.s)}function Ra(e){return!!e.g&&("GET"==e.u&&2!=e.K&&e.l.Da)}function Oa(e,t,n){for(var r,i=!0;!e.I&&e.C<n.length;){if((r=Pa(e,n))==Da){4==t&&(e.o=4,ha(14),i=!1),aa(e.j,e.m,null,"[Incomplete Response]");break}if(r==Ca){e.o=4,ha(15),aa(e.j,e.m,n,"[Invalid Chunk]"),i=!1;break}aa(e.j,e.m,r,null),Ba(e,r)}Ra(e)&&r!=Da&&r!=Ca&&(e.h.g="",e.C=0),4!=t||0!=n.length||e.h.h||(e.o=1,ha(16),i=!1),e.i=e.i&&i,i?0<n.length&&!e.$&&(e.$=!0,(t=e.l).g==e&&t.$&&!t.K&&(t.j.info("Great, no buffering proxy detected. Bytes received: "+n.length),nu(t),t.K=!0,ha(11))):(aa(e.j,e.m,n,"[Invalid Chunked Response]"),Va(e),Ua(e))}function Pa(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Da:(n=Number(t.substring(n,r)),isNaN(n)?Ca:(r+=1)+n>t.length?Da:(t=t.substr(r,n),e.C=r+n,t))}function La(e){e.V=Date.now()+e.O,Ma(e,e.O)}function Ma(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=va(Or(e.gb,e),t)}function Fa(e){e.B&&(Sr.clearTimeout(e.B),e.B=null)}function Ua(e){0==e.l.G||e.I||au(e.l,e)}function Va(e){Fa(e);var t=e.L;t&&"function"==typeof t.na&&t.na(),e.L=null,$i(e.T),ra(e.S),e.g&&(t=e.g,e.g=null,t.abort(),t.na())}function Ba(e,t){try{var n=e.l;if(0!=n.G&&(n.g==e||mo(n.h,e)))if(!e.J&&mo(n.h,e)&&3==n.G){try{var r=n.Fa.g.parse(t)}catch(a){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;iu(n),Qo(n)}tu(n),ha(18)}}else n.Ba=i[1],0<n.Ba-n.T&&37500>i[2]&&n.L&&0==n.A&&!n.v&&(n.v=va(Or(n.cb,n),6e3));if(1>=yo(n.h)&&n.ja){try{n.ja()}catch(a){}n.ja=void 0}}else uu(n,11)}else if((e.J||n.g==e)&&iu(n),!jr(t))for(i=n.Fa.g.parse(t),t=0;t<i.length;t++){var a=i[t];if(n.T=a[0],a=a[1],2==n.G)if("c"==a[0]){n.I=a[1],n.ka=a[2];var o=a[3];null!=o&&(n.ma=o,n.j.info("VER="+n.ma));var u=a[4];null!=u&&(n.Ca=u,n.j.info("SVER="+n.Ca));var s=a[5];null!=s&&"number"===typeof s&&0<s&&(r=1.5*s,n.J=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=e.g;if(c){var l=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var f=r.h;f.g||-1==l.indexOf("spdy")&&-1==l.indexOf("quic")&&-1==l.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(go(f,f.h),f.h=null))}if(r.D){var h=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;h&&(r.za=h,Qa(r.F,r.D,h))}}n.G=3,n.l&&n.l.xa(),n.$&&(n.P=Date.now()-e.F,n.j.info("Handshake RTT: "+n.P+"ms"));var d=e;if((r=n).sa=cu(r,r.H?r.ka:null,r.V),d.J){ko(r.h,d);var v=d,p=r.J;p&&v.setTimeout(p),v.B&&(Fa(v),La(v)),r.g=d}else eu(r);0<n.i.length&&$o(n)}else"stop"!=a[0]&&"close"!=a[0]||uu(n,7);else 3==n.G&&("stop"==a[0]||"close"==a[0]?"stop"==a[0]?uu(n,7):Wo(n):"noop"!=a[0]&&n.l&&n.l.wa(a),n.A=0)}la()}catch(a){}}function za(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(Tr(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.oa&&"function"==typeof e.oa)return e.oa();if(!e.W||"function"!=typeof e.W){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(Tr(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}for(var r in t=[],n=0,e)t[n++]=r;return t}}}(e),r=function(e){if(e.W&&"function"==typeof e.W)return e.W();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(Tr(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}(wr=Sa.prototype).setTimeout=function(e){this.O=e},wr.ib=function(e){e=e.target;var t=this.L;t&&3==zo(e)?t.l():this.La(e)},wr.La=function(e){try{if(e==this.g)e:{var t=zo(this.g),n=this.g.Ea();this.g.aa();if(!(3>t)&&(3!=t||Jr||this.g&&(this.h.h||this.g.fa()||jo(this.g)))){this.I||4!=t||7==n||la(),Fa(this);var r=this.g.aa();this.Y=r;t:if(Ra(this)){var i=jo(this.g);e="";var a=i.length,o=4==zo(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Va(this),Ua(this);var u="";break t}this.h.i=new Sr.TextDecoder}for(n=0;n<a;n++)this.h.h=!0,e+=this.h.i.decode(i[n],{stream:o&&n==a-1});i.splice(0,a),this.h.g+=e,this.C=0,u=this.h.g}else u=this.g.fa();if(this.i=200==r,function(e,t,n,r,i,a,o){e.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+a+" "+o}))}(this.j,this.u,this.A,this.m,this.U,t,r),this.i){if(this.Z&&!this.J){t:{if(this.g){var s,c=this.g;if((s=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!jr(s)){var l=s;break t}}l=null}if(!(r=l)){this.i=!1,this.o=3,ha(12),Va(this),Ua(this);break e}aa(this.j,this.m,r,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Ba(this,r)}this.P?(Oa(this,t,u),Jr&&this.i&&3==t&&(na(this.S,this.T,"tick",this.hb),this.T.start())):(aa(this.j,this.m,u,null),Ba(this,u)),4==t&&Va(this),this.i&&!this.I&&(4==t?au(this.l,this):(this.i=!1,La(this)))}else 400==r&&0<u.indexOf("Unknown SID")?(this.o=3,ha(12)):(this.o=0,ha(13)),Va(this),Ua(this)}}}catch(t){}},wr.hb=function(){if(this.g){var e=zo(this.g),t=this.g.fa();this.C<t.length&&(Fa(this),Oa(this,e,t),this.i&&4!=e&&La(this))}},wr.cancel=function(){this.I=!0,Va(this)},wr.gb=function(){this.B=null;var e=Date.now();0<=e-this.V?(function(e,t){e.info((function(){return"TIMEOUT: "+t}))}(this.j,this.A),2!=this.K&&(la(),ha(17)),Va(this),this.o=2,Ua(this)):Ma(this,this.V-e)};var ja=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function qa(e,t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,e instanceof qa){this.h=void 0!==t?t:e.h,Ga(this,e.j),this.s=e.s,this.g=e.g,Ha(this,e.m),this.l=e.l,t=e.i;var n=new io;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),Wa(this,n),this.o=e.o}else e&&(n=String(e).match(ja))?(this.h=!!t,Ga(this,n[1]||"",!0),this.s=$a(n[2]||""),this.g=$a(n[3]||"",!0),Ha(this,n[4]),this.l=$a(n[5]||"",!0),Wa(this,n[6]||"",!0),this.o=$a(n[7]||"")):(this.h=!!t,this.i=new io(null,this.h))}function Ka(e){return new qa(e)}function Ga(e,t,n){e.j=n?$a(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function Ha(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.m=t}else e.m=null}function Wa(e,t,n){t instanceof io?(e.i=t,function(e,t){t&&!e.j&&(ao(e),e.i=null,e.g.forEach((function(e,t){var n=t.toLowerCase();t!=n&&(oo(this,t),so(this,n,e))}),e)),e.j=t}(e.i,e.h)):(n||(t=Xa(t,no)),e.i=new io(t,e.h))}function Qa(e,t,n){e.i.set(t,n)}function Ya(e){return Qa(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function $a(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Xa(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Ja),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Ja(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}qa.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Xa(t,Za,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.s)&&e.push(Xa(t,Za,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Xa(n,"/"==n.charAt(0)?to:eo,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.o)&&e.push("#",Xa(n,ro)),e.join("")};var Za=/[#\/\?@]/g,eo=/[#\?:]/g,to=/[#\?]/g,no=/[#\?@]/g,ro=/#/g;function io(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function ao(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var a=e[n].substring(0,r);i=e[n].substring(r+1)}else a=e[n];t(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,(function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)})))}function oo(e,t){ao(e),t=co(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function uo(e,t){return ao(e),t=co(e,t),e.g.has(t)}function so(e,t,n){oo(e,t),0<n.length&&(e.i=null,e.g.set(co(e,t),Ur(n)),e.h+=n.length)}function co(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}(wr=io.prototype).add=function(e,t){ao(this),this.i=null,e=co(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},wr.forEach=function(e,t){ao(this),this.g.forEach((function(n,r){n.forEach((function(n){e.call(t,n,r,this)}),this)}),this)},wr.oa=function(){ao(this);for(var e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[],r=0;r<t.length;r++)for(var i=e[r],a=0;a<i.length;a++)n.push(t[r]);return n},wr.W=function(e){ao(this);var t=[];if("string"===typeof e)uo(this,e)&&(t=t.concat(this.g.get(co(this,e))));else{e=Array.from(this.g.values());for(var n=0;n<e.length;n++)t=t.concat(e[n])}return t},wr.set=function(e,t){return ao(this),this.i=null,uo(this,e=co(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},wr.get=function(e,t){return e&&0<(e=this.W(e)).length?String(e[0]):t},wr.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var e=[],t=Array.from(this.g.keys()),n=0;n<t.length;n++){var r=t[n],i=encodeURIComponent(String(r)),a=this.W(r);for(r=0;r<a.length;r++){var o=i;""!==a[r]&&(o+="="+encodeURIComponent(String(a[r]))),e.push(o)}}return this.i=e.join("&")};var lo=m((function e(t,n){p(this,e),this.h=t,this.g=n}));function fo(e){this.l=e||vo,Sr.PerformanceNavigationTiming?e=0<(e=Sr.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(Sr.g&&Sr.g.Ga&&Sr.g.Ga()&&Sr.g.Ga().$b),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var ho,vo=10;function po(e){return!!e.h||!!e.g&&e.g.size>=e.j}function yo(e){return e.h?1:e.g?e.g.size:0}function mo(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function go(e,t){e.g?e.g.add(t):e.h=t}function ko(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function bo(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){var t,n=e.i,r=g(e.g.values());try{for(r.s();!(t=r.n()).done;){var i=t.value;n=n.concat(i.D)}}catch(a){r.e(a)}finally{r.f()}return n}return Ur(e.i)}function wo(){}function _o(){this.g=new wo}function xo(e,t,n){var r=n||"";try{za(e,(function(e,n){var i=e;Cr(e)&&(i=Ui(e)),t.push(r+n+"="+encodeURIComponent(i))}))}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Eo(e,t,n,r,i){try{t.onload=null,t.onerror=null,t.onabort=null,t.ontimeout=null,i(r)}catch(a){}}function So(e){this.l=e.ac||null,this.j=e.jb||!1}function Io(e,t){Li.call(this),this.D=e,this.u=t,this.m=void 0,this.readyState=To,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}fo.prototype.cancel=function(){if(this.i=bo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){var e,t=g(this.g.values());try{for(t.s();!(e=t.n()).done;){e.value.cancel()}}catch(n){t.e(n)}finally{t.f()}this.g.clear()}},wo.prototype.stringify=function(e){return Sr.JSON.stringify(e,void 0)},wo.prototype.parse=function(e){return Sr.JSON.parse(e,void 0)},Lr(So,ma),So.prototype.g=function(){return new Io(this.l,this.j)},So.prototype.i=(ho={},function(){return ho}),Lr(Io,Li);var To=0;function Co(e){e.j.read().then(e.Ta.bind(e)).catch(e.ga.bind(e))}function Do(e){e.readyState=4,e.l=null,e.j=null,e.A=null,No(e)}function No(e){e.onreadystatechange&&e.onreadystatechange.call(e)}(wr=Io.prototype).open=function(e,t){if(this.readyState!=To)throw this.abort(),Error("Error reopening a connection");this.C=e,this.B=t,this.readyState=1,No(this)},wr.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var t={headers:this.v,method:this.C,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||Sr).fetch(new Request(this.B,t)).then(this.Wa.bind(this),this.ga.bind(this))},wr.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch((function(){})),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Do(this)),this.readyState=To},wr.Wa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,No(this)),this.g&&(this.readyState=3,No(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if("undefined"!==typeof Sr.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Co(this)}else e.text().then(this.Va.bind(this),this.ga.bind(this))},wr.Ta=function(e){if(this.g){if(this.u&&e.value)this.response.push(e.value);else if(!this.u){var t=e.value?e.value:new Uint8Array(0);(t=this.A.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Do(this):No(this),3==this.readyState&&Co(this)}},wr.Va=function(e){this.g&&(this.response=this.responseText=e,Do(this))},wr.Ua=function(e){this.g&&(this.response=e,Do(this))},wr.ga=function(){this.g&&Do(this)},wr.setRequestHeader=function(e,t){this.v.append(e,t)},wr.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},wr.getAllResponseHeaders=function(){if(!this.h)return"";for(var e=[],t=this.h.entries(),n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Io.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}});var Ao=Sr.JSON.parse;function Ro(e){Li.call(this),this.headers=new Map,this.u=e||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Oo,this.K=this.L=!1}Lr(Ro,Li);var Oo="",Po=/^https?$/i,Lo=["POST","PUT"];function Mo(e,t){e.h=!1,e.g&&(e.l=!0,e.g.abort(),e.l=!1),e.j=t,e.m=5,Fo(e),Vo(e)}function Fo(e){e.D||(e.D=!0,Mi(e,"complete"),Mi(e,"error"))}function Uo(e){if(e.h&&"undefined"!=typeof Er&&(!e.C[1]||4!=zo(e)||2!=e.aa()))if(e.v&&4==zo(e))Xi(e.Ha,0,e);else if(Mi(e,"readystatechange"),4==zo(e)){e.h=!1;try{var t,n=e.aa();e:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break e;default:r=!1}if(!(t=r)){var i;if(i=0===n){var a=String(e.H).match(ja)[1]||null;if(!a&&Sr.self&&Sr.self.location){var o=Sr.self.location.protocol;a=o.substr(0,o.length-1)}i=!Po.test(a?a.toLowerCase():"")}t=i}if(t)Mi(e,"complete"),Mi(e,"success");else{e.m=6;try{var u=2<zo(e)?e.g.statusText:""}catch(s){u=""}e.j=u+" ["+e.aa()+"]",Fo(e)}}finally{Vo(e)}}}function Vo(e,t){if(e.g){Bo(e);var n=e.g,r=e.C[0]?Ir:null;e.g=null,e.C=null,t||Mi(e,"ready");try{n.onreadystatechange=r}catch(i){}}}function Bo(e){e.g&&e.K&&(e.g.ontimeout=null),e.A&&(Sr.clearTimeout(e.A),e.A=null)}function zo(e){return e.g?e.g.readyState:0}function jo(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.J){case Oo:case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(Tu){return null}}function qo(e){var t="";return yi(e,(function(e,n){t+=n,t+=":",t+=e,t+="\r\n"})),t}function Ko(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=qo(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):Qa(e,t,n))}function Go(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Ho(e){this.Ca=0,this.i=[],this.j=new ia,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Go("failFast",!1,e),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Go("baseRetryDelayMs",5e3,e),this.bb=Go("retryDelaySeedMs",1e4,e),this.$a=Go("forwardChannelMaxRetries",2,e),this.ta=Go("forwardChannelRequestTimeoutMs",2e4,e),this.ra=e&&e.xmlHttpFactory||void 0,this.Da=e&&e.Zb||!1,this.J=void 0,this.H=e&&e.supportsCrossDomainXhr||!1,this.I="",this.h=new fo(e&&e.concurrentRequestLimit),this.Fa=new _o,this.O=e&&e.fastHandshake||!1,this.N=e&&e.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=e&&e.Xb||!1,e&&e.Aa&&this.j.Aa(),e&&e.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&e&&e.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function Wo(e){if(Yo(e),3==e.G){var t=e.U++,n=Ka(e.F);Qa(n,"SID",e.I),Qa(n,"RID",t),Qa(n,"TYPE","terminate"),Jo(e,n),(t=new Sa(e,e.j,t,void 0)).K=2,t.v=Ya(Ka(n)),n=!1,Sr.navigator&&Sr.navigator.sendBeacon&&(n=Sr.navigator.sendBeacon(t.v.toString(),"")),!n&&Sr.Image&&((new Image).src=t.v,n=!0),n||(t.g=lu(t.l,null),t.g.da(t.v)),t.F=Date.now(),La(t)}su(e)}function Qo(e){e.g&&(nu(e),e.g.cancel(),e.g=null)}function Yo(e){Qo(e),e.u&&(Sr.clearTimeout(e.u),e.u=null),iu(e),e.h.cancel(),e.m&&("number"===typeof e.m&&Sr.clearTimeout(e.m),e.m=null)}function $o(e){po(e.h)||e.m||(e.m=!0,Gi(e.Ja,e),e.C=0)}function Xo(e,t){var n;n=t?t.m:e.U++;var r=Ka(e.F);Qa(r,"SID",e.I),Qa(r,"RID",n),Qa(r,"AID",e.T),Jo(e,r),e.o&&e.s&&Ko(r,e.o,e.s),n=new Sa(e,e.j,n,e.C+1),null===e.o&&(n.H=e.s),t&&(e.i=t.D.concat(e.i)),t=Zo(e,n,1e3),n.setTimeout(Math.round(.5*e.ta)+Math.round(.5*e.ta*Math.random())),go(e.h,n),Na(n,r,t)}function Jo(e,t){e.ia&&yi(e.ia,(function(e,n){Qa(t,n,e)})),e.l&&za({},(function(e,n){Qa(t,n,e)}))}function Zo(e,t,n){n=Math.min(e.i.length,n);var r=e.l?Or(e.l.Ra,e.l,e):null;e:for(var i=e.i,a=-1;;){var o=["count="+n];-1==a?0<n?(a=i[0].h,o.push("ofs="+a)):a=0:o.push("ofs="+a);for(var u=!0,s=0;s<n;s++){var c=i[s].h,l=i[s].g;if(0>(c-=a))a=Math.max(0,i[s].h-100),u=!1;else try{xo(l,o,"req"+c+"_")}catch(Fu){r&&r(l)}}if(u){r=o.join("&");break e}}return e=e.i.splice(0,n),t.D=e,r}function eu(e){e.g||e.u||(e.Z=1,Gi(e.Ia,e),e.A=0)}function tu(e){return!(e.g||e.u||3<=e.A)&&(e.Z++,e.u=va(Or(e.Ia,e),ou(e,e.A)),e.A++,!0)}function nu(e){null!=e.B&&(Sr.clearTimeout(e.B),e.B=null)}function ru(e){e.g=new Sa(e,e.j,"rpc",e.Z),null===e.o&&(e.g.H=e.s),e.g.N=0;var t=Ka(e.sa);Qa(t,"RID","rpc"),Qa(t,"SID",e.I),Qa(t,"CI",e.L?"0":"1"),Qa(t,"AID",e.T),Qa(t,"TYPE","xmlhttp"),Jo(e,t),e.o&&e.s&&Ko(t,e.o,e.s),e.J&&e.g.setTimeout(e.J);var n=e.g;e=e.ka,n.K=1,n.v=Ya(Ka(t)),n.s=null,n.P=!0,Aa(n,e)}function iu(e){null!=e.v&&(Sr.clearTimeout(e.v),e.v=null)}function au(e,t){var n=null;if(e.g==t){iu(e),nu(e),e.g=null;var r=2}else{if(!mo(e.h,t))return;n=t.D,ko(e.h,t),r=1}if(0!=e.G)if(e.pa=t.Y,t.i)if(1==r){n=t.s?t.s.length:0,t=Date.now()-t.F;var i=e.C;Mi(r=sa(),new da(r,n)),$o(e)}else eu(e);else if(3==(i=t.o)||0==i&&0<e.pa||!(1==r&&function(e,t){return!(yo(e.h)>=e.h.j-(e.m?1:0))&&(e.m?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.C>=(e.Za?0:e.$a))&&(e.m=va(Or(e.Ja,e,t),ou(e,e.C)),e.C++,!0))}(e,t)||2==r&&tu(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:uu(e,5);break;case 4:uu(e,10);break;case 3:uu(e,6);break;default:uu(e,2)}}function ou(e,t){var n=e.Xa+Math.floor(Math.random()*e.bb);return e.l||(n*=2),n*t}function uu(e,t){if(e.j.info("Error code "+t),2==t){var n=null;e.l&&(n=null);var r=Or(e.kb,e);n||(n=new qa("//www.google.com/images/cleardot.gif"),Sr.location&&"http"==Sr.location.protocol||Ga(n,"https"),Ya(n)),function(e,t){var n=new ia;if(Sr.Image){var r=new Image;r.onload=Pr(Eo,n,r,"TestLoadImage: loaded",!0,t),r.onerror=Pr(Eo,n,r,"TestLoadImage: error",!1,t),r.onabort=Pr(Eo,n,r,"TestLoadImage: abort",!1,t),r.ontimeout=Pr(Eo,n,r,"TestLoadImage: timeout",!1,t),Sr.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=e}else t(!1)}(n.toString(),r)}else ha(2);e.G=0,e.l&&e.l.va(t),su(e),Yo(e)}function su(e){if(e.G=0,e.la=[],e.l){var t=bo(e.h);0==t.length&&0==e.i.length||(Vr(e.la,t),Vr(e.la,e.i),e.h.i.length=0,Ur(e.i),e.i.length=0),e.l.ua()}}function cu(e,t,n){var r=n instanceof qa?Ka(n):new qa(n,void 0);if(""!=r.g)t&&(r.g=t+"."+r.g),Ha(r,r.m);else{var i=Sr.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new qa(null,void 0);r&&Ga(a,r),t&&(a.g=t),i&&Ha(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.za,n&&t&&Qa(r,n,t),Qa(r,"VER",e.ma),Jo(e,r),r}function lu(e,t,n){if(t&&!e.H)throw Error("Can't create secondary domain capable XhrIo object.");return(t=n&&e.Da&&!e.ra?new Ro(new So({jb:!0})):new Ro(e.ra)).Ka(e.H),t}function fu(){}function hu(){if($r&&!(10<=Number(ci)))throw Error("Environmental error: no available transport.")}function du(e,t){Li.call(this),this.g=new Ho(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.s=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.ya&&(e?e["X-WebChannel-Client-Profile"]=t.ya:e={"X-WebChannel-Client-Profile":t.ya}),this.g.S=e,(e=t&&t.Yb)&&!jr(e)&&(this.g.o=e),this.A=t&&t.supportsCrossDomainXhr||!1,this.v=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!jr(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new yu(this)}function vu(e){_a.call(this);var t=e.__sm__;if(t){e:{for(var n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function pu(){xa.call(this),this.status=1}function yu(e){this.g=e}(wr=Ro.prototype).Ka=function(e){this.L=e},wr.da=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+e);t=t?t.toUpperCase():"GET",this.H=e,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():ba.g(),this.C=this.u?ga(this.u):ga(ba),this.g.onreadystatechange=Or(this.Ha,this);try{this.F=!0,this.g.open(t,String(e),!0),this.F=!1}catch(u){return void Mo(this,u)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));var a,o=g(r.keys());try{for(o.s();!(a=o.n()).done;){var u=a.value;n.set(u,r.get(u))}}catch(v){o.e(v)}finally{o.f()}}r=Array.from(n.keys()).find((function(e){return"content-type"==e.toLowerCase()})),i=Sr.FormData&&e instanceof Sr.FormData,!(0<=Fr(Lo,t))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");var c,l=g(n);try{for(l.s();!(c=l.n()).done;){var f=s(c.value,2),h=f[0],d=f[1];this.g.setRequestHeader(h,d)}}catch(v){l.e(v)}finally{l.f()}this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Bo(this),0<this.B&&((this.K=function(e){return $r&&ui()&&"number"===typeof e.timeout&&void 0!==e.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Or(this.qa,this)):this.A=Xi(this.qa,this.B,this)),this.v=!0,this.g.send(e),this.v=!1}catch(u){Mo(this,u)}},wr.qa=function(){"undefined"!=typeof Er&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Mi(this,"timeout"),this.abort(8))},wr.abort=function(e){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=e||7,Mi(this,"complete"),Mi(this,"abort"),Vo(this))},wr.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Vo(this,!0)),Ro.X.M.call(this)},wr.Ha=function(){this.s||(this.F||this.v||this.l?Uo(this):this.fb())},wr.fb=function(){Uo(this)},wr.aa=function(){try{return 2<zo(this)?this.g.status:-1}catch(ho){return-1}},wr.fa=function(){try{return this.g?this.g.responseText:""}catch(ho){return""}},wr.Sa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Ao(t)}},wr.Ea=function(){return this.m},wr.Oa=function(){return"string"===typeof this.j?this.j:String(this.j)},(wr=Ho.prototype).ma=8,wr.G=1,wr.Ja=function(e){if(this.m)if(this.m=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;var t=new Sa(this,this.j,e,void 0),n=this.s;if(this.S&&(n?ki(n=mi(n),this.S):n=this.S),null!==this.o||this.N||(t.H=n,n=null),this.O)e:{for(var r=0,i=0;i<this.i.length;i++){var a=this.i[i];if(void 0===(a="__data__"in a.g&&"string"===typeof(a=a.g.__data__)?a.length:void 0))break;if(4096<(r+=a)){r=i;break e}if(4096===r||i===this.i.length-1){r=i+1;break e}}r=1e3}else r=1e3;r=Zo(this,t,r),Qa(i=Ka(this.F),"RID",e),Qa(i,"CVER",22),this.D&&Qa(i,"X-HTTP-Session-Id",this.D),Jo(this,i),n&&(this.N?r="headers="+encodeURIComponent(String(qo(n)))+"&"+r:this.o&&Ko(i,this.o,n)),go(this.h,t),this.Ya&&Qa(i,"TYPE","init"),this.O?(Qa(i,"$req",r),Qa(i,"SID","null"),t.Z=!0,Na(t,i,null)):Na(t,i,r),this.G=2}}else 3==this.G&&(e?Xo(this,e):0==this.i.length||po(this.h)||Xo(this))},wr.Ia=function(){if(this.u=null,ru(this),this.$&&!(this.K||null==this.g||0>=this.P)){var e=2*this.P;this.j.info("BP detection timer enabled: "+e),this.B=va(Or(this.eb,this),e)}},wr.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,ha(10),Qo(this),ru(this))},wr.cb=function(){null!=this.v&&(this.v=null,Qo(this),tu(this),ha(19))},wr.kb=function(e){e?(this.j.info("Successfully pinged google.com"),ha(2)):(this.j.info("Failed to ping google.com"),ha(1))},(wr=fu.prototype).xa=function(){},wr.wa=function(){},wr.va=function(){},wr.ua=function(){},wr.Ra=function(){},hu.prototype.g=function(e,t){return new du(e,t)},Lr(du,Li),du.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var e=this.g,t=this.l,n=this.h||void 0;ha(0),e.V=t,e.ia=n||{},e.L=e.Y,e.F=cu(e,null,e.V),$o(e)},du.prototype.close=function(){Wo(this.g)},du.prototype.u=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.v&&((n={}).__data__=Ui(e),e=n);t.i.push(new lo(t.ab++,e)),3==t.G&&$o(t)},du.prototype.M=function(){this.g.l=null,delete this.j,Wo(this.g),delete this.g,du.X.M.call(this)},Lr(vu,_a),Lr(pu,xa),Lr(yu,fu),yu.prototype.xa=function(){Mi(this.g,"a")},yu.prototype.wa=function(e){Mi(this.g,new vu(e))},yu.prototype.va=function(e){Mi(this.g,new pu)},yu.prototype.ua=function(){Mi(this.g,"b")},hu.prototype.createWebChannel=hu.prototype.g,du.prototype.send=du.prototype.u,du.prototype.open=du.prototype.m,du.prototype.close=du.prototype.close,pa.NO_ERROR=0,pa.TIMEOUT=8,pa.HTTP_ERROR=6,ya.COMPLETE="complete",ka.EventType=wa,wa.OPEN="a",wa.CLOSE="b",wa.ERROR="c",wa.MESSAGE="d",Li.prototype.listen=Li.prototype.N,Ro.prototype.listenOnce=Ro.prototype.O,Ro.prototype.getLastError=Ro.prototype.Oa,Ro.prototype.getLastErrorCode=Ro.prototype.Ea,Ro.prototype.getStatus=Ro.prototype.aa,Ro.prototype.getResponseJson=Ro.prototype.Sa,Ro.prototype.getResponseText=Ro.prototype.fa,Ro.prototype.send=Ro.prototype.da,Ro.prototype.setWithCredentials=Ro.prototype.Ka;var mu=xr.createWebChannelTransport=function(){return new hu},gu=xr.getStatEventTarget=function(){return sa()},ku=xr.ErrorCode=pa,bu=xr.EventType=ya,wu=xr.Event=oa,_u=xr.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},xu=xr.FetchXmlHttpFactory=So,Eu=xr.WebChannel=ka,Su=xr.XhrIo=Ro,Iu="@firebase/firestore",Tu=function(){function e(t){p(this,e),this.uid=t}return m(e,[{key:"isAuthenticated",value:function(){return null!=this.uid}},{key:"toKey",value:function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}},{key:"isEqual",value:function(e){return e.uid===this.uid}}]),e}();Tu.UNAUTHENTICATED=new Tu(null),Tu.GOOGLE_CREDENTIALS=new Tu("google-credentials-uid"),Tu.FIRST_PARTY=new Tu("first-party-uid"),Tu.MOCK_USER=new Tu("mock-user");var Cu="9.20.0",Du=new ce("@firebase/firestore");function Nu(){return Du.logLevel}function Au(e){if(Du.logLevel<=ne.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Pu);Du.debug.apply(Du,["Firestore (".concat(Cu,"): ").concat(e)].concat(X(i)))}}function Ru(e){if(Du.logLevel<=ne.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Pu);Du.error.apply(Du,["Firestore (".concat(Cu,"): ").concat(e)].concat(X(i)))}}function Ou(e){if(Du.logLevel<=ne.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i=n.map(Pu);Du.warn.apply(Du,["Firestore (".concat(Cu,"): ").concat(e)].concat(X(i)))}}function Pu(e){if("string"==typeof e)return e;try{return t=e,JSON.stringify(t)}catch(t){return e}var t}function Lu(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state",t="FIRESTORE (".concat(Cu,") INTERNAL ASSERTION FAILED: ")+e;throw Ru(t),new Error(t)}function Mu(e,t){e||Lu()}function Fu(e,t){return e}var Uu={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Vu=function(e){w(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r)).code=e,i.message=r,i.toString=function(){return"".concat(i.name,": [code=").concat(i.code,"]: ").concat(i.message)},i}return m(n)}(z),Bu=m((function e(){var t=this;p(this,e),this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))})),zu=m((function e(t,n){p(this,e),this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(t))})),ju=function(){function e(){p(this,e)}return m(e,[{key:"getToken",value:function(){return Promise.resolve(null)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Tu.UNAUTHENTICATED)}))}},{key:"shutdown",value:function(){}}]),e}(),qu=function(){function e(t){p(this,e),this.token=t,this.changeListener=null}return m(e,[{key:"getToken",value:function(){return Promise.resolve(this.token)}},{key:"invalidateToken",value:function(){}},{key:"start",value:function(e,t){var n=this;this.changeListener=t,e.enqueueRetryable((function(){return t(n.token.user)}))}},{key:"shutdown",value:function(){this.changeListener=null}}]),e}(),Ku=function(){function e(t){p(this,e),this.t=t,this.currentUser=Tu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}return m(e,[{key:"start",value:function(e,t){var n=this,r=this.i,i=function(e){return n.i!==r?(r=n.i,t(e)):Promise.resolve()},a=new Bu;this.o=function(){n.i++,n.currentUser=n.u(),a.resolve(),a=new Bu,e.enqueueRetryable((function(){return i(n.currentUser)}))};var o=function(){var t=a;e.enqueueRetryable(h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.promise;case 2:return e.next=4,i(n.currentUser);case 4:case"end":return e.stop()}}),e)}))))},u=function(e){Au("FirebaseAuthCredentialsProvider","Auth detected"),n.auth=e,n.auth.addAuthTokenListener(n.o),o()};this.t.onInit((function(e){return u(e)})),setTimeout((function(){if(!n.auth){var e=n.t.getImmediate({optional:!0});e?u(e):(Au("FirebaseAuthCredentialsProvider","Auth not yet detected"),a.resolve(),a=new Bu)}}),0),o()}},{key:"getToken",value:function(){var e=this,t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return e.i!==t?(Au("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),e.getToken()):n?(Mu("string"==typeof n.accessToken),new zu(n.accessToken,e.currentUser)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.auth&&this.auth.removeAuthTokenListener(this.o)}},{key:"u",value:function(){var e=this.auth&&this.auth.getUid();return Mu(null===e||"string"==typeof e),new Tu(e)}}]),e}(),Gu=function(){function e(t,n,r){p(this,e),this.h=t,this.l=n,this.m=r,this.type="FirstParty",this.user=Tu.FIRST_PARTY,this.g=new Map}return m(e,[{key:"p",value:function(){return this.m?this.m():null}},{key:"headers",get:function(){this.g.set("X-Goog-AuthUser",this.h);var e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}]),e}(),Hu=function(){function e(t,n,r){p(this,e),this.h=t,this.l=n,this.m=r}return m(e,[{key:"getToken",value:function(){return Promise.resolve(new Gu(this.h,this.l,this.m))}},{key:"start",value:function(e,t){e.enqueueRetryable((function(){return t(Tu.FIRST_PARTY)}))}},{key:"shutdown",value:function(){}},{key:"invalidateToken",value:function(){}}]),e}(),Wu=m((function e(t){p(this,e),this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)})),Qu=function(){function e(t){p(this,e),this.I=t,this.forceRefresh=!1,this.appCheck=null,this.T=null}return m(e,[{key:"start",value:function(e,t){var n=this,r=function(e){null!=e.error&&Au("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));var r=e.token!==n.T;return n.T=e.token,Au("FirebaseAppCheckTokenProvider","Received ".concat(r?"new":"existing"," token.")),r?t(e.token):Promise.resolve()};this.o=function(t){e.enqueueRetryable((function(){return r(t)}))};var i=function(e){Au("FirebaseAppCheckTokenProvider","AppCheck detected"),n.appCheck=e,n.appCheck.addTokenListener(n.o)};this.I.onInit((function(e){return i(e)})),setTimeout((function(){if(!n.appCheck){var e=n.I.getImmediate({optional:!0});e?i(e):Au("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}},{key:"getToken",value:function(){var e=this,t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((function(t){return t?(Mu("string"==typeof t.token),e.T=t.token,new Wu(t.token)):null})):Promise.resolve(null)}},{key:"invalidateToken",value:function(){this.forceRefresh=!0}},{key:"shutdown",value:function(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}]),e}();function Yu(e){var t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(var r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}var $u=function(){function e(){p(this,e)}return m(e,null,[{key:"A",value:function(){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62),n="";n.length<20;)for(var r=Yu(40),i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62));return n}}]),e}();function Xu(e,t){return e<t?-1:e>t?1:0}function Ju(e,t,n){return e.length===t.length&&e.every((function(e,r){return n(e,t[r])}))}function Zu(e){return e+"\0"}var es=function(){function e(t,n){if(p(this,e),this.seconds=t,this.nanoseconds=n,n<0)throw new Vu(Uu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Vu(Uu.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new Vu(Uu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Vu(Uu.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return m(e,[{key:"toDate",value:function(){return new Date(this.toMillis())}},{key:"toMillis",value:function(){return 1e3*this.seconds+this.nanoseconds/1e6}},{key:"_compareTo",value:function(e){return this.seconds===e.seconds?Xu(this.nanoseconds,e.nanoseconds):Xu(this.seconds,e.seconds)}},{key:"isEqual",value:function(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}},{key:"toString",value:function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}},{key:"toJSON",value:function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}},{key:"valueOf",value:function(){var e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}],[{key:"now",value:function(){return e.fromMillis(Date.now())}},{key:"fromDate",value:function(t){return e.fromMillis(t.getTime())}},{key:"fromMillis",value:function(t){var n=Math.floor(t/1e3);return new e(n,Math.floor(1e6*(t-1e3*n)))}}]),e}(),ts=function(){function e(t){p(this,e),this.timestamp=t}return m(e,[{key:"compareTo",value:function(e){return this.timestamp._compareTo(e.timestamp)}},{key:"isEqual",value:function(e){return this.timestamp.isEqual(e.timestamp)}},{key:"toMicroseconds",value:function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}},{key:"toString",value:function(){return"SnapshotVersion("+this.timestamp.toString()+")"}},{key:"toTimestamp",value:function(){return this.timestamp}}],[{key:"fromTimestamp",value:function(t){return new e(t)}},{key:"min",value:function(){return new e(new es(0,0))}},{key:"max",value:function(){return new e(new es(253402300799,999999999))}}]),e}(),ns=function(){function e(t,n,r){p(this,e),void 0===n?n=0:n>t.length&&Lu(),void 0===r?r=t.length-n:r>t.length-n&&Lu(),this.segments=t,this.offset=n,this.len=r}return m(e,[{key:"length",get:function(){return this.len}},{key:"isEqual",value:function(t){return 0===e.comparator(this,t)}},{key:"child",value:function(t){var n=this.segments.slice(this.offset,this.limit());return t instanceof e?t.forEach((function(e){n.push(e)})):n.push(t),this.construct(n)}},{key:"limit",value:function(){return this.offset+this.length}},{key:"popFirst",value:function(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}},{key:"popLast",value:function(){return this.construct(this.segments,this.offset,this.length-1)}},{key:"firstSegment",value:function(){return this.segments[this.offset]}},{key:"lastSegment",value:function(){return this.get(this.length-1)}},{key:"get",value:function(e){return this.segments[this.offset+e]}},{key:"isEmpty",value:function(){return 0===this.length}},{key:"isPrefixOf",value:function(e){if(e.length<this.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"isImmediateParentOf",value:function(e){if(this.length+1!==e.length)return!1;for(var t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}},{key:"forEach",value:function(e){for(var t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}},{key:"toArray",value:function(){return this.segments.slice(this.offset,this.limit())}}],[{key:"comparator",value:function(e,t){for(var n=Math.min(e.length,t.length),r=0;r<n;r++){var i=e.get(r),a=t.get(r);if(i<a)return-1;if(i>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}]),e}(),rs=function(e){w(n,e);var t=E(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().join("/")}},{key:"toString",value:function(){return this.canonicalString()}}],[{key:"fromString",value:function(){for(var e=[],t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];for(var a=0,o=r;a<o.length;a++){var u=o[a];if(u.indexOf("//")>=0)throw new Vu(Uu.INVALID_ARGUMENT,"Invalid segment (".concat(u,"). Paths must not contain // in them."));e.push.apply(e,X(u.split("/").filter((function(e){return e.length>0}))))}return new n(e)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(ns),is=/^[_a-zA-Z][_a-zA-Z0-9]*$/,as=function(e){w(n,e);var t=E(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"construct",value:function(e,t,r){return new n(e,t,r)}},{key:"canonicalString",value:function(){return this.toArray().map((function(e){return e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e})).join(".")}},{key:"toString",value:function(){return this.canonicalString()}},{key:"isKeyField",value:function(){return 1===this.length&&"__name__"===this.get(0)}}],[{key:"isValidIdentifier",value:function(e){return is.test(e)}},{key:"keyField",value:function(){return new n(["__name__"])}},{key:"fromServerFormat",value:function(e){for(var t=[],r="",i=0,a=function(){if(0===r.length)throw new Vu(Uu.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(r),r=""},o=!1;i<e.length;){var u=e[i];if("\\"===u){if(i+1===e.length)throw new Vu(Uu.INVALID_ARGUMENT,"Path has trailing escape character: "+e);var s=e[i+1];if("\\"!==s&&"."!==s&&"`"!==s)throw new Vu(Uu.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=s,i+=2}else"`"===u?(o=!o,i++):"."!==u||o?(r+=u,i++):(a(),i++)}if(a(),o)throw new Vu(Uu.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}},{key:"emptyPath",value:function(){return new n([])}}]),n}(ns),os=function(){function e(t){p(this,e),this.path=t}return m(e,[{key:"collectionGroup",get:function(){return this.path.popLast().lastSegment()}},{key:"hasCollectionId",value:function(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}},{key:"getCollectionGroup",value:function(){return this.path.get(this.path.length-2)}},{key:"getCollectionPath",value:function(){return this.path.popLast()}},{key:"isEqual",value:function(e){return null!==e&&0===rs.comparator(this.path,e.path)}},{key:"toString",value:function(){return this.path.toString()}}],[{key:"fromPath",value:function(t){return new e(rs.fromString(t))}},{key:"fromName",value:function(t){return new e(rs.fromString(t).popFirst(5))}},{key:"empty",value:function(){return new e(rs.emptyPath())}},{key:"comparator",value:function(e,t){return rs.comparator(e.path,t.path)}},{key:"isDocumentKey",value:function(e){return e.length%2==0}},{key:"fromSegments",value:function(t){return new e(new rs(t.slice()))}}]),e}(),us=m((function e(t,n,r,i){p(this,e),this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=i}));function ss(e){return e.fields.find((function(e){return 2===e.kind}))}function cs(e){return e.fields.filter((function(e){return 2!==e.kind}))}us.UNKNOWN_ID=-1;var ls=m((function e(t,n){p(this,e),this.fieldPath=t,this.kind=n}));var fs=function(){function e(t,n){p(this,e),this.sequenceNumber=t,this.offset=n}return m(e,null,[{key:"empty",value:function(){return new e(0,vs.min())}}]),e}();function hs(e,t){var n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=ts.fromTimestamp(1e9===r?new es(n+1,0):new es(n,r));return new vs(i,os.empty(),t)}function ds(e){return new vs(e.readTime,e.key,-1)}var vs=function(){function e(t,n,r){p(this,e),this.readTime=t,this.documentKey=n,this.largestBatchId=r}return m(e,null,[{key:"min",value:function(){return new e(ts.min(),os.empty(),-1)}},{key:"max",value:function(){return new e(ts.max(),os.empty(),-1)}}]),e}();function ps(e,t){var n=e.readTime.compareTo(t.readTime);return 0!==n?n:0!==(n=os.comparator(e.documentKey,t.documentKey))?n:Xu(e.largestBatchId,t.largestBatchId)}var ys="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",ms=function(){function e(){p(this,e),this.onCommittedListeners=[]}return m(e,[{key:"addOnCommittedListener",value:function(e){this.onCommittedListeners.push(e)}},{key:"raiseOnCommittedEvent",value:function(){this.onCommittedListeners.forEach((function(e){return e()}))}}]),e}();function gs(e){return ks.apply(this,arguments)}function ks(){return ks=h(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.code===Uu.FAILED_PRECONDITION&&t.message===ys){e.next=2;break}throw t;case 2:Au("LocalStore","Unexpectedly lost primary lease");case 3:case"end":return e.stop()}}),e)}))),ks.apply(this,arguments)}var bs=function(){function e(t){var n=this;p(this,e),this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(e){n.isDone=!0,n.result=e,n.nextCallback&&n.nextCallback(e)}),(function(e){n.isDone=!0,n.error=e,n.catchCallback&&n.catchCallback(e)}))}return m(e,[{key:"catch",value:function(e){return this.next(void 0,e)}},{key:"next",value:function(t,n){var r=this;return this.callbackAttached&&Lu(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new e((function(e,i){r.nextCallback=function(n){r.wrapSuccess(t,n).next(e,i)},r.catchCallback=function(t){r.wrapFailure(n,t).next(e,i)}}))}},{key:"toPromise",value:function(){var e=this;return new Promise((function(t,n){e.next(t,n)}))}},{key:"wrapUserFunction",value:function(t){try{var n=t();return n instanceof e?n:e.resolve(n)}catch(t){return e.reject(t)}}},{key:"wrapSuccess",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.resolve(n)}},{key:"wrapFailure",value:function(t,n){return t?this.wrapUserFunction((function(){return t(n)})):e.reject(n)}}],[{key:"resolve",value:function(t){return new e((function(e,n){e(t)}))}},{key:"reject",value:function(t){return new e((function(e,n){n(t)}))}},{key:"waitFor",value:function(t){return new e((function(e,n){var r=0,i=0,a=!1;t.forEach((function(t){++r,t.next((function(){++i,a&&i===r&&e()}),(function(e){return n(e)}))})),a=!0,i===r&&e()}))}},{key:"or",value:function(t){var n,r=e.resolve(!1),i=g(t);try{var a=function(){var t=n.value;r=r.next((function(n){return n?e.resolve(n):t()}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return r}},{key:"forEach",value:function(e,t){var n=this,r=[];return e.forEach((function(e,i){r.push(t.call(n,e,i))})),this.waitFor(r)}},{key:"mapArray",value:function(t,n){return new e((function(e,r){for(var i=t.length,a=new Array(i),o=0,u=function(){var u=s;n(t[u]).next((function(t){a[u]=t,++o===i&&e(a)}),(function(e){return r(e)}))},s=0;s<i;s++)u()}))}},{key:"doWhile",value:function(t,n){return new e((function(e,r){!function i(){!0===t()?n().next((function(){i()}),r):e()}()}))}}]),e}(),ws=function(){function e(t,n){var r=this;p(this,e),this.action=t,this.transaction=n,this.aborted=!1,this.R=new Bu,this.transaction.oncomplete=function(){r.R.resolve()},this.transaction.onabort=function(){n.error?r.R.reject(new Es(t,n.error)):r.R.resolve()},this.transaction.onerror=function(e){var n=Ds(e.target.error);r.R.reject(new Es(t,n))}}return m(e,[{key:"v",get:function(){return this.R.promise}},{key:"abort",value:function(e){e&&this.R.reject(e),this.aborted||(Au("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}},{key:"P",value:function(){var e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}},{key:"store",value:function(e){var t=this.transaction.objectStore(e);return new Is(t)}}],[{key:"open",value:function(t,n,r,i){try{return new e(n,t.transaction(i,r))}catch(t){throw new Es(n,t)}}}]),e}(),_s=function(){function e(t,n,r){p(this,e),this.name=t,this.version=n,this.V=r,12.2===e.S(U())&&Ru("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return m(e,[{key:"$",value:function(){var e=h(l().mark((function e(t){var n=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.db,e.t0){e.next=6;break}return Au("SimpleDb","Opening database:",this.name),e.next=5,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new Es(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Vu(Uu.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===n.name?r(new Vu(Uu.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+n)):r(new Es(t,n))},i.onupgradeneeded=function(e){Au("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',e.oldVersion);var t=e.target.result;n.V.M(t,i.transaction,e.oldVersion,n.version).next((function(){Au("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}));case 5:this.db=e.sent;case 6:return this.F&&(this.db.onversionchange=function(e){return n.F(e)}),e.abrupt("return",this.db);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"B",value:function(e){this.F=e,this.db&&(this.db.onversionchange=function(t){return e(t)})}},{key:"runTransaction",value:function(){var e=h(l().mark((function e(t,n,r,i){var a,o,u,s,c=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a="readonly"===n,o=0,u=l().mark((function e(){var n,u,s,f;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return++o,e.prev=1,e.next=4,c.$(t);case 4:return c.db=e.sent,n=ws.open(c.db,t,a?"readonly":"readwrite",r),u=i(n).next((function(e){return n.P(),e})).catch((function(e){return n.abort(e),bs.reject(e)})).toPromise(),u.catch((function(){})),e.next=9,n.v;case 9:return e.t0=u,e.abrupt("return",{v:e.t0});case 13:if(e.prev=13,e.t1=e.catch(1),s=e.t1,f="FirebaseError"!==s.name&&o<3,Au("SimpleDb","Transaction failed with error:",s.message,"Retrying:",f),c.close(),f){e.next=18;break}return e.abrupt("return",{v:Promise.reject(s)});case 18:case"end":return e.stop()}}),e,null,[[1,13]])}));case 3:return e.delegateYield(u(),"t0",4);case 4:if("object"!==typeof(s=e.t0)){e.next=7;break}return e.abrupt("return",s.v);case 7:e.next=3;break;case 9:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"close",value:function(){this.db&&this.db.close(),this.db=void 0}}],[{key:"delete",value:function(e){return Au("SimpleDb","Removing database:",e),Ts(window.indexedDB.deleteDatabase(e)).toPromise()}},{key:"D",value:function(){if(!B())return!1;if(e.C())return!0;var t=U(),n=e.S(t),r=0<n&&n<10,i=e.N(t),a=0<i&&i<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||a)}},{key:"C",value:function(){var e;return"undefined"!=typeof process&&"YES"===(null===(e={NODE_ENV:"production",PUBLIC_URL:"/blender-app",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0})||void 0===e?void 0:e.k)}},{key:"O",value:function(e,t){return e.store(t)}},{key:"S",value:function(e){var t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}},{key:"N",value:function(e){var t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}}]),e}(),xs=function(){function e(t){p(this,e),this.L=t,this.q=!1,this.U=null}return m(e,[{key:"isDone",get:function(){return this.q}},{key:"K",get:function(){return this.U}},{key:"cursor",set:function(e){this.L=e}},{key:"done",value:function(){this.q=!0}},{key:"G",value:function(e){this.U=e}},{key:"delete",value:function(){return Ts(this.L.delete())}}]),e}(),Es=function(e){w(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this,Uu.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(r))).name="IndexedDbTransactionError",i}return m(n)}(Vu);function Ss(e){return"IndexedDbTransactionError"===e.name}var Is=function(){function e(t){p(this,e),this.store=t}return m(e,[{key:"put",value:function(e,t){var n;return void 0!==t?(Au("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(Au("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ts(n)}},{key:"add",value:function(e){return Au("SimpleDb","ADD",this.store.name,e,e),Ts(this.store.add(e))}},{key:"get",value:function(e){var t=this;return Ts(this.store.get(e)).next((function(n){return void 0===n&&(n=null),Au("SimpleDb","GET",t.store.name,e,n),n}))}},{key:"delete",value:function(e){return Au("SimpleDb","DELETE",this.store.name,e),Ts(this.store.delete(e))}},{key:"count",value:function(){return Au("SimpleDb","COUNT",this.store.name),Ts(this.store.count())}},{key:"j",value:function(e,t){var n=this.options(e,t);if(n.index||"function"!=typeof this.store.getAll){var r=this.cursor(n),i=[];return this.W(r,(function(e,t){i.push(t)})).next((function(){return i}))}var a=this.store.getAll(n.range);return new bs((function(e,t){a.onerror=function(e){t(e.target.error)},a.onsuccess=function(t){e(t.target.result)}}))}},{key:"H",value:function(e,t){var n=this.store.getAll(e,null===t?void 0:t);return new bs((function(e,t){n.onerror=function(e){t(e.target.error)},n.onsuccess=function(t){e(t.target.result)}}))}},{key:"J",value:function(e,t){Au("SimpleDb","DELETE ALL",this.store.name);var n=this.options(e,t);n.Y=!1;var r=this.cursor(n);return this.W(r,(function(e,t,n){return n.delete()}))}},{key:"Z",value:function(e,t){var n;t?n=e:(n={},t=e);var r=this.cursor(n);return this.W(r,t)}},{key:"X",value:function(e){var t=this.cursor({});return new bs((function(n,r){t.onerror=function(e){var t=Ds(e.target.error);r(t)},t.onsuccess=function(t){var r=t.target.result;r?e(r.primaryKey,r.value).next((function(e){e?r.continue():n()})):n()}}))}},{key:"W",value:function(e,t){var n=[];return new bs((function(r,i){e.onerror=function(e){i(e.target.error)},e.onsuccess=function(e){var i=e.target.result;if(i){var a=new xs(i),o=t(i.primaryKey,i.value,a);if(o instanceof bs){var u=o.catch((function(e){return a.done(),bs.reject(e)}));n.push(u)}a.isDone?r():null===a.K?i.continue():i.continue(a.K)}else r()}})).next((function(){return bs.waitFor(n)}))}},{key:"options",value:function(e,t){var n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}},{key:"cursor",value:function(e){var t="next";if(e.reverse&&(t="prev"),e.index){var n=this.store.index(e.index);return e.Y?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}]),e}();function Ts(e){return new bs((function(t,n){e.onsuccess=function(e){var n=e.target.result;t(n)},e.onerror=function(e){var t=Ds(e.target.error);n(t)}}))}var Cs=!1;function Ds(e){var t=_s.S(U());if(t>=12.2&&t<13){var n="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(n)>=0){var r=new Vu("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(n,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Cs||(Cs=!0,setTimeout((function(){throw r}),0)),r}}return e}var Ns=function(){function e(t,n){p(this,e),this.asyncQueue=t,this.tt=n,this.task=null}return m(e,[{key:"start",value:function(){this.et(15e3)}},{key:"stop",value:function(){this.task&&(this.task.cancel(),this.task=null)}},{key:"started",get:function(){return null!==this.task}},{key:"et",value:function(e){var t=this;Au("IndexBackiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.task=null,e.prev=1,e.t0=Au,e.t1="Documents written: ",e.next=6,t.tt.nt();case 6:e.t2=e.sent,e.t3=e.t1.concat.call(e.t1,e.t2),(0,e.t0)("IndexBackiller",e.t3),e.next=19;break;case 11:if(e.prev=11,e.t4=e.catch(1),!Ss(e.t4)){e.next=17;break}Au("IndexBackiller","Ignoring IndexedDB error during index backfill: ",e.t4),e.next=19;break;case 17:return e.next=19,gs(e.t4);case 19:return e.next=21,t.et(6e4);case 21:case"end":return e.stop()}}),e,null,[[1,11]])}))))}}]),e}(),As=function(){function e(t,n){p(this,e),this.localStore=t,this.persistence=n}return m(e,[{key:"nt",value:function(){var e=h(l().mark((function e(){var t,n=this,r=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:50,e.abrupt("return",this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(function(e){return n.st(e,t)})));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"st",value:function(e,t){var n=this,r=new Set,i=t,a=!0;return bs.doWhile((function(){return!0===a&&i>0}),(function(){return n.localStore.indexManager.getNextCollectionGroupToUpdate(e).next((function(t){if(null!==t&&!r.has(t))return Au("IndexBackiller","Processing collection: ".concat(t)),n.it(e,t,i).next((function(e){i-=e,r.add(t)}));a=!1}))})).next((function(){return t-i}))}},{key:"it",value:function(e,t,n){var r=this;return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next((function(i){return r.localStore.localDocuments.getNextDocuments(e,t,i,n).next((function(n){var a=n.changes;return r.localStore.indexManager.updateIndexEntries(e,a).next((function(){return r.rt(i,n)})).next((function(n){return Au("IndexBackiller","Updating offset: ".concat(n)),r.localStore.indexManager.updateCollectionGroup(e,t,n)})).next((function(){return a.size}))}))}))}},{key:"rt",value:function(e,t){var n=e;return t.changes.forEach((function(e,t){var r=ds(t);ps(r,n)>0&&(n=r)})),new vs(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}]),e}(),Rs=function(){function e(t,n){var r=this;p(this,e),this.previousValue=t,n&&(n.sequenceNumberHandler=function(e){return r.ot(e)},this.ut=function(e){return n.writeSequenceNumber(e)})}return m(e,[{key:"ot",value:function(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}},{key:"next",value:function(){var e=++this.previousValue;return this.ut&&this.ut(e),e}}]),e}();function Os(e){return null==e}function Ps(e){return 0===e&&1/e==-1/0}function Ls(e){return"number"==typeof e&&Number.isInteger(e)&&!Ps(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Ms(e){for(var t="",n=0;n<e.length;n++)t.length>0&&(t=Us(t)),t=Fs(e.get(n),t);return Us(t)}function Fs(e,t){for(var n=t,r=e.length,i=0;i<r;i++){var a=e.charAt(i);switch(a){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=a}}return n}function Us(e){return e+"\x01\x01"}function Vs(e){var t=e.length;if(Mu(t>=2),2===t)return Mu("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),rs.emptyPath();for(var n=t-2,r=[],i="",a=0;a<t;){var o=e.indexOf("\x01",a);switch((o<0||o>n)&&Lu(),e.charAt(o+1)){case"\x01":var u=e.substring(a,o),s=void 0;0===i.length?s=u:(s=i+=u,i=""),r.push(s);break;case"\x10":i+=e.substring(a,o),i+="\0";break;case"\x11":i+=e.substring(a,o+1);break;default:Lu()}a=o+2}return new rs(r)}Rs.ct=-1;var Bs=["userId","batchId"];function zs(e,t){return[e,Ms(t)]}function js(e,t,n){return[e,Ms(t),n]}var qs={},Ks=["prefixPath","collectionGroup","readTime","documentId"],Gs=["prefixPath","collectionGroup","documentId"],Hs=["collectionGroup","readTime","prefixPath","documentId"],Ws=["canonicalId","targetId"],Qs=["targetId","path"],Ys=["path","targetId"],$s=["collectionId","parent"],Xs=["indexId","uid"],Js=["uid","sequenceNumber"],Zs=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],ec=["indexId","uid","orderedDocumentKey"],tc=["userId","collectionPath","documentId"],nc=["userId","collectionPath","largestBatchId"],rc=["userId","collectionGroup","largestBatchId"],ic=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments"].concat(["clientMetadata"]).concat(["remoteDocumentGlobal"]).concat(["collectionParents"]).concat(["bundles","namedQueries"]),ac=[].concat(X(ic),["documentOverlays"]),oc=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],uc=oc,sc=[].concat(uc,["indexConfiguration","indexState","indexEntries"]),cc=function(e){w(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).at=e,i.currentSequenceNumber=r,i}return m(n)}(ms);function lc(e,t){var n=Fu(e);return _s.O(n.at,t)}function fc(e){var t=0;for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function hc(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function dc(e){for(var t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}var vc=function(){function e(t,n){p(this,e),this.comparator=t,this.root=n||yc.EMPTY}return m(e,[{key:"insert",value:function(t,n){return new e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,yc.BLACK,null,null))}},{key:"remove",value:function(t){return new e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,yc.BLACK,null,null))}},{key:"get",value:function(e){for(var t=this.root;!t.isEmpty();){var n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}},{key:"indexOf",value:function(e){for(var t=0,n=this.root;!n.isEmpty();){var r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}},{key:"isEmpty",value:function(){return this.root.isEmpty()}},{key:"size",get:function(){return this.root.size}},{key:"minKey",value:function(){return this.root.minKey()}},{key:"maxKey",value:function(){return this.root.maxKey()}},{key:"inorderTraversal",value:function(e){return this.root.inorderTraversal(e)}},{key:"forEach",value:function(e){this.inorderTraversal((function(t,n){return e(t,n),!1}))}},{key:"toString",value:function(){var e=[];return this.inorderTraversal((function(t,n){return e.push("".concat(t,":").concat(n)),!1})),"{".concat(e.join(", "),"}")}},{key:"reverseTraversal",value:function(e){return this.root.reverseTraversal(e)}},{key:"getIterator",value:function(){return new pc(this.root,null,this.comparator,!1)}},{key:"getIteratorFrom",value:function(e){return new pc(this.root,e,this.comparator,!1)}},{key:"getReverseIterator",value:function(){return new pc(this.root,null,this.comparator,!0)}},{key:"getReverseIteratorFrom",value:function(e){return new pc(this.root,e,this.comparator,!0)}}]),e}(),pc=function(){function e(t,n,r,i){p(this,e),this.isReverse=i,this.nodeStack=[];for(var a=1;!t.isEmpty();)if(a=n?r(t.key,n):1,n&&i&&(a*=-1),a<0)t=this.isReverse?t.left:t.right;else{if(0===a){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return m(e,[{key:"getNext",value:function(){var e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}},{key:"hasNext",value:function(){return this.nodeStack.length>0}},{key:"peek",value:function(){if(0===this.nodeStack.length)return null;var e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}]),e}(),yc=function(){function e(t,n,r,i,a){p(this,e),this.key=t,this.value=n,this.color=null!=r?r:e.RED,this.left=null!=i?i:e.EMPTY,this.right=null!=a?a:e.EMPTY,this.size=this.left.size+1+this.right.size}return m(e,[{key:"copy",value:function(t,n,r,i,a){return new e(null!=t?t:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=a?a:this.right)}},{key:"isEmpty",value:function(){return!1}},{key:"inorderTraversal",value:function(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}},{key:"reverseTraversal",value:function(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}},{key:"min",value:function(){return this.left.isEmpty()?this:this.left.min()}},{key:"minKey",value:function(){return this.min().key}},{key:"maxKey",value:function(){return this.right.isEmpty()?this.key:this.right.maxKey()}},{key:"insert",value:function(e,t,n){var r=this,i=n(e,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n))).fixUp()}},{key:"removeMin",value:function(){if(this.left.isEmpty())return e.EMPTY;var t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),(t=t.copy(null,null,null,t.left.removeMin(),null)).fixUp()}},{key:"remove",value:function(t,n){var r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(t,i.key)){if(i.right.isEmpty())return e.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}},{key:"isRed",value:function(){return this.color}},{key:"fixUp",value:function(){var e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}},{key:"moveRedLeft",value:function(){var e=this.colorFlip();return e.right.left.isRed()&&(e=(e=(e=e.copy(null,null,null,null,e.right.rotateRight())).rotateLeft()).colorFlip()),e}},{key:"moveRedRight",value:function(){var e=this.colorFlip();return e.left.left.isRed()&&(e=(e=e.rotateRight()).colorFlip()),e}},{key:"rotateLeft",value:function(){var t=this.copy(null,null,e.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}},{key:"rotateRight",value:function(){var t=this.copy(null,null,e.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}},{key:"colorFlip",value:function(){var e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}},{key:"checkMaxDepth",value:function(){var e=this.check();return Math.pow(2,e)<=this.size+1}},{key:"check",value:function(){if(this.isRed()&&this.left.isRed())throw Lu();if(this.right.isRed())throw Lu();var e=this.left.check();if(e!==this.right.check())throw Lu();return e+(this.isRed()?0:1)}}]),e}();yc.EMPTY=null,yc.RED=!0,yc.BLACK=!1,yc.EMPTY=new(function(){function e(){p(this,e),this.size=0}return m(e,[{key:"key",get:function(){throw Lu()}},{key:"value",get:function(){throw Lu()}},{key:"color",get:function(){throw Lu()}},{key:"left",get:function(){throw Lu()}},{key:"right",get:function(){throw Lu()}},{key:"copy",value:function(e,t,n,r,i){return this}},{key:"insert",value:function(e,t,n){return new yc(e,t)}},{key:"remove",value:function(e,t){return this}},{key:"isEmpty",value:function(){return!0}},{key:"inorderTraversal",value:function(e){return!1}},{key:"reverseTraversal",value:function(e){return!1}},{key:"minKey",value:function(){return null}},{key:"maxKey",value:function(){return null}},{key:"isRed",value:function(){return!1}},{key:"checkMaxDepth",value:function(){return!0}},{key:"check",value:function(){return 0}}]),e}());var mc=function(){function e(t){p(this,e),this.comparator=t,this.data=new vc(this.comparator)}return m(e,[{key:"has",value:function(e){return null!==this.data.get(e)}},{key:"first",value:function(){return this.data.minKey()}},{key:"last",value:function(){return this.data.maxKey()}},{key:"size",get:function(){return this.data.size}},{key:"indexOf",value:function(e){return this.data.indexOf(e)}},{key:"forEach",value:function(e){this.data.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"forEachInRange",value:function(e,t){for(var n=this.data.getIteratorFrom(e[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}},{key:"forEachWhile",value:function(e,t){var n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}},{key:"firstAfterOrEqual",value:function(e){var t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}},{key:"getIterator",value:function(){return new gc(this.data.getIterator())}},{key:"getIteratorFrom",value:function(e){return new gc(this.data.getIteratorFrom(e))}},{key:"add",value:function(e){return this.copy(this.data.remove(e).insert(e,!0))}},{key:"delete",value:function(e){return this.has(e)?this.copy(this.data.remove(e)):this}},{key:"isEmpty",value:function(){return this.data.isEmpty()}},{key:"unionWith",value:function(e){var t=this;return t.size<e.size&&(t=e,e=this),e.forEach((function(e){t=t.add(e)})),t}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.data.getIterator(),r=t.data.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}},{key:"toArray",value:function(){var e=[];return this.forEach((function(t){e.push(t)})),e}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){return e.push(t)})),"SortedSet("+e.toString()+")"}},{key:"copy",value:function(t){var n=new e(this.comparator);return n.data=t,n}}]),e}(),gc=function(){function e(t){p(this,e),this.iter=t}return m(e,[{key:"getNext",value:function(){return this.iter.getNext().key}},{key:"hasNext",value:function(){return this.iter.hasNext()}}]),e}();function kc(e){return e.hasNext()?e.getNext():void 0}var bc=function(){function e(t){p(this,e),this.fields=t,t.sort(as.comparator)}return m(e,[{key:"unionWith",value:function(t){var n,r=new mc(as.comparator),i=g(this.fields);try{for(i.s();!(n=i.n()).done;){var a=n.value;r=r.add(a)}}catch(c){i.e(c)}finally{i.f()}var o,u=g(t);try{for(u.s();!(o=u.n()).done;){var s=o.value;r=r.add(s)}}catch(c){u.e(c)}finally{u.f()}return new e(r.toArray())}},{key:"covers",value:function(e){var t,n=g(this.fields);try{for(n.s();!(t=n.n()).done;){if(t.value.isPrefixOf(e))return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"isEqual",value:function(e){return Ju(this.fields,e.fields,(function(e,t){return e.isEqual(t)}))}}],[{key:"empty",value:function(){return new e([])}}]),e}(),wc=function(e){w(n,e);var t=E(n);function n(){var e;return p(this,n),(e=t.apply(this,arguments)).name="Base64DecodeError",e}return m(n)}(I(Error));var _c=function(e){function t(e){p(this,t),this.binaryString=e}return m(t,[{key:Symbol.iterator,value:function(){var e=this,t=0;return{next:function(){return t<e.binaryString.length?{value:e.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}}},{key:"toBase64",value:function(){return e=this.binaryString,btoa(e);var e}},{key:"toUint8Array",value:function(){return function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}},{key:"approximateByteSize",value:function(){return 2*this.binaryString.length}},{key:"compareTo",value:function(e){return Xu(this.binaryString,e.binaryString)}},{key:"isEqual",value:function(e){return this.binaryString===e.binaryString}}],[{key:"fromBase64String",value:function(e){var n=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new wc("Invalid base64 string: "+e):e}}(e);return new t(n)}},{key:"fromUint8Array",value:function(e){var n=function(e){for(var t="",n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new t(n)}}]),t}();_c.EMPTY_BYTE_STRING=new _c("");var xc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ec(e){if(Mu(!!e),"string"==typeof e){var t=0,n=xc.exec(e);if(Mu(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),t=Number(r)}var i=new Date(e);return{seconds:Math.floor(i.getTime()/1e3),nanos:t}}return{seconds:Sc(e.seconds),nanos:Sc(e.nanos)}}function Sc(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Ic(e){return"string"==typeof e?_c.fromBase64String(e):_c.fromUint8Array(e)}function Tc(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Cc(e){var t=e.mapValue.fields.__previous_value__;return Tc(t)?Cc(t):t}function Dc(e){var t=Ec(e.mapValue.fields.__local_write_time__.timestampValue);return new es(t.seconds,t.nanos)}var Nc=m((function e(t,n,r,i,a,o,u,s){p(this,e),this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=o,this.autoDetectLongPolling=u,this.useFetchStreams=s})),Ac=function(){function e(t,n){p(this,e),this.projectId=t,this.database=n||"(default)"}return m(e,[{key:"isDefaultDatabase",get:function(){return"(default)"===this.database}},{key:"isEqual",value:function(t){return t instanceof e&&t.projectId===this.projectId&&t.database===this.database}}],[{key:"empty",value:function(){return new e("","")}}]),e}(),Rc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Oc={nullValue:"NULL_VALUE"};function Pc(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Tc(e)?4:Qc(e)?9007199254740991:10:Lu()}function Lc(e,t){if(e===t)return!0;var n=Pc(e);if(n!==Pc(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Dc(e).isEqual(Dc(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;var n=Ec(e.timestampValue),r=Ec(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Ic(e.bytesValue).isEqual(Ic(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return Sc(e.geoPointValue.latitude)===Sc(t.geoPointValue.latitude)&&Sc(e.geoPointValue.longitude)===Sc(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return Sc(e.integerValue)===Sc(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){var n=Sc(e.doubleValue),r=Sc(t.doubleValue);return n===r?Ps(n)===Ps(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ju(e.arrayValue.values||[],t.arrayValue.values||[],Lc);case 10:return function(e,t){var n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(fc(n)!==fc(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Lc(n[i],r[i])))return!1;return!0}(e,t);default:return Lu()}}function Mc(e,t){return void 0!==(e.values||[]).find((function(e){return Lc(e,t)}))}function Fc(e,t){if(e===t)return 0;var n=Pc(e),r=Pc(t);if(n!==r)return Xu(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xu(e.booleanValue,t.booleanValue);case 2:return function(e,t){var n=Sc(e.integerValue||e.doubleValue),r=Sc(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Uc(e.timestampValue,t.timestampValue);case 4:return Uc(Dc(e),Dc(t));case 5:return Xu(e.stringValue,t.stringValue);case 6:return function(e,t){var n=Ic(e),r=Ic(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){for(var n=e.split("/"),r=t.split("/"),i=0;i<n.length&&i<r.length;i++){var a=Xu(n[i],r[i]);if(0!==a)return a}return Xu(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){var n=Xu(Sc(e.latitude),Sc(t.latitude));return 0!==n?n:Xu(Sc(e.longitude),Sc(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(e,t){for(var n=e.values||[],r=t.values||[],i=0;i<n.length&&i<r.length;++i){var a=Fc(n[i],r[i]);if(a)return a}return Xu(n.length,r.length)}(e.arrayValue,t.arrayValue);case 10:return function(e,t){if(e===Rc.mapValue&&t===Rc.mapValue)return 0;if(e===Rc.mapValue)return 1;if(t===Rc.mapValue)return-1;var n=e.fields||{},r=Object.keys(n),i=t.fields||{},a=Object.keys(i);r.sort(),a.sort();for(var o=0;o<r.length&&o<a.length;++o){var u=Xu(r[o],a[o]);if(0!==u)return u;var s=Fc(n[r[o]],i[a[o]]);if(0!==s)return s}return Xu(r.length,a.length)}(e.mapValue,t.mapValue);default:throw Lu()}}function Uc(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Xu(e,t);var n=Ec(e),r=Ec(t),i=Xu(n.seconds,r.seconds);return 0!==i?i:Xu(n.nanos,r.nanos)}function Vc(e){return Bc(e)}function Bc(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){var t=Ec(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?Ic(e.bytesValue).toBase64():"referenceValue"in e?(n=e.referenceValue,os.fromName(n).toString()):"geoPointValue"in e?"geo(".concat((t=e.geoPointValue).latitude,",").concat(t.longitude,")"):"arrayValue"in e?function(e){var t,n="[",r=!0,i=g(e.values||[]);try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+=Bc(a)}}catch(o){i.e(o)}finally{i.f()}return n+"]"}(e.arrayValue):"mapValue"in e?function(e){var t,n="{",r=!0,i=g(Object.keys(e.fields||{}).sort());try{for(i.s();!(t=i.n()).done;){var a=t.value;r?r=!1:n+=",",n+="".concat(a,":").concat(Bc(e.fields[a]))}}catch(o){i.e(o)}finally{i.f()}return n+"}"}(e.mapValue):Lu();var t,n}function zc(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function jc(e){return!!e&&"integerValue"in e}function qc(e){return!!e&&"arrayValue"in e}function Kc(e){return!!e&&"nullValue"in e}function Gc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Hc(e){return!!e&&"mapValue"in e}function Wc(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){var t={mapValue:{fields:{}}};return hc(e.mapValue.fields,(function(e,n){return t.mapValue.fields[e]=Wc(n)})),t}if(e.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(e.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=Wc(e.arrayValue.values[r]);return n}return Object.assign({},e)}function Qc(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}function Yc(e){return"nullValue"in e?Oc:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?zc(Ac.empty(),os.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?{mapValue:{}}:Lu()}function $c(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?zc(Ac.empty(),os.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?{mapValue:{}}:"mapValue"in e?Rc:Lu()}function Xc(e,t){var n=Fc(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function Jc(e,t){var n=Fc(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}var Zc=function(){function e(t){p(this,e),this.value=t}return m(e,[{key:"field",value:function(e){if(e.isEmpty())return this.value;for(var t=this.value,n=0;n<e.length-1;++n)if(!Hc(t=(t.mapValue.fields||{})[e.get(n)]))return null;return(t=(t.mapValue.fields||{})[e.lastSegment()])||null}},{key:"set",value:function(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Wc(t)}},{key:"setAll",value:function(e){var t=this,n=as.emptyPath(),r={},i=[];e.forEach((function(e,a){if(!n.isImmediateParentOf(a)){var o=t.getFieldsMap(n);t.applyChanges(o,r,i),r={},i=[],n=a.popLast()}e?r[a.lastSegment()]=Wc(e):i.push(a.lastSegment())}));var a=this.getFieldsMap(n);this.applyChanges(a,r,i)}},{key:"delete",value:function(e){var t=this.field(e.popLast());Hc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}},{key:"isEqual",value:function(e){return Lc(this.value,e.value)}},{key:"getFieldsMap",value:function(e){var t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(var n=0;n<e.length;++n){var r=t.mapValue.fields[e.get(n)];Hc(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}},{key:"applyChanges",value:function(e,t,n){hc(t,(function(t,n){return e[t]=n}));var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;delete e[a]}}catch(o){i.e(o)}finally{i.f()}}},{key:"clone",value:function(){return new e(Wc(this.value))}}],[{key:"empty",value:function(){return new e({mapValue:{}})}}]),e}();function el(e){var t=[];return hc(e.fields,(function(e,n){var r=new as([e]);if(Hc(n)){var i=el(n.mapValue).fields;if(0===i.length)t.push(r);else{var a,o=g(i);try{for(o.s();!(a=o.n()).done;){var u=a.value;t.push(r.child(u))}}catch(s){o.e(s)}finally{o.f()}}}else t.push(r)})),new bc(t)}var tl=function(){function e(t,n,r,i,a,o,u){p(this,e),this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=a,this.data=o,this.documentState=u}return m(e,[{key:"convertToFoundDocument",value:function(e,t){return!this.createTime.isEqual(ts.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}},{key:"convertToNoDocument",value:function(e){return this.version=e,this.documentType=2,this.data=Zc.empty(),this.documentState=0,this}},{key:"convertToUnknownDocument",value:function(e){return this.version=e,this.documentType=3,this.data=Zc.empty(),this.documentState=2,this}},{key:"setHasCommittedMutations",value:function(){return this.documentState=2,this}},{key:"setHasLocalMutations",value:function(){return this.documentState=1,this.version=ts.min(),this}},{key:"setReadTime",value:function(e){return this.readTime=e,this}},{key:"hasLocalMutations",get:function(){return 1===this.documentState}},{key:"hasCommittedMutations",get:function(){return 2===this.documentState}},{key:"hasPendingWrites",get:function(){return this.hasLocalMutations||this.hasCommittedMutations}},{key:"isValidDocument",value:function(){return 0!==this.documentType}},{key:"isFoundDocument",value:function(){return 1===this.documentType}},{key:"isNoDocument",value:function(){return 2===this.documentType}},{key:"isUnknownDocument",value:function(){return 3===this.documentType}},{key:"isEqual",value:function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}},{key:"mutableCopy",value:function(){return new e(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}},{key:"toString",value:function(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}],[{key:"newInvalidDocument",value:function(t){return new e(t,0,ts.min(),ts.min(),ts.min(),Zc.empty(),0)}},{key:"newFoundDocument",value:function(t,n,r,i){return new e(t,1,n,ts.min(),r,i,0)}},{key:"newNoDocument",value:function(t,n){return new e(t,2,n,ts.min(),ts.min(),Zc.empty(),0)}},{key:"newUnknownDocument",value:function(t,n){return new e(t,3,n,ts.min(),ts.min(),Zc.empty(),2)}}]),e}(),nl=m((function e(t,n){p(this,e),this.position=t,this.inclusive=n}));function rl(e,t,n){for(var r=0,i=0;i<e.position.length;i++){var a=t[i],o=e.position[i];if(r=a.field.isKeyField()?os.comparator(os.fromName(o.referenceValue),n.key):Fc(o,n.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function il(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(var n=0;n<e.position.length;n++)if(!Lc(e.position[n],t.position[n]))return!1;return!0}var al=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";p(this,e),this.field=t,this.dir=n}));function ol(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}var ul=m((function e(){p(this,e)})),sl=function(e){w(n,e);var t=E(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this)).field=e,a.op=r,a.value=i,a}return m(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Fc(t,this.value)):null!==t&&Pc(this.value)===Pc(t)&&this.matchesComparison(Fc(t,this.value))}},{key:"matchesComparison",value:function(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Lu()}}},{key:"isInequality",value:function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}},{key:"getFlattenedFilters",value:function(){return[this]}},{key:"getFilters",value:function(){return[this]}},{key:"getFirstInequalityField",value:function(){return this.isInequality()?this.field:null}}],[{key:"create",value:function(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new gl(e,t,r):"array-contains"===t?new _l(e,r):"in"===t?new xl(e,r):"not-in"===t?new El(e,r):"array-contains-any"===t?new Sl(e,r):new n(e,t,r)}},{key:"createKeyFieldInFilter",value:function(e,t,n){return"in"===t?new kl(e,n):new bl(e,n)}}]),n}(ul),cl=function(e){w(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).filters=e,i.op=r,i.ht=null,i}return m(n,[{key:"matches",value:function(e){return ll(this)?void 0===this.filters.find((function(t){return!t.matches(e)})):void 0!==this.filters.find((function(t){return t.matches(e)}))}},{key:"getFlattenedFilters",value:function(){return null!==this.ht||(this.ht=this.filters.reduce((function(e,t){return e.concat(t.getFlattenedFilters())}),[])),this.ht}},{key:"getFilters",value:function(){return Object.assign([],this.filters)}},{key:"getFirstInequalityField",value:function(){var e=this.lt((function(e){return e.isInequality()}));return null!==e?e.field:null}},{key:"lt",value:function(e){var t,n=g(this.getFlattenedFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(e(r))return r}}catch(i){n.e(i)}finally{n.f()}return null}}],[{key:"create",value:function(e,t){return new n(e,t)}}]),n}(ul);function ll(e){return"and"===e.op}function fl(e){return"or"===e.op}function hl(e){return dl(e)&&ll(e)}function dl(e){var t,n=g(e.filters);try{for(n.s();!(t=n.n()).done;){if(t.value instanceof cl)return!1}}catch(r){n.e(r)}finally{n.f()}return!0}function vl(e){if(e instanceof sl)return e.field.canonicalString()+e.op.toString()+Vc(e.value);if(hl(e))return e.filters.map((function(e){return vl(e)})).join(",");var t=e.filters.map((function(e){return vl(e)})).join(",");return"".concat(e.op,"(").concat(t,")")}function pl(e,t){return e instanceof sl?function(e,t){return t instanceof sl&&e.op===t.op&&e.field.isEqual(t.field)&&Lc(e.value,t.value)}(e,t):e instanceof cl?function(e,t){return t instanceof cl&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((function(e,n,r){return e&&pl(n,t.filters[r])}),!0)}(e,t):void Lu()}function yl(e,t){var n=e.filters.concat(t);return cl.create(n,e.op)}function ml(e){return e instanceof sl?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Vc(e.value))}(e):e instanceof cl?function(e){return e.op.toString()+" {"+e.getFilters().map(ml).join(" ,")+"}"}(e):"Filter"}var gl=function(e){w(n,e);var t=E(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this,e,r,i)).key=os.fromName(i.referenceValue),a}return m(n,[{key:"matches",value:function(e){var t=os.comparator(e.key,this.key);return this.matchesComparison(t)}}]),n}(sl),kl=function(e){w(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,"in",r)).keys=wl("in",r),i}return m(n,[{key:"matches",value:function(e){return this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(sl),bl=function(e){w(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,"not-in",r)).keys=wl("not-in",r),i}return m(n,[{key:"matches",value:function(e){return!this.keys.some((function(t){return t.isEqual(e.key)}))}}]),n}(sl);function wl(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(e){return os.fromName(e.referenceValue)}))}var _l=function(e){w(n,e);var t=E(n);function n(e,r){return p(this,n),t.call(this,e,"array-contains",r)}return m(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return qc(t)&&Mc(t.arrayValue,this.value)}}]),n}(sl),xl=function(e){w(n,e);var t=E(n);function n(e,r){return p(this,n),t.call(this,e,"in",r)}return m(n,[{key:"matches",value:function(e){var t=e.data.field(this.field);return null!==t&&Mc(this.value.arrayValue,t)}}]),n}(sl),El=function(e){w(n,e);var t=E(n);function n(e,r){return p(this,n),t.call(this,e,"not-in",r)}return m(n,[{key:"matches",value:function(e){if(Mc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var t=e.data.field(this.field);return null!==t&&!Mc(this.value.arrayValue,t)}}]),n}(sl),Sl=function(e){w(n,e);var t=E(n);function n(e,r){return p(this,n),t.call(this,e,"array-contains-any",r)}return m(n,[{key:"matches",value:function(e){var t=this,n=e.data.field(this.field);return!(!qc(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(e){return Mc(t.value.arrayValue,e)}))}}]),n}(sl),Il=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;p(this,e),this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=o,this.endAt=u,this.ft=null}));function Tl(e){return new Il(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Cl(e){var t=Fu(e);if(null===t.ft){var n=t.path.canonicalString();null!==t.collectionGroup&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((function(e){return vl(e)})).join(","),n+="|ob:",n+=t.orderBy.map((function(e){return function(e){return e.field.canonicalString()+e.dir}(e)})).join(","),Os(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((function(e){return Vc(e)})).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((function(e){return Vc(e)})).join(",")),t.ft=n}return t.ft}function Dl(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(var n=0;n<e.orderBy.length;n++)if(!ol(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(var r=0;r<e.filters.length;r++)if(!pl(e.filters[r],t.filters[r]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!il(e.startAt,t.startAt)&&il(e.endAt,t.endAt)}function Nl(e){return os.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function Al(e,t){return e.filters.filter((function(e){return e instanceof sl&&e.field.isEqual(t)}))}function Rl(e,t,n){var r,i=Oc,a=!0,o=g(Al(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Oc,c=!0;switch(u.op){case"<":case"<=":s=Yc(u.value);break;case"==":case"in":case">=":s=u.value;break;case">":s=u.value,c=!1;break;case"!=":case"not-in":s=Oc}Xc({value:i,inclusive:a},{value:s,inclusive:c})<0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Xc({value:i,inclusive:a},{value:f,inclusive:n.inclusive})<0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}function Ol(e,t,n){var r,i=Rc,a=!0,o=g(Al(e,t));try{for(o.s();!(r=o.n()).done;){var u=r.value,s=Rc,c=!0;switch(u.op){case">=":case">":s=$c(u.value),c=!1;break;case"==":case"in":case"<=":s=u.value;break;case"<":s=u.value,c=!1;break;case"!=":case"not-in":s=Rc}Jc({value:i,inclusive:a},{value:s,inclusive:c})>0&&(i=s,a=c)}}catch(h){o.e(h)}finally{o.f()}if(null!==n)for(var l=0;l<e.orderBy.length;++l)if(e.orderBy[l].field.isEqual(t)){var f=n.position[l];Jc({value:i,inclusive:a},{value:f,inclusive:n.inclusive})>0&&(i=f,a=n.inclusive);break}return{value:i,inclusive:a}}var Pl=m((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;p(this,e),this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=o,this.startAt=u,this.endAt=s,this.dt=null,this.wt=null,this.startAt,this.endAt}));function Ll(e,t,n,r,i,a,o,u){return new Pl(e,t,n,r,i,a,o,u)}function Ml(e){return new Pl(e)}function Fl(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Ul(e){return e.explicitOrderBy.length>0?e.explicitOrderBy[0].field:null}function Vl(e){var t,n=g(e.filters);try{for(n.s();!(t=n.n()).done;){var r=t.value.getFirstInequalityField();if(null!==r)return r}}catch(i){n.e(i)}finally{n.f()}return null}function Bl(e){return null!==e.collectionGroup}function zl(e){var t=Fu(e);if(null===t.dt){t.dt=[];var n=Vl(t),r=Ul(t);if(null!==n&&null===r)n.isKeyField()||t.dt.push(new al(n)),t.dt.push(new al(as.keyField(),"asc"));else{var i,a=!1,o=g(t.explicitOrderBy);try{for(o.s();!(i=o.n()).done;){var u=i.value;t.dt.push(u),u.field.isKeyField()&&(a=!0)}}catch(c){o.e(c)}finally{o.f()}if(!a){var s=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";t.dt.push(new al(as.keyField(),s))}}}return t.dt}function jl(e){var t=Fu(e);if(!t.wt)if("F"===t.limitType)t.wt=Tl(t.path,t.collectionGroup,zl(t),t.filters,t.limit,t.startAt,t.endAt);else{var n,r=[],i=g(zl(t));try{for(i.s();!(n=i.n()).done;){var a=n.value,o="desc"===a.dir?"asc":"desc";r.push(new al(a.field,o))}}catch(c){i.e(c)}finally{i.f()}var u=t.endAt?new nl(t.endAt.position,t.endAt.inclusive):null,s=t.startAt?new nl(t.startAt.position,t.startAt.inclusive):null;t.wt=Tl(t.path,t.collectionGroup,r,t.filters,t.limit,u,s)}return t.wt}function ql(e,t){t.getFirstInequalityField(),Vl(e);var n=e.filters.concat([t]);return new Pl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Kl(e,t,n){return new Pl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Gl(e,t){return Dl(jl(e),jl(t))&&e.limitType===t.limitType}function Hl(e){return"".concat(Cl(jl(e)),"|lt:").concat(e.limitType)}function Wl(e){return"Query(target=".concat(function(e){var t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map((function(e){return ml(e)})).join(", "),"]")),Os(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map((function(e){return function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)})).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((function(e){return Vc(e)})).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((function(e){return Vc(e)})).join(",")),"Target(".concat(t,")")}(jl(e)),"; limitType=").concat(e.limitType,")")}function Ql(e,t){return t.isFoundDocument()&&function(e,t){var n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):os.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){var n,r=g(zl(e));try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!i.field.isKeyField()&&null===t.data.field(i.field))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}(e,t)&&function(e,t){var n,r=g(e.filters);try{for(r.s();!(n=r.n()).done;){if(!n.value.matches(t))return!1}}catch(i){r.e(i)}finally{r.f()}return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){var r=rl(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,zl(e),t))&&!(e.endAt&&!function(e,t,n){var r=rl(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,zl(e),t))}(e,t)}function Yl(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function $l(e){return function(t,n){var r,i=!1,a=g(zl(e));try{for(a.s();!(r=a.n()).done;){var o=r.value,u=Xl(o,t,n);if(0!==u)return u;i=i||o.field.isKeyField()}}catch(s){a.e(s)}finally{a.f()}return 0}}function Xl(e,t,n){var r=e.field.isKeyField()?os.comparator(t.key,n.key):function(e,t,n){var r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Fc(r,i):Lu()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Lu()}}var Jl=function(){function e(t,n){p(this,e),this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}return m(e,[{key:"get",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n){var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];if(this.equalsFn(o,e))return u}}catch(c){i.e(c)}finally{i.f()}}}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"set",value:function(e,t){var n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}},{key:"delete",value:function(e){var t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}},{key:"forEach",value:function(e){hc(this.inner,(function(t,n){var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=s(r.value,2),o=a[0],u=a[1];e(o,u)}}catch(c){i.e(c)}finally{i.f()}}))}},{key:"isEmpty",value:function(){return dc(this.inner)}},{key:"size",value:function(){return this.innerSize}}]),e}(),Zl=new vc(os.comparator);function ef(){return Zl}var tf=new vc(os.comparator);function nf(){for(var e=tf,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.insert(o.key,o)}return e}function rf(e){var t=tf;return e.forEach((function(e,n){return t=t.insert(e,n.overlayedDocument)})),t}function af(){return uf()}function of(){return uf()}function uf(){return new Jl((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)}))}var sf=new vc(os.comparator),cf=new mc(os.comparator);function lf(){for(var e=cf,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0,a=n;i<a.length;i++){var o=a[i];e=e.add(o)}return e}var ff=new mc(Xu);function hf(){return ff}function df(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ps(t)?"-0":t}}function vf(e){return{integerValue:""+e}}function pf(e,t){return Ls(t)?vf(t):df(e,t)}var yf=m((function e(){p(this,e),this._=void 0}));function mf(e,t,n){return e instanceof bf?function(e,t){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof wf?_f(e,t):e instanceof xf?Ef(e,t):function(e,t){var n=kf(e,t),r=If(n)+If(e._t);return jc(n)&&jc(e._t)?vf(r):df(e.serializer,r)}(e,t)}function gf(e,t,n){return e instanceof wf?_f(e,t):e instanceof xf?Ef(e,t):n}function kf(e,t){return e instanceof Sf?jc(n=t)||function(e){return!!e&&"doubleValue"in e}(n)?t:{integerValue:0}:null;var n}var bf=function(e){w(n,e);var t=E(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n)}(yf),wf=function(e){w(n,e);var t=E(n);function n(e){var r;return p(this,n),(r=t.call(this)).elements=e,r}return m(n)}(yf);function _f(e,t){var n,r=Tf(t),i=g(e.elements);try{var a=function(){var e=n.value;r.some((function(t){return Lc(t,e)}))||r.push(e)};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var xf=function(e){w(n,e);var t=E(n);function n(e){var r;return p(this,n),(r=t.call(this)).elements=e,r}return m(n)}(yf);function Ef(e,t){var n,r=Tf(t),i=g(e.elements);try{var a=function(){var e=n.value;r=r.filter((function(t){return!Lc(t,e)}))};for(i.s();!(n=i.n()).done;)a()}catch(o){i.e(o)}finally{i.f()}return{arrayValue:{values:r}}}var Sf=function(e){w(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).serializer=e,i._t=r,i}return m(n)}(yf);function If(e){return Sc(e.integerValue||e.doubleValue)}function Tf(e){return qc(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}var Cf=m((function e(t,n){p(this,e),this.field=t,this.transform=n}));var Df=m((function e(t,n){p(this,e),this.version=t,this.transformResults=n})),Nf=function(){function e(t,n){p(this,e),this.updateTime=t,this.exists=n}return m(e,[{key:"isNone",get:function(){return void 0===this.updateTime&&void 0===this.exists}},{key:"isEqual",value:function(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}],[{key:"none",value:function(){return new e}},{key:"exists",value:function(t){return new e(void 0,t)}},{key:"updateTime",value:function(t){return new e(t)}}]),e}();function Af(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}var Rf=m((function e(){p(this,e)}));function Of(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Gf(e.key,Nf.none()):new Uf(e.key,e.data,Nf.none());var n,r=e.data,i=Zc.empty(),a=new mc(as.comparator),o=g(t.fields);try{for(o.s();!(n=o.n()).done;){var u=n.value;if(!a.has(u)){var s=r.field(u);null===s&&u.length>1&&(u=u.popLast(),s=r.field(u)),null===s?i.delete(u):i.set(u,s),a=a.add(u)}}}catch(c){o.e(c)}finally{o.f()}return new Vf(e.key,i,new bc(a.toArray()),Nf.none())}function Pf(e,t,n){e instanceof Uf?function(e,t,n){var r=e.value.clone(),i=zf(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Vf?function(e,t,n){if(Af(e.precondition,t)){var r=zf(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Bf(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else t.convertToUnknownDocument(n.version)}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Lf(e,t,n,r){return e instanceof Uf?function(e,t,n,r){if(!Af(e.precondition,t))return n;var i=e.value.clone(),a=jf(e.fieldTransforms,r,t);return i.setAll(a),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Vf?function(e,t,n,r){if(!Af(e.precondition,t))return n;var i=jf(e.fieldTransforms,r,t),a=t.data;return a.setAll(Bf(e)),a.setAll(i),t.convertToFoundDocument(t.version,a).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map((function(e){return e.field})))}(e,t,n,r):function(e,t,n){return Af(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Mf(e,t){var n,r=null,i=g(e.fieldTransforms);try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.field),u=kf(a.transform,o||null);null!=u&&(null===r&&(r=Zc.empty()),r.set(a.field,u))}}catch(s){i.e(s)}finally{i.f()}return r||null}function Ff(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ju(e,t,(function(e,t){return function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof wf&&t instanceof wf||e instanceof xf&&t instanceof xf?Ju(e.elements,t.elements,Lc):e instanceof Sf&&t instanceof Sf?Lc(e._t,t._t):e instanceof bf&&t instanceof bf}(e.transform,t.transform)}(e,t)}))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}var Uf=function(e){w(n,e);var t=E(n);function n(e,r,i){var a,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return p(this,n),(a=t.call(this)).key=e,a.value=r,a.precondition=i,a.fieldTransforms=o,a.type=0,a}return m(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Rf),Vf=function(e){w(n,e);var t=E(n);function n(e,r,i,a){var o,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];return p(this,n),(o=t.call(this)).key=e,o.data=r,o.fieldMask=i,o.precondition=a,o.fieldTransforms=u,o.type=1,o}return m(n,[{key:"getFieldMask",value:function(){return this.fieldMask}}]),n}(Rf);function Bf(e){var t=new Map;return e.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=e.data.field(n);t.set(n,r)}})),t}function zf(e,t,n){var r=new Map;Mu(e.length===n.length);for(var i=0;i<n.length;i++){var a=e[i],o=a.transform,u=t.data.field(a.field);r.set(a.field,gf(o,u,n[i]))}return r}function jf(e,t,n){var r,i=new Map,a=g(e);try{for(a.s();!(r=a.n()).done;){var o=r.value,u=o.transform,s=n.data.field(o.field);i.set(o.field,mf(u,s,t))}}catch(c){a.e(c)}finally{a.f()}return i}var qf,Kf,Gf=function(e){w(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=2,i.fieldTransforms=[],i}return m(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Rf),Hf=function(e){w(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).key=e,i.precondition=r,i.type=3,i.fieldTransforms=[],i}return m(n,[{key:"getFieldMask",value:function(){return null}}]),n}(Rf),Wf=function(){function e(t,n,r,i){p(this,e),this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}return m(e,[{key:"applyToRemoteDocument",value:function(e,t){for(var n=t.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(e.key)&&Pf(i,e,n[r])}}},{key:"applyToLocalView",value:function(e,t){var n,r=g(this.baseMutations);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.key.isEqual(e.key)&&(t=Lf(i,e,t,this.localWriteTime))}}catch(s){r.e(s)}finally{r.f()}var a,o=g(this.mutations);try{for(o.s();!(a=o.n()).done;){var u=a.value;u.key.isEqual(e.key)&&(t=Lf(u,e,t,this.localWriteTime))}}catch(s){o.e(s)}finally{o.f()}return t}},{key:"applyToLocalDocumentSet",value:function(e,t){var n=this,r=of();return this.mutations.forEach((function(i){var a=e.get(i.key),o=a.overlayedDocument,u=n.applyToLocalView(o,a.mutatedFields),s=Of(o,u=t.has(i.key)?null:u);null!==s&&r.set(i.key,s),o.isValidDocument()||o.convertToNoDocument(ts.min())})),r}},{key:"keys",value:function(){return this.mutations.reduce((function(e,t){return e.add(t.key)}),lf())}},{key:"isEqual",value:function(e){return this.batchId===e.batchId&&Ju(this.mutations,e.mutations,(function(e,t){return Ff(e,t)}))&&Ju(this.baseMutations,e.baseMutations,(function(e,t){return Ff(e,t)}))}}]),e}(),Qf=function(){function e(t,n,r,i){p(this,e),this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}return m(e,null,[{key:"from",value:function(t,n,r){Mu(t.mutations.length===r.length);for(var i=sf,a=t.mutations,o=0;o<a.length;o++)i=i.insert(a[o].key,r[o].version);return new e(t,n,r,i)}}]),e}(),Yf=function(){function e(t,n){p(this,e),this.largestBatchId=t,this.mutation=n}return m(e,[{key:"getKey",value:function(){return this.mutation.key}},{key:"isEqual",value:function(e){return null!==e&&this.mutation===e.mutation}},{key:"toString",value:function(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}]),e}(),$f=m((function e(t){p(this,e),this.count=t}));function Xf(e){switch(e){default:return Lu();case Uu.CANCELLED:case Uu.UNKNOWN:case Uu.DEADLINE_EXCEEDED:case Uu.RESOURCE_EXHAUSTED:case Uu.INTERNAL:case Uu.UNAVAILABLE:case Uu.UNAUTHENTICATED:return!1;case Uu.INVALID_ARGUMENT:case Uu.NOT_FOUND:case Uu.ALREADY_EXISTS:case Uu.PERMISSION_DENIED:case Uu.FAILED_PRECONDITION:case Uu.ABORTED:case Uu.OUT_OF_RANGE:case Uu.UNIMPLEMENTED:case Uu.DATA_LOSS:return!0}}function Jf(e){if(void 0===e)return Ru("GRPC error has no .code"),Uu.UNKNOWN;switch(e){case qf.OK:return Uu.OK;case qf.CANCELLED:return Uu.CANCELLED;case qf.UNKNOWN:return Uu.UNKNOWN;case qf.DEADLINE_EXCEEDED:return Uu.DEADLINE_EXCEEDED;case qf.RESOURCE_EXHAUSTED:return Uu.RESOURCE_EXHAUSTED;case qf.INTERNAL:return Uu.INTERNAL;case qf.UNAVAILABLE:return Uu.UNAVAILABLE;case qf.UNAUTHENTICATED:return Uu.UNAUTHENTICATED;case qf.INVALID_ARGUMENT:return Uu.INVALID_ARGUMENT;case qf.NOT_FOUND:return Uu.NOT_FOUND;case qf.ALREADY_EXISTS:return Uu.ALREADY_EXISTS;case qf.PERMISSION_DENIED:return Uu.PERMISSION_DENIED;case qf.FAILED_PRECONDITION:return Uu.FAILED_PRECONDITION;case qf.ABORTED:return Uu.ABORTED;case qf.OUT_OF_RANGE:return Uu.OUT_OF_RANGE;case qf.UNIMPLEMENTED:return Uu.UNIMPLEMENTED;case qf.DATA_LOSS:return Uu.DATA_LOSS;default:return Lu()}}(Kf=qf||(qf={}))[Kf.OK=0]="OK",Kf[Kf.CANCELLED=1]="CANCELLED",Kf[Kf.UNKNOWN=2]="UNKNOWN",Kf[Kf.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Kf[Kf.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Kf[Kf.NOT_FOUND=5]="NOT_FOUND",Kf[Kf.ALREADY_EXISTS=6]="ALREADY_EXISTS",Kf[Kf.PERMISSION_DENIED=7]="PERMISSION_DENIED",Kf[Kf.UNAUTHENTICATED=16]="UNAUTHENTICATED",Kf[Kf.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Kf[Kf.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Kf[Kf.ABORTED=10]="ABORTED",Kf[Kf.OUT_OF_RANGE=11]="OUT_OF_RANGE",Kf[Kf.UNIMPLEMENTED=12]="UNIMPLEMENTED",Kf[Kf.INTERNAL=13]="INTERNAL",Kf[Kf.UNAVAILABLE=14]="UNAVAILABLE",Kf[Kf.DATA_LOSS=15]="DATA_LOSS";var Zf=function(){function e(){p(this,e),this.onExistenceFilterMismatchCallbacks=new Map}return m(e,[{key:"onExistenceFilterMismatch",value:function(e){var t=this,n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),function(){return t.onExistenceFilterMismatchCallbacks.delete(n)}}},{key:"notifyOnExistenceFilterMismatch",value:function(e){this.onExistenceFilterMismatchCallbacks.forEach((function(t){return t(e)}))}}],[{key:"instance",get:function(){return eh}},{key:"getOrCreateInstance",value:function(){return null===eh&&(eh=new e),eh}}]),e}(),eh=null,th=function(){function e(t,n,r,i,a){p(this,e),this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}return m(e,null,[{key:"createSynthesizedRemoteEventForCurrentChange",value:function(t,n,r){var i=new Map;return i.set(t,nh.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new e(ts.min(),i,hf(),ef(),lf())}}]),e}(),nh=function(){function e(t,n,r,i,a){p(this,e),this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}return m(e,null,[{key:"createSynthesizedTargetChangeForCurrentChange",value:function(t,n,r){return new e(r,n,lf(),lf(),lf())}}]),e}(),rh=m((function e(t,n,r,i){p(this,e),this.It=t,this.removedTargetIds=n,this.key=r,this.Tt=i})),ih=m((function e(t,n){p(this,e),this.targetId=t,this.Et=n})),ah=m((function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_c.EMPTY_BYTE_STRING,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;p(this,e),this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i})),oh=function(){function e(){p(this,e),this.At=0,this.Rt=ch(),this.vt=_c.EMPTY_BYTE_STRING,this.bt=!1,this.Pt=!0}return m(e,[{key:"current",get:function(){return this.bt}},{key:"resumeToken",get:function(){return this.vt}},{key:"Vt",get:function(){return 0!==this.At}},{key:"St",get:function(){return this.Pt}},{key:"Dt",value:function(e){e.approximateByteSize()>0&&(this.Pt=!0,this.vt=e)}},{key:"Ct",value:function(){var e=lf(),t=lf(),n=lf();return this.Rt.forEach((function(r,i){switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Lu()}})),new nh(this.vt,this.bt,e,t,n)}},{key:"xt",value:function(){this.Pt=!1,this.Rt=ch()}},{key:"Nt",value:function(e,t){this.Pt=!0,this.Rt=this.Rt.insert(e,t)}},{key:"kt",value:function(e){this.Pt=!0,this.Rt=this.Rt.remove(e)}},{key:"Ot",value:function(){this.At+=1}},{key:"$t",value:function(){this.At-=1}},{key:"Mt",value:function(){this.Pt=!0,this.bt=!0}}]),e}(),uh=function(){function e(t){p(this,e),this.Ft=t,this.Bt=new Map,this.Lt=ef(),this.qt=sh(),this.Ut=new mc(Xu)}return m(e,[{key:"Kt",value:function(e){var t,n=g(e.It);try{for(n.s();!(t=n.n()).done;){var r=t.value;e.Tt&&e.Tt.isFoundDocument()?this.Gt(r,e.Tt):this.Qt(r,e.key,e.Tt)}}catch(u){n.e(u)}finally{n.f()}var i,a=g(e.removedTargetIds);try{for(a.s();!(i=a.n()).done;){var o=i.value;this.Qt(o,e.key,e.Tt)}}catch(u){a.e(u)}finally{a.f()}}},{key:"zt",value:function(e){var t=this;this.forEachTarget(e,(function(n){var r=t.jt(n);switch(e.state){case 0:t.Wt(n)&&r.Dt(e.resumeToken);break;case 1:r.$t(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.$t(),r.Vt||t.removeTarget(n);break;case 3:t.Wt(n)&&(r.Mt(),r.Dt(e.resumeToken));break;case 4:t.Wt(n)&&(t.Ht(n),r.Dt(e.resumeToken));break;default:Lu()}}))}},{key:"forEachTarget",value:function(e,t){var n=this;e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((function(e,r){n.Wt(r)&&t(r)}))}},{key:"Jt",value:function(e){var t,n=e.targetId,r=e.Et.count,i=this.Yt(n);if(i){var a=i.target;if(Nl(a))if(0===r){var o=new os(a.path);this.Qt(n,o,tl.newNoDocument(o,ts.min()))}else Mu(1===r);else{var u=this.Zt(n);u!==r&&(this.Ht(n),this.Ut=this.Ut.add(n),null===(t=Zf.instance)||void 0===t||t.notifyOnExistenceFilterMismatch({localCacheCount:u,existenceFilterCount:e.Et.count}))}}}},{key:"Xt",value:function(e){var t=this,n=new Map;this.Bt.forEach((function(r,i){var a=t.Yt(i);if(a){if(r.current&&Nl(a.target)){var o=new os(a.target.path);null!==t.Lt.get(o)||t.te(i,o)||t.Qt(i,o,tl.newNoDocument(o,e))}r.St&&(n.set(i,r.Ct()),r.xt())}}));var r=lf();this.qt.forEach((function(e,n){var i=!0;n.forEachWhile((function(e){var n=t.Yt(e);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(e))})),this.Lt.forEach((function(t,n){return n.setReadTime(e)}));var i=new th(e,n,this.Ut,this.Lt,r);return this.Lt=ef(),this.qt=sh(),this.Ut=new mc(Xu),i}},{key:"Gt",value:function(e,t){if(this.Wt(e)){var n=this.te(e,t.key)?2:0;this.jt(e).Nt(t.key,n),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}}},{key:"Qt",value:function(e,t,n){if(this.Wt(e)){var r=this.jt(e);this.te(e,t)?r.Nt(t,1):r.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),n&&(this.Lt=this.Lt.insert(t,n))}}},{key:"removeTarget",value:function(e){this.Bt.delete(e)}},{key:"Zt",value:function(e){var t=this.jt(e).Ct();return this.Ft.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}},{key:"Ot",value:function(e){this.jt(e).Ot()}},{key:"jt",value:function(e){var t=this.Bt.get(e);return t||(t=new oh,this.Bt.set(e,t)),t}},{key:"ee",value:function(e){var t=this.qt.get(e);return t||(t=new mc(Xu),this.qt=this.qt.insert(e,t)),t}},{key:"Wt",value:function(e){var t=null!==this.Yt(e);return t||Au("WatchChangeAggregator","Detected inactive target",e),t}},{key:"Yt",value:function(e){var t=this.Bt.get(e);return t&&t.Vt?null:this.Ft.ne(e)}},{key:"Ht",value:function(e){var t=this;this.Bt.set(e,new oh),this.Ft.getRemoteKeysForTarget(e).forEach((function(n){t.Qt(e,n,null)}))}},{key:"te",value:function(e,t){return this.Ft.getRemoteKeysForTarget(e).has(t)}}]),e}();function sh(){return new vc(os.comparator)}function ch(){return new vc(os.comparator)}var lh={asc:"ASCENDING",desc:"DESCENDING"},fh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hh={and:"AND",or:"OR"},dh=m((function e(t,n){p(this,e),this.databaseId=t,this.useProto3Json=n}));function vh(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function ph(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function yh(e,t){return vh(e,t.toTimestamp())}function mh(e){return Mu(!!e),ts.fromTimestamp(function(e){var t=Ec(e);return new es(t.seconds,t.nanos)}(e))}function gh(e,t){return function(e){return new rs(["projects",e.projectId,"databases",e.database])}(e).child("documents").child(t).canonicalString()}function kh(e){var t=rs.fromString(e);return Mu(jh(t)),t}function bh(e,t){return gh(e.databaseId,t.path)}function wh(e,t){var n=kh(t);if(n.get(1)!==e.databaseId.projectId)throw new Vu(Uu.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Vu(Uu.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new os(Sh(n))}function _h(e,t){return gh(e.databaseId,t)}function xh(e){var t=kh(e);return 4===t.length?rs.emptyPath():Sh(t)}function Eh(e){return new rs(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Sh(e){return Mu(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Ih(e,t,n){return{name:bh(e,t),fields:n.value.mapValue.fields}}function Th(e,t,n){var r=wh(e,t.name),i=mh(t.updateTime),a=t.createTime?mh(t.createTime):ts.min(),o=new Zc({mapValue:{fields:t.fields}}),u=tl.newFoundDocument(r,i,a,o);return n&&u.setHasCommittedMutations(),n?u.setHasCommittedMutations():u}function Ch(e,t){return"found"in t?function(e,t){Mu(!!t.found),t.found.name,t.found.updateTime;var n=wh(e,t.found.name),r=mh(t.found.updateTime),i=t.found.createTime?mh(t.found.createTime):ts.min(),a=new Zc({mapValue:{fields:t.found.fields}});return tl.newFoundDocument(n,r,i,a)}(e,t):"missing"in t?function(e,t){Mu(!!t.missing),Mu(!!t.readTime);var n=wh(e,t.missing),r=mh(t.readTime);return tl.newNoDocument(n,r)}(e,t):Lu()}function Dh(e,t){var n;if(t instanceof Uf)n={update:Ih(e,t.key,t.value)};else if(t instanceof Gf)n={delete:bh(e,t.key)};else if(t instanceof Vf)n={update:Ih(e,t.key,t.data),updateMask:zh(t.fieldMask)};else{if(!(t instanceof Hf))return Lu();n={verify:bh(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((function(e){return function(e,t){var n=t.transform;if(n instanceof bf)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof wf)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof xf)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Sf)return{fieldPath:t.field.canonicalString(),increment:n._t};throw Lu()}(0,e)}))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:yh(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Lu()}(e,t.precondition)),n}function Nh(e,t){var n=t.currentDocument?function(e){return void 0!==e.updateTime?Nf.updateTime(mh(e.updateTime)):void 0!==e.exists?Nf.exists(e.exists):Nf.none()}(t.currentDocument):Nf.none(),r=t.updateTransforms?t.updateTransforms.map((function(t){return function(e,t){var n=null;if("setToServerValue"in t)Mu("REQUEST_TIME"===t.setToServerValue),n=new bf;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new wf(r)}else if("removeAllFromArray"in t){var i=t.removeAllFromArray.values||[];n=new xf(i)}else"increment"in t?n=new Sf(e,t.increment):Lu();var a=as.fromServerFormat(t.fieldPath);return new Cf(a,n)}(e,t)})):[];if(t.update){t.update.name;var i=wh(e,t.update.name),a=new Zc({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=function(e){var t=e.fieldPaths||[];return new bc(t.map((function(e){return as.fromServerFormat(e)})))}(t.updateMask);return new Vf(i,a,o,n,r)}return new Uf(i,a,n,r)}if(t.delete){var u=wh(e,t.delete);return new Gf(u,n)}if(t.verify){var s=wh(e,t.verify);return new Hf(s,n)}return Lu()}function Ah(e,t){return{documents:[_h(e,t.path)]}}function Rh(e,t){var n={structuredQuery:{}},r=t.path;null!==t.collectionGroup?(n.parent=_h(e,r),n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(n.parent=_h(e,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(e){if(0!==e.length)return Bh(cl.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);var a=function(e){if(0!==e.length)return e.map((function(e){return function(e){return{field:Uh(e.field),direction:Lh(e.dir)}}(e)}))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);var o,u=function(e,t){return e.useProto3Json||Os(t)?t:{value:t}}(e,t.limit);return null!==u&&(n.structuredQuery.limit=u),t.startAt&&(n.structuredQuery.startAt={before:(o=t.startAt).inclusive,values:o.position}),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),n}function Oh(e){var t=xh(e.parent),n=e.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Mu(1===r);var a=n.from[0];a.allDescendants?i=a.collectionId:t=t.child(a.collectionId)}var o=[];n.where&&(o=function(e){var t=Ph(e);return t instanceof cl&&hl(t)?t.getFilters():[t]}(n.where));var u=[];n.orderBy&&(u=n.orderBy.map((function(e){return function(e){return new al(Vh(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e)})));var s=null;n.limit&&(s=function(e){var t;return Os(t="object"==typeof e?e.value:e)?null:t}(n.limit));var c=null;n.startAt&&(c=function(e){var t=!!e.before,n=e.values||[];return new nl(n,t)}(n.startAt));var l=null;return n.endAt&&(l=function(e){var t=!e.before,n=e.values||[];return new nl(n,t)}(n.endAt)),Ll(t,i,u,o,s,"F",c,l)}function Ph(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":var t=Vh(e.unaryFilter.field);return sl.create(t,"==",{doubleValue:NaN});case"IS_NULL":var n=Vh(e.unaryFilter.field);return sl.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Vh(e.unaryFilter.field);return sl.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Vh(e.unaryFilter.field);return sl.create(i,"!=",{nullValue:"NULL_VALUE"});default:return Lu()}}(e):void 0!==e.fieldFilter?function(e){return sl.create(Vh(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Lu()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return cl.create(e.compositeFilter.filters.map((function(e){return Ph(e)})),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Lu()}}(e.compositeFilter.op))}(e):Lu()}function Lh(e){return lh[e]}function Mh(e){return fh[e]}function Fh(e){return hh[e]}function Uh(e){return{fieldPath:e.canonicalString()}}function Vh(e){return as.fromServerFormat(e.fieldPath)}function Bh(e){return e instanceof sl?function(e){if("=="===e.op){if(Gc(e.value))return{unaryFilter:{field:Uh(e.field),op:"IS_NAN"}};if(Kc(e.value))return{unaryFilter:{field:Uh(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Gc(e.value))return{unaryFilter:{field:Uh(e.field),op:"IS_NOT_NAN"}};if(Kc(e.value))return{unaryFilter:{field:Uh(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Uh(e.field),op:Mh(e.op),value:e.value}}}(e):e instanceof cl?function(e){var t=e.getFilters().map((function(e){return Bh(e)}));return 1===t.length?t[0]:{compositeFilter:{op:Fh(e.op),filters:t}}}(e):Lu()}function zh(e){var t=[];return e.fields.forEach((function(e){return t.push(e.canonicalString())})),{fieldPaths:t}}function jh(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}var qh=function(){function e(t,n,r,i){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:ts.min(),o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:ts.min(),u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:_c.EMPTY_BYTE_STRING;p(this,e),this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=u}return m(e,[{key:"withSequenceNumber",value:function(t){return new e(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}},{key:"withResumeToken",value:function(t,n){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t)}},{key:"withLastLimboFreeSnapshotVersion",value:function(t){return new e(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken)}}]),e}(),Kh=m((function e(t){p(this,e),this.se=t}));function Gh(e,t){var n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Hh(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:bh(e,t.key),fields:t.data.value.mapValue.fields,updateTime:vh(e,t.version.toTimestamp()),createTime:vh(e,t.createTime.toTimestamp())}}(e.se,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:Wh(t.version)};else{if(!t.isUnknownDocument())return Lu();r.unknownDocument={path:n.path.toArray(),version:Wh(t.version)}}return r}function Hh(e){var t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function Wh(e){var t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Qh(e){var t=new es(e.seconds,e.nanoseconds);return ts.fromTimestamp(t)}function Yh(e,t){for(var n=(t.baseMutations||[]).map((function(t){return Nh(e.se,t)})),r=0;r<t.mutations.length-1;++r){var i=t.mutations[r];if(r+1<t.mutations.length&&void 0!==t.mutations[r+1].transform){var a=t.mutations[r+1];i.updateTransforms=a.transform.fieldTransforms,t.mutations.splice(r+1,1),++r}}var o=t.mutations.map((function(t){return Nh(e.se,t)})),u=es.fromMillis(t.localWriteTimeMs);return new Wf(t.batchId,u,n,o)}function $h(e){var t,n,r=Qh(e.readTime),i=void 0!==e.lastLimboFreeSnapshotVersion?Qh(e.lastLimboFreeSnapshotVersion):ts.min();return void 0!==e.query.documents?(Mu(1===(n=e.query).documents.length),t=jl(Ml(xh(n.documents[0])))):t=function(e){return jl(Oh(e))}(e.query),new qh(t,e.targetId,0,e.lastListenSequenceNumber,r,i,_c.fromBase64String(e.resumeToken))}function Xh(e,t){var n,r=Wh(t.snapshotVersion),i=Wh(t.lastLimboFreeSnapshotVersion);n=Nl(t.target)?Ah(e.se,t.target):Rh(e.se,t.target);var a=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Cl(t.target),readTime:r,resumeToken:a,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:i,query:n}}function Jh(e){var t=Oh({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Kl(t,t.limit,"L"):t}function Zh(e,t){return new Yf(t.largestBatchId,Nh(e.se,t.overlayMutation))}function ed(e,t){var n=t.path.lastSegment();return[e,Ms(t.path.popLast()),n]}function td(e,t,n,r){return{indexId:e,uid:t.uid||"",sequenceNumber:n,readTime:Wh(r.readTime),documentKey:Ms(r.documentKey.path),largestBatchId:r.largestBatchId}}var nd=function(){function e(){p(this,e)}return m(e,[{key:"getBundleMetadata",value:function(e,t){return rd(e).get(t).next((function(e){if(e)return{id:(t=e).bundleId,createTime:Qh(t.createTime),version:t.version};var t}))}},{key:"saveBundleMetadata",value:function(e,t){return rd(e).put({bundleId:(n=t).id,createTime:Wh(mh(n.createTime)),version:n.version});var n}},{key:"getNamedQuery",value:function(e,t){return id(e).get(t).next((function(e){if(e)return{name:(t=e).name,query:Jh(t.bundledQuery),readTime:Qh(t.readTime)};var t}))}},{key:"saveNamedQuery",value:function(e,t){return id(e).put(function(e){return{name:e.name,readTime:Wh(mh(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}]),e}();function rd(e){return lc(e,"bundles")}function id(e){return lc(e,"namedQueries")}var ad=function(){function e(t,n){p(this,e),this.serializer=t,this.userId=n}return m(e,[{key:"getOverlay",value:function(e,t){var n=this;return od(e).get(ed(this.userId,t)).next((function(e){return e?Zh(n.serializer,e):null}))}},{key:"getOverlays",value:function(e,t){var n=this,r=af();return bs.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this,i=[];return n.forEach((function(n,a){var o=new Yf(t,a);i.push(r.re(e,o))})),bs.waitFor(i)}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=new Set;t.forEach((function(e){return i.add(Ms(e.getCollectionPath()))}));var a=[];return i.forEach((function(t){var i=IDBKeyRange.bound([r.userId,t,n],[r.userId,t,n+1],!1,!0);a.push(od(e).J("collectionPathOverlayIndex",i))})),bs.waitFor(a)}},{key:"getOverlaysForCollection",value:function(e,t,n){var r=this,i=af(),a=Ms(t),o=IDBKeyRange.bound([this.userId,a,n],[this.userId,a,Number.POSITIVE_INFINITY],!0);return od(e).j("collectionPathOverlayIndex",o).next((function(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var a=t.value,o=Zh(r.serializer,a);i.set(o.getKey(),o)}}catch(u){n.e(u)}finally{n.f()}return i}))}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){var i,a=this,o=af(),u=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return od(e).Z({index:"collectionGroupOverlayIndex",range:u},(function(e,t,n){var u=Zh(a.serializer,t);o.size()<r||u.largestBatchId===i?(o.set(u.getKey(),u),i=u.largestBatchId):n.done()})).next((function(){return o}))}},{key:"re",value:function(e,t){return od(e).put(function(e,t,n){var r=s(ed(t,n.mutation.key),3);r[0];return{userId:t,collectionPath:r[1],documentId:r[2],collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:Dh(e.se,n.mutation)}}(this.serializer,this.userId,t))}}],[{key:"ie",value:function(t,n){return new e(t,n.uid||"")}}]),e}();function od(e){return lc(e,"documentOverlays")}var ud=function(){function e(){p(this,e)}return m(e,[{key:"oe",value:function(e,t){this.ue(e,t),t.ce()}},{key:"ue",value:function(e,t){if("nullValue"in e)this.ae(t,5);else if("booleanValue"in e)this.ae(t,10),t.he(e.booleanValue?1:0);else if("integerValue"in e)this.ae(t,15),t.he(Sc(e.integerValue));else if("doubleValue"in e){var n=Sc(e.doubleValue);isNaN(n)?this.ae(t,13):(this.ae(t,15),Ps(n)?t.he(0):t.he(n))}else if("timestampValue"in e){var r=e.timestampValue;this.ae(t,20),"string"==typeof r?t.le(r):(t.le("".concat(r.seconds||"")),t.he(r.nanos||0))}else if("stringValue"in e)this.fe(e.stringValue,t),this.de(t);else if("bytesValue"in e)this.ae(t,30),t.we(Ic(e.bytesValue)),this.de(t);else if("referenceValue"in e)this._e(e.referenceValue,t);else if("geoPointValue"in e){var i=e.geoPointValue;this.ae(t,45),t.he(i.latitude||0),t.he(i.longitude||0)}else"mapValue"in e?Qc(e)?this.ae(t,Number.MAX_SAFE_INTEGER):(this.me(e.mapValue,t),this.de(t)):"arrayValue"in e?(this.ge(e.arrayValue,t),this.de(t)):Lu()}},{key:"fe",value:function(e,t){this.ae(t,25),this.ye(e,t)}},{key:"ye",value:function(e,t){t.le(e)}},{key:"me",value:function(e,t){var n=e.fields||{};this.ae(t,55);for(var r=0,i=Object.keys(n);r<i.length;r++){var a=i[r];this.fe(a,t),this.ue(n[a],t)}}},{key:"ge",value:function(e,t){var n=e.values||[];this.ae(t,50);var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;this.ue(a,t)}}catch(o){i.e(o)}finally{i.f()}}},{key:"_e",value:function(e,t){var n=this;this.ae(t,37),os.fromName(e).path.forEach((function(e){n.ae(t,60),n.ye(e,t)}))}},{key:"ae",value:function(e,t){e.he(t)}},{key:"de",value:function(e){e.he(2)}}]),e}();function sd(e){if(0===e)return 8;var t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function cd(e){var t=64-function(e){for(var t=0,n=0;n<8;++n){var r=sd(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}ud.pe=new ud;var ld=function(){function e(){p(this,e),this.buffer=new Uint8Array(1024),this.position=0}return m(e,[{key:"Ie",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Te(n.value),n=t.next();this.Ee()}},{key:"Ae",value:function(e){for(var t=e[Symbol.iterator](),n=t.next();!n.done;)this.Re(n.value),n=t.next();this.ve()}},{key:"be",value:function(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Te(i);else if(i<2048)this.Te(960|i>>>6),this.Te(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Te(480|i>>>12),this.Te(128|63&i>>>6),this.Te(128|63&i);else{var a=r.codePointAt(0);this.Te(240|a>>>18),this.Te(128|63&a>>>12),this.Te(128|63&a>>>6),this.Te(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.Ee()}},{key:"Pe",value:function(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=r.charCodeAt(0);if(i<128)this.Re(i);else if(i<2048)this.Re(960|i>>>6),this.Re(128|63&i);else if(r<"\ud800"||"\udbff"<r)this.Re(480|i>>>12),this.Re(128|63&i>>>6),this.Re(128|63&i);else{var a=r.codePointAt(0);this.Re(240|a>>>18),this.Re(128|63&a>>>12),this.Re(128|63&a>>>6),this.Re(128|63&a)}}}catch(o){n.e(o)}finally{n.f()}this.ve()}},{key:"Ve",value:function(e){var t=this.Se(e),n=cd(t);this.De(1+n),this.buffer[this.position++]=255&n;for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}},{key:"Ce",value:function(e){var t=this.Se(e),n=cd(t);this.De(1+n),this.buffer[this.position++]=~(255&n);for(var r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}},{key:"xe",value:function(){this.Ne(255),this.Ne(255)}},{key:"ke",value:function(){this.Oe(255),this.Oe(255)}},{key:"reset",value:function(){this.position=0}},{key:"seed",value:function(e){this.De(e.length),this.buffer.set(e,this.position),this.position+=e.length}},{key:"$e",value:function(){return this.buffer.slice(0,this.position)}},{key:"Se",value:function(e){var t=function(e){var t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(var r=1;r<t.length;++r)t[r]^=n?255:0;return t}},{key:"Te",value:function(e){var t=255&e;0===t?(this.Ne(0),this.Ne(255)):255===t?(this.Ne(255),this.Ne(0)):this.Ne(t)}},{key:"Re",value:function(e){var t=255&e;0===t?(this.Oe(0),this.Oe(255)):255===t?(this.Oe(255),this.Oe(0)):this.Oe(e)}},{key:"Ee",value:function(){this.Ne(0),this.Ne(1)}},{key:"ve",value:function(){this.Oe(0),this.Oe(1)}},{key:"Ne",value:function(e){this.De(1),this.buffer[this.position++]=e}},{key:"Oe",value:function(e){this.De(1),this.buffer[this.position++]=~e}},{key:"De",value:function(e){var t=e+this.position;if(!(t<=this.buffer.length)){var n=2*this.buffer.length;n<t&&(n=t);var r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}}]),e}(),fd=function(){function e(t){p(this,e),this.Me=t}return m(e,[{key:"we",value:function(e){this.Me.Ie(e)}},{key:"le",value:function(e){this.Me.be(e)}},{key:"he",value:function(e){this.Me.Ve(e)}},{key:"ce",value:function(){this.Me.xe()}}]),e}(),hd=function(){function e(t){p(this,e),this.Me=t}return m(e,[{key:"we",value:function(e){this.Me.Ae(e)}},{key:"le",value:function(e){this.Me.Pe(e)}},{key:"he",value:function(e){this.Me.Ce(e)}},{key:"ce",value:function(){this.Me.ke()}}]),e}(),dd=function(){function e(){p(this,e),this.Me=new ld,this.Fe=new fd(this.Me),this.Be=new hd(this.Me)}return m(e,[{key:"seed",value:function(e){this.Me.seed(e)}},{key:"Le",value:function(e){return 0===e?this.Fe:this.Be}},{key:"$e",value:function(){return this.Me.$e()}},{key:"reset",value:function(){this.Me.reset()}}]),e}(),vd=function(){function e(t,n,r,i){p(this,e),this.indexId=t,this.documentKey=n,this.arrayValue=r,this.directionalValue=i}return m(e,[{key:"qe",value:function(){var t=this.directionalValue.length,n=0===t||255===this.directionalValue[t-1]?t+1:t,r=new Uint8Array(n);return r.set(this.directionalValue,0),n!==t?r.set([0],this.directionalValue.length):++r[r.length-1],new e(this.indexId,this.documentKey,this.arrayValue,r)}}]),e}();function pd(e,t){var n=e.indexId-t.indexId;return 0!==n?n:0!==(n=yd(e.arrayValue,t.arrayValue))?n:0!==(n=yd(e.directionalValue,t.directionalValue))?n:os.comparator(e.documentKey,t.documentKey)}function yd(e,t){for(var n=0;n<e.length&&n<t.length;++n){var r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}var md=function(){function e(t){p(this,e),this.collectionId=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment(),this.Ue=t.orderBy,this.Ke=[];var n,r=g(t.filters);try{for(r.s();!(n=r.n()).done;){var i=n.value;i.isInequality()?this.Ge=i:this.Ke.push(i)}}catch(a){r.e(a)}finally{r.f()}}return m(e,[{key:"Qe",value:function(e){Mu(e.collectionGroup===this.collectionId);var t=ss(e);if(void 0!==t&&!this.ze(t))return!1;for(var n=cs(e),r=0,i=0;r<n.length&&this.ze(n[r]);++r);if(r===n.length)return!0;if(void 0!==this.Ge){var a=n[r];if(!this.je(this.Ge,a)||!this.We(this.Ue[i++],a))return!1;++r}for(;r<n.length;++r){var o=n[r];if(i>=this.Ue.length||!this.We(this.Ue[i++],o))return!1}return!0}},{key:"ze",value:function(e){var t,n=g(this.Ke);try{for(n.s();!(t=n.n()).done;){var r=t.value;if(this.je(r,e))return!0}}catch(i){n.e(i)}finally{n.f()}return!1}},{key:"je",value:function(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;var n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}},{key:"We",value:function(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}]),e}();function gd(e){var t,n;if(Mu(e instanceof sl||e instanceof cl),e instanceof sl){if(e instanceof xl){var r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map((function(t){return sl.create(e.field,"==",t)})))||[];return cl.create(r,"or")}return e}var i=e.filters.map((function(e){return gd(e)}));return cl.create(i,e.op)}function kd(e){if(0===e.getFilters().length)return[];var t=xd(gd(e));return Mu(_d(t)),bd(t)||wd(t)?[t]:t.getFilters()}function bd(e){return e instanceof sl}function wd(e){return e instanceof cl&&hl(e)}function _d(e){return bd(e)||wd(e)||function(e){if(e instanceof cl&&fl(e)){var t,n=g(e.getFilters());try{for(n.s();!(t=n.n()).done;){var r=t.value;if(!bd(r)&&!wd(r))return!1}}catch(i){n.e(i)}finally{n.f()}return!0}return!1}(e)}function xd(e){if(Mu(e instanceof sl||e instanceof cl),e instanceof sl)return e;if(1===e.filters.length)return xd(e.filters[0]);var t=e.filters.map((function(e){return xd(e)})),n=cl.create(t,e.op);return _d(n=Id(n))?n:(Mu(n instanceof cl),Mu(ll(n)),Mu(n.filters.length>1),n.filters.reduce((function(e,t){return Ed(e,t)})))}function Ed(e,t){var n;return Mu(e instanceof sl||e instanceof cl),Mu(t instanceof sl||t instanceof cl),n=e instanceof sl?t instanceof sl?function(e,t){return cl.create([e,t],"and")}(e,t):Sd(e,t):t instanceof sl?Sd(t,e):function(e,t){if(Mu(e.filters.length>0&&t.filters.length>0),ll(e)&&ll(t))return yl(e,t.getFilters());var n=fl(e)?e:t,r=fl(e)?t:e,i=n.filters.map((function(e){return Ed(e,r)}));return cl.create(i,"or")}(e,t),Id(n)}function Sd(e,t){if(ll(t))return yl(t,e.getFilters());var n=t.filters.map((function(t){return Ed(e,t)}));return cl.create(n,"or")}function Id(e){if(Mu(e instanceof sl||e instanceof cl),e instanceof sl)return e;var t=e.getFilters();if(1===t.length)return Id(t[0]);if(dl(e))return e;var n=t.map((function(e){return Id(e)})),r=[];return n.forEach((function(t){t instanceof sl?r.push(t):t instanceof cl&&(t.op===e.op?r.push.apply(r,X(t.filters)):r.push(t))})),1===r.length?r[0]:cl.create(r,e.op)}var Td=function(){function e(){p(this,e),this.He=new Cd}return m(e,[{key:"addToCollectionParentIndex",value:function(e,t){return this.He.add(t),bs.resolve()}},{key:"getCollectionParents",value:function(e,t){return bs.resolve(this.He.getEntries(t))}},{key:"addFieldIndex",value:function(e,t){return bs.resolve()}},{key:"deleteFieldIndex",value:function(e,t){return bs.resolve()}},{key:"getDocumentsMatchingTarget",value:function(e,t){return bs.resolve(null)}},{key:"getIndexType",value:function(e,t){return bs.resolve(0)}},{key:"getFieldIndexes",value:function(e,t){return bs.resolve([])}},{key:"getNextCollectionGroupToUpdate",value:function(e){return bs.resolve(null)}},{key:"getMinOffset",value:function(e,t){return bs.resolve(vs.min())}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return bs.resolve(vs.min())}},{key:"updateCollectionGroup",value:function(e,t,n){return bs.resolve()}},{key:"updateIndexEntries",value:function(e,t){return bs.resolve()}}]),e}(),Cd=function(){function e(){p(this,e),this.index={}}return m(e,[{key:"add",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new mc(rs.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}},{key:"has",value:function(e){var t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}},{key:"getEntries",value:function(e){return(this.index[e]||new mc(rs.comparator)).toArray()}}]),e}(),Dd=new Uint8Array(0),Nd=function(){function e(t,n){p(this,e),this.user=t,this.databaseId=n,this.Je=new Cd,this.Ye=new Jl((function(e){return Cl(e)}),(function(e,t){return Dl(e,t)})),this.uid=t.uid||""}return m(e,[{key:"addToCollectionParentIndex",value:function(e,t){var n=this;if(!this.Je.has(t)){var r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener((function(){n.Je.add(t)}));var a={collectionId:r,parent:Ms(i)};return Ad(e).put(a)}return bs.resolve()}},{key:"getCollectionParents",value:function(e,t){var n=[],r=IDBKeyRange.bound([t,""],[Zu(t),""],!1,!0);return Ad(e).j(r).next((function(e){var r,i=g(e);try{for(i.s();!(r=i.n()).done;){var a=r.value;if(a.collectionId!==t)break;n.push(Vs(a.parent))}}catch(o){i.e(o)}finally{i.f()}return n}))}},{key:"addFieldIndex",value:function(e,t){var n=this,r=Od(e),i=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map((function(e){return[e.fieldPath.canonicalString(),e.kind]}))}}(t);delete i.indexId;var a=r.add(i);if(t.indexState){var o=Pd(e);return a.next((function(e){o.put(td(e,n.user,t.indexState.sequenceNumber,t.indexState.offset))}))}return a.next()}},{key:"deleteFieldIndex",value:function(e,t){var n=Od(e),r=Pd(e),i=Rd(e);return n.delete(t.indexId).next((function(){return r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))})).next((function(){return i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))}))}},{key:"getDocumentsMatchingTarget",value:function(e,t){var n=this,r=Rd(e),i=!0,a=new Map;return bs.forEach(this.Ze(t),(function(t){return n.Xe(e,t).next((function(e){i&&(i=!!e),a.set(t,e)}))})).next((function(){if(i){var e=lf(),o=[];return bs.forEach(a,(function(i,a){var u;Au("IndexedDbIndexManager","Using index ".concat((u=i,"id=".concat(u.indexId,"|cg=").concat(u.collectionGroup,"|f=").concat(u.fields.map((function(e){return"".concat(e.fieldPath,":").concat(e.kind)})).join(",")))," to execute ").concat(Cl(t)));var s=function(e,t){var n=ss(t);if(void 0===n)return null;var r,i=g(Al(e,n.fieldPath));try{for(i.s();!(r=i.n()).done;){var a=r.value;switch(a.op){case"array-contains-any":return a.value.arrayValue.values||[];case"array-contains":return[a.value]}}}catch(o){i.e(o)}finally{i.f()}return null}(a,i),c=function(e,t){var n,r=new Map,i=g(cs(t));try{for(i.s();!(n=i.n()).done;){var a,o=n.value,u=g(Al(e,o.fieldPath));try{for(u.s();!(a=u.n()).done;){var s=a.value;switch(s.op){case"==":case"in":r.set(o.fieldPath.canonicalString(),s.value);break;case"not-in":case"!=":return r.set(o.fieldPath.canonicalString(),s.value),Array.from(r.values())}}}catch(c){u.e(c)}finally{u.f()}}}catch(c){i.e(c)}finally{i.f()}return null}(a,i),l=function(e,t){var n,r=[],i=!0,a=g(cs(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Rl(e,o.fieldPath,e.startAt):Ol(e,o.fieldPath,e.startAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new nl(r,i)}(a,i),f=function(e,t){var n,r=[],i=!0,a=g(cs(t));try{for(a.s();!(n=a.n()).done;){var o=n.value,u=0===o.kind?Ol(e,o.fieldPath,e.endAt):Rl(e,o.fieldPath,e.endAt);r.push(u.value),i&&(i=u.inclusive)}}catch(s){a.e(s)}finally{a.f()}return new nl(r,i)}(a,i),h=n.tn(i,a,l),d=n.tn(i,a,f),v=n.en(i,a,c),p=n.nn(i.indexId,s,h,l.inclusive,d,f.inclusive,v);return bs.forEach(p,(function(n){return r.H(n,t.limit).next((function(t){t.forEach((function(t){var n=os.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),o.push(n))}))}))}))})).next((function(){return o}))}return bs.resolve(null)}))}},{key:"Ze",value:function(e){var t=this.Ye.get(e);return t||(t=0===e.filters.length?[e]:kd(cl.create(e.filters,"and")).map((function(t){return Tl(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)})),this.Ye.set(e,t),t)}},{key:"nn",value:function(e,t,n,r,i,a,o){for(var u=this,s=(null!=t?t.length:1)*Math.max(n.length,i.length),c=s/(null!=t?t.length:1),l=[],f=function(){var s=t?u.sn(t[h/c]):Dd,f=u.rn(e,s,n[h%c],r),d=u.on(e,s,i[h%c],a),v=o.map((function(t){return u.rn(e,s,t,!0)}));l.push.apply(l,X(u.createRange(f,d,v)))},h=0;h<s;++h)f();return l}},{key:"rn",value:function(e,t,n,r){var i=new vd(e,os.empty(),t,n);return r?i:i.qe()}},{key:"on",value:function(e,t,n,r){var i=new vd(e,os.empty(),t,n);return r?i.qe():i}},{key:"Xe",value:function(e,t){var n=new md(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next((function(e){var t,r=null,i=g(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;n.Qe(a)&&(!r||a.fields.length>r.fields.length)&&(r=a)}}catch(o){i.e(o)}finally{i.f()}return r}))}},{key:"getIndexType",value:function(e,t){var n=this,r=2,i=this.Ze(t);return bs.forEach(i,(function(t){return n.Xe(e,t).next((function(e){e?0!==r&&e.fields.length<function(e){var t,n=new mc(as.comparator),r=!1,i=g(e.filters);try{for(i.s();!(t=i.n()).done;){var a,o=g(t.value.getFlattenedFilters());try{for(o.s();!(a=o.n()).done;){var u=a.value;u.field.isKeyField()||("array-contains"===u.op||"array-contains-any"===u.op?r=!0:n=n.add(u.field))}}catch(f){o.e(f)}finally{o.f()}}}catch(f){i.e(f)}finally{i.f()}var s,c=g(e.orderBy);try{for(c.s();!(s=c.n()).done;){var l=s.value;l.field.isKeyField()||(n=n.add(l.field))}}catch(f){c.e(f)}finally{c.f()}return n.size+(r?1:0)}(t)&&(r=1):r=0}))})).next((function(){return function(e){return null!==e.limit}(t)&&i.length>1&&2===r?1:r}))}},{key:"un",value:function(e,t){var n,r=new dd,i=g(cs(e));try{for(i.s();!(n=i.n()).done;){var a=n.value,o=t.data.field(a.fieldPath);if(null==o)return null;var u=r.Le(a.kind);ud.pe.oe(o,u)}}catch(s){i.e(s)}finally{i.f()}return r.$e()}},{key:"sn",value:function(e){var t=new dd;return ud.pe.oe(e,t.Le(0)),t.$e()}},{key:"cn",value:function(e,t){var n=new dd;return ud.pe.oe(zc(this.databaseId,t),n.Le(function(e){var t=cs(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.$e()}},{key:"en",value:function(e,t,n){if(null===n)return[];var r=[];r.push(new dd);var i,a=0,o=g(cs(e));try{for(o.s();!(i=o.n()).done;){var u,s=i.value,c=n[a++],l=g(r);try{for(l.s();!(u=l.n()).done;){var f=u.value;if(this.an(t,s.fieldPath)&&qc(c))r=this.hn(r,s,c);else{var h=f.Le(s.kind);ud.pe.oe(c,h)}}}catch(d){l.e(d)}finally{l.f()}}}catch(d){o.e(d)}finally{o.f()}return this.ln(r)}},{key:"tn",value:function(e,t,n){return this.en(e,t,n.position)}},{key:"ln",value:function(e){for(var t=[],n=0;n<e.length;++n)t[n]=e[n].$e();return t}},{key:"hn",value:function(e,t,n){var r,i=X(e),a=[],o=g(n.arrayValue.values||[]);try{for(o.s();!(r=o.n()).done;){var u,s=r.value,c=g(i);try{for(c.s();!(u=c.n()).done;){var l=u.value,f=new dd;f.seed(l.$e()),ud.pe.oe(s,f.Le(t.kind)),a.push(f)}}catch(h){c.e(h)}finally{c.f()}}}catch(h){o.e(h)}finally{o.f()}return a}},{key:"an",value:function(e,t){return!!e.filters.find((function(e){return e instanceof sl&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op)}))}},{key:"getFieldIndexes",value:function(e,t){var n=this,r=Od(e),i=Pd(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next((function(e){var t=[];return bs.forEach(e,(function(e){return i.get([e.indexId,n.uid]).next((function(n){t.push(function(e,t){var n=t?new fs(t.sequenceNumber,new vs(Qh(t.readTime),new os(Vs(t.documentKey)),t.largestBatchId)):fs.empty(),r=e.fields.map((function(e){var t=s(e,2),n=t[0],r=t[1];return new ls(as.fromServerFormat(n),r)}));return new us(e.indexId,e.collectionGroup,r,n)}(e,n))}))})).next((function(){return t}))}))}},{key:"getNextCollectionGroupToUpdate",value:function(e){return this.getFieldIndexes(e).next((function(e){return 0===e.length?null:(e.sort((function(e,t){var n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Xu(e.collectionGroup,t.collectionGroup)})),e[0].collectionGroup)}))}},{key:"updateCollectionGroup",value:function(e,t,n){var r=this,i=Od(e),a=Pd(e);return this.fn(e).next((function(e){return i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next((function(t){return bs.forEach(t,(function(t){return a.put(td(t.indexId,r.user,e,n))}))}))}))}},{key:"updateIndexEntries",value:function(e,t){var n=this,r=new Map;return bs.forEach(t,(function(t,i){var a=r.get(t.collectionGroup);return(a?bs.resolve(a):n.getFieldIndexes(e,t.collectionGroup)).next((function(a){return r.set(t.collectionGroup,a),bs.forEach(a,(function(r){return n.dn(e,t,r).next((function(t){var a=n.wn(i,r);return t.isEqual(a)?bs.resolve():n._n(e,i,r,t,a)}))}))}))}))}},{key:"mn",value:function(e,t,n,r){return Rd(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.cn(n,t.key),documentKey:t.key.path.toArray()})}},{key:"gn",value:function(e,t,n,r){return Rd(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.cn(n,t.key),t.key.path.toArray()])}},{key:"dn",value:function(e,t,n){var r=Rd(e),i=new mc(pd);return r.Z({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.cn(n,t)])},(function(e,r){i=i.add(new vd(n.indexId,t,r.arrayValue,r.directionalValue))})).next((function(){return i}))}},{key:"wn",value:function(e,t){var n=new mc(pd),r=this.un(t,e);if(null==r)return n;var i=ss(t);if(null!=i){var a=e.data.field(i.fieldPath);if(qc(a)){var o,u=g(a.arrayValue.values||[]);try{for(u.s();!(o=u.n()).done;){var s=o.value;n=n.add(new vd(t.indexId,e.key,this.sn(s),r))}}catch(c){u.e(c)}finally{u.f()}}}else n=n.add(new vd(t.indexId,e.key,Dd,r));return n}},{key:"_n",value:function(e,t,n,r,i){var a=this;Au("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);var o=[];return function(e,t,n,r,i){for(var a=e.getIterator(),o=t.getIterator(),u=kc(a),s=kc(o);u||s;){var c=!1,l=!1;if(u&&s){var f=n(u,s);f<0?l=!0:f>0&&(c=!0)}else null!=u?l=!0:c=!0;c?(r(s),s=kc(o)):l?(i(u),u=kc(a)):(u=kc(a),s=kc(o))}}(r,i,pd,(function(r){o.push(a.mn(e,t,n,r))}),(function(r){o.push(a.gn(e,t,n,r))})),bs.waitFor(o)}},{key:"fn",value:function(e){var t=1;return Pd(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(function(e,n,r){r.done(),t=n.sequenceNumber+1})).next((function(){return t}))}},{key:"createRange",value:function(e,t,n){n=n.sort((function(e,t){return pd(e,t)})).filter((function(e,t,n){return!t||0!==pd(e,n[t-1])}));var r=[];r.push(e);var i,a=g(n);try{for(a.s();!(i=a.n()).done;){var o=i.value,u=pd(o,e),s=pd(o,t);if(0===u)r[0]=e.qe();else if(u>0&&s<0)r.push(o),r.push(o.qe());else if(s>0)break}}catch(d){a.e(d)}finally{a.f()}r.push(t);for(var c=[],l=0;l<r.length;l+=2){if(this.yn(r[l],r[l+1]))return[];var f=[r[l].indexId,this.uid,r[l].arrayValue,r[l].directionalValue,Dd,[]],h=[r[l+1].indexId,this.uid,r[l+1].arrayValue,r[l+1].directionalValue,Dd,[]];c.push(IDBKeyRange.bound(f,h))}return c}},{key:"yn",value:function(e,t){return pd(e,t)>0}},{key:"getMinOffsetFromCollectionGroup",value:function(e,t){return this.getFieldIndexes(e,t).next(Ld)}},{key:"getMinOffset",value:function(e,t){var n=this;return bs.mapArray(this.Ze(t),(function(t){return n.Xe(e,t).next((function(e){return e||Lu()}))})).next(Ld)}}]),e}();function Ad(e){return lc(e,"collectionParents")}function Rd(e){return lc(e,"indexEntries")}function Od(e){return lc(e,"indexConfiguration")}function Pd(e){return lc(e,"indexState")}function Ld(e){Mu(0!==e.length);for(var t=e[0].indexState.offset,n=t.largestBatchId,r=1;r<e.length;r++){var i=e[r].indexState.offset;ps(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new vs(t.readTime,t.documentKey,n)}var Md={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Fd=function(){function e(t,n,r){p(this,e),this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}return m(e,null,[{key:"withCacheSize",value:function(t){return new e(t,e.DEFAULT_COLLECTION_PERCENTILE,e.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}]),e}();function Ud(e,t,n){var r=e.store("mutations"),i=e.store("documentMutations"),a=[],o=IDBKeyRange.only(n.batchId),u=0,s=r.Z({range:o},(function(e,t,n){return u++,n.delete()}));a.push(s.next((function(){Mu(1===u)})));var c,l=[],f=g(n.mutations);try{for(f.s();!(c=f.n()).done;){var h=c.value,d=js(t,h.key.path,n.batchId);a.push(i.delete(d)),l.push(h.key)}}catch(v){f.e(v)}finally{f.f()}return bs.waitFor(a).next((function(){return l}))}function Vd(e){if(!e)return 0;var t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw Lu();t=e.noDocument}return JSON.stringify(t).length}Fd.DEFAULT_COLLECTION_PERCENTILE=10,Fd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Fd.DEFAULT=new Fd(41943040,Fd.DEFAULT_COLLECTION_PERCENTILE,Fd.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Fd.DISABLED=new Fd(-1,0,0);var Bd=function(){function e(t,n,r,i){p(this,e),this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=i,this.pn={}}return m(e,[{key:"checkEmpty",value:function(e){var t=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return jd(e).Z({index:"userMutationsIndex",range:n},(function(e,n,r){t=!1,r.done()})).next((function(){return t}))}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this,a=qd(e),o=jd(e);return o.add({}).next((function(u){Mu("number"==typeof u);var s,c=new Wf(u,t,n,r),l=function(e,t,n){var r=n.baseMutations.map((function(t){return Dh(e.se,t)})),i=n.mutations.map((function(t){return Dh(e.se,t)}));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(i.serializer,i.userId,c),f=[],h=new mc((function(e,t){return Xu(e.canonicalString(),t.canonicalString())})),d=g(r);try{for(d.s();!(s=d.n()).done;){var v=s.value,p=js(i.userId,v.key.path,u);h=h.add(v.key.path.popLast()),f.push(o.put(l)),f.push(a.put(p,qs))}}catch(y){d.e(y)}finally{d.f()}return h.forEach((function(t){f.push(i.indexManager.addToCollectionParentIndex(e,t))})),e.addOnCommittedListener((function(){i.pn[u]=c.keys()})),bs.waitFor(f).next((function(){return c}))}))}},{key:"lookupMutationBatch",value:function(e,t){var n=this;return jd(e).get(t).next((function(e){return e?(Mu(e.userId===n.userId),Yh(n.serializer,e)):null}))}},{key:"In",value:function(e,t){var n=this;return this.pn[t]?bs.resolve(this.pn[t]):this.lookupMutationBatch(e,t).next((function(e){if(e){var r=e.keys();return n.pn[t]=r,r}return null}))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=this,r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]),a=null;return jd(e).Z({index:"userMutationsIndex",range:i},(function(e,t,i){t.userId===n.userId&&(Mu(t.batchId>=r),a=Yh(n.serializer,t)),i.done()})).next((function(){return a}))}},{key:"getHighestUnacknowledgedBatchId",value:function(e){var t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return jd(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(function(e,t,r){n=t.batchId,r.done()})).next((function(){return n}))}},{key:"getAllMutationBatches",value:function(e){var t=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return jd(e).j("userMutationsIndex",n).next((function(e){return e.map((function(e){return Yh(t.serializer,e)}))}))}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=zs(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return qd(e).Z({range:i},(function(r,i,o){var u=s(r,3),c=u[0],l=u[1],f=u[2],h=Vs(l);if(c===n.userId&&t.path.isEqual(h))return jd(e).get(f).next((function(e){if(!e)throw Lu();Mu(e.userId===n.userId),a.push(Yh(n.serializer,e))}));o.done()})).next((function(){return a}))}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new mc(Xu),i=[];return t.forEach((function(t){var a=zs(n.userId,t.path),o=IDBKeyRange.lowerBound(a),u=qd(e).Z({range:o},(function(e,i,a){var o=s(e,3),u=o[0],c=o[1],l=o[2],f=Vs(c);u===n.userId&&t.path.isEqual(f)?r=r.add(l):a.done()}));i.push(u)})),bs.waitFor(i).next((function(){return n.Tn(e,r)}))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=this,r=t.path,i=r.length+1,a=zs(this.userId,r),o=IDBKeyRange.lowerBound(a),u=new mc(Xu);return qd(e).Z({range:o},(function(e,t,a){var o=s(e,3),c=o[0],l=o[1],f=o[2],h=Vs(l);c===n.userId&&r.isPrefixOf(h)?h.length===i&&(u=u.add(f)):a.done()})).next((function(){return n.Tn(e,u)}))}},{key:"Tn",value:function(e,t){var n=this,r=[],i=[];return t.forEach((function(t){i.push(jd(e).get(t).next((function(e){if(null===e)throw Lu();Mu(e.userId===n.userId),r.push(Yh(n.serializer,e))})))})),bs.waitFor(i).next((function(){return r}))}},{key:"removeMutationBatch",value:function(e,t){var n=this;return Ud(e.at,this.userId,t).next((function(r){return e.addOnCommittedListener((function(){n.En(t.batchId)})),bs.forEach(r,(function(t){return n.referenceDelegate.markPotentiallyOrphaned(e,t)}))}))}},{key:"En",value:function(e){delete this.pn[e]}},{key:"performConsistencyCheck",value:function(e){var t=this;return this.checkEmpty(e).next((function(n){if(!n)return bs.resolve();var r=IDBKeyRange.lowerBound([t.userId]),i=[];return qd(e).Z({range:r},(function(e,n,r){if(e[0]===t.userId){var a=Vs(e[1]);i.push(a)}else r.done()})).next((function(){Mu(0===i.length)}))}))}},{key:"containsKey",value:function(e,t){return zd(e,this.userId,t)}},{key:"An",value:function(e){var t=this;return Kd(e).get(this.userId).next((function(e){return e||{userId:t.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""}}))}}],[{key:"ie",value:function(t,n,r,i){return Mu(""!==t.uid),new e(t.isAuthenticated()?t.uid:"",n,r,i)}}]),e}();function zd(e,t,n){var r=zs(t,n.path),i=r[1],a=IDBKeyRange.lowerBound(r),o=!1;return qd(e).Z({range:a,Y:!0},(function(e,n,r){var a=s(e,3),u=a[0],c=a[1];a[2];u===t&&c===i&&(o=!0),r.done()})).next((function(){return o}))}function jd(e){return lc(e,"mutations")}function qd(e){return lc(e,"documentMutations")}function Kd(e){return lc(e,"mutationQueues")}var Gd=function(){function e(t){p(this,e),this.Rn=t}return m(e,[{key:"next",value:function(){return this.Rn+=2,this.Rn}}],[{key:"vn",value:function(){return new e(0)}},{key:"bn",value:function(){return new e(-1)}}]),e}(),Hd=function(){function e(t,n){p(this,e),this.referenceDelegate=t,this.serializer=n}return m(e,[{key:"allocateTargetId",value:function(e){var t=this;return this.Pn(e).next((function(n){var r=new Gd(n.highestTargetId);return n.highestTargetId=r.next(),t.Vn(e,n).next((function(){return n.highestTargetId}))}))}},{key:"getLastRemoteSnapshotVersion",value:function(e){return this.Pn(e).next((function(e){return ts.fromTimestamp(new es(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds))}))}},{key:"getHighestSequenceNumber",value:function(e){return this.Pn(e).next((function(e){return e.highestListenSequenceNumber}))}},{key:"setTargetsMetadata",value:function(e,t,n){var r=this;return this.Pn(e).next((function(i){return i.highestListenSequenceNumber=t,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),r.Vn(e,i)}))}},{key:"addTargetData",value:function(e,t){var n=this;return this.Sn(e,t).next((function(){return n.Pn(e).next((function(r){return r.targetCount+=1,n.Dn(t,r),n.Vn(e,r)}))}))}},{key:"updateTargetData",value:function(e,t){return this.Sn(e,t)}},{key:"removeTargetData",value:function(e,t){var n=this;return this.removeMatchingKeysForTargetId(e,t.targetId).next((function(){return Wd(e).delete(t.targetId)})).next((function(){return n.Pn(e)})).next((function(t){return Mu(t.targetCount>0),t.targetCount-=1,n.Vn(e,t)}))}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return Wd(e).Z((function(o,u){var s=$h(u);s.sequenceNumber<=t&&null===n.get(s.targetId)&&(i++,a.push(r.removeTargetData(e,s)))})).next((function(){return bs.waitFor(a)})).next((function(){return i}))}},{key:"forEachTarget",value:function(e,t){return Wd(e).Z((function(e,n){var r=$h(n);t(r)}))}},{key:"Pn",value:function(e){return Qd(e).get("targetGlobalKey").next((function(e){return Mu(null!==e),e}))}},{key:"Vn",value:function(e,t){return Qd(e).put("targetGlobalKey",t)}},{key:"Sn",value:function(e,t){return Wd(e).put(Xh(this.serializer,t))}},{key:"Dn",value:function(e,t){var n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}},{key:"getTargetCount",value:function(e){return this.Pn(e).next((function(e){return e.targetCount}))}},{key:"getTargetData",value:function(e,t){var n=Cl(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Wd(e).Z({range:r,index:"queryTargetsIndex"},(function(e,n,r){var a=$h(n);Dl(t,a.target)&&(i=a,r.done())})).next((function(){return i}))}},{key:"addMatchingKeys",value:function(e,t,n){var r=this,i=[],a=Yd(e);return t.forEach((function(t){var o=Ms(t.path);i.push(a.put({targetId:n,path:o})),i.push(r.referenceDelegate.addReference(e,n,t))})),bs.waitFor(i)}},{key:"removeMatchingKeys",value:function(e,t,n){var r=this,i=Yd(e);return bs.forEach(t,(function(t){var a=Ms(t.path);return bs.waitFor([i.delete([n,a]),r.referenceDelegate.removeReference(e,n,t)])}))}},{key:"removeMatchingKeysForTargetId",value:function(e,t){var n=Yd(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=IDBKeyRange.bound([t],[t+1],!1,!0),r=Yd(e),i=lf();return r.Z({range:n,Y:!0},(function(e,t,n){var r=Vs(e[1]),a=new os(r);i=i.add(a)})).next((function(){return i}))}},{key:"containsKey",value:function(e,t){var n=Ms(t.path),r=IDBKeyRange.bound([n],[Zu(n)],!1,!0),i=0;return Yd(e).Z({index:"documentTargetsIndex",Y:!0,range:r},(function(e,t,n){var r=s(e,2),a=r[0];r[1];0!==a&&(i++,n.done())})).next((function(){return i>0}))}},{key:"ne",value:function(e,t){return Wd(e).get(t).next((function(e){return e?$h(e):null}))}}]),e}();function Wd(e){return lc(e,"targets")}function Qd(e){return lc(e,"targetGlobal")}function Yd(e){return lc(e,"targetDocuments")}function $d(e,t){var n=s(e,2),r=n[0],i=n[1],a=s(t,2),o=a[0],u=a[1],c=Xu(r,o);return 0===c?Xu(i,u):c}var Xd=function(){function e(t){p(this,e),this.Cn=t,this.buffer=new mc($d),this.xn=0}return m(e,[{key:"Nn",value:function(){return++this.xn}},{key:"kn",value:function(e){var t=[e,this.Nn()];if(this.buffer.size<this.Cn)this.buffer=this.buffer.add(t);else{var n=this.buffer.last();$d(t,n)<0&&(this.buffer=this.buffer.delete(n).add(t))}}},{key:"maxValue",get:function(){return this.buffer.last()[0]}}]),e}(),Jd=function(){function e(t,n,r){p(this,e),this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.On=null}return m(e,[{key:"start",value:function(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.$n(6e4)}},{key:"stop",value:function(){this.On&&(this.On.cancel(),this.On=null)}},{key:"started",get:function(){return null!==this.On}},{key:"$n",value:function(e){var t=this;Au("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.On=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.On=null,e.prev=1,e.next=4,t.localStore.collectGarbage(t.garbageCollector);case 4:e.next=14;break;case 6:if(e.prev=6,e.t0=e.catch(1),!Ss(e.t0)){e.next=12;break}Au("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e.t0),e.next=14;break;case 12:return e.next=14,gs(e.t0);case 14:return e.next=16,t.$n(3e5);case 16:case"end":return e.stop()}}),e,null,[[1,6]])}))))}}]),e}(),Zd=function(){function e(t,n){p(this,e),this.Mn=t,this.params=n}return m(e,[{key:"calculateTargetCount",value:function(e,t){return this.Mn.Fn(e).next((function(e){return Math.floor(t/100*e)}))}},{key:"nthSequenceNumber",value:function(e,t){var n=this;if(0===t)return bs.resolve(Rs.ct);var r=new Xd(t);return this.Mn.forEachTarget(e,(function(e){return r.kn(e.sequenceNumber)})).next((function(){return n.Mn.Bn(e,(function(e){return r.kn(e)}))})).next((function(){return r.maxValue}))}},{key:"removeTargets",value:function(e,t,n){return this.Mn.removeTargets(e,t,n)}},{key:"removeOrphanedDocuments",value:function(e,t){return this.Mn.removeOrphanedDocuments(e,t)}},{key:"collect",value:function(e,t){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Au("LruGarbageCollector","Garbage collection skipped; disabled"),bs.resolve(Md)):this.getCacheSize(e).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Au("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(r," is lower than threshold ").concat(n.params.cacheSizeCollectionThreshold)),Md):n.Ln(e,t)}))}},{key:"getCacheSize",value:function(e){return this.Mn.getCacheSize(e)}},{key:"Ln",value:function(e,t){var n,r,i,a,o,u,s,c=this,l=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((function(t){return t>c.params.maximumSequenceNumbersToCollect?(Au("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(c.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=c.params.maximumSequenceNumbersToCollect):r=t,a=Date.now(),c.nthSequenceNumber(e,r)})).next((function(r){return n=r,o=Date.now(),c.removeTargets(e,n,t)})).next((function(t){return i=t,u=Date.now(),c.removeOrphanedDocuments(e,n)})).next((function(e){return s=Date.now(),Nu()<=ne.DEBUG&&Au("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(a-l,"ms\n\tDetermined least recently used ").concat(r," in ")+(o-a)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(u-o)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(s-u)+"ms\n"+"Total Duration: ".concat(s-l,"ms")),bs.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})}))}}]),e}(),ev=function(){function e(t,n){p(this,e),this.db=t,this.garbageCollector=function(e,t){return new Zd(e,t)}(this,n)}return m(e,[{key:"Fn",value:function(e){var t=this.qn(e);return this.db.getTargetCache().getTargetCount(e).next((function(e){return t.next((function(t){return e+t}))}))}},{key:"qn",value:function(e){var t=0;return this.Bn(e,(function(e){t++})).next((function(){return t}))}},{key:"forEachTarget",value:function(e,t){return this.db.getTargetCache().forEachTarget(e,t)}},{key:"Bn",value:function(e,t){return this.Un(e,(function(e,n){return t(n)}))}},{key:"addReference",value:function(e,t,n){return tv(e,n)}},{key:"removeReference",value:function(e,t,n){return tv(e,n)}},{key:"removeTargets",value:function(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}},{key:"markPotentiallyOrphaned",value:function(e,t){return tv(e,t)}},{key:"Kn",value:function(e,t){return function(e,t){var n=!1;return Kd(e).X((function(r){return zd(e,r,t).next((function(e){return e&&(n=!0),bs.resolve(!e)}))})).next((function(){return n}))}(e,t)}},{key:"removeOrphanedDocuments",value:function(e,t){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],a=0;return this.Un(e,(function(o,u){if(u<=t){var s=n.Kn(e,o).next((function(t){if(!t)return a++,r.getEntry(e,o).next((function(){return r.removeEntry(o,ts.min()),Yd(e).delete([0,Ms(o.path)])}))}));i.push(s)}})).next((function(){return bs.waitFor(i)})).next((function(){return r.apply(e)})).next((function(){return a}))}},{key:"removeTarget",value:function(e,t){var n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}},{key:"updateLimboDocument",value:function(e,t){return tv(e,t)}},{key:"Un",value:function(e,t){var n,r=Yd(e),i=Rs.ct;return r.Z({index:"documentTargetsIndex"},(function(e,r){var a=s(e,2),o=a[0],u=(a[1],r.path),c=r.sequenceNumber;0===o?(i!==Rs.ct&&t(new os(Vs(n)),i),i=c,n=u):i=Rs.ct})).next((function(){i!==Rs.ct&&t(new os(Vs(n)),i)}))}},{key:"getCacheSize",value:function(e){return this.db.getRemoteDocumentCache().getSize(e)}}]),e}();function tv(e,t){return Yd(e).put(function(e,t){return{targetId:0,path:Ms(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}var nv=function(){function e(){p(this,e),this.changes=new Jl((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),this.changesApplied=!1}return m(e,[{key:"addEntry",value:function(e){this.assertNotApplied(),this.changes.set(e.key,e)}},{key:"removeEntry",value:function(e,t){this.assertNotApplied(),this.changes.set(e,tl.newInvalidDocument(e).setReadTime(t))}},{key:"getEntry",value:function(e,t){this.assertNotApplied();var n=this.changes.get(t);return void 0!==n?bs.resolve(n):this.getFromCache(e,t)}},{key:"getEntries",value:function(e,t){return this.getAllFromCache(e,t)}},{key:"apply",value:function(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}},{key:"assertNotApplied",value:function(){}}]),e}(),rv=function(){function e(t){p(this,e),this.serializer=t}return m(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t,n){return uv(e).put(n)}},{key:"removeEntry",value:function(e,t,n){return uv(e).delete(function(e,t){var n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],Hh(t),n[n.length-1]]}(t,n))}},{key:"updateMetadata",value:function(e,t){var n=this;return this.getMetadata(e).next((function(r){return r.byteSize+=t,n.Gn(e,r)}))}},{key:"getEntry",value:function(e,t){var n=this,r=tl.newInvalidDocument(t);return uv(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(sv(t))},(function(e,i){r=n.Qn(t,i)})).next((function(){return r}))}},{key:"zn",value:function(e,t){var n=this,r={size:0,document:tl.newInvalidDocument(t)};return uv(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(sv(t))},(function(e,i){r={document:n.Qn(t,i),size:Vd(i)}})).next((function(){return r}))}},{key:"getEntries",value:function(e,t){var n=this,r=ef();return this.jn(e,t,(function(e,t){var i=n.Qn(e,t);r=r.insert(e,i)})).next((function(){return r}))}},{key:"Wn",value:function(e,t){var n=this,r=ef(),i=new vc(os.comparator);return this.jn(e,t,(function(e,t){var a=n.Qn(e,t);r=r.insert(e,a),i=i.insert(e,Vd(t))})).next((function(){return{documents:r,Hn:i}}))}},{key:"jn",value:function(e,t,n){if(t.isEmpty())return bs.resolve();var r=new mc(lv);t.forEach((function(e){return r=r.add(e)}));var i=IDBKeyRange.bound(sv(r.first()),sv(r.last())),a=r.getIterator(),o=a.getNext();return uv(e).Z({index:"documentKeyIndex",range:i},(function(e,t,r){for(var i=os.fromSegments([].concat(X(t.prefixPath),[t.collectionGroup,t.documentId]));o&&lv(o,i)<0;)n(o,null),o=a.getNext();o&&o.isEqual(i)&&(n(o,t),o=a.hasNext()?a.getNext():null),o?r.G(sv(o)):r.done()})).next((function(){for(;o;)n(o,null),o=a.hasNext()?a.getNext():null}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this,a=t.path,o=[a.popLast().toArray(),a.lastSegment(),Hh(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],u=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return uv(e).j(IDBKeyRange.bound(o,u,!0)).next((function(e){var n,a=ef(),o=g(e);try{for(o.s();!(n=o.n()).done;){var u=n.value,s=i.Qn(os.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);s.isFoundDocument()&&(Ql(t,s)||r.has(s.key))&&(a=a.insert(s.key,s))}}catch(c){o.e(c)}finally{o.f()}return a}))}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){var i=this,a=ef(),o=cv(t,n),u=cv(t,vs.max());return uv(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(o,u,!0)},(function(e,t,n){var o=i.Qn(os.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);(a=a.insert(o.key,o)).size===r&&n.done()})).next((function(){return a}))}},{key:"newChangeBuffer",value:function(e){return new av(this,!!e&&e.trackRemovals)}},{key:"getSize",value:function(e){return this.getMetadata(e).next((function(e){return e.byteSize}))}},{key:"getMetadata",value:function(e){return ov(e).get("remoteDocumentGlobalKey").next((function(e){return Mu(!!e),e}))}},{key:"Gn",value:function(e,t){return ov(e).put("remoteDocumentGlobalKey",t)}},{key:"Qn",value:function(e,t){if(t){var n=function(e,t){var n;if(t.document)n=Th(e.se,t.document,!!t.hasCommittedMutations);else if(t.noDocument){var r=os.fromSegments(t.noDocument.path),i=Qh(t.noDocument.readTime);n=tl.newNoDocument(r,i),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return Lu();var a=os.fromSegments(t.unknownDocument.path),o=Qh(t.unknownDocument.version);n=tl.newUnknownDocument(a,o)}return t.readTime&&n.setReadTime(function(e){var t=new es(e[0],e[1]);return ts.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!n.isNoDocument()||!n.version.isEqual(ts.min()))return n}return tl.newInvalidDocument(e)}}]),e}();function iv(e){return new rv(e)}var av=function(e){w(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).Jn=e,i.trackRemovals=r,i.Yn=new Jl((function(e){return e.toString()}),(function(e,t){return e.isEqual(t)})),i}return m(n,[{key:"applyChanges",value:function(e){var t=this,n=[],r=0,i=new mc((function(e,t){return Xu(e.canonicalString(),t.canonicalString())}));return this.changes.forEach((function(a,o){var u=t.Yn.get(a);if(n.push(t.Jn.removeEntry(e,a,u.readTime)),o.isValidDocument()){var s=Gh(t.Jn.serializer,o);i=i.add(a.path.popLast());var c=Vd(s);r+=c-u.size,n.push(t.Jn.addEntry(e,a,s))}else if(r-=u.size,t.trackRemovals){var l=Gh(t.Jn.serializer,o.convertToNoDocument(ts.min()));n.push(t.Jn.addEntry(e,a,l))}})),i.forEach((function(r){n.push(t.Jn.indexManager.addToCollectionParentIndex(e,r))})),n.push(this.Jn.updateMetadata(e,r)),bs.waitFor(n)}},{key:"getFromCache",value:function(e,t){var n=this;return this.Jn.zn(e,t).next((function(e){return n.Yn.set(t,{size:e.size,readTime:e.document.readTime}),e.document}))}},{key:"getAllFromCache",value:function(e,t){var n=this;return this.Jn.Wn(e,t).next((function(e){var t=e.documents;return e.Hn.forEach((function(e,r){n.Yn.set(e,{size:r,readTime:t.get(e).readTime})})),t}))}}]),n}(nv);function ov(e){return lc(e,"remoteDocumentGlobal")}function uv(e){return lc(e,"remoteDocumentsV14")}function sv(e){var t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function cv(e,t){var n=t.documentKey.path.toArray();return[e,Hh(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function lv(e,t){for(var n=e.path.toArray(),r=t.path.toArray(),i=0,a=0;a<n.length-2&&a<r.length-2;++a)if(i=Xu(n[a],r[a]))return i;return(i=Xu(n.length,r.length))||((i=Xu(n[n.length-2],r[r.length-2]))||Xu(n[n.length-1],r[r.length-1]))}var fv=m((function e(t,n){p(this,e),this.overlayedDocument=t,this.mutatedFields=n})),hv=function(){function e(t,n,r,i){p(this,e),this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}return m(e,[{key:"getDocument",value:function(e,t){var n=this,r=null;return this.documentOverlayCache.getOverlay(e,t).next((function(i){return r=i,n.remoteDocumentCache.getEntry(e,t)})).next((function(e){return null!==r&&Lf(r.mutation,e,bc.empty(),es.now()),e}))}},{key:"getDocuments",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.getLocalViewOfDocuments(e,t,lf()).next((function(){return t}))}))}},{key:"getLocalViewOfDocuments",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lf(),i=af();return this.populateOverlays(e,i,t).next((function(){return n.computeViews(e,t,i,r).next((function(e){var t=nf();return e.forEach((function(e,n){t=t.insert(e,n.overlayedDocument)})),t}))}))}},{key:"getOverlayedDocuments",value:function(e,t){var n=this,r=af();return this.populateOverlays(e,r,t).next((function(){return n.computeViews(e,t,r,lf())}))}},{key:"populateOverlays",value:function(e,t,n){var r=[];return n.forEach((function(e){t.has(e)||r.push(e)})),this.documentOverlayCache.getOverlays(e,r).next((function(e){e.forEach((function(e,n){t.set(e,n)}))}))}},{key:"computeViews",value:function(e,t,n,r){var i=ef(),a=uf(),o=uf();return t.forEach((function(e,t){var o=n.get(t.key);r.has(t.key)&&(void 0===o||o.mutation instanceof Vf)?i=i.insert(t.key,t):void 0!==o?(a.set(t.key,o.mutation.getFieldMask()),Lf(o.mutation,t,o.mutation.getFieldMask(),es.now())):a.set(t.key,bc.empty())})),this.recalculateAndSaveOverlays(e,i).next((function(e){return e.forEach((function(e,t){return a.set(e,t)})),t.forEach((function(e,t){var n;return o.set(e,new fv(t,null!==(n=a.get(e))&&void 0!==n?n:null))})),o}))}},{key:"recalculateAndSaveOverlays",value:function(e,t){var n=this,r=uf(),i=new vc((function(e,t){return e-t})),a=lf();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((function(e){var n,a=g(e);try{var o=function(){var e=n.value;e.keys().forEach((function(n){var a=t.get(n);if(null!==a){var o=r.get(n)||bc.empty();o=e.applyToLocalView(a,o),r.set(n,o);var u=(i.get(e.batchId)||lf()).add(n);i=i.insert(e.batchId,u)}}))};for(a.s();!(n=a.n()).done;)o()}catch(u){a.e(u)}finally{a.f()}})).next((function(){for(var o=[],u=i.getReverseIterator(),s=function(){var i=u.getNext(),s=i.key,c=i.value,l=of();c.forEach((function(e){if(!a.has(e)){var n=Of(t.get(e),r.get(e));null!==n&&l.set(e,n),a=a.add(e)}})),o.push(n.documentOverlayCache.saveOverlays(e,s,l))};u.hasNext();)s();return bs.waitFor(o)})).next((function(){return r}))}},{key:"recalculateAndSaveOverlaysForDocumentKeys",value:function(e,t){var n=this;return this.remoteDocumentCache.getEntries(e,t).next((function(t){return n.recalculateAndSaveOverlays(e,t)}))}},{key:"getDocumentsMatchingQuery",value:function(e,t,n){return function(e){return os.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Bl(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n):this.getDocumentsMatchingCollectionQuery(e,t,n)}},{key:"getNextDocuments",value:function(e,t,n,r){var i=this;return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next((function(a){var o=r-a.size>0?i.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-a.size):bs.resolve(af()),u=-1,s=a;return o.next((function(t){return bs.forEach(t,(function(t,n){return u<n.largestBatchId&&(u=n.largestBatchId),a.get(t)?bs.resolve():i.remoteDocumentCache.getEntry(e,t).next((function(e){s=s.insert(t,e)}))})).next((function(){return i.populateOverlays(e,t,a)})).next((function(){return i.computeViews(e,s,t,lf())})).next((function(e){return{batchId:u,changes:rf(e)}}))}))}))}},{key:"getDocumentsMatchingDocumentQuery",value:function(e,t){return this.getDocument(e,new os(t)).next((function(e){var t=nf();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t}))}},{key:"getDocumentsMatchingCollectionGroupQuery",value:function(e,t,n){var r=this,i=t.collectionGroup,a=nf();return this.indexManager.getCollectionParents(e,i).next((function(o){return bs.forEach(o,(function(o){var u=function(e,t){return new Pl(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,o.child(i));return r.getDocumentsMatchingCollectionQuery(e,u,n).next((function(e){e.forEach((function(e,t){a=a.insert(e,t)}))}))})).next((function(){return a}))}))}},{key:"getDocumentsMatchingCollectionQuery",value:function(e,t,n){var r,i=this;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next((function(a){return r=a,i.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,r)})).next((function(e){r.forEach((function(t,n){var r=n.getKey();null===e.get(r)&&(e=e.insert(r,tl.newInvalidDocument(r)))}));var n=nf();return e.forEach((function(e,i){var a=r.get(e);void 0!==a&&Lf(a.mutation,i,bc.empty(),es.now()),Ql(t,i)&&(n=n.insert(e,i))})),n}))}}]),e}(),dv=function(){function e(t){p(this,e),this.serializer=t,this.Zn=new Map,this.Xn=new Map}return m(e,[{key:"getBundleMetadata",value:function(e,t){return bs.resolve(this.Zn.get(t))}},{key:"saveBundleMetadata",value:function(e,t){var n;return this.Zn.set(t.id,{id:(n=t).id,version:n.version,createTime:mh(n.createTime)}),bs.resolve()}},{key:"getNamedQuery",value:function(e,t){return bs.resolve(this.Xn.get(t))}},{key:"saveNamedQuery",value:function(e,t){return this.Xn.set(t.name,function(e){return{name:e.name,query:Jh(e.bundledQuery),readTime:mh(e.readTime)}}(t)),bs.resolve()}}]),e}(),vv=function(){function e(){p(this,e),this.overlays=new vc(os.comparator),this.ts=new Map}return m(e,[{key:"getOverlay",value:function(e,t){return bs.resolve(this.overlays.get(t))}},{key:"getOverlays",value:function(e,t){var n=this,r=af();return bs.forEach(t,(function(t){return n.getOverlay(e,t).next((function(e){null!==e&&r.set(t,e)}))})).next((function(){return r}))}},{key:"saveOverlays",value:function(e,t,n){var r=this;return n.forEach((function(n,i){r.re(e,t,i)})),bs.resolve()}},{key:"removeOverlaysForBatchId",value:function(e,t,n){var r=this,i=this.ts.get(n);return void 0!==i&&(i.forEach((function(e){return r.overlays=r.overlays.remove(e)})),this.ts.delete(n)),bs.resolve()}},{key:"getOverlaysForCollection",value:function(e,t,n){for(var r=af(),i=t.length+1,a=new os(t.child("")),o=this.overlays.getIteratorFrom(a);o.hasNext();){var u=o.getNext().value,s=u.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&u.largestBatchId>n&&r.set(u.getKey(),u)}return bs.resolve(r)}},{key:"getOverlaysForCollectionGroup",value:function(e,t,n,r){for(var i=new vc((function(e,t){return e-t})),a=this.overlays.getIterator();a.hasNext();){var o=a.getNext().value;if(o.getKey().getCollectionGroup()===t&&o.largestBatchId>n){var u=i.get(o.largestBatchId);null===u&&(u=af(),i=i.insert(o.largestBatchId,u)),u.set(o.getKey(),o)}}for(var s=af(),c=i.getIterator();c.hasNext()&&(c.getNext().value.forEach((function(e,t){return s.set(e,t)})),!(s.size()>=r)););return bs.resolve(s)}},{key:"re",value:function(e,t,n){var r=this.overlays.get(n.key);if(null!==r){var i=this.ts.get(r.largestBatchId).delete(n.key);this.ts.set(r.largestBatchId,i)}this.overlays=this.overlays.insert(n.key,new Yf(t,n));var a=this.ts.get(t);void 0===a&&(a=lf(),this.ts.set(t,a)),this.ts.set(t,a.add(n.key))}}]),e}(),pv=function(){function e(){p(this,e),this.es=new mc(yv.ns),this.ss=new mc(yv.rs)}return m(e,[{key:"isEmpty",value:function(){return this.es.isEmpty()}},{key:"addReference",value:function(e,t){var n=new yv(e,t);this.es=this.es.add(n),this.ss=this.ss.add(n)}},{key:"os",value:function(e,t){var n=this;e.forEach((function(e){return n.addReference(e,t)}))}},{key:"removeReference",value:function(e,t){this.us(new yv(e,t))}},{key:"cs",value:function(e,t){var n=this;e.forEach((function(e){return n.removeReference(e,t)}))}},{key:"hs",value:function(e){var t=this,n=new os(new rs([])),r=new yv(n,e),i=new yv(n,e+1),a=[];return this.ss.forEachInRange([r,i],(function(e){t.us(e),a.push(e.key)})),a}},{key:"ls",value:function(){var e=this;this.es.forEach((function(t){return e.us(t)}))}},{key:"us",value:function(e){this.es=this.es.delete(e),this.ss=this.ss.delete(e)}},{key:"fs",value:function(e){var t=new os(new rs([])),n=new yv(t,e),r=new yv(t,e+1),i=lf();return this.ss.forEachInRange([n,r],(function(e){i=i.add(e.key)})),i}},{key:"containsKey",value:function(e){var t=new yv(e,0),n=this.es.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}]),e}(),yv=function(){function e(t,n){p(this,e),this.key=t,this.ds=n}return m(e,null,[{key:"ns",value:function(e,t){return os.comparator(e.key,t.key)||Xu(e.ds,t.ds)}},{key:"rs",value:function(e,t){return Xu(e.ds,t.ds)||os.comparator(e.key,t.key)}}]),e}(),mv=function(){function e(t,n){p(this,e),this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.ws=1,this._s=new mc(yv.ns)}return m(e,[{key:"checkEmpty",value:function(e){return bs.resolve(0===this.mutationQueue.length)}},{key:"addMutationBatch",value:function(e,t,n,r){var i=this.ws;this.ws++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];var a=new Wf(i,t,n,r);this.mutationQueue.push(a);var o,u=g(r);try{for(u.s();!(o=u.n()).done;){var s=o.value;this._s=this._s.add(new yv(s.key,i)),this.indexManager.addToCollectionParentIndex(e,s.key.path.popLast())}}catch(c){u.e(c)}finally{u.f()}return bs.resolve(a)}},{key:"lookupMutationBatch",value:function(e,t){return bs.resolve(this.gs(t))}},{key:"getNextMutationBatchAfterBatchId",value:function(e,t){var n=t+1,r=this.ys(n),i=r<0?0:r;return bs.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}},{key:"getHighestUnacknowledgedBatchId",value:function(){return bs.resolve(0===this.mutationQueue.length?-1:this.ws-1)}},{key:"getAllMutationBatches",value:function(e){return bs.resolve(this.mutationQueue.slice())}},{key:"getAllMutationBatchesAffectingDocumentKey",value:function(e,t){var n=this,r=new yv(t,0),i=new yv(t,Number.POSITIVE_INFINITY),a=[];return this._s.forEachInRange([r,i],(function(e){var t=n.gs(e.ds);a.push(t)})),bs.resolve(a)}},{key:"getAllMutationBatchesAffectingDocumentKeys",value:function(e,t){var n=this,r=new mc(Xu);return t.forEach((function(e){var t=new yv(e,0),i=new yv(e,Number.POSITIVE_INFINITY);n._s.forEachInRange([t,i],(function(e){r=r.add(e.ds)}))})),bs.resolve(this.ps(r))}},{key:"getAllMutationBatchesAffectingQuery",value:function(e,t){var n=t.path,r=n.length+1,i=n;os.isDocumentKey(i)||(i=i.child(""));var a=new yv(new os(i),0),o=new mc(Xu);return this._s.forEachWhile((function(e){var t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(o=o.add(e.ds)),!0)}),a),bs.resolve(this.ps(o))}},{key:"ps",value:function(e){var t=this,n=[];return e.forEach((function(e){var r=t.gs(e);null!==r&&n.push(r)})),n}},{key:"removeMutationBatch",value:function(e,t){var n=this;Mu(0===this.Is(t.batchId,"removed")),this.mutationQueue.shift();var r=this._s;return bs.forEach(t.mutations,(function(i){var a=new yv(i.key,t.batchId);return r=r.delete(a),n.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((function(){n._s=r}))}},{key:"En",value:function(e){}},{key:"containsKey",value:function(e,t){var n=new yv(t,0),r=this._s.firstAfterOrEqual(n);return bs.resolve(t.isEqual(r&&r.key))}},{key:"performConsistencyCheck",value:function(e){return this.mutationQueue.length,bs.resolve()}},{key:"Is",value:function(e,t){return this.ys(e)}},{key:"ys",value:function(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}},{key:"gs",value:function(e){var t=this.ys(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}]),e}(),gv=function(){function e(t){p(this,e),this.Ts=t,this.docs=new vc(os.comparator),this.size=0}return m(e,[{key:"setIndexManager",value:function(e){this.indexManager=e}},{key:"addEntry",value:function(e,t){var n=t.key,r=this.docs.get(n),i=r?r.size:0,a=this.Ts(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}},{key:"removeEntry",value:function(e){var t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}},{key:"getEntry",value:function(e,t){var n=this.docs.get(t);return bs.resolve(n?n.document.mutableCopy():tl.newInvalidDocument(t))}},{key:"getEntries",value:function(e,t){var n=this,r=ef();return t.forEach((function(e){var t=n.docs.get(e);r=r.insert(e,t?t.document.mutableCopy():tl.newInvalidDocument(e))})),bs.resolve(r)}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){for(var i=ef(),a=t.path,o=new os(a.child("")),u=this.docs.getIteratorFrom(o);u.hasNext();){var s=u.getNext(),c=s.key,l=s.value.document;if(!a.isPrefixOf(c.path))break;c.path.length>a.length+1||ps(ds(l),n)<=0||(r.has(l.key)||Ql(t,l))&&(i=i.insert(l.key,l.mutableCopy()))}return bs.resolve(i)}},{key:"getAllFromCollectionGroup",value:function(e,t,n,r){Lu()}},{key:"Es",value:function(e,t){return bs.forEach(this.docs,(function(e){return t(e)}))}},{key:"newChangeBuffer",value:function(e){return new kv(this)}},{key:"getSize",value:function(e){return bs.resolve(this.size)}}]),e}(),kv=function(e){w(n,e);var t=E(n);function n(e){var r;return p(this,n),(r=t.call(this)).Jn=e,r}return m(n,[{key:"applyChanges",value:function(e){var t=this,n=[];return this.changes.forEach((function(r,i){i.isValidDocument()?n.push(t.Jn.addEntry(e,i)):t.Jn.removeEntry(r)})),bs.waitFor(n)}},{key:"getFromCache",value:function(e,t){return this.Jn.getEntry(e,t)}},{key:"getAllFromCache",value:function(e,t){return this.Jn.getEntries(e,t)}}]),n}(nv),bv=function(){function e(t){p(this,e),this.persistence=t,this.As=new Jl((function(e){return Cl(e)}),Dl),this.lastRemoteSnapshotVersion=ts.min(),this.highestTargetId=0,this.Rs=0,this.vs=new pv,this.targetCount=0,this.bs=Gd.vn()}return m(e,[{key:"forEachTarget",value:function(e,t){return this.As.forEach((function(e,n){return t(n)})),bs.resolve()}},{key:"getLastRemoteSnapshotVersion",value:function(e){return bs.resolve(this.lastRemoteSnapshotVersion)}},{key:"getHighestSequenceNumber",value:function(e){return bs.resolve(this.Rs)}},{key:"allocateTargetId",value:function(e){return this.highestTargetId=this.bs.next(),bs.resolve(this.highestTargetId)}},{key:"setTargetsMetadata",value:function(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.Rs&&(this.Rs=t),bs.resolve()}},{key:"Sn",value:function(e){this.As.set(e.target,e);var t=e.targetId;t>this.highestTargetId&&(this.bs=new Gd(t),this.highestTargetId=t),e.sequenceNumber>this.Rs&&(this.Rs=e.sequenceNumber)}},{key:"addTargetData",value:function(e,t){return this.Sn(t),this.targetCount+=1,bs.resolve()}},{key:"updateTargetData",value:function(e,t){return this.Sn(t),bs.resolve()}},{key:"removeTargetData",value:function(e,t){return this.As.delete(t.target),this.vs.hs(t.targetId),this.targetCount-=1,bs.resolve()}},{key:"removeTargets",value:function(e,t,n){var r=this,i=0,a=[];return this.As.forEach((function(o,u){u.sequenceNumber<=t&&null===n.get(u.targetId)&&(r.As.delete(o),a.push(r.removeMatchingKeysForTargetId(e,u.targetId)),i++)})),bs.waitFor(a).next((function(){return i}))}},{key:"getTargetCount",value:function(e){return bs.resolve(this.targetCount)}},{key:"getTargetData",value:function(e,t){var n=this.As.get(t)||null;return bs.resolve(n)}},{key:"addMatchingKeys",value:function(e,t,n){return this.vs.os(t,n),bs.resolve()}},{key:"removeMatchingKeys",value:function(e,t,n){this.vs.cs(t,n);var r=this.persistence.referenceDelegate,i=[];return r&&t.forEach((function(t){i.push(r.markPotentiallyOrphaned(e,t))})),bs.waitFor(i)}},{key:"removeMatchingKeysForTargetId",value:function(e,t){return this.vs.hs(t),bs.resolve()}},{key:"getMatchingKeysForTargetId",value:function(e,t){var n=this.vs.fs(t);return bs.resolve(n)}},{key:"containsKey",value:function(e,t){return bs.resolve(this.vs.containsKey(t))}}]),e}(),wv=function(){function e(t,n){var r=this;p(this,e),this.Ps={},this.overlays={},this.Vs=new Rs(0),this.Ss=!1,this.Ss=!0,this.referenceDelegate=t(this),this.Ds=new bv(this),this.indexManager=new Td,this.remoteDocumentCache=new gv((function(e){return r.referenceDelegate.Cs(e)})),this.serializer=new Kh(n),this.xs=new dv(this.serializer)}return m(e,[{key:"start",value:function(){return Promise.resolve()}},{key:"shutdown",value:function(){return this.Ss=!1,Promise.resolve()}},{key:"started",get:function(){return this.Ss}},{key:"setDatabaseDeletedListener",value:function(){}},{key:"setNetworkEnabled",value:function(){}},{key:"getIndexManager",value:function(e){return this.indexManager}},{key:"getDocumentOverlayCache",value:function(e){var t=this.overlays[e.toKey()];return t||(t=new vv,this.overlays[e.toKey()]=t),t}},{key:"getMutationQueue",value:function(e,t){var n=this.Ps[e.toKey()];return n||(n=new mv(t,this.referenceDelegate),this.Ps[e.toKey()]=n),n}},{key:"getTargetCache",value:function(){return this.Ds}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getBundleCache",value:function(){return this.xs}},{key:"runTransaction",value:function(e,t,n){var r=this;Au("MemoryPersistence","Starting transaction:",e);var i=new _v(this.Vs.next());return this.referenceDelegate.Ns(),n(i).next((function(e){return r.referenceDelegate.ks(i).next((function(){return e}))})).toPromise().then((function(e){return i.raiseOnCommittedEvent(),e}))}},{key:"Os",value:function(e,t){return bs.or(Object.values(this.Ps).map((function(n){return function(){return n.containsKey(e,t)}})))}}]),e}(),_v=function(e){w(n,e);var t=E(n);function n(e){var r;return p(this,n),(r=t.call(this)).currentSequenceNumber=e,r}return m(n)}(ms),xv=function(){function e(t){p(this,e),this.persistence=t,this.$s=new pv,this.Ms=null}return m(e,[{key:"Bs",get:function(){if(this.Ms)return this.Ms;throw Lu()}},{key:"addReference",value:function(e,t,n){return this.$s.addReference(n,t),this.Bs.delete(n.toString()),bs.resolve()}},{key:"removeReference",value:function(e,t,n){return this.$s.removeReference(n,t),this.Bs.add(n.toString()),bs.resolve()}},{key:"markPotentiallyOrphaned",value:function(e,t){return this.Bs.add(t.toString()),bs.resolve()}},{key:"removeTarget",value:function(e,t){var n=this;this.$s.hs(t.targetId).forEach((function(e){return n.Bs.add(e.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next((function(e){e.forEach((function(e){return n.Bs.add(e.toString())}))})).next((function(){return r.removeTargetData(e,t)}))}},{key:"Ns",value:function(){this.Ms=new Set}},{key:"ks",value:function(e){var t=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return bs.forEach(this.Bs,(function(r){var i=os.fromPath(r);return t.Ls(e,i).next((function(e){e||n.removeEntry(i,ts.min())}))})).next((function(){return t.Ms=null,n.apply(e)}))}},{key:"updateLimboDocument",value:function(e,t){var n=this;return this.Ls(e,t).next((function(e){e?n.Bs.delete(t.toString()):n.Bs.add(t.toString())}))}},{key:"Cs",value:function(e){return 0}},{key:"Ls",value:function(e,t){var n=this;return bs.or([function(){return bs.resolve(n.$s.containsKey(t))},function(){return n.persistence.getTargetCache().containsKey(e,t)},function(){return n.persistence.Os(e,t)}])}}],[{key:"Fs",value:function(t){return new e(t)}}]),e}(),Ev=function(){function e(t){p(this,e),this.serializer=t}return m(e,[{key:"M",value:function(e,t,n,r){var i=this,a=new ws("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Bs,{unique:!0}),e.createObjectStore("documentMutations")}(e),Sv(e),function(e){e.createObjectStore("remoteDocuments")}(e));var o=bs.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Sv(e)),o=o.next((function(){return function(e){var t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:ts.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(a)}))),n<4&&r>=4&&(0!==n&&(o=o.next((function(){return function(e,t){return t.store("mutations").j().next((function(n){e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Bs,{unique:!0});var r=t.store("mutations"),i=n.map((function(e){return r.put(e)}));return bs.waitFor(i)}))}(e,a)}))),o=o.next((function(){!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)}))),n<5&&r>=5&&(o=o.next((function(){return i.qs(a)}))),n<6&&r>=6&&(o=o.next((function(){return function(e){e.createObjectStore("remoteDocumentGlobal")}(e),i.Us(a)}))),n<7&&r>=7&&(o=o.next((function(){return i.Ks(a)}))),n<8&&r>=8&&(o=o.next((function(){return i.Gs(e,a)}))),n<9&&r>=9&&(o=o.next((function(){!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)}))),n<10&&r>=10&&(o=o.next((function(){return i.Qs(a)}))),n<11&&r>=11&&(o=o.next((function(){!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)}))),n<12&&r>=12&&(o=o.next((function(){!function(e){var t=e.createObjectStore("documentOverlays",{keyPath:tc});t.createIndex("collectionPathOverlayIndex",nc,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",rc,{unique:!1})}(e)}))),n<13&&r>=13&&(o=o.next((function(){return function(e){var t=e.createObjectStore("remoteDocumentsV14",{keyPath:Ks});t.createIndex("documentKeyIndex",Gs),t.createIndex("collectionGroupIndex",Hs)}(e)})).next((function(){return i.zs(e,a)})).next((function(){return e.deleteObjectStore("remoteDocuments")}))),n<14&&r>=14&&(o=o.next((function(){return i.js(e,a)}))),n<15&&r>=15&&(o=o.next((function(){return function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:Xs}).createIndex("sequenceNumberIndex",Js,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Zs}).createIndex("documentKeyIndex",ec,{unique:!1})}(e)}))),o}},{key:"Us",value:function(e){var t=0;return e.store("remoteDocuments").Z((function(e,n){t+=Vd(n)})).next((function(){var n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)}))}},{key:"qs",value:function(e){var t=this,n=e.store("mutationQueues"),r=e.store("mutations");return n.j().next((function(n){return bs.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",i).next((function(r){return bs.forEach(r,(function(r){Mu(r.userId===n.userId);var i=Yh(t.serializer,r);return Ud(e,n.userId,i).next((function(){}))}))}))}))}))}},{key:"Ks",value:function(e){var t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next((function(e){var r=[];return n.Z((function(n,i){var a=new rs(n),o=function(e){return[0,Ms(e)]}(a);r.push(t.get(o).next((function(n){return n?bs.resolve():function(n){return t.put({targetId:0,path:Ms(n),sequenceNumber:e.highestListenSequenceNumber})}(a)})))})).next((function(){return bs.waitFor(r)}))}))}},{key:"Gs",value:function(e,t){e.createObjectStore("collectionParents",{keyPath:$s});var n=t.store("collectionParents"),r=new Cd,i=function(e){if(r.add(e)){var t=e.lastSegment(),i=e.popLast();return n.put({collectionId:t,parent:Ms(i)})}};return t.store("remoteDocuments").Z({Y:!0},(function(e,t){var n=new rs(e);return i(n.popLast())})).next((function(){return t.store("documentMutations").Z({Y:!0},(function(e,t){var n=s(e,3),r=(n[0],n[1]),a=(n[2],Vs(r));return i(a.popLast())}))}))}},{key:"Qs",value:function(e){var t=this,n=e.store("targets");return n.Z((function(e,r){var i=$h(r),a=Xh(t.serializer,i);return n.put(a)}))}},{key:"zs",value:function(e,t){var n=t.store("remoteDocuments"),r=[];return n.Z((function(e,n){var i,a=t.store("remoteDocumentsV14"),o=(i=n,i.document?new os(rs.fromString(i.document.name).popFirst(5)):i.noDocument?os.fromSegments(i.noDocument.path):i.unknownDocument?os.fromSegments(i.unknownDocument.path):Lu()).path.toArray(),u={prefixPath:o.slice(0,o.length-2),collectionGroup:o[o.length-2],documentId:o[o.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(a.put(u))})).next((function(){return bs.waitFor(r)}))}},{key:"js",value:function(e,t){var n=this,r=t.store("mutations"),i=iv(this.serializer),a=new wv(xv.Fs,this.serializer.se);return r.j().next((function(e){var r=new Map;return e.forEach((function(e){var t,i=null!==(t=r.get(e.userId))&&void 0!==t?t:lf();Yh(n.serializer,e).keys().forEach((function(e){return i=i.add(e)})),r.set(e.userId,i)})),bs.forEach(r,(function(e,r){var o=new Tu(r),u=ad.ie(n.serializer,o),s=a.getIndexManager(o),c=Bd.ie(o,n.serializer,s,a.referenceDelegate);return new hv(i,c,u,s).recalculateAndSaveOverlaysForDocumentKeys(new cc(t,Rs.ct),e).next()}))}))}}]),e}();function Sv(e){e.createObjectStore("targetDocuments",{keyPath:Qs}).createIndex("documentTargetsIndex",Ys,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ws,{unique:!0}),e.createObjectStore("targetGlobal")}var Iv="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Tv=function(){function e(t,n,r,i,a,o,u,s,c,l){var f=arguments.length>10&&void 0!==arguments[10]?arguments[10]:15;if(p(this,e),this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Ws=a,this.window=o,this.document=u,this.Hs=c,this.Js=l,this.Ys=f,this.Vs=null,this.Ss=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.Xs=null,this.ti=null,this.ei=Number.NEGATIVE_INFINITY,this.ni=function(e){return Promise.resolve()},!e.D())throw new Vu(Uu.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ev(this,i),this.si=n+"main",this.serializer=new Kh(s),this.ii=new _s(this.si,this.Ys,new Ev(this.serializer)),this.Ds=new Hd(this.referenceDelegate,this.serializer),this.remoteDocumentCache=iv(this.serializer),this.xs=new nd,this.window&&this.window.localStorage?this.ri=this.window.localStorage:(this.ri=null,!1===l&&Ru("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return m(e,[{key:"start",value:function(){var e=this;return this.oi().then((function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Vu(Uu.FAILED_PRECONDITION,Iv);return e.ui(),e.ci(),e.ai(),e.runTransaction("getHighestListenSequenceNumber","readonly",(function(t){return e.Ds.getHighestSequenceNumber(t)}))})).then((function(t){e.Vs=new Rs(t,e.Hs)})).then((function(){e.Ss=!0})).catch((function(t){return e.ii&&e.ii.close(),Promise.reject(t)}))}},{key:"hi",value:function(e){var t=this;return this.ni=function(){var n=h(l().mark((function n(r){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.started){n.next=2;break}return n.abrupt("return",e(r));case 2:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),e(this.isPrimary)}},{key:"setDatabaseDeletedListener",value:function(e){this.ii.B(function(){var t=h(l().mark((function t(n){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.t0=null===n.newVersion,!t.t0){t.next=4;break}return t.next=4,e();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())}},{key:"setNetworkEnabled",value:function(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Ws.enqueueAndForget(h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t.started,!e.t0){e.next=4;break}return e.next=4,t.oi();case 4:case"end":return e.stop()}}),e)})))))}},{key:"oi",value:function(){var e=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(t){return Dv(t).put({clientId:e.clientId,updateTimeMs:Date.now(),networkEnabled:e.networkEnabled,inForeground:e.inForeground}).next((function(){if(e.isPrimary)return e.li(t).next((function(t){t||(e.isPrimary=!1,e.Ws.enqueueRetryable((function(){return e.ni(!1)})))}))})).next((function(){return e.fi(t)})).next((function(n){return e.isPrimary&&!n?e.di(t).next((function(){return!1})):!!n&&e.wi(t).next((function(){return!0}))}))})).catch((function(t){if(Ss(t))return Au("IndexedDbPersistence","Failed to extend owner lease: ",t),e.isPrimary;if(!e.allowTabSynchronization)throw t;return Au("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1})).then((function(t){e.isPrimary!==t&&e.Ws.enqueueRetryable((function(){return e.ni(t)})),e.isPrimary=t}))}},{key:"li",value:function(e){var t=this;return Cv(e).get("owner").next((function(e){return bs.resolve(t._i(e))}))}},{key:"mi",value:function(e){return Dv(e).delete(this.clientId)}},{key:"gi",value:function(){var e=h(l().mark((function e(){var t,n,r,i,a=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isPrimary||this.yi(this.ei,18e5)){e.next=6;break}return this.ei=Date.now(),e.next=4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(e){var t=lc(e,"clientMetadata");return t.j().next((function(e){var n=a.pi(e,18e5),r=e.filter((function(e){return-1===n.indexOf(e)}));return bs.forEach(r,(function(e){return t.delete(e.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}));case 4:if(t=e.sent,this.ri){n=g(t);try{for(n.s();!(r=n.n()).done;)i=r.value,this.ri.removeItem(this.Ii(i.clientId))}catch(o){n.e(o)}finally{n.f()}}case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"ai",value:function(){var e=this;this.ti=this.Ws.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return e.oi().then((function(){return e.gi()})).then((function(){return e.ai()}))}))}},{key:"_i",value:function(e){return!!e&&e.ownerId===this.clientId}},{key:"fi",value:function(e){var t=this;return this.Js?bs.resolve(!0):Cv(e).get("owner").next((function(n){if(null!==n&&t.yi(n.leaseTimestampMs,5e3)&&!t.Ti(n.ownerId)){if(t._i(n)&&t.networkEnabled)return!0;if(!t._i(n)){if(!n.allowTabSynchronization)throw new Vu(Uu.FAILED_PRECONDITION,Iv);return!1}}return!(!t.networkEnabled||!t.inForeground)||Dv(e).j().next((function(e){return void 0===t.pi(e,5e3).find((function(e){if(t.clientId!==e.clientId){var n=!t.networkEnabled&&e.networkEnabled,r=!t.inForeground&&e.inForeground,i=t.networkEnabled===e.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(e){return t.isPrimary!==e&&Au("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e}))}},{key:"shutdown",value:function(){var e=h(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Ss=!1,this.Ei(),this.ti&&(this.ti.cancel(),this.ti=null),this.Ai(),this.Ri(),e.next=7,this.ii.runTransaction("shutdown","readwrite",["owner","clientMetadata"],(function(e){var n=new cc(e,Rs.ct);return t.di(n).next((function(){return t.mi(n)}))}));case 7:this.ii.close(),this.vi();case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"pi",value:function(e,t){var n=this;return e.filter((function(e){return n.yi(e.updateTimeMs,t)&&!n.Ti(e.clientId)}))}},{key:"bi",value:function(){var e=this;return this.runTransaction("getActiveClients","readonly",(function(t){return Dv(t).j().next((function(t){return e.pi(t,18e5).map((function(e){return e.clientId}))}))}))}},{key:"started",get:function(){return this.Ss}},{key:"getMutationQueue",value:function(e,t){return Bd.ie(e,this.serializer,t,this.referenceDelegate)}},{key:"getTargetCache",value:function(){return this.Ds}},{key:"getRemoteDocumentCache",value:function(){return this.remoteDocumentCache}},{key:"getIndexManager",value:function(e){return new Nd(e,this.serializer.se.databaseId)}},{key:"getDocumentOverlayCache",value:function(e){return ad.ie(this.serializer,e)}},{key:"getBundleCache",value:function(){return this.xs}},{key:"runTransaction",value:function(e,t,n){var r=this;Au("IndexedDbPersistence","Starting transaction:",e);var i,a,o="readonly"===t?"readonly":"readwrite",u=15===(i=this.Ys)?sc:14===i?uc:13===i?oc:12===i?ac:11===i?ic:void Lu();return this.ii.runTransaction(e,o,u,(function(i){return a=new cc(i,r.Vs?r.Vs.next():Rs.ct),"readwrite-primary"===t?r.li(a).next((function(e){return!!e||r.fi(a)})).next((function(t){if(!t)throw Ru("Failed to obtain primary lease for action '".concat(e,"'.")),r.isPrimary=!1,r.Ws.enqueueRetryable((function(){return r.ni(!1)})),new Vu(Uu.FAILED_PRECONDITION,ys);return n(a)})).next((function(e){return r.wi(a).next((function(){return e}))})):r.Pi(a).next((function(){return n(a)}))})).then((function(e){return a.raiseOnCommittedEvent(),e}))}},{key:"Pi",value:function(e){var t=this;return Cv(e).get("owner").next((function(e){if(null!==e&&t.yi(e.leaseTimestampMs,5e3)&&!t.Ti(e.ownerId)&&!t._i(e)&&!(t.Js||t.allowTabSynchronization&&e.allowTabSynchronization))throw new Vu(Uu.FAILED_PRECONDITION,Iv)}))}},{key:"wi",value:function(e){var t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Cv(e).put("owner",t)}},{key:"di",value:function(e){var t=this,n=Cv(e);return n.get("owner").next((function(e){return t._i(e)?(Au("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):bs.resolve()}))}},{key:"yi",value:function(e,t){var n=Date.now();return!(e<n-t)&&(!(e>n)||(Ru("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}},{key:"ui",value:function(){var e=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Xs=function(){e.Ws.enqueueAndForget((function(){return e.inForeground="visible"===e.document.visibilityState,e.oi()}))},this.document.addEventListener("visibilitychange",this.Xs),this.inForeground="visible"===this.document.visibilityState)}},{key:"Ai",value:function(){this.Xs&&(this.document.removeEventListener("visibilitychange",this.Xs),this.Xs=null)}},{key:"ci",value:function(){var e,t=this;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=function(){t.Ei();var e=/(?:Version|Mobile)\/1[456]/;!V()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&t.Ws.enterRestrictedMode(!0),t.Ws.enqueueAndForget((function(){return t.shutdown()}))},this.window.addEventListener("pagehide",this.Zs))}},{key:"Ri",value:function(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}},{key:"Ti",value:function(e){var t;try{var n=null!==(null===(t=this.ri)||void 0===t?void 0:t.getItem(this.Ii(e)));return Au("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return Ru("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}},{key:"Ei",value:function(){if(this.ri)try{this.ri.setItem(this.Ii(this.clientId),String(Date.now()))}catch(Lr){Ru("Failed to set zombie client id.",Lr)}}},{key:"vi",value:function(){if(this.ri)try{this.ri.removeItem(this.Ii(this.clientId))}catch(Lr){}}},{key:"Ii",value:function(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}],[{key:"D",value:function(){return _s.D()}}]),e}();function Cv(e){return lc(e,"owner")}function Dv(e){return lc(e,"clientMetadata")}function Nv(e,t){var n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}var Av=function(){function e(t,n,r,i){p(this,e),this.targetId=t,this.fromCache=n,this.Vi=r,this.Si=i}return m(e,null,[{key:"Di",value:function(t,n){var r,i=lf(),a=lf(),o=g(n.docChanges);try{for(o.s();!(r=o.n()).done;){var u=r.value;switch(u.type){case 0:i=i.add(u.doc.key);break;case 1:a=a.add(u.doc.key)}}}catch(s){o.e(s)}finally{o.f()}return new e(t,n.fromCache,i,a)}}]),e}(),Rv=function(){function e(){p(this,e),this.Ci=!1}return m(e,[{key:"initialize",value:function(e,t){this.xi=e,this.indexManager=t,this.Ci=!0}},{key:"getDocumentsMatchingQuery",value:function(e,t,n,r){var i=this;return this.Ni(e,t).next((function(a){return a||i.ki(e,t,r,n)})).next((function(n){return n||i.Oi(e,t)}))}},{key:"Ni",value:function(e,t){var n=this;if(Fl(t))return bs.resolve(null);var r=jl(t);return this.indexManager.getIndexType(e,r).next((function(i){return 0===i?null:(null!==t.limit&&1===i&&(t=Kl(t,null,"F"),r=jl(t)),n.indexManager.getDocumentsMatchingTarget(e,r).next((function(i){var a=lf.apply(void 0,X(i));return n.xi.getDocuments(e,a).next((function(i){return n.indexManager.getMinOffset(e,r).next((function(r){var o=n.$i(t,i);return n.Mi(t,o,a,r.readTime)?n.Ni(e,Kl(t,null,"F")):n.Fi(e,o,t,r)}))}))})))}))}},{key:"ki",value:function(e,t,n,r){var i=this;return Fl(t)||r.isEqual(ts.min())?this.Oi(e,t):this.xi.getDocuments(e,n).next((function(a){var o=i.$i(t,a);return i.Mi(t,o,n,r)?i.Oi(e,t):(Nu()<=ne.DEBUG&&Au("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Wl(t)),i.Fi(e,o,t,hs(r,-1)))}))}},{key:"$i",value:function(e,t){var n=new mc($l(e));return t.forEach((function(t,r){Ql(e,r)&&(n=n.add(r))})),n}},{key:"Mi",value:function(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;var i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}},{key:"Oi",value:function(e,t){return Nu()<=ne.DEBUG&&Au("QueryEngine","Using full collection scan to execute query:",Wl(t)),this.xi.getDocumentsMatchingQuery(e,t,vs.min())}},{key:"Fi",value:function(e,t,n,r){return this.xi.getDocumentsMatchingQuery(e,n,r).next((function(e){return t.forEach((function(t){e=e.insert(t.key,t)})),e}))}}]),e}(),Ov=function(){function e(t,n,r,i){p(this,e),this.persistence=t,this.Bi=n,this.serializer=i,this.Li=new vc(Xu),this.qi=new Jl((function(e){return Cl(e)}),Dl),this.Ui=new Map,this.Ki=t.getRemoteDocumentCache(),this.Ds=t.getTargetCache(),this.xs=t.getBundleCache(),this.Gi(r)}return m(e,[{key:"Gi",value:function(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new hv(this.Ki,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ki.setIndexManager(this.indexManager),this.Bi.initialize(this.localDocuments,this.indexManager)}},{key:"collectGarbage",value:function(e){var t=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return e.collect(n,t.Li)}))}}]),e}();function Pv(e,t,n,r){return new Ov(e,t,n,r)}function Lv(e,t){return Mv.apply(this,arguments)}function Mv(){return Mv=h(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fu(t),e.next=3,r.persistence.runTransaction("Handle user change","readonly",(function(e){var t;return r.mutationQueue.getAllMutationBatches(e).next((function(i){return t=i,r.Gi(n),r.mutationQueue.getAllMutationBatches(e)})).next((function(n){var i,a=[],o=[],u=lf(),s=g(t);try{for(s.s();!(i=s.n()).done;){var c=i.value;a.push(c.batchId);var l,f=g(c.mutations);try{for(f.s();!(l=f.n()).done;){var h=l.value;u=u.add(h.key)}}catch(b){f.e(b)}finally{f.f()}}}catch(b){s.e(b)}finally{s.f()}var d,v=g(n);try{for(v.s();!(d=v.n()).done;){var p=d.value;o.push(p.batchId);var y,m=g(p.mutations);try{for(m.s();!(y=m.n()).done;){var k=y.value;u=u.add(k.key)}}catch(b){m.e(b)}finally{m.f()}}}catch(b){v.e(b)}finally{v.f()}return r.localDocuments.getDocuments(e,u).next((function(e){return{Qi:e,removedBatchIds:a,addedBatchIds:o}}))}))}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)}))),Mv.apply(this,arguments)}function Fv(e,t){var n=Fu(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(e){var r=t.batch.keys(),i=n.Ki.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){var i=n.batch,a=i.keys(),o=bs.resolve();return a.forEach((function(e){o=o.next((function(){return r.getEntry(t,e)})).next((function(t){var a=n.docVersions.get(e);Mu(null!==a),t.version.compareTo(a)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))}))})),o.next((function(){return e.mutationQueue.removeMutationBatch(t,i)}))}(n,e,t,i).next((function(){return i.apply(e)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){for(var t=lf(),n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}function Uv(e){var t=Fu(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(function(e){return t.Ds.getLastRemoteSnapshotVersion(e)}))}function Vv(e,t){var n=Fu(e),r=t.snapshotVersion,i=n.Li;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(e){var a=n.Ki.newChangeBuffer({trackRemovals:!0});i=n.Li;var o=[];t.targetChanges.forEach((function(a,u){var s=i.get(u);if(s){o.push(n.Ds.removeMatchingKeys(e,a.removedDocuments,u).next((function(){return n.Ds.addMatchingKeys(e,a.addedDocuments,u)})));var c=s.withSequenceNumber(e.currentSequenceNumber);t.targetMismatches.has(u)?c=c.withResumeToken(_c.EMPTY_BYTE_STRING,ts.min()).withLastLimboFreeSnapshotVersion(ts.min()):a.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(a.resumeToken,r)),i=i.insert(u,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(s,c,a)&&o.push(n.Ds.updateTargetData(e,c))}}));var u=ef(),s=lf();if(t.documentUpdates.forEach((function(r){t.resolvedLimboDocuments.has(r)&&o.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))})),o.push(Bv(e,a,t.documentUpdates).next((function(e){u=e.zi,s=e.ji}))),!r.isEqual(ts.min())){var c=n.Ds.getLastRemoteSnapshotVersion(e).next((function(t){return n.Ds.setTargetsMetadata(e,e.currentSequenceNumber,r)}));o.push(c)}return bs.waitFor(o).next((function(){return a.apply(e)})).next((function(){return n.localDocuments.getLocalViewOfDocuments(e,u,s)})).next((function(){return u}))})).then((function(e){return n.Li=i,e}))}function Bv(e,t,n){var r=lf(),i=lf();return n.forEach((function(e){return r=r.add(e)})),t.getEntries(e,r).next((function(e){var r=ef();return n.forEach((function(n,a){var o=e.get(n);a.isFoundDocument()!==o.isFoundDocument()&&(i=i.add(n)),a.isNoDocument()&&a.version.isEqual(ts.min())?(t.removeEntry(n,a.readTime),r=r.insert(n,a)):!o.isValidDocument()||a.version.compareTo(o.version)>0||0===a.version.compareTo(o.version)&&o.hasPendingWrites?(t.addEntry(a),r=r.insert(n,a)):Au("LocalStore","Ignoring outdated watch update for ",n,". Current version:",o.version," Watch version:",a.version)})),{zi:r,ji:i}}))}function zv(e,t){var n=Fu(e);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(e){return void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)}))}function jv(e,t){var n=Fu(e);return n.persistence.runTransaction("Allocate target","readwrite",(function(e){var r;return n.Ds.getTargetData(e,t).next((function(i){return i?(r=i,bs.resolve(r)):n.Ds.allocateTargetId(e).next((function(i){return r=new qh(t,i,0,e.currentSequenceNumber),n.Ds.addTargetData(e,r).next((function(){return r}))}))}))})).then((function(e){var r=n.Li.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Li=n.Li.insert(e.targetId,e),n.qi.set(t,e.targetId)),e}))}function qv(e,t,n){return Kv.apply(this,arguments)}function Kv(){return Kv=h(l().mark((function e(t,n,r){var i,a,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Fu(t),a=i.Li.get(n),o=r?"readwrite":"readwrite-primary",e.prev=1,e.t0=r,e.t0){e.next=6;break}return e.next=6,i.persistence.runTransaction("Release target",o,(function(e){return i.persistence.referenceDelegate.removeTarget(e,a)}));case 6:e.next=13;break;case 8:if(e.prev=8,e.t1=e.catch(1),Ss(e.t1)){e.next=12;break}throw e.t1;case 12:Au("LocalStore","Failed to update sequence numbers for target ".concat(n,": ").concat(e.t1));case 13:i.Li=i.Li.remove(n),i.qi.delete(a.target);case 14:case"end":return e.stop()}}),e,null,[[1,8]])}))),Kv.apply(this,arguments)}function Gv(e,t,n){var r=Fu(e),i=ts.min(),a=lf();return r.persistence.runTransaction("Execute query","readonly",(function(e){return function(e,t,n){var r=Fu(e),i=r.qi.get(n);return void 0!==i?bs.resolve(r.Li.get(i)):r.Ds.getTargetData(t,n)}(r,e,jl(t)).next((function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Ds.getMatchingKeysForTargetId(e,t.targetId).next((function(e){a=e}))})).next((function(){return r.Bi.getDocumentsMatchingQuery(e,t,n?i:ts.min(),n?a:lf())})).next((function(e){return Qv(r,Yl(t),e),{documents:e,Wi:a}}))}))}function Hv(e,t){var n=Fu(e),r=Fu(n.Ds),i=n.Li.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(e){return r.ne(e,t).next((function(e){return e?e.target:null}))}))}function Wv(e,t){var n=Fu(e),r=n.Ui.get(t)||ts.min();return n.persistence.runTransaction("Get new document changes","readonly",(function(e){return n.Ki.getAllFromCollectionGroup(e,t,hs(r,-1),Number.MAX_SAFE_INTEGER)})).then((function(e){return Qv(n,t,e),e}))}function Qv(e,t,n){var r=e.Ui.get(t)||ts.min();n.forEach((function(e,t){t.readTime.compareTo(r)>0&&(r=t.readTime)})),e.Ui.set(t,r)}function Yv(e,t,n,r){return $v.apply(this,arguments)}function $v(){return $v=h(l().mark((function e(t,n,r,i){var a,o,u,s,c,f,h,d,v,p;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Fu(t),o=lf(),u=ef(),s=g(r);try{for(s.s();!(c=s.n()).done;)f=c.value,h=n.Hi(f.metadata.name),f.document&&(o=o.add(h)),(d=n.Ji(f)).setReadTime(n.Yi(f.metadata.readTime)),u=u.insert(h,d)}catch(l){s.e(l)}finally{s.f()}return v=a.Ki.newChangeBuffer({trackRemovals:!0}),e.next=7,jv(a,function(e){return jl(Ml(rs.fromString("__bundle__/docs/".concat(e))))}(i));case 7:return p=e.sent,e.abrupt("return",a.persistence.runTransaction("Apply bundle documents","readwrite",(function(e){return Bv(e,v,u).next((function(t){return v.apply(e),t})).next((function(t){return a.Ds.removeMatchingKeysForTargetId(e,p.targetId).next((function(){return a.Ds.addMatchingKeys(e,o,p.targetId)})).next((function(){return a.localDocuments.getLocalViewOfDocuments(e,t.zi,t.ji)})).next((function(){return t.zi}))}))})));case 9:case"end":return e.stop()}}),e)}))),$v.apply(this,arguments)}function Xv(e,t){return Jv.apply(this,arguments)}function Jv(){return Jv=h(l().mark((function e(t,n){var r,i,a,o=arguments;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=o.length>2&&void 0!==o[2]?o[2]:lf(),e.next=3,jv(t,jl(Jh(n.bundledQuery)));case 3:return i=e.sent,a=Fu(t),e.abrupt("return",a.persistence.runTransaction("Save named query","readwrite",(function(e){var t=mh(n.readTime);if(i.snapshotVersion.compareTo(t)>=0)return a.xs.saveNamedQuery(e,n);var o=i.withResumeToken(_c.EMPTY_BYTE_STRING,t);return a.Li=a.Li.insert(o.targetId,o),a.Ds.updateTargetData(e,o).next((function(){return a.Ds.removeMatchingKeysForTargetId(e,i.targetId)})).next((function(){return a.Ds.addMatchingKeys(e,r,i.targetId)})).next((function(){return a.xs.saveNamedQuery(e,n)}))})));case 6:case"end":return e.stop()}}),e)}))),Jv.apply(this,arguments)}function Zv(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function ep(e,t,n){var r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function tp(e,t){return"firestore_targets_".concat(e,"_").concat(t)}var np=function(){function e(t,n,r,i){p(this,e),this.user=t,this.batchId=n,this.state=r,this.error=i}return m(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n,r){var i,a=JSON.parse(r),o="object"==typeof a&&-1!==["pending","acknowledged","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return o&&a.error&&((o="string"==typeof a.error.message&&"string"==typeof a.error.code)&&(i=new Vu(a.error.code,a.error.message))),o?new e(t,n,a.state,i):(Ru("SharedClientState","Failed to parse mutation state for ID '".concat(n,"': ").concat(r)),null)}}]),e}(),rp=function(){function e(t,n,r){p(this,e),this.targetId=t,this.state=n,this.error=r}return m(e,[{key:"Xi",value:function(){var e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}],[{key:"Zi",value:function(t,n){var r,i=JSON.parse(n),a="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return a&&i.error&&((a="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Vu(i.error.code,i.error.message))),a?new e(t,i.state,r):(Ru("SharedClientState","Failed to parse target state for ID '".concat(t,"': ").concat(n)),null)}}]),e}(),ip=function(){function e(t,n){p(this,e),this.clientId=t,this.activeTargetIds=n}return m(e,null,[{key:"Zi",value:function(t,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,a=hf(),o=0;i&&o<r.activeTargetIds.length;++o)i=Ls(r.activeTargetIds[o]),a=a.add(r.activeTargetIds[o]);return i?new e(t,a):(Ru("SharedClientState","Failed to parse client data for instance '".concat(t,"': ").concat(n)),null)}}]),e}(),ap=function(){function e(t,n){p(this,e),this.clientId=t,this.onlineState=n}return m(e,null,[{key:"Zi",value:function(t){var n=JSON.parse(t);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new e(n.clientId,n.onlineState):(Ru("SharedClientState","Failed to parse online state: ".concat(t)),null)}}]),e}(),op=function(){function e(){p(this,e),this.activeTargetIds=hf()}return m(e,[{key:"tr",value:function(e){this.activeTargetIds=this.activeTargetIds.add(e)}},{key:"er",value:function(e){this.activeTargetIds=this.activeTargetIds.delete(e)}},{key:"Xi",value:function(){var e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}]),e}(),up=function(){function e(t,n,r,i,a){p(this,e),this.window=t,this.Ws=n,this.persistenceKey=r,this.nr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.sr=this.ir.bind(this),this.rr=new vc(Xu),this.started=!1,this.ur=[];var o=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.cr=Zv(this.persistenceKey,this.nr),this.ar=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.rr=this.rr.insert(this.nr,new op),this.hr=new RegExp("^firestore_clients_".concat(o,"_([^_]*)$")),this.lr=new RegExp("^firestore_mutations_".concat(o,"_(\\d+)(?:_(.*))?$")),this.dr=new RegExp("^firestore_targets_".concat(o,"_(\\d+)$")),this.wr=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this._r=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.sr)}return m(e,[{key:"start",value:function(){var e=h(l().mark((function e(){var t,n,r,i,a,o,u,s,c,f,h,d=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.syncEngine.bi();case 2:t=e.sent,n=g(t),e.prev=4,n.s();case 6:if((r=n.n()).done){e.next=14;break}if((i=r.value)!==this.nr){e.next=10;break}return e.abrupt("continue",12);case 10:(a=this.getItem(Zv(this.persistenceKey,i)))&&(o=ip.Zi(i,a))&&(this.rr=this.rr.insert(o.clientId,o));case 12:e.next=6;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(4),n.e(e.t0);case 19:return e.prev=19,n.f(),e.finish(19);case 22:this.mr(),(u=this.storage.getItem(this.wr))&&(s=this.gr(u))&&this.yr(s),c=g(this.ur);try{for(c.s();!(f=c.n()).done;)h=f.value,this.ir(h)}catch(l){c.e(l)}finally{c.f()}this.ur=[],this.window.addEventListener("pagehide",(function(){return d.shutdown()})),this.started=!0;case 28:case"end":return e.stop()}}),e,this,[[4,16,19,22]])})));return function(){return e.apply(this,arguments)}}()},{key:"writeSequenceNumber",value:function(e){this.setItem(this.ar,JSON.stringify(e))}},{key:"getAllActiveQueryTargets",value:function(){return this.pr(this.rr)}},{key:"isActiveQueryTarget",value:function(e){var t=!1;return this.rr.forEach((function(n,r){r.activeTargetIds.has(e)&&(t=!0)})),t}},{key:"addPendingMutation",value:function(e){this.Ir(e,"pending")}},{key:"updateMutationState",value:function(e,t,n){this.Ir(e,t,n),this.Tr(e)}},{key:"addLocalQueryTarget",value:function(e){var t="not-current";if(this.isActiveQueryTarget(e)){var n=this.storage.getItem(tp(this.persistenceKey,e));if(n){var r=rp.Zi(e,n);r&&(t=r.state)}}return this.Er.tr(e),this.mr(),t}},{key:"removeLocalQueryTarget",value:function(e){this.Er.er(e),this.mr()}},{key:"isLocalQueryTarget",value:function(e){return this.Er.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){this.removeItem(tp(this.persistenceKey,e))}},{key:"updateQueryState",value:function(e,t,n){this.Ar(e,t,n)}},{key:"handleUserChange",value:function(e,t,n){var r=this;t.forEach((function(e){r.Tr(e)})),this.currentUser=e,n.forEach((function(e){r.addPendingMutation(e)}))}},{key:"setOnlineState",value:function(e){this.Rr(e)}},{key:"notifyBundleLoaded",value:function(e){this.vr(e)}},{key:"shutdown",value:function(){this.started&&(this.window.removeEventListener("storage",this.sr),this.removeItem(this.cr),this.started=!1)}},{key:"getItem",value:function(e){var t=this.storage.getItem(e);return Au("SharedClientState","READ",e,t),t}},{key:"setItem",value:function(e,t){Au("SharedClientState","SET",e,t),this.storage.setItem(e,t)}},{key:"removeItem",value:function(e){Au("SharedClientState","REMOVE",e),this.storage.removeItem(e)}},{key:"ir",value:function(e){var t=this,n=e;if(n.storageArea===this.storage){if(Au("SharedClientState","EVENT",n.key,n.newValue),n.key===this.cr)return void Ru("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Ws.enqueueRetryable(h(l().mark((function e(){var r,i,a,o,u,s,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.started){e.next=43;break}if(null===n.key){e.next=41;break}if(!t.hr.test(n.key)){e.next=11;break}if(null!=n.newValue){e.next=6;break}return r=t.br(n.key),e.abrupt("return",t.Pr(r,null));case 6:if(!(i=t.Vr(n.key,n.newValue))){e.next=9;break}return e.abrupt("return",t.Pr(i.clientId,i));case 9:e.next=41;break;case 11:if(!t.lr.test(n.key)){e.next=18;break}if(null===n.newValue){e.next=16;break}if(!(a=t.Sr(n.key,n.newValue))){e.next=16;break}return e.abrupt("return",t.Dr(a));case 16:e.next=41;break;case 18:if(!t.dr.test(n.key)){e.next=25;break}if(null===n.newValue){e.next=23;break}if(!(o=t.Cr(n.key,n.newValue))){e.next=23;break}return e.abrupt("return",t.Nr(o));case 23:e.next=41;break;case 25:if(n.key!==t.wr){e.next=32;break}if(null===n.newValue){e.next=30;break}if(!(u=t.gr(n.newValue))){e.next=30;break}return e.abrupt("return",t.yr(u));case 30:e.next=41;break;case 32:if(n.key!==t.ar){e.next=37;break}s=function(e){var t=Rs.ct;if(null!=e)try{var n=JSON.parse(e);Mu("number"==typeof n),t=n}catch(e){Ru("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(n.newValue),s!==Rs.ct&&t.sequenceNumberHandler(s),e.next=41;break;case 37:if(n.key!==t._r){e.next=41;break}return c=t.kr(n.newValue),e.next=41,Promise.all(c.map((function(e){return t.syncEngine.Or(e)})));case 41:e.next=44;break;case 43:t.ur.push(n);case 44:case"end":return e.stop()}}),e)}))))}}},{key:"Er",get:function(){return this.rr.get(this.nr)}},{key:"mr",value:function(){this.setItem(this.cr,this.Er.Xi())}},{key:"Ir",value:function(e,t,n){var r=new np(this.currentUser,e,t,n),i=ep(this.persistenceKey,this.currentUser,e);this.setItem(i,r.Xi())}},{key:"Tr",value:function(e){var t=ep(this.persistenceKey,this.currentUser,e);this.removeItem(t)}},{key:"Rr",value:function(e){var t={clientId:this.nr,onlineState:e};this.storage.setItem(this.wr,JSON.stringify(t))}},{key:"Ar",value:function(e,t,n){var r=tp(this.persistenceKey,e),i=new rp(e,t,n);this.setItem(r,i.Xi())}},{key:"vr",value:function(e){var t=JSON.stringify(Array.from(e));this.setItem(this._r,t)}},{key:"br",value:function(e){var t=this.hr.exec(e);return t?t[1]:null}},{key:"Vr",value:function(e,t){var n=this.br(e);return ip.Zi(n,t)}},{key:"Sr",value:function(e,t){var n=this.lr.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return np.Zi(new Tu(i),r,t)}},{key:"Cr",value:function(e,t){var n=this.dr.exec(e),r=Number(n[1]);return rp.Zi(r,t)}},{key:"gr",value:function(e){return ap.Zi(e)}},{key:"kr",value:function(e){return JSON.parse(e)}},{key:"Dr",value:function(){var e=h(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.user.uid!==this.currentUser.uid){e.next=2;break}return e.abrupt("return",this.syncEngine.$r(t.batchId,t.state,t.error));case 2:Au("SharedClientState","Ignoring mutation for non-active user ".concat(t.user.uid));case 3:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Nr",value:function(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}},{key:"Pr",value:function(e,t){var n=this,r=t?this.rr.insert(e,t):this.rr.remove(e),i=this.pr(this.rr),a=this.pr(r),o=[],u=[];return a.forEach((function(e){i.has(e)||o.push(e)})),i.forEach((function(e){a.has(e)||u.push(e)})),this.syncEngine.Fr(o,u).then((function(){n.rr=r}))}},{key:"yr",value:function(e){this.rr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}},{key:"pr",value:function(e){var t=hf();return e.forEach((function(e,n){t=t.unionWith(n.activeTargetIds)})),t}}],[{key:"D",value:function(e){return!(!e||!e.localStorage)}}]),e}(),sp=function(){function e(){p(this,e),this.Br=new op,this.Lr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return m(e,[{key:"addPendingMutation",value:function(e){}},{key:"updateMutationState",value:function(e,t,n){}},{key:"addLocalQueryTarget",value:function(e){return this.Br.tr(e),this.Lr[e]||"not-current"}},{key:"updateQueryState",value:function(e,t,n){this.Lr[e]=t}},{key:"removeLocalQueryTarget",value:function(e){this.Br.er(e)}},{key:"isLocalQueryTarget",value:function(e){return this.Br.activeTargetIds.has(e)}},{key:"clearQueryState",value:function(e){delete this.Lr[e]}},{key:"getAllActiveQueryTargets",value:function(){return this.Br.activeTargetIds}},{key:"isActiveQueryTarget",value:function(e){return this.Br.activeTargetIds.has(e)}},{key:"start",value:function(){return this.Br=new op,Promise.resolve()}},{key:"handleUserChange",value:function(e,t,n){}},{key:"setOnlineState",value:function(e){}},{key:"shutdown",value:function(){}},{key:"writeSequenceNumber",value:function(e){}},{key:"notifyBundleLoaded",value:function(e){}}]),e}(),cp=function(){function e(){p(this,e)}return m(e,[{key:"qr",value:function(e){}},{key:"shutdown",value:function(){}}]),e}(),lp=function(){function e(){var t=this;p(this,e),this.Ur=function(){return t.Kr()},this.Gr=function(){return t.Qr()},this.zr=[],this.jr()}return m(e,[{key:"qr",value:function(e){this.zr.push(e)}},{key:"shutdown",value:function(){window.removeEventListener("online",this.Ur),window.removeEventListener("offline",this.Gr)}},{key:"jr",value:function(){window.addEventListener("online",this.Ur),window.addEventListener("offline",this.Gr)}},{key:"Kr",value:function(){Au("ConnectivityMonitor","Network connectivity changed: AVAILABLE");var e,t=g(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(0)}}catch(n){t.e(n)}finally{t.f()}}},{key:"Qr",value:function(){Au("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");var e,t=g(this.zr);try{for(t.s();!(e=t.n()).done;){(0,e.value)(1)}}catch(n){t.e(n)}finally{t.f()}}}],[{key:"D",value:function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}]),e}(),fp=null;function hp(){return null===fp?fp=268435456+Math.round(2147483648*Math.random()):fp++,"0x"+fp.toString(16)}var dp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"},vp=function(){function e(t){p(this,e),this.Wr=t.Wr,this.Hr=t.Hr}return m(e,[{key:"Jr",value:function(e){this.Yr=e}},{key:"Zr",value:function(e){this.Xr=e}},{key:"onMessage",value:function(e){this.eo=e}},{key:"close",value:function(){this.Hr()}},{key:"send",value:function(e){this.Wr(e)}},{key:"no",value:function(){this.Yr()}},{key:"so",value:function(e){this.Xr(e)}},{key:"io",value:function(e){this.eo(e)}}]),e}(),pp="WebChannelConnection",yp=function(e){w(n,e);var t=E(n);function n(e){var r;return p(this,n),(r=t.call(this,e)).forceLongPolling=e.forceLongPolling,r.autoDetectLongPolling=e.autoDetectLongPolling,r.useFetchStreams=e.useFetchStreams,r}return m(n,[{key:"lo",value:function(e,t,n,r){var i=hp();return new Promise((function(a,o){var u=new Su;u.setWithCredentials(!0),u.listenOnce(bu.COMPLETE,(function(){try{switch(u.getLastErrorCode()){case ku.NO_ERROR:var t=u.getResponseJson();Au(pp,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),a(t);break;case ku.TIMEOUT:Au(pp,"RPC '".concat(e,"' ").concat(i," timed out")),o(new Vu(Uu.DEADLINE_EXCEEDED,"Request time out"));break;case ku.HTTP_ERROR:var n=u.getStatus();if(Au(pp,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",u.getResponseText()),n>0){var r=u.getResponseJson();Array.isArray(r)&&(r=r[0]);var s=null==r?void 0:r.error;if(s&&s.status&&s.message){var c=function(e){var t=e.toLowerCase().replace(/_/g,"-");return Object.values(Uu).indexOf(t)>=0?t:Uu.UNKNOWN}(s.status);o(new Vu(c,s.message))}else o(new Vu(Uu.UNKNOWN,"Server responded with status "+u.getStatus()))}else o(new Vu(Uu.UNAVAILABLE,"Connection failed."));break;default:Lu()}}finally{Au(pp,"RPC '".concat(e,"' ").concat(i," completed."))}}));var s=JSON.stringify(r);Au(pp,"RPC '".concat(e,"' ").concat(i," sending request:"),r),u.send(t,"POST",s,n,15)}))}},{key:"wo",value:function(e,t,n){var r=hp(),i=[this.ro,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=mu(),o=gu(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(u.xmlHttpFactory=new xu({})),this.ho(u.initMessageHeaders,t,n),u.encodeInitMessageHeaders=!0;var s=i.join("");Au(pp,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(s),u);var c=a.createWebChannel(s,u),l=!1,f=!1,h=new vp({Wr:function(t){f?Au(pp,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(l||(Au(pp,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),c.open(),l=!0),Au(pp,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),c.send(t))},Hr:function(){return c.close()}}),d=function(e,t,n){e.listen(t,(function(e){try{n(e)}catch(e){setTimeout((function(){throw e}),0)}}))};return d(c,Eu.EventType.OPEN,(function(){f||Au(pp,"RPC '".concat(e,"' stream ").concat(r," transport opened."))})),d(c,Eu.EventType.CLOSE,(function(){f||(f=!0,Au(pp,"RPC '".concat(e,"' stream ").concat(r," transport closed")),h.so())})),d(c,Eu.EventType.ERROR,(function(t){f||(f=!0,Ou(pp,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),h.so(new Vu(Uu.UNAVAILABLE,"The operation could not be completed")))})),d(c,Eu.EventType.MESSAGE,(function(t){var n;if(!f){var i=t.data[0];Mu(!!i);var a=i,o=a.error||(null===(n=a[0])||void 0===n?void 0:n.error);if(o){Au(pp,"RPC '".concat(e,"' stream ").concat(r," received error:"),o);var u=o.status,s=function(e){var t=qf[e];if(void 0!==t)return Jf(t)}(u),l=o.message;void 0===s&&(s=Uu.INTERNAL,l="Unknown error status: "+u+" with message "+o.message),f=!0,h.so(new Vu(s,l)),c.close()}else Au(pp,"RPC '".concat(e,"' stream ").concat(r," received:"),i),h.io(i)}})),d(o,wu.STAT_EVENT,(function(t){t.stat===_u.PROXY?Au(pp,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===_u.NOPROXY&&Au(pp,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))})),setTimeout((function(){h.no()}),0),h}}]),n}(function(){function e(t){p(this,e),this.databaseInfo=t,this.databaseId=t.databaseId;var n=t.ssl?"https":"http";this.ro=n+"://"+t.host,this.oo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return m(e,[{key:"uo",get:function(){return!1}},{key:"co",value:function(e,t,n,r,i){var a=hp(),o=this.ao(e,t);Au("RestConnection","Sending RPC '".concat(e,"' ").concat(a,":"),o,n);var u={};return this.ho(u,r,i),this.lo(e,o,u,n).then((function(t){return Au("RestConnection","Received RPC '".concat(e,"' ").concat(a,": "),t),t}),(function(t){throw Ou("RestConnection","RPC '".concat(e,"' ").concat(a," failed with error: "),t,"url: ",o,"request:",n),t}))}},{key:"fo",value:function(e,t,n,r,i,a){return this.co(e,t,n,r,i)}},{key:"ho",value:function(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Cu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((function(t,n){return e[n]=t})),n&&n.headers.forEach((function(t,n){return e[n]=t}))}},{key:"ao",value:function(e,t){var n=dp[e];return"".concat(this.ro,"/v1/").concat(t,":").concat(n)}}]),e}());function mp(){return"undefined"!=typeof window?window:null}function gp(){return"undefined"!=typeof document?document:null}function kp(e){return new dh(e,!0)}var bp=function(){function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;p(this,e),this.Ws=t,this.timerId=n,this._o=r,this.mo=i,this.yo=a,this.po=0,this.Io=null,this.To=Date.now(),this.reset()}return m(e,[{key:"reset",value:function(){this.po=0}},{key:"Eo",value:function(){this.po=this.yo}},{key:"Ao",value:function(e){var t=this;this.cancel();var n=Math.floor(this.po+this.Ro()),r=Math.max(0,Date.now()-this.To),i=Math.max(0,n-r);i>0&&Au("ExponentialBackoff","Backing off for ".concat(i," ms (base delay: ").concat(this.po," ms, delay with jitter: ").concat(n," ms, last attempt: ").concat(r," ms ago)")),this.Io=this.Ws.enqueueAfterDelay(this.timerId,i,(function(){return t.To=Date.now(),e()})),this.po*=this.mo,this.po<this._o&&(this.po=this._o),this.po>this.yo&&(this.po=this.yo)}},{key:"vo",value:function(){null!==this.Io&&(this.Io.skipDelay(),this.Io=null)}},{key:"cancel",value:function(){null!==this.Io&&(this.Io.cancel(),this.Io=null)}},{key:"Ro",value:function(){return(Math.random()-.5)*this.po}}]),e}(),wp=function(){function e(t,n,r,i,a,o,u,s){p(this,e),this.Ws=t,this.bo=r,this.Po=i,this.connection=a,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=u,this.listener=s,this.state=0,this.Vo=0,this.So=null,this.Do=null,this.stream=null,this.Co=new bp(t,n)}return m(e,[{key:"xo",value:function(){return 1===this.state||5===this.state||this.No()}},{key:"No",value:function(){return 2===this.state||3===this.state}},{key:"start",value:function(){4!==this.state?this.auth():this.ko()}},{key:"stop",value:function(){var e=h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.xo(),!e.t0){e.next=4;break}return e.next=4,this.close(0);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Oo",value:function(){this.state=0,this.Co.reset()}},{key:"$o",value:function(){var e=this;this.No()&&null===this.So&&(this.So=this.Ws.enqueueAfterDelay(this.bo,6e4,(function(){return e.Mo()})))}},{key:"Fo",value:function(e){this.Bo(),this.stream.send(e)}},{key:"Mo",value:function(){var e=h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.No()){e.next=2;break}return e.abrupt("return",this.close(0));case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Bo",value:function(){this.So&&(this.So.cancel(),this.So=null)}},{key:"Lo",value:function(){this.Do&&(this.Do.cancel(),this.Do=null)}},{key:"close",value:function(){var e=h(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.Bo(),this.Lo(),this.Co.cancel(),this.Vo++,4!==t?this.Co.reset():n&&n.code===Uu.RESOURCE_EXHAUSTED?(Ru(n.toString()),Ru("Using maximum backoff delay to prevent overloading the backend."),this.Co.Eo()):n&&n.code===Uu.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.qo(),this.stream.close(),this.stream=null),this.state=t,e.next=9,this.listener.Zr(n);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"qo",value:function(){}},{key:"auth",value:function(){var e=this;this.state=1;var t=this.Uo(this.Vo),n=this.Vo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((function(t){var r=s(t,2),i=r[0],a=r[1];e.Vo===n&&e.Ko(i,a)}),(function(n){t((function(){var t=new Vu(Uu.UNKNOWN,"Fetching auth token failed: "+n.message);return e.Go(t)}))}))}},{key:"Ko",value:function(e,t){var n=this,r=this.Uo(this.Vo);this.stream=this.Qo(e,t),this.stream.Jr((function(){r((function(){return n.state=2,n.Do=n.Ws.enqueueAfterDelay(n.Po,1e4,(function(){return n.No()&&(n.state=3),Promise.resolve()})),n.listener.Jr()}))})),this.stream.Zr((function(e){r((function(){return n.Go(e)}))})),this.stream.onMessage((function(e){r((function(){return n.onMessage(e)}))}))}},{key:"ko",value:function(){var e=this;this.state=5,this.Co.Ao(h(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.state=0,e.start();case 1:case"end":return t.stop()}}),t)}))))}},{key:"Go",value:function(e){return Au("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}},{key:"Uo",value:function(e){var t=this;return function(n){t.Ws.enqueueAndForget((function(){return t.Vo===e?n():(Au("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}}}]),e}(),_p=function(e){w(n,e);var t=E(n);function n(e,r,i,a,o,u){var s;return p(this,n),(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s}return m(n,[{key:"Qo",value:function(e,t){return this.connection.wo("Listen",e,t)}},{key:"onMessage",value:function(e){this.Co.reset();var t=function(e,t){var n;if("targetChange"in t){t.targetChange;var r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Lu()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],a=function(e,t){return e.useProto3Json?(Mu(void 0===t||"string"==typeof t),_c.fromBase64String(t||"")):(Mu(void 0===t||t instanceof Uint8Array),_c.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,u=o&&function(e){var t=void 0===e.code?Uu.UNKNOWN:Jf(e.code);return new Vu(t,e.message||"")}(o);n=new ah(r,i,a,u||null)}else if("documentChange"in t){t.documentChange;var s=t.documentChange;s.document,s.document.name,s.document.updateTime;var c=wh(e,s.document.name),l=mh(s.document.updateTime),f=s.document.createTime?mh(s.document.createTime):ts.min(),h=new Zc({mapValue:{fields:s.document.fields}}),d=tl.newFoundDocument(c,l,f,h),v=s.targetIds||[],p=s.removedTargetIds||[];n=new rh(v,p,d.key,d)}else if("documentDelete"in t){t.documentDelete;var y=t.documentDelete;y.document;var m=wh(e,y.document),g=y.readTime?mh(y.readTime):ts.min(),k=tl.newNoDocument(m,g),b=y.removedTargetIds||[];n=new rh([],b,k.key,k)}else if("documentRemove"in t){t.documentRemove;var w=t.documentRemove;w.document;var _=wh(e,w.document),x=w.removedTargetIds||[];n=new rh([],x,_,null)}else{if(!("filter"in t))return Lu();t.filter;var E=t.filter;E.targetId;var S=E.count||0,I=new $f(S),T=E.targetId;n=new ih(T,I)}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return ts.min();var t=e.targetChange;return t.targetIds&&t.targetIds.length?ts.min():t.readTime?mh(t.readTime):ts.min()}(e);return this.listener.zo(t,n)}},{key:"jo",value:function(e){var t={};t.database=Eh(this.serializer),t.addTarget=function(e,t){var n,r=t.target;return(n=Nl(r)?{documents:Ah(e,r)}:{query:Rh(e,r)}).targetId=t.targetId,t.resumeToken.approximateByteSize()>0?n.resumeToken=ph(e,t.resumeToken):t.snapshotVersion.compareTo(ts.min())>0&&(n.readTime=vh(e,t.snapshotVersion.toTimestamp())),n}(this.serializer,e);var n=function(e,t){var n=function(e,t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Lu()}}(0,t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.Fo(t)}},{key:"Wo",value:function(e){var t={};t.database=Eh(this.serializer),t.removeTarget=e,this.Fo(t)}}]),n}(wp),xp=function(e){w(n,e);var t=E(n);function n(e,r,i,a,o,u){var s;return p(this,n),(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",r,i,a,u)).serializer=o,s.Ho=!1,s}return m(n,[{key:"Jo",get:function(){return this.Ho}},{key:"start",value:function(){this.Ho=!1,this.lastStreamToken=void 0,br(_(n.prototype),"start",this).call(this)}},{key:"qo",value:function(){this.Ho&&this.Yo([])}},{key:"Qo",value:function(e,t){return this.connection.wo("Write",e,t)}},{key:"onMessage",value:function(e){if(Mu(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Ho){this.Co.reset();var t=function(e,t){return e&&e.length>0?(Mu(void 0!==t),e.map((function(e){return function(e,t){var n=e.updateTime?mh(e.updateTime):mh(t);return n.isEqual(ts.min())&&(n=mh(t)),new Df(n,e.transformResults||[])}(e,t)}))):[]}(e.writeResults,e.commitTime),n=mh(e.commitTime);return this.listener.Zo(n,t)}return Mu(!e.writeResults||0===e.writeResults.length),this.Ho=!0,this.listener.Xo()}},{key:"tu",value:function(){var e={};e.database=Eh(this.serializer),this.Fo(e)}},{key:"Yo",value:function(e){var t=this,n={streamToken:this.lastStreamToken,writes:e.map((function(e){return Dh(t.serializer,e)}))};this.Fo(n)}}]),n}(wp),Ep=function(e){w(n,e);var t=E(n);function n(e,r,i,a){var o;return p(this,n),(o=t.call(this)).authCredentials=e,o.appCheckCredentials=r,o.connection=i,o.serializer=a,o.eu=!1,o}return m(n,[{key:"nu",value:function(){if(this.eu)throw new Vu(Uu.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"co",value:function(e,t,n){var r=this;return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(i){var a=s(i,2),o=a[0],u=a[1];return r.connection.co(e,t,n,o,u)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Uu.UNAUTHENTICATED&&(r.authCredentials.invalidateToken(),r.appCheckCredentials.invalidateToken()),e):new Vu(Uu.UNKNOWN,e.toString())}))}},{key:"fo",value:function(e,t,n,r){var i=this;return this.nu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((function(a){var o=s(a,2),u=o[0],c=o[1];return i.connection.fo(e,t,n,u,c,r)})).catch((function(e){throw"FirebaseError"===e.name?(e.code===Uu.UNAUTHENTICATED&&(i.authCredentials.invalidateToken(),i.appCheckCredentials.invalidateToken()),e):new Vu(Uu.UNKNOWN,e.toString())}))}},{key:"terminate",value:function(){this.eu=!0}}]),n}(function(){return m((function e(){p(this,e)}))}());var Sp=function(){function e(t,n){p(this,e),this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.su=0,this.iu=null,this.ru=!0}return m(e,[{key:"ou",value:function(){var e=this;0===this.su&&(this.uu("Unknown"),this.iu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return e.iu=null,e.cu("Backend didn't respond within 10 seconds."),e.uu("Offline"),Promise.resolve()})))}},{key:"au",value:function(e){"Online"===this.state?this.uu("Unknown"):(this.su++,this.su>=1&&(this.hu(),this.cu("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.uu("Offline")))}},{key:"set",value:function(e){this.hu(),this.su=0,"Online"===e&&(this.ru=!1),this.uu(e)}},{key:"uu",value:function(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}},{key:"cu",value:function(e){var t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.ru?(Ru(t),this.ru=!1):Au("OnlineStateTracker",t)}},{key:"hu",value:function(){null!==this.iu&&(this.iu.cancel(),this.iu=null)}}]),e}(),Ip=m((function e(t,n,r,i,a){var o=this;p(this,e),this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.lu=[],this.fu=new Map,this.du=new Set,this.wu=[],this._u=a,this._u.qr((function(e){r.enqueueAndForget(h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=Fp(o),!e.t0){e.next=5;break}return Au("RemoteStore","Restarting streams for network reachability change."),e.next=5,function(){var e=h(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Fu(t)).du.add(4),e.next=4,Dp(n);case 4:return n.mu.set("Unknown"),n.du.delete(4),e.next=8,Tp(n);case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(o);case 5:case"end":return e.stop()}}),e)}))))})),this.mu=new Sp(r,i)}));function Tp(e){return Cp.apply(this,arguments)}function Cp(){return Cp=h(l().mark((function e(t){var n,r,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Fp(t)){e.next=18;break}n=g(t.wu),e.prev=2,n.s();case 4:if((r=n.n()).done){e.next=10;break}return i=r.value,e.next=8,i(!0);case 8:e.next=4;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(2),n.e(e.t0);case 15:return e.prev=15,n.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[2,12,15,18]])}))),Cp.apply(this,arguments)}function Dp(e){return Np.apply(this,arguments)}function Np(){return Np=h(l().mark((function e(t){var n,r,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=g(t.wu),e.prev=1,n.s();case 3:if((r=n.n()).done){e.next=9;break}return i=r.value,e.next=7,i(!1);case 7:e.next=3;break;case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),n.e(e.t0);case 14:return e.prev=14,n.f(),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[1,11,14,17]])}))),Np.apply(this,arguments)}function Ap(e,t){var n=Fu(e);n.fu.has(t.targetId)||(n.fu.set(t.targetId,t),Mp(n)?Lp(n):hy(n).No()&&Op(n,t))}function Rp(e,t){var n=Fu(e),r=hy(n);n.fu.delete(t),r.No()&&Pp(n,t),0===n.fu.size&&(r.No()?r.$o():Fp(n)&&n.mu.set("Unknown"))}function Op(e,t){e.gu.Ot(t.targetId),hy(e).jo(t)}function Pp(e,t){e.gu.Ot(t),hy(e).Wo(t)}function Lp(e){e.gu=new uh({getRemoteKeysForTarget:function(t){return e.remoteSyncer.getRemoteKeysForTarget(t)},ne:function(t){return e.fu.get(t)||null}}),hy(e).start(),e.mu.ou()}function Mp(e){return Fp(e)&&!hy(e).xo()&&e.fu.size>0}function Fp(e){return 0===Fu(e).du.size}function Up(e){e.gu=void 0}function Vp(e){return Bp.apply(this,arguments)}function Bp(){return Bp=h(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.fu.forEach((function(e,n){Op(t,e)}));case 1:case"end":return e.stop()}}),e)}))),Bp.apply(this,arguments)}function zp(e,t){return jp.apply(this,arguments)}function jp(){return jp=h(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Up(t),Mp(t)?(t.mu.au(n),Lp(t)):t.mu.set("Unknown");case 1:case"end":return e.stop()}}),e)}))),jp.apply(this,arguments)}function qp(e,t,n){return Kp.apply(this,arguments)}function Kp(){return Kp=h(l().mark((function e(t,n,r){var i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.mu.set("Online"),!(n instanceof ah&&2===n.state&&n.cause)){e.next=13;break}return e.prev=1,e.next=4,function(){var e=h(l().mark((function e(t,n){var r,i,a,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=n.cause,i=g(n.targetIds),e.prev=2,i.s();case 4:if((a=i.n()).done){e.next=14;break}if(o=a.value,e.t0=t.fu.has(o),!e.t0){e.next=12;break}return e.next=10,t.remoteSyncer.rejectListen(o,r);case 10:t.fu.delete(o),t.gu.removeTarget(o);case 12:e.next=4;break;case 14:e.next=19;break;case 16:e.prev=16,e.t1=e.catch(2),i.e(e.t1);case 19:return e.prev=19,i.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,null,[[2,16,19,22]])})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:e.next=11;break;case 6:return e.prev=6,e.t0=e.catch(1),Au("RemoteStore","Failed to remove targets %s: %s ",n.targetIds.join(","),e.t0),e.next=11,Gp(t,e.t0);case 11:case 22:e.next=29;break;case 13:if(n instanceof rh?t.gu.Kt(n):n instanceof ih?t.gu.Jt(n):t.gu.zt(n),r.isEqual(ts.min())){e.next=29;break}return e.prev=14,e.next=17,Uv(t.localStore);case 17:if(i=e.sent,e.t1=r.compareTo(i)>=0,!e.t1){e.next=22;break}return e.next=22,function(e,t){var n=e.gu.Xt(t);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=e.fu.get(r);i&&e.fu.set(r,i.withResumeToken(n.resumeToken,t))}})),n.targetMismatches.forEach((function(t){var n=e.fu.get(t);if(n){e.fu.set(t,n.withResumeToken(_c.EMPTY_BYTE_STRING,n.snapshotVersion)),Pp(e,t);var r=new qh(n.target,t,1,n.sequenceNumber);Op(e,r)}})),e.remoteSyncer.applyRemoteEvent(n)}(t,r);case 24:return e.prev=24,e.t2=e.catch(14),Au("RemoteStore","Failed to raise snapshot:",e.t2),e.next=29,Gp(t,e.t2);case 29:case"end":return e.stop()}}),e,null,[[1,6],[14,24]])}))),Kp.apply(this,arguments)}function Gp(e,t,n){return Hp.apply(this,arguments)}function Hp(){return Hp=h(l().mark((function e(t,n,r){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Ss(n)){e.next=2;break}throw n;case 2:return t.du.add(1),e.next=5,Dp(t);case 5:t.mu.set("Offline"),r||(r=function(){return Uv(t.localStore)}),t.asyncQueue.enqueueRetryable(h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Au("RemoteStore","Retrying IndexedDB access"),e.next=3,r();case 3:return t.du.delete(1),e.next=6,Tp(t);case 6:case"end":return e.stop()}}),e)}))));case 8:case"end":return e.stop()}}),e)}))),Hp.apply(this,arguments)}function Wp(e,t){return t().catch((function(n){return Gp(e,n,t)}))}function Qp(e){return Yp.apply(this,arguments)}function Yp(){return Yp=h(l().mark((function e(t){var n,r,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=Fu(t),r=dy(n),i=n.lu.length>0?n.lu[n.lu.length-1].batchId:-1;case 2:if(!$p(n)){e.next=19;break}return e.prev=3,e.next=6,zv(n.localStore,i);case 6:if(null!==(a=e.sent)){e.next=10;break}return 0===n.lu.length&&r.$o(),e.abrupt("break",19);case 10:i=a.batchId,Xp(n,a),e.next=17;break;case 13:return e.prev=13,e.t0=e.catch(3),e.next=17,Gp(n,e.t0);case 17:e.next=2;break;case 19:Jp(n)&&Zp(n);case 20:case"end":return e.stop()}}),e,null,[[3,13]])}))),Yp.apply(this,arguments)}function $p(e){return Fp(e)&&e.lu.length<10}function Xp(e,t){e.lu.push(t);var n=dy(e);n.No()&&n.Jo&&n.Yo(t.mutations)}function Jp(e){return Fp(e)&&!dy(e).xo()&&e.lu.length>0}function Zp(e){dy(e).start()}function ey(e){return ty.apply(this,arguments)}function ty(){return ty=h(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:dy(t).tu();case 1:case"end":return e.stop()}}),e)}))),ty.apply(this,arguments)}function ny(e){return ry.apply(this,arguments)}function ry(){return ry=h(l().mark((function e(t){var n,r,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=dy(t),r=g(t.lu);try{for(r.s();!(i=r.n()).done;)a=i.value,n.Yo(a.mutations)}catch(o){r.e(o)}finally{r.f()}case 3:case"end":return e.stop()}}),e)}))),ry.apply(this,arguments)}function iy(e,t,n){return ay.apply(this,arguments)}function ay(){return ay=h(l().mark((function e(t,n,r){var i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=t.lu.shift(),a=Qf.from(i,n,r),e.next=3,Wp(t,(function(){return t.remoteSyncer.applySuccessfulWrite(a)}));case 3:return e.next=5,Qp(t);case 5:case"end":return e.stop()}}),e)}))),ay.apply(this,arguments)}function oy(e,t){return uy.apply(this,arguments)}function uy(){return uy=h(l().mark((function e(t,n){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=n&&dy(t).Jo,!e.t0){e.next=4;break}return e.next=4,function(){var e=h(l().mark((function e(t,n){var r,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Xf(i=n.code)||i===Uu.ABORTED){e.next=7;break}return r=t.lu.shift(),dy(t).Oo(),e.next=5,Wp(t,(function(){return t.remoteSyncer.rejectFailedWrite(r.batchId,n)}));case 5:return e.next=7,Qp(t);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(t,n);case 4:Jp(t)&&Zp(t);case 5:case"end":return e.stop()}}),e)}))),uy.apply(this,arguments)}function sy(e,t){return cy.apply(this,arguments)}function cy(){return cy=h(l().mark((function e(t,n){var r,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=Fu(t)).asyncQueue.verifyOperationInProgress(),Au("RemoteStore","RemoteStore received new credentials"),i=Fp(r),r.du.add(3),e.next=6,Dp(r);case 6:return i&&r.mu.set("Unknown"),e.next=9,r.remoteSyncer.handleCredentialChange(n);case 9:return r.du.delete(3),e.next=12,Tp(r);case 12:case"end":return e.stop()}}),e)}))),cy.apply(this,arguments)}function ly(e,t){return fy.apply(this,arguments)}function fy(){return fy=h(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Fu(t),!n){e.next=7;break}return r.du.delete(2),e.next=5,Tp(r);case 5:e.next=13;break;case 7:if(e.t0=n,e.t0){e.next=13;break}return r.du.add(2),e.next=12,Dp(r);case 12:r.mu.set("Unknown");case 13:case"end":return e.stop()}}),e)}))),fy.apply(this,arguments)}function hy(e){return e.yu||(e.yu=function(e,t,n){var r=Fu(e);return r.nu(),new _p(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Jr:Vp.bind(null,e),Zr:zp.bind(null,e),zo:qp.bind(null,e)}),e.wu.push(function(){var t=h(l().mark((function t(n){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=4;break}e.yu.Oo(),Mp(e)?Lp(e):e.mu.set("Unknown"),t.next=7;break;case 4:return t.next=6,e.yu.stop();case 6:Up(e);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.yu}function dy(e){return e.pu||(e.pu=function(e,t,n){var r=Fu(e);return r.nu(),new xp(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Jr:ey.bind(null,e),Zr:oy.bind(null,e),Xo:ny.bind(null,e),Zo:iy.bind(null,e)}),e.wu.push(function(){var t=h(l().mark((function t(n){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=6;break}return e.pu.Oo(),t.next=4,Qp(e);case 4:t.next=9;break;case 6:return t.next=8,e.pu.stop();case 8:e.lu.length>0&&(Au("RemoteStore","Stopping write stream with ".concat(e.lu.length," pending writes")),e.lu=[]);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())),e.pu}var vy=function(){function e(t,n,r,i,a){p(this,e),this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Bu,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(e){}))}return m(e,[{key:"start",value:function(e){var t=this;this.timerHandle=setTimeout((function(){return t.handleDelayElapsed()}),e)}},{key:"skipDelay",value:function(){return this.handleDelayElapsed()}},{key:"cancel",value:function(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Vu(Uu.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}},{key:"handleDelayElapsed",value:function(){var e=this;this.asyncQueue.enqueueAndForget((function(){return null!==e.timerHandle?(e.clearTimeout(),e.op().then((function(t){return e.deferred.resolve(t)}))):Promise.resolve()}))}},{key:"clearTimeout",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}))}],[{key:"createAndSchedule",value:function(t,n,r,i,a){var o=new e(t,n,Date.now()+r,i,a);return o.start(r),o}}]),e}();function py(e,t){if(Ru("AsyncQueue","".concat(t,": ").concat(e)),Ss(e))return new Vu(Uu.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}var yy=function(){function e(t){p(this,e),this.comparator=t?function(e,n){return t(e,n)||os.comparator(e.key,n.key)}:function(e,t){return os.comparator(e.key,t.key)},this.keyedMap=nf(),this.sortedSet=new vc(this.comparator)}return m(e,[{key:"has",value:function(e){return null!=this.keyedMap.get(e)}},{key:"get",value:function(e){return this.keyedMap.get(e)}},{key:"first",value:function(){return this.sortedSet.minKey()}},{key:"last",value:function(){return this.sortedSet.maxKey()}},{key:"isEmpty",value:function(){return this.sortedSet.isEmpty()}},{key:"indexOf",value:function(e){var t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}},{key:"size",get:function(){return this.sortedSet.size}},{key:"forEach",value:function(e){this.sortedSet.inorderTraversal((function(t,n){return e(t),!1}))}},{key:"add",value:function(e){var t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}},{key:"delete",value:function(e){var t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}},{key:"isEqual",value:function(t){if(!(t instanceof e))return!1;if(this.size!==t.size)return!1;for(var n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}},{key:"toString",value:function(){var e=[];return this.forEach((function(t){e.push(t.toString())})),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}},{key:"copy",value:function(t,n){var r=new e;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}],[{key:"emptySet",value:function(t){return new e(t.comparator)}}]),e}(),my=function(){function e(){p(this,e),this.Iu=new vc(os.comparator)}return m(e,[{key:"track",value:function(e){var t=e.doc.key,n=this.Iu.get(t);n?0!==e.type&&3===n.type?this.Iu=this.Iu.insert(t,e):3===e.type&&1!==n.type?this.Iu=this.Iu.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.Iu=this.Iu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.Iu=this.Iu.remove(t):1===e.type&&2===n.type?this.Iu=this.Iu.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.Iu=this.Iu.insert(t,{type:2,doc:e.doc}):Lu():this.Iu=this.Iu.insert(t,e)}},{key:"Tu",value:function(){var e=[];return this.Iu.inorderTraversal((function(t,n){e.push(n)})),e}}]),e}(),gy=function(){function e(t,n,r,i,a,o,u,s,c){p(this,e),this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=o,this.syncStateChanged=u,this.excludesMetadataChanges=s,this.hasCachedResults=c}return m(e,[{key:"hasPendingWrites",get:function(){return!this.mutatedKeys.isEmpty()}},{key:"isEqual",value:function(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Gl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;var t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(var r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}],[{key:"fromInitialDocuments",value:function(t,n,r,i,a){var o=[];return n.forEach((function(e){o.push({type:0,doc:e})})),new e(t,n,yy.emptySet(n),o,r,i,!0,!1,a)}}]),e}(),ky=m((function e(){p(this,e),this.Eu=void 0,this.listeners=[]})),by=m((function e(){p(this,e),this.queries=new Jl((function(e){return Hl(e)}),Gl),this.onlineState="Unknown",this.Au=new Set}));function wy(e,t){return _y.apply(this,arguments)}function _y(){return _y=h(l().mark((function e(t,n){var r,i,a,o,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Fu(t),i=n.query,a=!1,(o=r.queries.get(i))||(a=!0,o=new ky),!a){e.next=13;break}return e.prev=3,e.next=6,r.onListen(i);case 6:o.Eu=e.sent,e.next=13;break;case 9:return e.prev=9,e.t0=e.catch(3),u=py(e.t0,"Initialization of query '".concat(Wl(n.query),"' failed")),e.abrupt("return",void n.onError(u));case 13:r.queries.set(i,o),o.listeners.push(n),n.Ru(r.onlineState),o.Eu&&n.vu(o.Eu)&&Ty(r);case 14:case"end":return e.stop()}}),e,null,[[3,9]])}))),_y.apply(this,arguments)}function xy(e,t){return Ey.apply(this,arguments)}function Ey(){return Ey=h(l().mark((function e(t,n){var r,i,a,o,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Fu(t),i=n.query,a=!1,(o=r.queries.get(i))&&(u=o.listeners.indexOf(n))>=0&&(o.listeners.splice(u,1),a=0===o.listeners.length),!a){e.next=6;break}return e.abrupt("return",(r.queries.delete(i),r.onUnlisten(i)));case 6:case"end":return e.stop()}}),e)}))),Ey.apply(this,arguments)}function Sy(e,t){var n,r=Fu(e),i=!1,a=g(t);try{for(a.s();!(n=a.n()).done;){var o=n.value,u=o.query,s=r.queries.get(u);if(s){var c,l=g(s.listeners);try{for(l.s();!(c=l.n()).done;){c.value.vu(o)&&(i=!0)}}catch(f){l.e(f)}finally{l.f()}s.Eu=o}}}catch(f){a.e(f)}finally{a.f()}i&&Ty(r)}function Iy(e,t,n){var r=Fu(e),i=r.queries.get(t);if(i){var a,o=g(i.listeners);try{for(o.s();!(a=o.n()).done;){a.value.onError(n)}}catch(u){o.e(u)}finally{o.f()}}r.queries.delete(t)}function Ty(e){e.Au.forEach((function(e){e.next()}))}var Cy=function(){function e(t,n,r){p(this,e),this.query=t,this.bu=n,this.Pu=!1,this.Vu=null,this.onlineState="Unknown",this.options=r||{}}return m(e,[{key:"vu",value:function(e){if(!this.options.includeMetadataChanges){var t,n=[],r=g(e.docChanges);try{for(r.s();!(t=r.n()).done;){var i=t.value;3!==i.type&&n.push(i)}}catch(o){r.e(o)}finally{r.f()}e=new gy(e.query,e.docs,e.oldDocs,n,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}var a=!1;return this.Pu?this.Su(e)&&(this.bu.next(e),a=!0):this.Du(e,this.onlineState)&&(this.Cu(e),a=!0),this.Vu=e,a}},{key:"onError",value:function(e){this.bu.error(e)}},{key:"Ru",value:function(e){this.onlineState=e;var t=!1;return this.Vu&&!this.Pu&&this.Du(this.Vu,e)&&(this.Cu(this.Vu),t=!0),t}},{key:"Du",value:function(e,t){if(!e.fromCache)return!0;var n="Offline"!==t;return(!this.options.xu||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}},{key:"Su",value:function(e){if(e.docChanges.length>0)return!0;var t=this.Vu&&this.Vu.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}},{key:"Cu",value:function(e){e=gy.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Pu=!0,this.bu.next(e)}}]),e}(),Dy=function(){function e(t,n){p(this,e),this.Nu=t,this.byteLength=n}return m(e,[{key:"ku",value:function(){return"metadata"in this.Nu}}]),e}(),Ny=function(){function e(t){p(this,e),this.serializer=t}return m(e,[{key:"Hi",value:function(e){return wh(this.serializer,e)}},{key:"Ji",value:function(e){return e.metadata.exists?Th(this.serializer,e.document,!1):tl.newNoDocument(this.Hi(e.metadata.name),this.Yi(e.metadata.readTime))}},{key:"Yi",value:function(e){return mh(e)}}]),e}(),Ay=function(){function e(t,n,r){p(this,e),this.Ou=t,this.localStore=n,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Ry(t)}return m(e,[{key:"$u",value:function(e){this.progress.bytesLoaded+=e.byteLength;var t=this.progress.documentsLoaded;if(e.Nu.namedQuery)this.queries.push(e.Nu.namedQuery);else if(e.Nu.documentMetadata){this.documents.push({metadata:e.Nu.documentMetadata}),e.Nu.documentMetadata.exists||++t;var n=rs.fromString(e.Nu.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.Nu.document&&(this.documents[this.documents.length-1].document=e.Nu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}},{key:"Mu",value:function(e){var t,n=new Map,r=new Ny(this.serializer),i=g(e);try{for(i.s();!(t=i.n()).done;){var a=t.value;if(a.metadata.queries){var o,u=r.Hi(a.metadata.name),s=g(a.metadata.queries);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=(n.get(c)||lf()).add(u);n.set(c,l)}}catch(f){s.e(f)}finally{s.f()}}}}catch(f){i.e(f)}finally{i.f()}return n}},{key:"complete",value:function(){var e=h(l().mark((function e(){var t,n,r,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Yv(this.localStore,new Ny(this.serializer),this.documents,this.Ou.id);case 2:t=e.sent,n=this.Mu(this.documents),r=g(this.queries),e.prev=5,r.s();case 7:if((i=r.n()).done){e.next=13;break}return a=i.value,e.next=11,Xv(this.localStore,a,n.get(a.name));case 11:e.next=7;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),r.e(e.t0);case 18:return e.prev=18,r.f(),e.finish(18);case 21:return e.abrupt("return",(this.progress.taskState="Success",{progress:this.progress,Fu:this.collectionGroups,Bu:t}));case 22:case"end":return e.stop()}}),e,this,[[5,15,18,21]])})));return function(){return e.apply(this,arguments)}}()}]),e}();function Ry(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}var Oy=m((function e(t){p(this,e),this.key=t})),Py=m((function e(t){p(this,e),this.key=t})),Ly=function(){function e(t,n){p(this,e),this.query=t,this.Lu=n,this.qu=null,this.hasCachedResults=!1,this.current=!1,this.Uu=lf(),this.mutatedKeys=lf(),this.Ku=$l(t),this.Gu=new yy(this.Ku)}return m(e,[{key:"Qu",get:function(){return this.Lu}},{key:"zu",value:function(e,t){var n=this,r=t?t.ju:new my,i=t?t.Gu:this.Gu,a=t?t.mutatedKeys:this.mutatedKeys,o=i,u=!1,s="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,c="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((function(e,t){var l=i.get(e),f=Ql(n.query,t)?t:null,h=!!l&&n.mutatedKeys.has(l.key),d=!!f&&(f.hasLocalMutations||n.mutatedKeys.has(f.key)&&f.hasCommittedMutations),v=!1;l&&f?l.data.isEqual(f.data)?h!==d&&(r.track({type:3,doc:f}),v=!0):n.Wu(l,f)||(r.track({type:2,doc:f}),v=!0,(s&&n.Ku(f,s)>0||c&&n.Ku(f,c)<0)&&(u=!0)):!l&&f?(r.track({type:0,doc:f}),v=!0):l&&!f&&(r.track({type:1,doc:l}),v=!0,(s||c)&&(u=!0)),v&&(f?(o=o.add(f),a=d?a.add(e):a.delete(e)):(o=o.delete(e),a=a.delete(e)))})),null!==this.query.limit)for(;o.size>this.query.limit;){var l="F"===this.query.limitType?o.last():o.first();o=o.delete(l.key),a=a.delete(l.key),r.track({type:1,doc:l})}return{Gu:o,ju:r,Mi:u,mutatedKeys:a}}},{key:"Wu",value:function(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}},{key:"applyChanges",value:function(e,t,n){var r=this,i=this.Gu;this.Gu=e.Gu,this.mutatedKeys=e.mutatedKeys;var a=e.ju.Tu();a.sort((function(e,t){return function(e,t){var n=function(e){switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Lu()}};return n(e)-n(t)}(e.type,t.type)||r.Ku(e.doc,t.doc)})),this.Hu(n);var o=t?this.Ju():[],u=0===this.Uu.size&&this.current?1:0,s=u!==this.qu;return this.qu=u,0!==a.length||s?{snapshot:new gy(this.query,e.Gu,i,a,e.mutatedKeys,0===u,s,!1,!!n&&n.resumeToken.approximateByteSize()>0),Yu:o}:{Yu:o}}},{key:"Ru",value:function(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Gu:this.Gu,ju:new my,mutatedKeys:this.mutatedKeys,Mi:!1},!1)):{Yu:[]}}},{key:"Zu",value:function(e){return!this.Lu.has(e)&&!!this.Gu.has(e)&&!this.Gu.get(e).hasLocalMutations}},{key:"Hu",value:function(e){var t=this;e&&(e.addedDocuments.forEach((function(e){return t.Lu=t.Lu.add(e)})),e.modifiedDocuments.forEach((function(e){})),e.removedDocuments.forEach((function(e){return t.Lu=t.Lu.delete(e)})),this.current=e.current)}},{key:"Ju",value:function(){var e=this;if(!this.current)return[];var t=this.Uu;this.Uu=lf(),this.Gu.forEach((function(t){e.Zu(t.key)&&(e.Uu=e.Uu.add(t.key))}));var n=[];return t.forEach((function(t){e.Uu.has(t)||n.push(new Py(t))})),this.Uu.forEach((function(e){t.has(e)||n.push(new Oy(e))})),n}},{key:"Xu",value:function(e){this.Lu=e.Wi,this.Uu=lf();var t=this.zu(e.documents);return this.applyChanges(t,!0)}},{key:"tc",value:function(){return gy.fromInitialDocuments(this.query,this.Gu,this.mutatedKeys,0===this.qu,this.hasCachedResults)}}]),e}(),My=m((function e(t,n,r){p(this,e),this.query=t,this.targetId=n,this.view=r})),Fy=m((function e(t){p(this,e),this.key=t,this.ec=!1})),Uy=function(){function e(t,n,r,i,a,o){p(this,e),this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=o,this.nc={},this.sc=new Jl((function(e){return Hl(e)}),Gl),this.ic=new Map,this.rc=new Set,this.oc=new vc(os.comparator),this.uc=new Map,this.cc=new pv,this.ac={},this.hc=new Map,this.lc=Gd.bn(),this.onlineState="Unknown",this.fc=void 0}return m(e,[{key:"isPrimaryClient",get:function(){return!0===this.fc}}]),e}();function Vy(e,t){return By.apply(this,arguments)}function By(){return By=h(l().mark((function e(t,n){var r,i,a,o,u,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Rm(t),!(o=r.sc.get(n))){e.next=6;break}i=o.targetId,r.sharedClientState.addLocalQueryTarget(i),a=o.view.tc(),e.next=15;break;case 6:return e.next=8,jv(r.localStore,jl(n));case 8:return u=e.sent,r.isPrimaryClient&&Ap(r.remoteStore,u),s=r.sharedClientState.addLocalQueryTarget(u.targetId),i=u.targetId,e.next=14,zy(r,n,i,"current"===s,u.resumeToken);case 14:a=e.sent;case 15:return e.abrupt("return",a);case 16:case"end":return e.stop()}}),e)}))),By.apply(this,arguments)}function zy(e,t,n,r,i){return jy.apply(this,arguments)}function jy(){return jy=h(l().mark((function e(t,n,r,i,a){var o,u,s,c,f,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.dc=function(e,n,r){return function(){var e=h(l().mark((function e(t,n,r,i){var a,o,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=n.view.zu(r),e.t0=a.Mi,!e.t0){e.next=6;break}return e.next=5,Gv(t.localStore,n.query,!1).then((function(e){var t=e.documents;return n.view.zu(t,a)}));case 5:a=e.sent;case 6:return o=i&&i.targetChanges.get(n.targetId),u=n.view.applyChanges(a,t.isPrimaryClient,o),e.abrupt("return",(sm(t,n.targetId,u.Yu),u.snapshot));case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i){return e.apply(this,arguments)}}()(t,e,n,r)},e.next=3,Gv(t.localStore,n,!0);case 3:return o=e.sent,u=new Ly(n,o.Wi),s=u.zu(o.documents),c=nh.createSynthesizedTargetChangeForCurrentChange(r,i&&"Offline"!==t.onlineState,a),f=u.applyChanges(s,t.isPrimaryClient,c),sm(t,r,f.Yu),d=new My(n,r,u),e.abrupt("return",(t.sc.set(n,d),t.ic.has(r)?t.ic.get(r).push(n):t.ic.set(r,[n]),f.snapshot));case 11:case"end":return e.stop()}}),e)}))),jy.apply(this,arguments)}function qy(e,t){return Ky.apply(this,arguments)}function Ky(){return Ky=h(l().mark((function e(t,n){var r,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=Fu(t),i=r.sc.get(n),!((a=r.ic.get(i.targetId)).length>1)){e.next=3;break}return e.abrupt("return",(r.ic.set(i.targetId,a.filter((function(e){return!Gl(e,n)}))),void r.sc.delete(n)));case 3:if(!r.isPrimaryClient){e.next=11;break}if(r.sharedClientState.removeLocalQueryTarget(i.targetId),e.t0=r.sharedClientState.isActiveQueryTarget(i.targetId),e.t0){e.next=9;break}return e.next=9,qv(r.localStore,i.targetId,!1).then((function(){r.sharedClientState.clearQueryState(i.targetId),Rp(r.remoteStore,i.targetId),om(r,i.targetId)})).catch(gs);case 9:e.next=14;break;case 11:return om(r,i.targetId),e.next=14,qv(r.localStore,i.targetId,!0);case 14:case"end":return e.stop()}}),e)}))),Ky.apply(this,arguments)}function Gy(e,t,n){return Hy.apply(this,arguments)}function Hy(){return Hy=h(l().mark((function e(t,n,r){var i,a,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Om(t),e.prev=1,e.next=4,function(e,t){var n,r,i=Fu(e),a=es.now(),o=t.reduce((function(e,t){return e.add(t.key)}),lf());return i.persistence.runTransaction("Locally write mutations","readwrite",(function(e){var u=ef(),s=lf();return i.Ki.getEntries(e,o).next((function(e){(u=e).forEach((function(e,t){t.isValidDocument()||(s=s.add(e))}))})).next((function(){return i.localDocuments.getOverlayedDocuments(e,u)})).next((function(r){n=r;var o,u=[],s=g(t);try{for(s.s();!(o=s.n()).done;){var c=o.value,l=Mf(c,n.get(c.key).overlayedDocument);null!=l&&u.push(new Vf(c.key,l,el(l.value.mapValue),Nf.exists(!0)))}}catch(f){s.e(f)}finally{s.f()}return i.mutationQueue.addMutationBatch(e,a,u,t)})).next((function(t){r=t;var a=t.applyToLocalDocumentSet(n,s);return i.documentOverlayCache.saveOverlays(e,t.batchId,a)}))})).then((function(){return{batchId:r.batchId,changes:rf(n)}}))}(i.localStore,n);case 4:return a=e.sent,i.sharedClientState.addPendingMutation(a.batchId),function(e,t,n){var r=e.ac[e.currentUser.toKey()];r||(r=new vc(Xu)),r=r.insert(t,n),e.ac[e.currentUser.toKey()]=r}(i,a.batchId,r),e.next=9,fm(i,a.changes);case 9:return e.next=11,Qp(i.remoteStore);case 11:e.next=17;break;case 13:e.prev=13,e.t0=e.catch(1),o=py(e.t0,"Failed to persist write"),r.reject(o);case 17:case"end":return e.stop()}}),e,null,[[1,13]])}))),Hy.apply(this,arguments)}function Wy(e,t){return Qy.apply(this,arguments)}function Qy(){return Qy=h(l().mark((function e(t,n){var r,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fu(t),e.prev=1,e.next=4,Vv(r.localStore,n);case 4:return i=e.sent,n.targetChanges.forEach((function(e,t){var n=r.uc.get(t);n&&(Mu(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?n.ec=!0:e.modifiedDocuments.size>0?Mu(n.ec):e.removedDocuments.size>0&&(Mu(n.ec),n.ec=!1))})),e.next=8,fm(r,i,n);case 8:e.next=14;break;case 10:return e.prev=10,e.t0=e.catch(1),e.next=14,gs(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,10]])}))),Qy.apply(this,arguments)}function Yy(e,t,n){var r=Fu(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.sc.forEach((function(e,n){var r=n.view.Ru(t);r.snapshot&&i.push(r.snapshot)})),function(e,t){var n=Fu(e);n.onlineState=t;var r=!1;n.queries.forEach((function(e,n){var i,a=g(n.listeners);try{for(a.s();!(i=a.n()).done;){i.value.Ru(t)&&(r=!0)}}catch(o){a.e(o)}finally{a.f()}})),r&&Ty(n)}(r.eventManager,t),i.length&&r.nc.zo(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}function $y(e,t,n){return Xy.apply(this,arguments)}function Xy(){return Xy=h(l().mark((function e(t,n,r){var i,a,o,u,s,c;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((i=Fu(t)).sharedClientState.updateQueryState(n,"rejected",r),a=i.uc.get(n),!(o=a&&a.key)){e.next=14;break}return u=(u=new vc(os.comparator)).insert(o,tl.newNoDocument(o,ts.min())),s=lf().add(o),c=new th(ts.min(),new Map,new mc(Xu),u,s),e.next=9,Wy(i,c);case 9:i.oc=i.oc.remove(o),i.uc.delete(n),lm(i),e.next=16;break;case 14:return e.next=16,qv(i.localStore,n,!1).then((function(){return om(i,n,r)})).catch(gs);case 16:case"end":return e.stop()}}),e)}))),Xy.apply(this,arguments)}function Jy(e,t){return Zy.apply(this,arguments)}function Zy(){return Zy=h(l().mark((function e(t,n){var r,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fu(t),i=n.batch.batchId,e.prev=1,e.next=4,Fv(r.localStore,n);case 4:return a=e.sent,am(r,i,null),im(r,i),r.sharedClientState.updateMutationState(i,"acknowledged"),e.next=10,fm(r,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,gs(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),Zy.apply(this,arguments)}function em(e,t,n){return tm.apply(this,arguments)}function tm(){return tm=h(l().mark((function e(t,n,r){var i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Fu(t),e.prev=1,e.next=4,function(e,t){var n=Fu(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(e){var r;return n.mutationQueue.lookupMutationBatch(e,t).next((function(t){return Mu(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t)})).next((function(){return n.mutationQueue.performConsistencyCheck(e)})).next((function(){return n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)})).next((function(){return n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)})).next((function(){return n.localDocuments.getDocuments(e,r)}))}))}(i.localStore,n);case 4:return a=e.sent,am(i,n,r),im(i,n),i.sharedClientState.updateMutationState(n,"rejected",r),e.next=10,fm(i,a);case 10:e.next=16;break;case 12:return e.prev=12,e.t0=e.catch(1),e.next=16,gs(e.t0);case 16:case"end":return e.stop()}}),e,null,[[1,12]])}))),tm.apply(this,arguments)}function nm(e,t){return rm.apply(this,arguments)}function rm(){return rm=h(l().mark((function e(t,n){var r,i,a,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Fp((r=Fu(t)).remoteStore)||Au("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),e.prev=2,e.next=5,function(e){var t=Fu(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(e){return t.mutationQueue.getHighestUnacknowledgedBatchId(e)}))}(r.localStore);case 5:if(-1!==(i=e.sent)){e.next=8;break}return e.abrupt("return",void n.resolve());case 8:(a=r.hc.get(i)||[]).push(n),r.hc.set(i,a),e.next=16;break;case 12:e.prev=12,e.t0=e.catch(2),o=py(e.t0,"Initialization of waitForPendingWrites() operation failed"),n.reject(o);case 16:case"end":return e.stop()}}),e,null,[[2,12]])}))),rm.apply(this,arguments)}function im(e,t){(e.hc.get(t)||[]).forEach((function(e){e.resolve()})),e.hc.delete(t)}function am(e,t,n){var r=Fu(e),i=r.ac[r.currentUser.toKey()];if(i){var a=i.get(t);a&&(n?a.reject(n):a.resolve(),i=i.remove(t)),r.ac[r.currentUser.toKey()]=i}}function om(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);var r,i=g(e.ic.get(t));try{for(i.s();!(r=i.n()).done;){var a=r.value;e.sc.delete(a),n&&e.nc.wc(a,n)}}catch(o){i.e(o)}finally{i.f()}e.ic.delete(t),e.isPrimaryClient&&e.cc.hs(t).forEach((function(t){e.cc.containsKey(t)||um(e,t)}))}function um(e,t){e.rc.delete(t.path.canonicalString());var n=e.oc.get(t);null!==n&&(Rp(e.remoteStore,n),e.oc=e.oc.remove(t),e.uc.delete(n),lm(e))}function sm(e,t,n){var r,i=g(n);try{for(i.s();!(r=i.n()).done;){var a=r.value;a instanceof Oy?(e.cc.addReference(a.key,t),cm(e,a)):a instanceof Py?(Au("SyncEngine","Document no longer in limbo: "+a.key),e.cc.removeReference(a.key,t),e.cc.containsKey(a.key)||um(e,a.key)):Lu()}}catch(o){i.e(o)}finally{i.f()}}function cm(e,t){var n=t.key,r=n.path.canonicalString();e.oc.get(n)||e.rc.has(r)||(Au("SyncEngine","New document in limbo: "+n),e.rc.add(r),lm(e))}function lm(e){for(;e.rc.size>0&&e.oc.size<e.maxConcurrentLimboResolutions;){var t=e.rc.values().next().value;e.rc.delete(t);var n=new os(rs.fromString(t)),r=e.lc.next();e.uc.set(r,new Fy(n)),e.oc=e.oc.insert(n,r),Ap(e.remoteStore,new qh(jl(Ml(n.path)),r,2,Rs.ct))}}function fm(e,t,n){return hm.apply(this,arguments)}function hm(){return hm=h(l().mark((function e(t,n,r){var i,a,o,u;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Fu(t),a=[],o=[],u=[],e.t0=i.sc.isEmpty(),e.t0){e.next=9;break}return i.sc.forEach((function(e,t){u.push(i.dc(t,n,r).then((function(e){if((e||r)&&i.isPrimaryClient&&i.sharedClientState.updateQueryState(t.targetId,(null==e?void 0:e.fromCache)?"not-current":"current"),e){a.push(e);var n=Av.Di(t.targetId,e);o.push(n)}})))})),e.next=6,Promise.all(u);case 6:return i.nc.zo(a),e.next=9,function(){var e=h(l().mark((function e(t,n){var r,i,a,o,u,s,c,f;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fu(t),e.prev=1,e.next=4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(e){return bs.forEach(n,(function(t){return bs.forEach(t.Vi,(function(n){return r.persistence.referenceDelegate.addReference(e,t.targetId,n)})).next((function(){return bs.forEach(t.Si,(function(n){return r.persistence.referenceDelegate.removeReference(e,t.targetId,n)}))}))}))}));case 4:e.next=11;break;case 6:if(e.prev=6,e.t0=e.catch(1),Ss(e.t0)){e.next=10;break}throw e.t0;case 10:Au("LocalStore","Failed to update sequence numbers: "+e.t0);case 11:i=g(n);try{for(i.s();!(a=i.n()).done;)o=a.value,u=o.targetId,o.fromCache||(s=r.Li.get(u),c=s.snapshotVersion,f=s.withLastLimboFreeSnapshotVersion(c),r.Li=r.Li.insert(u,f))}catch(l){i.e(l)}finally{i.f()}case 13:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,n){return e.apply(this,arguments)}}()(i.localStore,o);case 9:case"end":return e.stop()}}),e)}))),hm.apply(this,arguments)}function dm(e,t){return vm.apply(this,arguments)}function vm(){return vm=h(l().mark((function e(t,n){var r,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((r=Fu(t)).currentUser.isEqual(n)){e.next=11;break}return Au("SyncEngine","User change. New user:",n.toKey()),e.next=5,Lv(r.localStore,n);case 5:return i=e.sent,r.currentUser=n,function(e,t){e.hc.forEach((function(e){e.forEach((function(e){e.reject(new Vu(Uu.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),e.hc.clear()}(r),r.sharedClientState.handleUserChange(n,i.removedBatchIds,i.addedBatchIds),e.next=11,fm(r,i.Qi);case 11:case"end":return e.stop()}}),e)}))),vm.apply(this,arguments)}function pm(e,t){var n=Fu(e),r=n.uc.get(t);if(r&&r.ec)return lf().add(r.key);var i=lf(),a=n.ic.get(t);if(!a)return i;var o,u=g(a);try{for(u.s();!(o=u.n()).done;){var s=o.value,c=n.sc.get(s);i=i.unionWith(c.view.Qu)}}catch(l){u.e(l)}finally{u.f()}return i}function ym(e,t){return mm.apply(this,arguments)}function mm(){return mm=h(l().mark((function e(t,n){var r,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fu(t),e.next=3,Gv(r.localStore,n.query,!0);case 3:return i=e.sent,a=n.view.Xu(i),e.abrupt("return",(r.isPrimaryClient&&sm(r,n.targetId,a.Yu),a));case 6:case"end":return e.stop()}}),e)}))),mm.apply(this,arguments)}function gm(e,t){return km.apply(this,arguments)}function km(){return km=h(l().mark((function e(t,n){var r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fu(t),e.abrupt("return",Wv(r.localStore,n).then((function(e){return fm(r,e)})));case 2:case"end":return e.stop()}}),e)}))),km.apply(this,arguments)}function bm(e,t,n,r){return wm.apply(this,arguments)}function wm(){return wm=h(l().mark((function e(t,n,r,i){var a,o;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Fu(t),e.next=3,function(e,t){var n=Fu(e),r=Fu(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(e){return r.In(e,t).next((function(t){return t?n.localDocuments.getDocuments(e,t):bs.resolve(null)}))}))}(a.localStore,n);case 3:if(null===(o=e.sent)){e.next=15;break}if("pending"!==r){e.next=10;break}return e.next=8,Qp(a.remoteStore);case 8:e.next=11;break;case 10:"acknowledged"===r||"rejected"===r?(am(a,n,i||null),im(a,n),function(e,t){Fu(Fu(e).mutationQueue).En(t)}(a.localStore,n)):Lu();case 11:return e.next=13,fm(a,o);case 13:e.next=16;break;case 15:Au("SyncEngine","Cannot apply mutation batch with id: "+n);case 16:case"end":return e.stop()}}),e)}))),wm.apply(this,arguments)}function _m(e,t){return xm.apply(this,arguments)}function xm(){return xm=h(l().mark((function e(t,n){var r,i,a,o,u,s,c,f;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(Rm(r=Fu(t)),Om(r),!0!==n||!0===r.fc){e.next=13;break}return i=r.sharedClientState.getAllActiveQueryTargets(),e.next=5,Em(r,i.toArray());case 5:return a=e.sent,r.fc=!0,e.next=9,ly(r.remoteStore,!0);case 9:o=g(a);try{for(o.s();!(u=o.n()).done;)s=u.value,Ap(r.remoteStore,s)}catch(l){o.e(l)}finally{o.f()}e.next=25;break;case 13:if(!1!==n||!1===r.fc){e.next=25;break}return c=[],f=Promise.resolve(),r.ic.forEach((function(e,t){r.sharedClientState.isLocalQueryTarget(t)?c.push(t):f=f.then((function(){return om(r,t),qv(r.localStore,t,!0)})),Rp(r.remoteStore,t)})),e.next=19,f;case 19:return e.next=21,Em(r,c);case 21:return function(e){var t=Fu(e);t.uc.forEach((function(e,n){Rp(t.remoteStore,n)})),t.cc.ls(),t.uc=new Map,t.oc=new vc(os.comparator)}(r),r.fc=!1,e.next=25,ly(r.remoteStore,!1);case 25:case"end":return e.stop()}}),e)}))),xm.apply(this,arguments)}function Em(e,t,n){return Sm.apply(this,arguments)}function Sm(){return Sm=h(l().mark((function e(t,n,r){var i,a,o,u,s,c,f,h,d,v,p,y,m,k;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=Fu(t),a=[],o=[],u=g(n),e.prev=2,u.s();case 4:if((s=u.n()).done){e.next=45;break}if(c=s.value,f=void 0,!(h=i.ic.get(c))||0===h.length){e.next=34;break}return e.next=11,jv(i.localStore,jl(h[0]));case 11:f=e.sent,d=g(h),e.prev=13,d.s();case 15:if((v=d.n()).done){e.next=24;break}return p=v.value,y=i.sc.get(p),e.next=20,ym(i,y);case 20:(m=e.sent).snapshot&&o.push(m.snapshot);case 22:e.next=15;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(13),d.e(e.t0);case 29:return e.prev=29,d.f(),e.finish(29);case 32:e.next=42;break;case 34:return e.next=36,Hv(i.localStore,c);case 36:return k=e.sent,e.next=39,jv(i.localStore,k);case 39:return f=e.sent,e.next=42,zy(i,Im(k),c,!1,f.resumeToken);case 42:a.push(f);case 43:e.next=4;break;case 45:e.next=50;break;case 47:e.prev=47,e.t1=e.catch(2),u.e(e.t1);case 50:return e.prev=50,u.f(),e.finish(50);case 53:return e.abrupt("return",(i.nc.zo(o),a));case 54:case"end":return e.stop()}}),e,null,[[2,47,50,53],[13,26,29,32]])}))),Sm.apply(this,arguments)}function Im(e){return Ll(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function Tm(e){var t=Fu(e);return Fu(Fu(t.localStore).persistence).bi()}function Cm(e,t,n,r){return Dm.apply(this,arguments)}function Dm(){return Dm=h(l().mark((function e(t,n,r,i){var a,o,u,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a=Fu(t)).fc){e.next=3;break}return e.abrupt("return",void Au("SyncEngine","Ignoring unexpected query state notification."));case 3:if(!((o=a.ic.get(n))&&o.length>0)){e.next=20;break}e.t0=r,e.next="current"===e.t0||"not-current"===e.t0?8:"rejected"===e.t0?15:19;break;case 8:return e.next=10,Wv(a.localStore,Yl(o[0]));case 10:return u=e.sent,s=th.createSynthesizedRemoteEventForCurrentChange(n,"current"===r,_c.EMPTY_BYTE_STRING),e.next=14,fm(a,u,s);case 14:return e.abrupt("break",20);case 15:return e.next=17,qv(a.localStore,n,!0);case 17:return om(a,n,i),e.abrupt("break",20);case 19:Lu();case 20:case"end":return e.stop()}}),e)}))),Dm.apply(this,arguments)}function Nm(e,t,n){return Am.apply(this,arguments)}function Am(){return Am=h(l().mark((function e(t,n,r){var i,a,o,u,s,c,f,h,d;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Rm(t)).fc){e.next=45;break}a=g(n),e.prev=3,a.s();case 5:if((o=a.n()).done){e.next=21;break}if(u=o.value,!i.ic.has(u)){e.next=10;break}return Au("SyncEngine","Adding an already active target "+u),e.abrupt("continue",19);case 10:return e.next=12,Hv(i.localStore,u);case 12:return s=e.sent,e.next=15,jv(i.localStore,s);case 15:return c=e.sent,e.next=18,zy(i,Im(s),c.targetId,!1,c.resumeToken);case 18:Ap(i.remoteStore,c);case 19:e.next=5;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(3),a.e(e.t0);case 26:return e.prev=26,a.f(),e.finish(26);case 29:f=g(r),e.prev=30,d=l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=h.value,e.t0=i.ic.has(t),!e.t0){e.next=5;break}return e.next=5,qv(i.localStore,t,!1).then((function(){Rp(i.remoteStore,t),om(i,t)})).catch(gs);case 5:case"end":return e.stop()}}),e)})),f.s();case 33:if((h=f.n()).done){e.next=37;break}return e.delegateYield(d(),"t1",35);case 35:e.next=33;break;case 37:e.next=42;break;case 39:e.prev=39,e.t2=e.catch(30),f.e(e.t2);case 42:return e.prev=42,f.f(),e.finish(42);case 45:case"end":return e.stop()}}),e,null,[[3,23,26,29],[30,39,42,45]])}))),Am.apply(this,arguments)}function Rm(e){var t=Fu(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Wy.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=pm.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=$y.bind(null,t),t.nc.zo=Sy.bind(null,t.eventManager),t.nc.wc=Iy.bind(null,t.eventManager),t}function Om(e){var t=Fu(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Jy.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=em.bind(null,t),t}function Pm(e,t,n){var r=Fu(e);(function(){var e=h(l().mark((function e(t,n,r){var i,a,o,u,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,n.getMetadata();case 3:return i=e.sent,e.next=6,function(e,t){var n=Fu(e),r=mh(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",(function(e){return n.xs.getBundleMetadata(e,t.id)})).then((function(e){return!!e&&e.createTime.compareTo(r)>=0}))}(t.localStore,i);case 6:if(!e.sent){e.next=11;break}return e.next=9,n.close();case 9:return r._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(i)),e.abrupt("return",Promise.resolve(new Set));case 11:return r._updateProgress(Ry(i)),a=new Ay(i,t.localStore,n.serializer),e.next=15,n._c();case 15:o=e.sent;case 16:if(!o){e.next=26;break}return e.next=19,a.$u(o);case 19:return(u=e.sent)&&r._updateProgress(u),e.next=23,n._c();case 23:o=e.sent;case 24:e.next=16;break;case 26:return e.next=28,a.complete();case 28:return s=e.sent,e.next=31,fm(t,s.Bu,void 0);case 31:return e.next=33,function(e,t){var n=Fu(e);return n.persistence.runTransaction("Save bundle","readwrite",(function(e){return n.xs.saveBundleMetadata(e,t)}))}(t.localStore,i);case 33:return r._completeWith(s.progress),e.abrupt("return",Promise.resolve(s.Fu));case 37:return e.prev=37,e.t0=e.catch(0),e.abrupt("return",(Ou("SyncEngine","Loading bundle failed with ".concat(e.t0)),r._failWith(e.t0),Promise.resolve(new Set)));case 40:case"end":return e.stop()}}),e,null,[[0,37]])})));return function(t,n,r){return e.apply(this,arguments)}})()(r,t,n).then((function(e){r.sharedClientState.notifyBundleLoaded(e)}))}var Lm=function(){function e(){p(this,e),this.synchronizeTabs=!1}return m(e,[{key:"initialize",value:function(){var e=h(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.serializer=kp(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),e.next=5,this.persistence.start();case 5:this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore);case 8:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createGarbageCollectionScheduler",value:function(e,t){return null}},{key:"createIndexBackfillerScheduler",value:function(e,t){return null}},{key:"createLocalStore",value:function(e){return Pv(this.persistence,new Rv,e.initialUser,this.serializer)}},{key:"createPersistence",value:function(e){return new wv(xv.Fs,this.serializer)}},{key:"createSharedClientState",value:function(e){return new sp}},{key:"terminate",value:function(){var e=h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.gcScheduler&&this.gcScheduler.stop(),e.next=3,this.sharedClientState.shutdown();case 3:return e.next=5,this.persistence.shutdown();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),Mm=function(e){w(n,e);var t=E(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this)).mc=e,a.cacheSizeBytes=r,a.forceOwnership=i,a.synchronizeTabs=!1,a}return m(n,[{key:"initialize",value:function(){var e=h(l().mark((function e(t){var r=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,br(_(n.prototype),"initialize",this).call(this,t);case 2:return e.next=4,this.mc.initialize(this,t);case 4:return e.next=6,Om(this.mc.syncEngine);case 6:return e.next=8,Qp(this.mc.remoteStore);case 8:return e.next=10,this.persistence.hi((function(){return r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()}));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createLocalStore",value:function(e){return Pv(this.persistence,new Rv,e.initialUser,this.serializer)}},{key:"createGarbageCollectionScheduler",value:function(e,t){var n=this.persistence.referenceDelegate.garbageCollector;return new Jd(n,e.asyncQueue,t)}},{key:"createIndexBackfillerScheduler",value:function(e,t){var n=new As(t,this.persistence);return new Ns(e.asyncQueue,n)}},{key:"createPersistence",value:function(e){var t=Nv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Fd.withCacheSize(this.cacheSizeBytes):Fd.DEFAULT;return new Tv(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,mp(),gp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}},{key:"createSharedClientState",value:function(e){return new sp}}]),n}(Lm),Fm=function(e){w(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r,!1)).mc=e,i.cacheSizeBytes=r,i.synchronizeTabs=!0,i}return m(n,[{key:"initialize",value:function(){var e=h(l().mark((function e(t){var r,i=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,br(_(n.prototype),"initialize",this).call(this,t);case 2:if(r=this.mc.syncEngine,e.t0=this.sharedClientState instanceof up,!e.t0){e.next=8;break}return this.sharedClientState.syncEngine={$r:bm.bind(null,r),Mr:Cm.bind(null,r),Fr:Nm.bind(null,r),bi:Tm.bind(null,r),Or:gm.bind(null,r)},e.next=8,this.sharedClientState.start();case 8:return e.next=10,this.persistence.hi(function(){var e=h(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_m(i.mc.syncEngine,t);case 2:i.gcScheduler&&(t&&!i.gcScheduler.started?i.gcScheduler.start():t||i.gcScheduler.stop()),i.indexBackfillerScheduler&&(t&&!i.indexBackfillerScheduler.started?i.indexBackfillerScheduler.start():t||i.indexBackfillerScheduler.stop());case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"createSharedClientState",value:function(e){var t=mp();if(!up.D(t))throw new Vu(Uu.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Nv(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new up(t,e.asyncQueue,n,e.clientId,e.initialUser)}}]),n}(Mm),Um=function(){function e(){p(this,e)}return m(e,[{key:"initialize",value:function(){var e=h(l().mark((function e(t,n){var r=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=this.localStore,e.t0){e.next=12;break}return this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(e){return Yy(r.syncEngine,e,1)},this.remoteStore.remoteSyncer.handleCredentialChange=dm.bind(null,this.syncEngine),e.next=12,ly(this.remoteStore,this.syncEngine.isPrimaryClient);case 12:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"createEventManager",value:function(e){return new by}},{key:"createDatastore",value:function(e){var t,n=kp(e.databaseInfo.databaseId),r=(t=e.databaseInfo,new yp(t));return function(e,t,n,r){return new Ep(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,r,n)}},{key:"createRemoteStore",value:function(e){var t,n,r,i,a,o=this;return t=this.localStore,n=this.datastore,r=e.asyncQueue,i=function(e){return Yy(o.syncEngine,e,0)},a=lp.D()?new lp:new cp,new Ip(t,n,r,i,a)}},{key:"createSyncEngine",value:function(e,t){return function(e,t,n,r,i,a,o){var u=new Uy(e,t,n,r,i,a);return o&&(u.fc=!0),u}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}},{key:"terminate",value:function(){return function(){var e=h(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Fu(t),Au("RemoteStore","RemoteStore shutting down."),n.du.add(5),e.next=5,Dp(n);case 5:n._u.shutdown(),n.mu.set("Unknown");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(this.remoteStore)}}]),e}();function Vm(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{read:function(){return h(l().mark((function r(){var i;return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(n<e.byteLength)){r.next=3;break}return i={value:e.slice(n,n+t),done:!1},r.abrupt("return",(n+=t,i));case 3:return r.abrupt("return",{done:!0});case 4:case"end":return r.stop()}}),r)})))()},cancel:function(){return h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},releaseLock:function(){},closed:Promise.resolve()}}var Bm=function(){function e(t){p(this,e),this.observer=t,this.muted=!1}return m(e,[{key:"next",value:function(e){this.observer.next&&this.gc(this.observer.next,e)}},{key:"error",value:function(e){this.observer.error?this.gc(this.observer.error,e):Ru("Uncaught Error in snapshot listener:",e.toString())}},{key:"yc",value:function(){this.muted=!0}},{key:"gc",value:function(e,t){var n=this;this.muted||setTimeout((function(){n.muted||e(t)}),0)}}]),e}(),zm=function(){function e(t,n){var r=this;p(this,e),this.Ic=t,this.serializer=n,this.metadata=new Bu,this.buffer=new Uint8Array,this.Tc=new TextDecoder("utf-8"),this.Ec().then((function(e){e&&e.ku()?r.metadata.resolve(e.Nu.metadata):r.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.Nu))))}),(function(e){return r.metadata.reject(e)}))}return m(e,[{key:"close",value:function(){return this.Ic.cancel()}},{key:"getMetadata",value:function(){var e=h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.metadata.promise);case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"_c",value:function(){var e=h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getMetadata();case 2:return e.abrupt("return",this.Ec());case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"Ec",value:function(){var e=h(l().mark((function e(){var t,n,r,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ac();case 2:if(null!==(t=e.sent)){e.next=5;break}return e.abrupt("return",null);case 5:return n=this.Tc.decode(t),r=Number(n),isNaN(r)&&this.Rc("length string (".concat(n,") is not valid number")),e.next=9,this.vc(r);case 9:return i=e.sent,e.abrupt("return",new Dy(JSON.parse(i),t.length+r));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"bc",value:function(){return this.buffer.findIndex((function(e){return e==="{".charCodeAt(0)}))}},{key:"Ac",value:function(){var e=h(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.bc()<0)){e.next=7;break}return e.next=3,this.Pc();case 3:if(!e.sent){e.next=5;break}return e.abrupt("break",7);case 5:e.next=0;break;case 7:if(0!==this.buffer.length){e.next=9;break}return e.abrupt("return",null);case 9:return(t=this.bc())<0&&this.Rc("Reached the end of bundle when a length string is expected."),n=this.buffer.slice(0,t),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"vc",value:function(){var e=h(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.buffer.length<t)){e.next=8;break}return e.next=3,this.Pc();case 3:if(e.t0=e.sent,!e.t0){e.next=6;break}this.Rc("Reached the end of bundle when more is expected.");case 6:e.next=0;break;case 8:return n=this.Tc.decode(this.buffer.slice(0,t)),e.abrupt("return",(this.buffer=this.buffer.slice(t),n));case 10:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"Rc",value:function(e){throw this.Ic.cancel(),new Error("Invalid bundle format: ".concat(e))}},{key:"Pc",value:function(){var e=h(l().mark((function e(){var t,n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.Ic.read();case 2:return(t=e.sent).done||((n=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),n.set(t.value,this.buffer.length),this.buffer=n),e.abrupt("return",t.done);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),e}(),jm=function(){function e(t){p(this,e),this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return m(e,[{key:"lookup",value:function(){var e=h(l().mark((function e(t){var n,r=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!(this.mutations.length>0)){e.next=2;break}throw new Vu(Uu.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");case 2:return e.next=4,function(){var e=h(l().mark((function e(t,n){var r,i,a,o,u,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fu(t),i=Eh(r.serializer)+"/documents",a={documents:n.map((function(e){return bh(r.serializer,e)}))},e.next=5,r.fo("BatchGetDocuments",i,a,n.length);case 5:return o=e.sent,u=new Map,o.forEach((function(e){var t=Ch(r.serializer,e);u.set(t.key.toString(),t)})),s=[],e.abrupt("return",(n.forEach((function(e){var t=u.get(e.toString());Mu(!!t),s.push(t)})),s));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,t);case 4:return n=e.sent,e.abrupt("return",(n.forEach((function(e){return r.recordVersion(e)})),n));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"set",value:function(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"update",value:function(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastWriteError=e}this.writtenDocs.add(e.toString())}},{key:"delete",value:function(e){this.write(new Gf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}},{key:"commit",value:function(){var e=h(l().mark((function e(){var t,n=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.ensureCommitNotCalled(),!this.lastWriteError){e.next=2;break}throw this.lastWriteError;case 2:return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(e,t){var r=os.fromPath(t);n.mutations.push(new Hf(r,n.precondition(r)))})),e.next=7,function(){var e=h(l().mark((function e(t,n){var r,i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Fu(t),i=Eh(r.serializer)+"/documents",a={writes:n.map((function(e){return Dh(r.serializer,e)}))},e.next=3,r.co("Commit",i,a);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()(this.datastore,this.mutations);case 7:this.committed=!0;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"recordVersion",value:function(e){var t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Lu();t=ts.min()}var n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Vu(Uu.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}},{key:"precondition",value:function(e){var t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(ts.min())?Nf.exists(!1):Nf.updateTime(t):Nf.none()}},{key:"preconditionForUpdate",value:function(e){var t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(ts.min()))throw new Vu(Uu.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Nf.updateTime(t)}return Nf.exists(!0)}},{key:"write",value:function(e){this.ensureCommitNotCalled(),this.mutations.push(e)}},{key:"ensureCommitNotCalled",value:function(){}}]),e}(),qm=function(){function e(t,n,r,i,a){p(this,e),this.asyncQueue=t,this.datastore=n,this.options=r,this.updateFunction=i,this.deferred=a,this.Vc=r.maxAttempts,this.Co=new bp(this.asyncQueue,"transaction_retry")}return m(e,[{key:"run",value:function(){this.Vc-=1,this.Sc()}},{key:"Sc",value:function(){var e=this;this.Co.Ao(h(l().mark((function t(){var n,r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=new jm(e.datastore),(r=e.Dc(n))&&r.then((function(t){e.asyncQueue.enqueueAndForget((function(){return n.commit().then((function(){e.deferred.resolve(t)})).catch((function(t){e.Cc(t)}))}))})).catch((function(t){e.Cc(t)}));case 2:case"end":return t.stop()}}),t)}))))}},{key:"Dc",value:function(e){try{var t=this.updateFunction(e);return!Os(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}},{key:"Cc",value:function(e){var t=this;this.Vc>0&&this.xc(e)?(this.Vc-=1,this.asyncQueue.enqueueAndForget((function(){return t.Sc(),Promise.resolve()}))):this.deferred.reject(e)}},{key:"xc",value:function(e){if("FirebaseError"===e.name){var t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Xf(t)}return!1}}]),e}(),Km=function(){function e(t,n,r,i){var a=this;p(this,e),this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Tu.UNAUTHENTICATED,this.clientId=$u.A(),this.authCredentialListener=function(){return Promise.resolve()},this.appCheckCredentialListener=function(){return Promise.resolve()},this.authCredentials.start(r,function(){var e=h(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Au("FirestoreClient","Received user=",t.uid),e.next=3,a.authCredentialListener(t);case 3:a.user=t;case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),this.appCheckCredentials.start(r,(function(e){return Au("FirestoreClient","Received new app check token=",e),a.appCheckCredentialListener(e,a.user)}))}return m(e,[{key:"getConfiguration",value:function(){var e=h(l().mark((function e(){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100});case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setCredentialChangeListener",value:function(e){this.authCredentialListener=e}},{key:"setAppCheckTokenChangeListener",value:function(e){this.appCheckCredentialListener=e}},{key:"verifyNotTerminated",value:function(){if(this.asyncQueue.isShuttingDown)throw new Vu(Uu.FAILED_PRECONDITION,"The client has already been terminated.")}},{key:"terminate",value:function(){var e=this;this.asyncQueue.enterRestrictedMode();var t=new Bu;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(h(l().mark((function n(){var r;return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,n.t0=e._onlineComponents,!n.t0){n.next=5;break}return n.next=5,e._onlineComponents.terminate();case 5:if(n.t1=e._offlineComponents,!n.t1){n.next=9;break}return n.next=9,e._offlineComponents.terminate();case 9:e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve(),n.next=18;break;case 14:n.prev=14,n.t2=n.catch(0),r=py(n.t2,"Failed to shutdown persistence"),t.reject(r);case 18:case"end":return n.stop()}}),n,null,[[0,14]])})))),t.promise}}]),e}();function Gm(e,t){return Hm.apply(this,arguments)}function Hm(){return Hm=h(l().mark((function e(t,n){var r,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),Au("FirestoreClient","Initializing OfflineComponentProvider"),e.next=3,t.getConfiguration();case 3:return r=e.sent,e.next=6,n.initialize(r);case 6:i=r.initialUser,t.setCredentialChangeListener(function(){var e=h(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=i.isEqual(t),e.t0){e.next=5;break}return e.next=4,Lv(n.localStore,t);case 4:i=t;case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t._offlineComponents=n;case 8:case"end":return e.stop()}}),e)}))),Hm.apply(this,arguments)}function Wm(e,t){return Qm.apply(this,arguments)}function Qm(){return Qm=h(l().mark((function e(t,n){var r,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.asyncQueue.verifyOperationInProgress(),e.next=3,$m(t);case 3:return r=e.sent,Au("FirestoreClient","Initializing OnlineComponentProvider"),e.next=7,t.getConfiguration();case 7:return i=e.sent,e.next=10,n.initialize(r,i);case 10:t.setCredentialChangeListener((function(e){return sy(n.remoteStore,e)})),t.setAppCheckTokenChangeListener((function(e,t){return sy(n.remoteStore,t)})),t._onlineComponents=n;case 13:case"end":return e.stop()}}),e)}))),Qm.apply(this,arguments)}function Ym(e){return"FirebaseError"===e.name?e.code===Uu.FAILED_PRECONDITION||e.code===Uu.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}function $m(e){return Xm.apply(this,arguments)}function Xm(){return Xm=h(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t._offlineComponents){e.next=21;break}if(!t._uninitializedComponentsProvider){e.next=18;break}return Au("FirestoreClient","Using user provided OfflineComponentProvider"),e.prev=3,e.next=6,Gm(t,t._uninitializedComponentsProvider._offline);case 6:e.next=16;break;case 8:if(e.prev=8,e.t0=e.catch(3),Ym(n=e.t0)){e.next=13;break}throw n;case 13:return Ou("Error using user provided cache. Falling back to memory cache: "+n),e.next=16,Gm(t,new Lm);case 16:e.next=21;break;case 18:return Au("FirestoreClient","Using default OfflineComponentProvider"),e.next=21,Gm(t,new Lm);case 21:return e.abrupt("return",t._offlineComponents);case 22:case"end":return e.stop()}}),e,null,[[3,8]])}))),Xm.apply(this,arguments)}function Jm(e){return Zm.apply(this,arguments)}function Zm(){return Zm=h(l().mark((function e(t){return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=t._onlineComponents,e.t0){e.next=11;break}if(!t._uninitializedComponentsProvider){e.next=8;break}return Au("FirestoreClient","Using user provided OnlineComponentProvider"),e.next=6,Wm(t,t._uninitializedComponentsProvider._online);case 6:e.next=11;break;case 8:return Au("FirestoreClient","Using default OnlineComponentProvider"),e.next=11,Wm(t,new Um);case 11:return e.abrupt("return",t._onlineComponents);case 12:case"end":return e.stop()}}),e)}))),Zm.apply(this,arguments)}function eg(e){return $m(e).then((function(e){return e.persistence}))}function tg(e){return $m(e).then((function(e){return e.localStore}))}function ng(e){return Jm(e).then((function(e){return e.remoteStore}))}function rg(e){return Jm(e).then((function(e){return e.syncEngine}))}function ig(e){return Jm(e).then((function(e){return e.datastore}))}function ag(e){return og.apply(this,arguments)}function og(){return og=h(l().mark((function e(t){var n,r;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jm(t);case 2:return n=e.sent,r=n.eventManager,e.abrupt("return",(r.onListen=Vy.bind(null,n.syncEngine),r.onUnlisten=qy.bind(null,n.syncEngine),r));case 5:case"end":return e.stop()}}),e)}))),og.apply(this,arguments)}function ug(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Bu;return e.asyncQueue.enqueueAndForget(h(l().mark((function i(){return l().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Bm({next:function(a){t.enqueueAndForget((function(){return xy(e,o)}));var u=a.docs.has(n);!u&&a.fromCache?i.reject(new Vu(Uu.UNAVAILABLE,"Failed to get document because the client is offline.")):u&&a.fromCache&&r&&"server"===r.source?i.reject(new Vu(Uu.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(a)},error:function(e){return i.reject(e)}}),o=new Cy(Ml(n.path),a,{includeMetadataChanges:!0,xu:!0});return wy(e,o)},i.next=3,ag(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}function sg(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=new Bu;return e.asyncQueue.enqueueAndForget(h(l().mark((function i(){return l().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.t0=function(e,t,n,r,i){var a=new Bm({next:function(n){t.enqueueAndForget((function(){return xy(e,o)})),n.fromCache&&"server"===r.source?i.reject(new Vu(Uu.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(e){return i.reject(e)}}),o=new Cy(n,a,{includeMetadataChanges:!0,xu:!0});return wy(e,o)},i.next=3,ag(e);case 3:return i.t1=i.sent,i.t2=e.asyncQueue,i.t3=t,i.t4=n,i.t5=r,i.abrupt("return",(0,i.t0)(i.t1,i.t2,i.t3,i.t4,i.t5));case 9:case"end":return i.stop()}}),i)})))),r.promise}var cg=new Map;function lg(e,t,n){if(!n)throw new Vu(Uu.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function fg(e,t,n,r){if(!0===t&&!0===r)throw new Vu(Uu.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function hg(e){if(!os.isDocumentKey(e))throw new Vu(Uu.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function dg(e){if(os.isDocumentKey(e))throw new Vu(Uu.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function vg(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";var t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}return"function"==typeof e?"a function":Lu()}function pg(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Vu(Uu.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=vg(e);throw new Vu(Uu.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}return e}function yg(e,t){if(t<=0)throw new Vu(Uu.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}var mg=function(){function e(t){var n;if(p(this,e),void 0===t.host){if(void 0!==t.ssl)throw new Vu(Uu.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(n=t.ssl)||void 0===n||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.cache=t.localCache,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Vu(Uu.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,fg("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return m(e,[{key:"isEqual",value:function(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}]),e}(),gg=function(){function e(t,n,r,i){p(this,e),this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mg({}),this._settingsFrozen=!1}return m(e,[{key:"app",get:function(){if(!this._app)throw new Vu(Uu.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}},{key:"_initialized",get:function(){return this._settingsFrozen}},{key:"_terminated",get:function(){return void 0!==this._terminateTask}},{key:"_setSettings",value:function(e){if(this._settingsFrozen)throw new Vu(Uu.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mg(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new ju;switch(e.type){case"firstParty":return new Hu(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Vu(Uu.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}},{key:"_getSettings",value:function(){return this._settings}},{key:"_freezeSettings",value:function(){return this._settingsFrozen=!0,this._settings}},{key:"_delete",value:function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}},{key:"toJSON",value:function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}},{key:"_terminate",value:function(){return function(e){var t=cg.get(e);t&&(Au("ComponentProvider","Removing Datastore"),cg.delete(e),t.terminate())}(this),Promise.resolve()}}]),e}();function kg(e,t,n){var r,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=(e=pg(e,gg))._getSettings();if("firestore.googleapis.com"!==a.host&&a.host!==t&&Ou("Host has been set in both settings() and useEmulator(), emulator host will be used"),e._setSettings(Object.assign(Object.assign({},a),{host:"".concat(t,":").concat(n),ssl:!1})),i.mockUserToken){var o,u;if("string"==typeof i.mockUserToken)o=i.mockUserToken,u=Tu.MOCK_USER;else{o=F(i.mockUserToken,null===(r=e._app)||void 0===r?void 0:r.options.projectId);var s=i.mockUserToken.sub||i.mockUserToken.user_id;if(!s)throw new Vu(Uu.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Tu(s)}e._authCredentials=new qu(new zu(o,u))}}var bg=function(){function e(t,n,r){p(this,e),this.converter=n,this._key=r,this.type="document",this.firestore=t}return m(e,[{key:"_path",get:function(){return this._key.path}},{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"path",get:function(){return this._key.path.canonicalString()}},{key:"parent",get:function(){return new _g(this.firestore,this.converter,this._key.path.popLast())}},{key:"withConverter",value:function(t){return new e(this.firestore,t,this._key)}}]),e}(),wg=function(){function e(t,n,r){p(this,e),this.converter=n,this._query=r,this.type="query",this.firestore=t}return m(e,[{key:"withConverter",value:function(t){return new e(this.firestore,t,this._query)}}]),e}(),_g=function(e){w(n,e);var t=E(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this,e,r,Ml(i)))._path=i,a.type="collection",a}return m(n,[{key:"id",get:function(){return this._query.path.lastSegment()}},{key:"path",get:function(){return this._query.path.canonicalString()}},{key:"parent",get:function(){var e=this._path.popLast();return e.isEmpty()?null:new bg(this.firestore,null,new os(e))}},{key:"withConverter",value:function(e){return new n(this.firestore,e,this._path)}}]),n}(wg);function xg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=$(e),lg("collection","path",t),e instanceof gg){var a=rs.fromString.apply(rs,[t].concat(r));return dg(a),new _g(e,null,a)}if(!(e instanceof bg||e instanceof _g))throw new Vu(Uu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(rs.fromString.apply(rs,[t].concat(r)));return dg(o),new _g(e.firestore,null,o)}function Eg(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=$(e),1===arguments.length&&(t=$u.A()),lg("doc","path",t),e instanceof gg){var a=rs.fromString.apply(rs,[t].concat(r));return hg(a),new bg(e,null,new os(a))}if(!(e instanceof bg||e instanceof _g))throw new Vu(Uu.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");var o=e._path.child(rs.fromString.apply(rs,[t].concat(r)));return hg(o),new bg(e.firestore,e instanceof _g?e.converter:null,new os(o))}function Sg(e,t){return e=$(e),t=$(t),(e instanceof bg||e instanceof _g)&&(t instanceof bg||t instanceof _g)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function Ig(e,t){return e=$(e),t=$(t),e instanceof wg&&t instanceof wg&&e.firestore===t.firestore&&Gl(e._query,t._query)&&e.converter===t.converter}var Tg=function(){function e(){var t=this;p(this,e),this.Nc=Promise.resolve(),this.kc=[],this.Oc=!1,this.$c=[],this.Mc=null,this.Fc=!1,this.Bc=!1,this.Lc=[],this.Co=new bp(this,"async_queue_retry"),this.qc=function(){var e=gp();e&&Au("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Co.vo()};var n=gp();n&&"function"==typeof n.addEventListener&&n.addEventListener("visibilitychange",this.qc)}return m(e,[{key:"isShuttingDown",get:function(){return this.Oc}},{key:"enqueueAndForget",value:function(e){this.enqueue(e)}},{key:"enqueueAndForgetEvenWhileRestricted",value:function(e){this.Uc(),this.Kc(e)}},{key:"enterRestrictedMode",value:function(e){if(!this.Oc){this.Oc=!0,this.Bc=e||!1;var t=gp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.qc)}}},{key:"enqueue",value:function(e){var t=this;if(this.Uc(),this.Oc)return new Promise((function(){}));var n=new Bu;return this.Kc((function(){return t.Oc&&t.Bc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))}},{key:"enqueueRetryable",value:function(e){var t=this;this.enqueueAndForget((function(){return t.kc.push(e),t.Gc()}))}},{key:"Gc",value:function(){var e=h(l().mark((function e(){var t=this;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0===this.kc.length){e.next=14;break}return e.prev=1,e.next=4,this.kc[0]();case 4:this.kc.shift(),this.Co.reset(),e.next=13;break;case 8:if(e.prev=8,e.t0=e.catch(1),Ss(e.t0)){e.next=12;break}throw e.t0;case 12:Au("AsyncQueue","Operation failed with retryable error: "+e.t0);case 13:this.kc.length>0&&this.Co.Ao((function(){return t.Gc()}));case 14:case"end":return e.stop()}}),e,this,[[1,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"Kc",value:function(e){var t=this,n=this.Nc.then((function(){return t.Fc=!0,e().catch((function(e){t.Mc=e,t.Fc=!1;var n=function(e){var t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw Ru("INTERNAL UNHANDLED ERROR: ",n),e})).then((function(e){return t.Fc=!1,e}))}));return this.Nc=n,n}},{key:"enqueueAfterDelay",value:function(e,t,n){var r=this;this.Uc(),this.Lc.indexOf(e)>-1&&(t=0);var i=vy.createAndSchedule(this,e,t,n,(function(e){return r.Qc(e)}));return this.$c.push(i),i}},{key:"Uc",value:function(){this.Mc&&Lu()}},{key:"verifyOperationInProgress",value:function(){}},{key:"zc",value:function(){var e=h(l().mark((function e(){var t;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.Nc,e.next=3,t;case 3:if(t!==this.Nc){e.next=0;break}case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"jc",value:function(e){var t,n=g(this.$c);try{for(n.s();!(t=n.n()).done;){if(t.value.timerId===e)return!0}}catch(r){n.e(r)}finally{n.f()}return!1}},{key:"Wc",value:function(e){var t=this;return this.zc().then((function(){t.$c.sort((function(e,t){return e.targetTimeMs-t.targetTimeMs}));var n,r=g(t.$c);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(i.skipDelay(),"all"!==e&&i.timerId===e)break}}catch(a){r.e(a)}finally{r.f()}return t.zc()}))}},{key:"Hc",value:function(e){this.Lc.push(e)}},{key:"Qc",value:function(e){var t=this.$c.indexOf(e);this.$c.splice(t,1)}}]),e}();function Cg(e){return function(e,t){if("object"!=typeof e||null===e)return!1;var n,r=e,i=g(["next","error","complete"]);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"==typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e)}var Dg=function(){function e(){p(this,e),this._progressObserver={},this._taskCompletionResolver=new Bu,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}return m(e,[{key:"onProgress",value:function(e,t,n){this._progressObserver={next:e,error:t,complete:n}}},{key:"catch",value:function(e){return this._taskCompletionResolver.promise.catch(e)}},{key:"then",value:function(e,t){return this._taskCompletionResolver.promise.then(e,t)}},{key:"_completeWith",value:function(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}},{key:"_failWith",value:function(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}},{key:"_updateProgress",value:function(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}]),e}(),Ng=function(e){w(n,e);var t=E(n);function n(e,r,i,a){var o;return p(this,n),(o=t.call(this,e,r,i,a)).type="firestore",o._queue=new Tg,o._persistenceKey=(null==a?void 0:a.name)||"[DEFAULT]",o}return m(n,[{key:"_terminate",value:function(){return this._firestoreClient||Rg(this),this._firestoreClient.terminate()}}]),n}(gg);function Ag(e){return e._firestoreClient||Rg(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function Rg(e){var t,n,r,i=e._freezeSettings(),a=function(e,t,n,r){return new Nc(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new Km(e._authCredentials,e._appCheckCredentials,e._queue,a),(null===(n=i.cache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function Og(e,t,n){var r=new Bu;return e.asyncQueue.enqueue(h(l().mark((function i(){var a;return l().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,Gm(e,n);case 3:return i.next=5,Wm(e,t);case 5:r.resolve(),i.next=14;break;case 8:if(i.prev=8,i.t0=i.catch(0),Ym(a=i.t0)){i.next=13;break}throw a;case 13:Ou("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a);case 14:case"end":return i.stop()}}),i,null,[[0,8]])})))).then((function(){return r.promise}))}function Pg(e){return function(e){return e.asyncQueue.enqueue(h(l().mark((function t(){var n,r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,eg(e);case 2:return n=t.sent,t.next=5,ng(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!0),function(e){var t=Fu(e);return t.du.delete(0),Tp(t)}(r)));case 7:case"end":return t.stop()}}),t)}))))}(Ag(e=pg(e,Ng)))}function Lg(e){return function(e){return e.asyncQueue.enqueue(h(l().mark((function t(){var n,r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,eg(e);case 2:return n=t.sent,t.next=5,ng(e);case 5:return r=t.sent,t.abrupt("return",(n.setNetworkEnabled(!1),function(){var e=h(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=Fu(t)).du.add(0),e.next=4,Dp(n);case 4:n.mu.set("Offline");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(r)));case 7:case"end":return t.stop()}}),t)}))))}(Ag(e=pg(e,Ng)))}function Mg(e,t){var n=Ag(e=pg(e,Ng)),r=new Dg;return function(e,t,n,r){var i=function(e,t){return function(e,t){return new zm(e,t)}(function(e,t){if(e instanceof Uint8Array)return Vm(e,t);if(e instanceof ArrayBuffer)return Vm(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}("string"==typeof e?(new TextEncoder).encode(e):e),t)}(n,kp(t));e.asyncQueue.enqueueAndForget(h(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Pm,t.next=3,rg(e);case 3:t.t1=t.sent,t.t2=i,t.t3=r,(0,t.t0)(t.t1,t.t2,t.t3);case 7:case"end":return t.stop()}}),t)}))))}(n,e._databaseId,t,r),r}function Fg(e,t){return function(e,t){return e.asyncQueue.enqueue(h(l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=function(e,t){var n=Fu(e);return n.persistence.runTransaction("Get named query","readonly",(function(e){return n.xs.getNamedQuery(e,t)}))},n.next=3,tg(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)}))))}(Ag(e=pg(e,Ng)),t).then((function(t){return t?new wg(e,null,t.query):null}))}function Ug(e){if(e._initialized||e._terminated)throw new Vu(Uu.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Vg=function(){function e(t){p(this,e),this._byteString=t}return m(e,[{key:"toBase64",value:function(){return this._byteString.toBase64()}},{key:"toUint8Array",value:function(){return this._byteString.toUint8Array()}},{key:"toString",value:function(){return"Bytes(base64: "+this.toBase64()+")"}},{key:"isEqual",value:function(e){return this._byteString.isEqual(e._byteString)}}],[{key:"fromBase64String",value:function(t){try{return new e(_c.fromBase64String(t))}catch(t){throw new Vu(Uu.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}},{key:"fromUint8Array",value:function(t){return new e(_c.fromUint8Array(t))}}]),e}(),Bg=function(){function e(){p(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var i=0;i<n.length;++i)if(0===n[i].length)throw new Vu(Uu.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new as(n)}return m(e,[{key:"isEqual",value:function(e){return this._internalPath.isEqual(e._internalPath)}}]),e}();var zg=m((function e(t){p(this,e),this._methodName=t})),jg=function(){function e(t,n){if(p(this,e),!isFinite(t)||t<-90||t>90)throw new Vu(Uu.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Vu(Uu.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}return m(e,[{key:"latitude",get:function(){return this._lat}},{key:"longitude",get:function(){return this._long}},{key:"isEqual",value:function(e){return this._lat===e._lat&&this._long===e._long}},{key:"toJSON",value:function(){return{latitude:this._lat,longitude:this._long}}},{key:"_compareTo",value:function(e){return Xu(this._lat,e._lat)||Xu(this._long,e._long)}}]),e}(),qg=/^__.*__$/,Kg=function(){function e(t,n,r){p(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return m(e,[{key:"toMutation",value:function(e,t){return null!==this.fieldMask?new Vf(e,this.data,this.fieldMask,t,this.fieldTransforms):new Uf(e,this.data,t,this.fieldTransforms)}}]),e}(),Gg=function(){function e(t,n,r){p(this,e),this.data=t,this.fieldMask=n,this.fieldTransforms=r}return m(e,[{key:"toMutation",value:function(e,t){return new Vf(e,this.data,this.fieldMask,t,this.fieldTransforms)}}]),e}();function Hg(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Lu()}}var Wg=function(){function e(t,n,r,i,a,o){p(this,e),this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.Jc(),this.fieldTransforms=a||[],this.fieldMask=o||[]}return m(e,[{key:"path",get:function(){return this.settings.path}},{key:"Yc",get:function(){return this.settings.Yc}},{key:"Zc",value:function(t){return new e(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}},{key:"Xc",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:n,ta:!1});return r.ea(e),r}},{key:"na",value:function(e){var t,n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Zc({path:n,ta:!1});return r.Jc(),r}},{key:"sa",value:function(e){return this.Zc({path:void 0,ta:!0})}},{key:"ia",value:function(e){return dk(e,this.settings.methodName,this.settings.ra||!1,this.path,this.settings.oa)}},{key:"contains",value:function(e){return void 0!==this.fieldMask.find((function(t){return e.isPrefixOf(t)}))||void 0!==this.fieldTransforms.find((function(t){return e.isPrefixOf(t.field)}))}},{key:"Jc",value:function(){if(this.path)for(var e=0;e<this.path.length;e++)this.ea(this.path.get(e))}},{key:"ea",value:function(e){if(0===e.length)throw this.ia("Document fields must not be empty");if(Hg(this.Yc)&&qg.test(e))throw this.ia('Document fields cannot begin and end with "__"')}}]),e}(),Qg=function(){function e(t,n,r){p(this,e),this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||kp(t)}return m(e,[{key:"ua",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Wg({Yc:e,methodName:t,oa:n,path:as.emptyPath(),ta:!1,ra:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}]),e}();function Yg(e){var t=e._freezeSettings(),n=kp(e._databaseId);return new Qg(e._databaseId,!!t.ignoreUndefinedProperties,n)}function $g(e,t,n,r,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},o=e.ua(a.merge||a.mergeFields?2:0,t,n,i);ck("Data must be an object, but it was:",o,r);var u,s,c=uk(r,o);if(a.merge)u=new bc(o.fieldMask),s=o.fieldTransforms;else if(a.mergeFields){var l,f=[],h=g(a.mergeFields);try{for(h.s();!(l=h.n()).done;){var d=lk(t,l.value,n);if(!o.contains(d))throw new Vu(Uu.INVALID_ARGUMENT,"Field '".concat(d,"' is specified in your field mask but missing from your input data."));vk(f,d)||f.push(d)}}catch(v){h.e(v)}finally{h.f()}u=new bc(f),s=o.fieldTransforms.filter((function(e){return u.covers(e.field)}))}else u=null,s=o.fieldTransforms;return new Kg(new Zc(c),u,s)}var Xg=function(e){w(n,e);var t=E(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"_toFieldTransform",value:function(e){if(2!==e.Yc)throw 1===e.Yc?e.ia("".concat(this._methodName,"() can only appear at the top level of your update data")):e.ia("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(zg);function Jg(e,t,n){return new Wg({Yc:3,oa:t.settings.oa,methodName:e._methodName,ta:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var Zg=function(e){w(n,e);var t=E(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"_toFieldTransform",value:function(e){return new Cf(e.path,new bf)}},{key:"isEqual",value:function(e){return e instanceof n}}]),n}(zg),ek=function(e){w(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e)).ca=r,i}return m(n,[{key:"_toFieldTransform",value:function(e){var t=Jg(this,e,!0),n=this.ca.map((function(e){return ok(e,t)})),r=new wf(n);return new Cf(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(zg),tk=function(e){w(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e)).ca=r,i}return m(n,[{key:"_toFieldTransform",value:function(e){var t=Jg(this,e,!0),n=this.ca.map((function(e){return ok(e,t)})),r=new xf(n);return new Cf(e.path,r)}},{key:"isEqual",value:function(e){return this===e}}]),n}(zg),nk=function(e){w(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e)).aa=r,i}return m(n,[{key:"_toFieldTransform",value:function(e){var t=new Sf(e.serializer,pf(e.serializer,this.aa));return new Cf(e.path,t)}},{key:"isEqual",value:function(e){return this===e}}]),n}(zg);function rk(e,t,n,r){var i=e.ua(1,t,n);ck("Data must be an object, but it was:",i,r);var a=[],o=Zc.empty();hc(r,(function(e,r){var u=hk(t,e,n);r=$(r);var s=i.na(u);if(r instanceof Xg)a.push(u);else{var c=ok(r,s);null!=c&&(a.push(u),o.set(u,c))}}));var u=new bc(a);return new Gg(o,u,i.fieldTransforms)}function ik(e,t,n,r,i,a){var o=e.ua(1,t,n),u=[lk(t,r,n)],s=[i];if(a.length%2!=0)throw new Vu(Uu.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(var c=0;c<a.length;c+=2)u.push(lk(t,a[c])),s.push(a[c+1]);for(var l=[],f=Zc.empty(),h=u.length-1;h>=0;--h)if(!vk(l,u[h])){var d=u[h],v=s[h];v=$(v);var p=o.na(d);if(v instanceof Xg)l.push(d);else{var y=ok(v,p);null!=y&&(l.push(d),f.set(d,y))}}var m=new bc(l);return new Gg(f,m,o.fieldTransforms)}function ak(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return ok(n,e.ua(r?4:3,t))}function ok(e,t){if(sk(e=$(e)))return ck("Unsupported field value:",t,e),uk(e,t);if(e instanceof zg)return function(e,t){if(!Hg(t.Yc))throw t.ia("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.ia("".concat(e._methodName,"() is not currently supported inside arrays"));var n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.ta&&4!==t.Yc)throw t.ia("Nested arrays are not supported");return function(e,t){var n,r=[],i=0,a=g(e);try{for(a.s();!(n=a.n()).done;){var o=ok(n.value,t.sa(i));null==o&&(o={nullValue:"NULL_VALUE"}),r.push(o),i++}}catch(u){a.e(u)}finally{a.f()}return{arrayValue:{values:r}}}(e,t)}return function(e,t){if(null===(e=$(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return pf(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){var n=es.fromDate(e);return{timestampValue:vh(t.serializer,n)}}if(e instanceof es){var r=new es(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:vh(t.serializer,r)}}if(e instanceof jg)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Vg)return{bytesValue:ph(t.serializer,e._byteString)};if(e instanceof bg){var i=t.databaseId,a=e.firestore._databaseId;if(!a.isEqual(i))throw t.ia("Document reference is for database ".concat(a.projectId,"/").concat(a.database," but should be for database ").concat(i.projectId,"/").concat(i.database));return{referenceValue:gh(e.firestore._databaseId||t.databaseId,e._key.path)}}throw t.ia("Unsupported field value: ".concat(vg(e)))}(e,t)}function uk(e,t){var n={};return dc(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):hc(e,(function(e,r){var i=ok(r,t.Xc(e));null!=i&&(n[e]=i)})),{mapValue:{fields:n}}}function sk(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof es||e instanceof jg||e instanceof Vg||e instanceof bg||e instanceof zg)}function ck(e,t,n){if(!sk(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){var r=vg(n);throw"an object"===r?t.ia(e+" a custom object"):t.ia(e+" "+r)}}function lk(e,t,n){if((t=$(t))instanceof Bg)return t._internalPath;if("string"==typeof t)return hk(e,t);throw dk("Field path arguments must be of type string or ",e,!1,void 0,n)}var fk=new RegExp("[~\\*/\\[\\]]");function hk(e,t,n){if(t.search(fk)>=0)throw dk("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return S(Bg,X(t.split(".")))._internalPath}catch(r){throw dk("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function dk(e,t,n,r,i){var a=r&&!r.isEmpty(),o=void 0!==i,u="Function ".concat(t,"() called with invalid data");n&&(u+=" (via `toFirestore()`)"),u+=". ";var s="";return(a||o)&&(s+=" (found",a&&(s+=" in field ".concat(r)),o&&(s+=" in document ".concat(i)),s+=")"),new Vu(Uu.INVALID_ARGUMENT,u+e+s)}function vk(e,t){return e.some((function(e){return e.isEqual(t)}))}var pk=function(){function e(t,n,r,i,a){p(this,e),this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=a}return m(e,[{key:"id",get:function(){return this._key.path.lastSegment()}},{key:"ref",get:function(){return new bg(this._firestore,this._converter,this._key)}},{key:"exists",value:function(){return null!==this._document}},{key:"data",value:function(){if(this._document){if(this._converter){var e=new yk(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}},{key:"get",value:function(e){if(this._document){var t=this._document.data.field(mk("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}]),e}(),yk=function(e){w(n,e);var t=E(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"data",value:function(){return br(_(n.prototype),"data",this).call(this)}}]),n}(pk);function mk(e,t){return"string"==typeof t?hk(e,t):t instanceof Bg?t._internalPath:t._delegate._internalPath}function gk(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Vu(Uu.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var kk=m((function e(){p(this,e)})),bk=function(e){w(n,e);var t=E(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n)}(kk);function wk(e,t){for(var n=[],r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];t instanceof kk&&n.push(t),function(e){var t=e.filter((function(e){return e instanceof xk})).length,n=e.filter((function(e){return e instanceof _k})).length;if(t>1||t>0&&n>0)throw new Vu(Uu.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n=n.concat(i));var o,u=g(n);try{for(u.s();!(o=u.n()).done;){e=o.value._apply(e)}}catch(s){u.e(s)}finally{u.f()}return e}var _k=function(e){w(n,e);var t=E(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this))._field=e,a._op=r,a._value=i,a.type="where",a}return m(n,[{key:"_apply",value:function(e){var t=this._parse(e);return Lk(e._query,t),new wg(e.firestore,e.converter,ql(e._query,t))}},{key:"_parse",value:function(e){var t=Yg(e.firestore),n=function(e,t,n,r,i,a,o){var u;if(i.isKeyField()){if("array-contains"===a||"array-contains-any"===a)throw new Vu(Uu.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(a,"' queries on documentId()."));if("in"===a||"not-in"===a){Pk(o,a);var s,c=[],l=g(o);try{for(l.s();!(s=l.n()).done;){var f=s.value;c.push(Ok(r,e,f))}}catch(h){l.e(h)}finally{l.f()}u={arrayValue:{values:c}}}else u=Ok(r,e,o)}else"in"!==a&&"not-in"!==a&&"array-contains-any"!==a||Pk(o,a),u=ak(n,"where",o,"in"===a||"not-in"===a);return sl.create(i,a,u)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value);return n}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(bk);var xk=function(e){w(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this)).type=e,i._queryConstraints=r,i}return m(n,[{key:"_parse",value:function(e){var t=this._queryConstraints.map((function(t){return t._parse(e)})).filter((function(e){return e.getFilters().length>0}));return 1===t.length?t[0]:cl.create(t,this._getOperator())}},{key:"_apply",value:function(e){var t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){var n,r=e,i=g(t.getFlattenedFilters());try{for(i.s();!(n=i.n()).done;){var a=n.value;Lk(r,a),r=ql(r,a)}}catch(o){i.e(o)}finally{i.f()}}(e._query,t),new wg(e.firestore,e.converter,ql(e._query,t)))}},{key:"_getQueryConstraints",value:function(){return this._queryConstraints}},{key:"_getOperator",value:function(){return"and"===this.type?"and":"or"}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(kk);var Ek=function(e){w(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this))._field=e,i._direction=r,i.type="orderBy",i}return m(n,[{key:"_apply",value:function(e){var t=function(e,t,n){if(null!==e.startAt)throw new Vu(Uu.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Vu(Uu.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new al(t,n);return function(e,t){if(null===Ul(e)){var n=Vl(e);null!==n&&Mk(e,n,t.field)}}(e,r),r}(e._query,this._field,this._direction);return new wg(e.firestore,e.converter,function(e,t){var n=e.explicitOrderBy.concat([t]);return new Pl(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t){return new n(e,t)}}]),n}(bk);var Sk=function(e){w(n,e);var t=E(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this)).type=e,a._limit=r,a._limitType=i,a}return m(n,[{key:"_apply",value:function(e){return new wg(e.firestore,e.converter,Kl(e._query,this._limit,this._limitType))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(bk);var Ik=function(e){w(n,e);var t=E(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return m(n,[{key:"_apply",value:function(e){var t=Rk(e,this.type,this._docOrFields,this._inclusive);return new wg(e.firestore,e.converter,function(e,t){return new Pl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(bk);function Tk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ik._create("startAt",t,!0)}function Ck(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ik._create("startAfter",t,!1)}var Dk=function(e){w(n,e);var t=E(n);function n(e,r,i){var a;return p(this,n),(a=t.call(this)).type=e,a._docOrFields=r,a._inclusive=i,a}return m(n,[{key:"_apply",value:function(e){var t=Rk(e,this.type,this._docOrFields,this._inclusive);return new wg(e.firestore,e.converter,function(e,t){return new Pl(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}],[{key:"_create",value:function(e,t,r){return new n(e,t,r)}}]),n}(bk);function Nk(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Dk._create("endBefore",t,!1)}function Ak(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Dk._create("endAt",t,!0)}function Rk(e,t,n,r){if(n[0]=$(n[0]),n[0]instanceof pk)return function(e,t,n,r,i){if(!r)throw new Vu(Uu.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));var a,o=[],u=g(zl(e));try{for(u.s();!(a=u.n()).done;){var s=a.value;if(s.field.isKeyField())o.push(zc(t,r.key));else{var c=r.data.field(s.field);if(Tc(c))throw new Vu(Uu.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=s.field.canonicalString();throw new Vu(Uu.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(l,"' (used as the orderBy) does not exist."))}o.push(c)}}}catch(f){u.e(f)}finally{u.f()}return new nl(o,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);var i=Yg(e.firestore);return function(e,t,n,r,i,a){var o=e.explicitOrderBy;if(i.length>o.length)throw new Vu(Uu.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));for(var u=[],s=0;s<i.length;s++){var c=i[s];if(o[s].field.isKeyField()){if("string"!=typeof c)throw new Vu(Uu.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof c));if(!Bl(e)&&-1!==c.indexOf("/"))throw new Vu(Uu.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(c,"' contains a slash."));var l=e.path.child(rs.fromString(c));if(!os.isDocumentKey(l))throw new Vu(Uu.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(l,"' is not because it contains an odd number of segments."));var f=new os(l);u.push(zc(t,f))}else{var h=ak(n,r,c);u.push(h)}}return new nl(u,a)}(e._query,e.firestore._databaseId,i,t,n,r)}function Ok(e,t,n){if("string"==typeof(n=$(n))){if(""===n)throw new Vu(Uu.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bl(t)&&-1!==n.indexOf("/"))throw new Vu(Uu.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));var r=t.path.child(rs.fromString(n));if(!os.isDocumentKey(r))throw new Vu(Uu.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return zc(e,new os(r))}if(n instanceof bg)return zc(e,n._key);throw new Vu(Uu.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(vg(n),"."))}function Pk(e,t){if(!Array.isArray(e)||0===e.length)throw new Vu(Uu.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Lk(e,t){if(t.isInequality()){var n=Vl(e),r=t.field;if(null!==n&&!n.isEqual(r))throw new Vu(Uu.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '".concat(n.toString(),"' and '").concat(r.toString(),"'"));var i=Ul(e);null!==i&&Mk(e,r,i)}var a=function(e,t){var n,r=g(e);try{for(r.s();!(n=r.n()).done;){var i,a=g(n.value.getFlattenedFilters());try{for(a.s();!(i=a.n()).done;){var o=i.value;if(t.indexOf(o.op)>=0)return o.op}}catch(u){a.e(u)}finally{a.f()}}}catch(u){r.e(u)}finally{r.f()}return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==a)throw a===t.op?new Vu(Uu.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Vu(Uu.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(a.toString(),"' filters."))}function Mk(e,t,n){if(!n.isEqual(t))throw new Vu(Uu.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '".concat(t.toString(),"' and so you must also use '").concat(t.toString(),"' as your first argument to orderBy(), but your first orderBy() is on field '").concat(n.toString(),"' instead."))}var Fk=function(){function e(){p(this,e)}return m(e,[{key:"convertValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Pc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Sc(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ic(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Lu()}}},{key:"convertObject",value:function(e,t){var n=this,r={};return hc(e.fields,(function(e,i){r[e]=n.convertValue(i,t)})),r}},{key:"convertGeoPoint",value:function(e){return new jg(Sc(e.latitude),Sc(e.longitude))}},{key:"convertArray",value:function(e,t){var n=this;return(e.values||[]).map((function(e){return n.convertValue(e,t)}))}},{key:"convertServerTimestamp",value:function(e,t){switch(t){case"previous":var n=Cc(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Dc(e));default:return null}}},{key:"convertTimestamp",value:function(e){var t=Ec(e);return new es(t.seconds,t.nanos)}},{key:"convertDocumentKey",value:function(e,t){var n=rs.fromString(e);Mu(jh(n));var r=new Ac(n.get(1),n.get(3)),i=new os(n.popFirst(5));return r.isEqual(t)||Ru("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}]),e}();function Uk(e,t,n){return e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t}var Vk=function(e){w(n,e);var t=E(n);function n(e){var r;return p(this,n),(r=t.call(this)).firestore=e,r}return m(n,[{key:"convertBytes",value:function(e){return new Vg(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new bg(this.firestore,null,t)}}]),n}(Fk);var Bk=function(){function e(t,n){p(this,e),this.hasPendingWrites=t,this.fromCache=n}return m(e,[{key:"isEqual",value:function(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}]),e}(),zk=function(e){w(n,e);var t=E(n);function n(e,r,i,a,o,u){var s;return p(this,n),(s=t.call(this,e,r,i,a,u))._firestore=e,s._firestoreImpl=e,s.metadata=o,s}return m(n,[{key:"exists",value:function(){return br(_(n.prototype),"exists",this).call(this)}},{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){var t=new jk(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}},{key:"get",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){var n=this._document.data.field(mk("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}]),n}(pk),jk=function(e){w(n,e);var t=E(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"data",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return br(_(n.prototype),"data",this).call(this,e)}}]),n}(zk),qk=function(){function e(t,n,r,i){p(this,e),this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new Bk(i.hasPendingWrites,i.fromCache),this.query=r}return m(e,[{key:"docs",get:function(){var e=[];return this.forEach((function(t){return e.push(t)})),e}},{key:"size",get:function(){return this._snapshot.docs.size}},{key:"empty",get:function(){return 0===this.size}},{key:"forEach",value:function(e,t){var n=this;this._snapshot.docs.forEach((function(r){e.call(t,new jk(n._firestore,n._userDataWriter,r.key,r,new Bk(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))}},{key:"docChanges",value:function(){var e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Vu(Uu.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){var n=0;return e._snapshot.docChanges.map((function(t){var r=new jk(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Bk(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);return t.doc,{type:"added",doc:r,oldIndex:-1,newIndex:n++}}))}var r=e._snapshot.oldDocs;return e._snapshot.docChanges.filter((function(e){return t||3!==e.type})).map((function(t){var n=new jk(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Bk(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter),i=-1,a=-1;return 0!==t.type&&(i=r.indexOf(t.doc.key),r=r.delete(t.doc.key)),1!==t.type&&(a=(r=r.add(t.doc)).indexOf(t.doc.key)),{type:Kk(t.type),doc:n,oldIndex:i,newIndex:a}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}]),e}();function Kk(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Lu()}}function Gk(e,t){return e instanceof zk&&t instanceof zk?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof qk&&t instanceof qk&&e._firestore===t._firestore&&Ig(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}var Hk=function(e){w(n,e);var t=E(n);function n(e){var r;return p(this,n),(r=t.call(this)).firestore=e,r}return m(n,[{key:"convertBytes",value:function(e){return new Vg(e)}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return new bg(this.firestore,null,t)}}]),n}(Fk);function Wk(e){e=pg(e,bg);var t=pg(e.firestore,Ng),n=Ag(t),r=new Hk(t);return function(e,t){var n=new Bu;return e.asyncQueue.enqueueAndForget(h(l().mark((function r(){return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=h(l().mark((function e(t,n,r){var i,a;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,function(e,t){var n=Fu(e);return n.persistence.runTransaction("read document","readonly",(function(e){return n.localDocuments.getDocument(e,t)}))}(t,n);case 3:(i=e.sent).isFoundDocument()?r.resolve(i):i.isNoDocument()?r.resolve(null):r.reject(new Vu(Uu.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),a=py(e.t0,"Failed to get document '".concat(n," from cache")),r.reject(a);case 11:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,tg(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._key).then((function(n){return new zk(t,r,e._key,n,new Bk(null!==n&&n.hasLocalMutations,!0),e.converter)}))}function Qk(e){e=pg(e,wg);var t=pg(e.firestore,Ng),n=Ag(t),r=new Hk(t);return function(e,t){var n=new Bu;return e.asyncQueue.enqueueAndForget(h(l().mark((function r(){return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=function(){var e=h(l().mark((function e(t,n,r){var i,a,o,u,s;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Gv(t,n,!0);case 3:i=e.sent,a=new Ly(n,i.Wi),o=a.zu(i.documents),u=a.applyChanges(o,!1),r.resolve(u.snapshot),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),s=py(e.t0,"Failed to execute query '".concat(n," against cache")),r.reject(s);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t,n,r){return e.apply(this,arguments)}}(),r.next=3,tg(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(n,e._query).then((function(n){return new qk(t,r,e,n)}))}function Yk(e,t,n){e=pg(e,bg);var r=pg(e.firestore,Ng),i=Uk(e.converter,t,n);return Zk(r,[$g(Yg(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Nf.none())])}function $k(e,t,n){e=pg(e,bg);for(var r=pg(e.firestore,Ng),i=Yg(r),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return Zk(r,[("string"==typeof(t=$(t))||t instanceof Bg?ik(i,"updateDoc",e._key,t,n,o):rk(i,"updateDoc",e._key,t)).toMutation(e._key,Nf.exists(!0))])}function Xk(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,a,o;e=$(e);var u={includeMetadataChanges:!1},s=0;"object"!=typeof n[s]||Cg(n[s])||(u=n[s],s++);var c,f,d,v={includeMetadataChanges:u.includeMetadataChanges};if(Cg(n[s])){var p=n[s];n[s]=null===(i=p.next)||void 0===i?void 0:i.bind(p),n[s+1]=null===(a=p.error)||void 0===a?void 0:a.bind(p),n[s+2]=null===(o=p.complete)||void 0===o?void 0:o.bind(p)}if(e instanceof bg)f=pg(e.firestore,Ng),d=Ml(e._key.path),c={next:function(t){n[s]&&n[s](eb(f,e,t))},error:n[s+1],complete:n[s+2]};else{var y=pg(e,wg);f=pg(y.firestore,Ng),d=y._query;var m=new Hk(f);c={next:function(e){n[s]&&n[s](new qk(f,m,y,e))},error:n[s+1],complete:n[s+2]},gk(e._query)}return function(e,t,n,r){var i=new Bm(r),a=new Cy(t,i,n);return e.asyncQueue.enqueueAndForget(h(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=wy,t.next=3,ag(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){i.yc(),e.asyncQueue.enqueueAndForget(h(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=xy,t.next=3,ag(e);case 3:return t.t1=t.sent,t.t2=a,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Ag(f),d,v,c)}function Jk(e,t){return function(e,t){var n=new Bm(t);return e.asyncQueue.enqueueAndForget(h(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Fu(e).Au.add(t),t.next()},t.next=3,ag(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)})))),function(){n.yc(),e.asyncQueue.enqueueAndForget(h(l().mark((function t(){return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=function(e,t){Fu(e).Au.delete(t)},t.next=3,ag(e);case 3:return t.t1=t.sent,t.t2=n,t.abrupt("return",(0,t.t0)(t.t1,t.t2));case 6:case"end":return t.stop()}}),t)}))))}}(Ag(e=pg(e,Ng)),Cg(t)?t:{next:t})}function Zk(e,t){return function(e,t){var n=new Bu;return e.asyncQueue.enqueueAndForget(h(l().mark((function r(){return l().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=Gy,r.next=3,rg(e);case 3:return r.t1=r.sent,r.t2=t,r.t3=n,r.abrupt("return",(0,r.t0)(r.t1,r.t2,r.t3));case 7:case"end":return r.stop()}}),r)})))),n.promise}(Ag(e),t)}function eb(e,t,n){var r=n.docs.get(t._key),i=new Hk(e);return new zk(e,i,t._key,r,new Bk(n.hasPendingWrites,n.fromCache),t.converter)}var tb={maxAttempts:5},nb=function(){function e(t,n){p(this,e),this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Yg(t)}return m(e,[{key:"set",value:function(e,t,n){this._verifyNotCommitted();var r=rb(e,this._firestore),i=Uk(r.converter,t,n),a=$g(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(a.toMutation(r._key,Nf.none())),this}},{key:"update",value:function(e,t,n){this._verifyNotCommitted();for(var r,i=rb(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=$(t))||t instanceof Bg?ik(this._dataReader,"WriteBatch.update",i._key,t,n,o):rk(this._dataReader,"WriteBatch.update",i._key,t),this._mutations.push(r.toMutation(i._key,Nf.exists(!0))),this}},{key:"delete",value:function(e){this._verifyNotCommitted();var t=rb(e,this._firestore);return this._mutations=this._mutations.concat(new Gf(t._key,Nf.none())),this}},{key:"commit",value:function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}},{key:"_verifyNotCommitted",value:function(){if(this._committed)throw new Vu(Uu.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}]),e}();function rb(e,t){if((e=$(e)).firestore!==t)throw new Vu(Uu.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}var ib=function(e){w(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r))._firestore=e,i}return m(n,[{key:"get",value:function(e){var t=this,r=rb(e,this._firestore),i=new Hk(this._firestore);return br(_(n.prototype),"get",this).call(this,e).then((function(e){return new zk(t._firestore,i,r._key,e._document,new Bk(!1,!1),r.converter)}))}}]),n}(function(){function e(t,n){p(this,e),this._firestore=t,this._transaction=n,this._dataReader=Yg(t)}return m(e,[{key:"get",value:function(e){var t=this,n=rb(e,this._firestore),r=new Vk(this._firestore);return this._transaction.lookup([n._key]).then((function(e){if(!e||1!==e.length)return Lu();var i=e[0];if(i.isFoundDocument())return new pk(t._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new pk(t._firestore,r,n._key,null,n.converter);throw Lu()}))}},{key:"set",value:function(e,t,n){var r=rb(e,this._firestore),i=Uk(r.converter,t,n),a=$g(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,a),this}},{key:"update",value:function(e,t,n){for(var r,i=rb(e,this._firestore),a=arguments.length,o=new Array(a>3?a-3:0),u=3;u<a;u++)o[u-3]=arguments[u];return r="string"==typeof(t=$(t))||t instanceof Bg?ik(this._dataReader,"Transaction.update",i._key,t,n,o):rk(this._dataReader,"Transaction.update",i._key,t),this._transaction.update(i._key,r),this}},{key:"delete",value:function(e){var t=rb(e,this._firestore);return this._transaction.delete(t._key),this}}]),e}());function ab(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new ek("arrayUnion",t)}function ob(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new tk("arrayRemove",t)}!function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Cu=e}(Qe),ze(new J("firestore",(function(e,n){var r=n.instanceIdentifier,i=n.options,a=e.getProvider("app").getImmediate(),o=new Ng(new Ku(e.getProvider("auth-internal")),new Qu(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Vu(Uu.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ac(e.options.projectId,t)}(a,r),a);return i=Object.assign({useFetchStreams:t},i),o._setSettings(i),o}),"PUBLIC").setMultipleInstances(!0)),et(Iu,"3.10.1",e),et(Iu,"3.10.1","esm2017")}();function ub(e,t){if(void 0===t)return{merge:!1};if(void 0!==t.mergeFields&&void 0!==t.merge)throw new Vu("invalid-argument","Invalid options passed to function ".concat(e,"(): You cannot ")+'specify both "merge" and "mergeFields".');return t}function sb(){if("undefined"===typeof Uint8Array)throw new Vu("unimplemented","Uint8Arrays are not available in this environment.")}function cb(){if("undefined"==typeof atob)throw new Vu("unimplemented","Blobs are unavailable in Firestore in this environment.")}var lb=function(){function e(t){p(this,e),this._delegate=t}return m(e,[{key:"toBase64",value:function(){return cb(),this._delegate.toBase64()}},{key:"toUint8Array",value:function(){return sb(),this._delegate.toUint8Array()}},{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}},{key:"toString",value:function(){return"Blob(base64: "+this.toBase64()+")"}}],[{key:"fromBase64String",value:function(t){return cb(),new e(Vg.fromBase64String(t))}},{key:"fromUint8Array",value:function(t){return sb(),new e(Vg.fromUint8Array(t))}}]),e}();function fb(e){return function(e,t){if("object"!==typeof e||null===e)return!1;var n,r=e,i=g(t);try{for(i.s();!(n=i.n()).done;){var a=n.value;if(a in r&&"function"===typeof r[a])return!0}}catch(o){i.e(o)}finally{i.f()}return!1}(e,["next","error","complete"])}var hb=function(){function e(){p(this,e)}return m(e,[{key:"enableIndexedDbPersistence",value:function(e,t){return function(e,t){Ug(e=pg(e,Ng));var n=Ag(e);if(n._uninitializedComponentsProvider)throw new Vu(Uu.FAILED_PRECONDITION,"SDK cache is already specified.");Ou("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var r=e._freezeSettings(),i=new Um;return Og(n,i,new Mm(i,r.cacheSizeBytes,null==t?void 0:t.forceOwnership))}(e._delegate,{forceOwnership:t})}},{key:"enableMultiTabIndexedDbPersistence",value:function(e){return function(e){Ug(e=pg(e,Ng));var t=Ag(e);if(t._uninitializedComponentsProvider)throw new Vu(Uu.FAILED_PRECONDITION,"SDK cache is already specified.");Ou("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");var n=e._freezeSettings(),r=new Um;return Og(t,r,new Fm(r,n.cacheSizeBytes))}(e._delegate)}},{key:"clearIndexedDbPersistence",value:function(e){return function(e){if(e._initialized&&!e._terminated)throw new Vu(Uu.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var t=new Bu;return e._queue.enqueueAndForgetEvenWhileRestricted(h(l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,function(){var e=h(l().mark((function e(t){var n;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(_s.D()){e.next=2;break}return e.abrupt("return",Promise.resolve());case 2:return n=t+"main",e.next=5,_s.delete(n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()(Nv(e._databaseId,e._persistenceKey));case 3:t.resolve(),n.next=9;break;case 6:n.prev=6,n.t0=n.catch(0),t.reject(n.t0);case 9:case"end":return n.stop()}}),n,null,[[0,6]])})))),t.promise}(e._delegate)}}]),e}(),db=function(){function e(t,n,r){var i=this;p(this,e),this._delegate=n,this._persistenceProvider=r,this.INTERNAL={delete:function(){return i.terminate()}},t instanceof Ac||(this._appCompat=t)}return m(e,[{key:"_databaseId",get:function(){return this._delegate._databaseId}},{key:"settings",value:function(e){var t=this._delegate._getSettings();e.merge||t.host===e.host||Ou("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}},{key:"useEmulator",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};kg(this._delegate,e,t,n)}},{key:"enableNetwork",value:function(){return Pg(this._delegate)}},{key:"disableNetwork",value:function(){return Lg(this._delegate)}},{key:"enablePersistence",value:function(e){var t=!1,n=!1;return e&&fg("synchronizeTabs",t=!!e.synchronizeTabs,"experimentalForceOwningTab",n=!!e.experimentalForceOwningTab),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}},{key:"clearPersistence",value:function(){return this._persistenceProvider.clearIndexedDbPersistence(this)}},{key:"terminate",value:function(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}},{key:"waitForPendingWrites",value:function(){return function(e){return function(e){var t=new Bu;return e.asyncQueue.enqueueAndForget(h(l().mark((function n(){return l().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=nm,n.next=3,rg(e);case 3:return n.t1=n.sent,n.t2=t,n.abrupt("return",(0,n.t0)(n.t1,n.t2));case 6:case"end":return n.stop()}}),n)})))),t.promise}(Ag(e=pg(e,Ng)))}(this._delegate)}},{key:"onSnapshotsInSync",value:function(e){return Jk(this._delegate,e)}},{key:"app",get:function(){if(!this._appCompat)throw new Vu("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}},{key:"collection",value:function(e){try{return new Tb(this,xg(this._delegate,e))}catch(t){throw kb(t,"collection()","Firestore.collection()")}}},{key:"doc",value:function(e){try{return new gb(this,Eg(this._delegate,e))}catch(t){throw kb(t,"doc()","Firestore.doc()")}}},{key:"collectionGroup",value:function(e){try{return new Eb(this,function(e,t){if(e=pg(e,gg),lg("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new Vu(Uu.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new wg(e,null,function(e){return new Pl(rs.emptyPath(),e)}(t))}(this._delegate,e))}catch(t){throw kb(t,"collectionGroup()","Firestore.collectionGroup()")}}},{key:"runTransaction",value:function(e){var t=this;return function(e,t,n){e=pg(e,Ng);var r=Object.assign(Object.assign({},tb),n);return function(e){if(e.maxAttempts<1)throw new Vu(Uu.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){var r=new Bu;return e.asyncQueue.enqueueAndForget(h(l().mark((function i(){var a;return l().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,ig(e);case 2:a=i.sent,new qm(e.asyncQueue,a,n,t,r).run();case 4:case"end":return i.stop()}}),i)})))),r.promise}(Ag(e),(function(n){return t(new ib(e,n))}),r)}(this._delegate,(function(n){return e(new pb(t,n))}))}},{key:"batch",value:function(){var e=this;return Ag(this._delegate),new yb(new nb(this._delegate,(function(t){return Zk(e._delegate,t)})))}},{key:"loadBundle",value:function(e){return Mg(this._delegate,e)}},{key:"namedQuery",value:function(e){var t=this;return Fg(this._delegate,e).then((function(e){return e?new Eb(t,e):null}))}}]),e}(),vb=function(e){w(n,e);var t=E(n);function n(e){var r;return p(this,n),(r=t.call(this)).firestore=e,r}return m(n,[{key:"convertBytes",value:function(e){return new lb(new Vg(e))}},{key:"convertReference",value:function(e){var t=this.convertDocumentKey(e,this.firestore._databaseId);return gb.forKey(t,this.firestore,null)}}]),n}(Fk);var pb=function(){function e(t,n){p(this,e),this._firestore=t,this._delegate=n,this._userDataWriter=new vb(t)}return m(e,[{key:"get",value:function(e){var t=this,n=Cb(e);return this._delegate.get(n).then((function(e){return new _b(t._firestore,new zk(t._firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,n.converter))}))}},{key:"set",value:function(e,t,n){var r=Cb(e);return n?(ub("Transaction.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Cb(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Cb(e);return this._delegate.delete(t),this}}]),e}(),yb=function(){function e(t){p(this,e),this._delegate=t}return m(e,[{key:"set",value:function(e,t,n){var r=Cb(e);return n?(ub("WriteBatch.set",n),this._delegate.set(r,t,n)):this._delegate.set(r,t),this}},{key:"update",value:function(e,t,n){for(var r=arguments.length,i=new Array(r>3?r-3:0),a=3;a<r;a++)i[a-3]=arguments[a];var o,u=Cb(e);2===arguments.length?this._delegate.update(u,t):(o=this._delegate).update.apply(o,[u,t,n].concat(i));return this}},{key:"delete",value:function(e){var t=Cb(e);return this._delegate.delete(t),this}},{key:"commit",value:function(){return this._delegate.commit()}}]),e}(),mb=function(){function e(t,n,r){p(this,e),this._firestore=t,this._userDataWriter=n,this._delegate=r}return m(e,[{key:"fromFirestore",value:function(e,t){var n=new jk(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new xb(this._firestore,n),null!==t&&void 0!==t?t:{})}},{key:"toFirestore",value:function(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}}],[{key:"getInstance",value:function(t,n){var r=e.INSTANCES,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var a=i.get(n);return a||(a=new e(t,new vb(t),n),i.set(n,a)),a}}]),e}();mb.INSTANCES=new WeakMap;var gb=function(){function e(t,n){p(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new vb(t)}return m(e,[{key:"id",get:function(){return this._delegate.id}},{key:"parent",get:function(){return new Tb(this.firestore,this._delegate.parent)}},{key:"path",get:function(){return this._delegate.path}},{key:"collection",value:function(e){try{return new Tb(this.firestore,xg(this._delegate,e))}catch(t){throw kb(t,"collection()","DocumentReference.collection()")}}},{key:"isEqual",value:function(e){return(e=$(e))instanceof bg&&Sg(this._delegate,e)}},{key:"set",value:function(e,t){t=ub("DocumentReference.set",t);try{return t?Yk(this._delegate,e,t):Yk(this._delegate,e)}catch(n){throw kb(n,"setDoc()","DocumentReference.set()")}}},{key:"update",value:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];try{return 1===arguments.length?$k(this._delegate,e):$k.apply(void 0,[this._delegate,e,t].concat(r))}catch(a){throw kb(a,"updateDoc()","DocumentReference.update()")}}},{key:"delete",value:function(){return function(e){return Zk(pg(e.firestore,Ng),[new Gf(e._key,Nf.none())])}(this._delegate)}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=bb(n),a=wb(n,(function(t){return new _b(e.firestore,new zk(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}));return Xk(this._delegate,i,a)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Wk(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=pg(e,bg);var t=pg(e.firestore,Ng);return ug(Ag(t),e._key,{source:"server"}).then((function(n){return eb(t,e,n)}))}(this._delegate):function(e){e=pg(e,bg);var t=pg(e.firestore,Ng);return ug(Ag(t),e._key).then((function(n){return eb(t,e,n)}))}(this._delegate),t.then((function(e){return new _b(n.firestore,new zk(n.firestore._delegate,n._userDataWriter,e._key,e._document,e.metadata,n._delegate.converter))}))}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(mb.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}],[{key:"forPath",value:function(t,n,r){if(t.length%2!==0)throw new Vu("invalid-argument","Invalid document reference. Document references must have an even number of segments, but "+"".concat(t.canonicalString()," has ").concat(t.length));return new e(n,new bg(n._delegate,r,new os(t)))}},{key:"forKey",value:function(t,n,r){return new e(n,new bg(n._delegate,r,t))}}]),e}();function kb(e,t,n){return e.message=e.message.replace(t,n),e}function bb(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("object"===typeof r&&!fb(r))return r}}catch(i){n.e(i)}finally{n.f()}return{}}function wb(e,t){var n,r,i;return{next:function(e){i.next&&i.next(t(e))},error:null===(n=(i=fb(e[0])?e[0]:fb(e[1])?e[1]:"function"===typeof e[0]?{next:e[0],error:e[1],complete:e[2]}:{next:e[1],error:e[2],complete:e[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var _b=function(){function e(t,n){p(this,e),this._firestore=t,this._delegate=n}return m(e,[{key:"ref",get:function(){return new gb(this._firestore,this._delegate.ref)}},{key:"id",get:function(){return this._delegate.id}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"exists",get:function(){return this._delegate.exists()}},{key:"data",value:function(e){return this._delegate.data(e)}},{key:"get",value:function(e,t){return this._delegate.get(e,t)}},{key:"isEqual",value:function(e){return Gk(this._delegate,e._delegate)}}]),e}(),xb=function(e){w(n,e);var t=E(n);function n(){return p(this,n),t.apply(this,arguments)}return m(n,[{key:"data",value:function(e){var t=this._delegate.data(e);return function(e,t){e||Lu()}(void 0!==t),t}}]),n}(_b),Eb=function(){function e(t,n){p(this,e),this.firestore=t,this._delegate=n,this._userDataWriter=new vb(t)}return m(e,[{key:"where",value:function(t,n,r){try{return new e(this.firestore,wk(this._delegate,function(e,t,n){var r=t,i=mk("where",e);return _k._create(i,r,n)}(t,n,r)))}catch(i){throw kb(i,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"orderBy",value:function(t,n){try{return new e(this.firestore,wk(this._delegate,function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=mk("orderBy",e);return Ek._create(n,t)}(t,n)))}catch(r){throw kb(r,/(orderBy|where)\(\)/,"Query.$1()")}}},{key:"limit",value:function(t){try{return new e(this.firestore,wk(this._delegate,function(e){return yg("limit",e),Sk._create("limit",e,"F")}(t)))}catch(n){throw kb(n,"limit()","Query.limit()")}}},{key:"limitToLast",value:function(t){try{return new e(this.firestore,wk(this._delegate,function(e){return yg("limitToLast",e),Sk._create("limitToLast",e,"L")}(t)))}catch(n){throw kb(n,"limitToLast()","Query.limitToLast()")}}},{key:"startAt",value:function(){try{return new e(this.firestore,wk(this._delegate,Tk.apply(void 0,arguments)))}catch(t){throw kb(t,"startAt()","Query.startAt()")}}},{key:"startAfter",value:function(){try{return new e(this.firestore,wk(this._delegate,Ck.apply(void 0,arguments)))}catch(t){throw kb(t,"startAfter()","Query.startAfter()")}}},{key:"endBefore",value:function(){try{return new e(this.firestore,wk(this._delegate,Nk.apply(void 0,arguments)))}catch(t){throw kb(t,"endBefore()","Query.endBefore()")}}},{key:"endAt",value:function(){try{return new e(this.firestore,wk(this._delegate,Ak.apply(void 0,arguments)))}catch(t){throw kb(t,"endAt()","Query.endAt()")}}},{key:"isEqual",value:function(e){return Ig(this._delegate,e._delegate)}},{key:"get",value:function(e){var t,n=this;return t="cache"===(null===e||void 0===e?void 0:e.source)?Qk(this._delegate):"server"===(null===e||void 0===e?void 0:e.source)?function(e){e=pg(e,wg);var t=pg(e.firestore,Ng),n=Ag(t),r=new Hk(t);return sg(n,e._query,{source:"server"}).then((function(n){return new qk(t,r,e,n)}))}(this._delegate):function(e){e=pg(e,wg);var t=pg(e.firestore,Ng),n=Ag(t),r=new Hk(t);return gk(e._query),sg(n,e._query).then((function(n){return new qk(t,r,e,n)}))}(this._delegate),t.then((function(e){return new Ib(n.firestore,new qk(n.firestore._delegate,n._userDataWriter,n._delegate,e._snapshot))}))}},{key:"onSnapshot",value:function(){for(var e=this,t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var i=bb(n),a=wb(n,(function(t){return new Ib(e.firestore,new qk(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}));return Xk(this._delegate,i,a)}},{key:"withConverter",value:function(t){return new e(this.firestore,t?this._delegate.withConverter(mb.getInstance(this.firestore,t)):this._delegate.withConverter(null))}}]),e}(),Sb=function(){function e(t,n){p(this,e),this._firestore=t,this._delegate=n}return m(e,[{key:"type",get:function(){return this._delegate.type}},{key:"doc",get:function(){return new xb(this._firestore,this._delegate.doc)}},{key:"oldIndex",get:function(){return this._delegate.oldIndex}},{key:"newIndex",get:function(){return this._delegate.newIndex}}]),e}(),Ib=function(){function e(t,n){p(this,e),this._firestore=t,this._delegate=n}return m(e,[{key:"query",get:function(){return new Eb(this._firestore,this._delegate.query)}},{key:"metadata",get:function(){return this._delegate.metadata}},{key:"size",get:function(){return this._delegate.size}},{key:"empty",get:function(){return this._delegate.empty}},{key:"docs",get:function(){var e=this;return this._delegate.docs.map((function(t){return new xb(e._firestore,t)}))}},{key:"docChanges",value:function(e){var t=this;return this._delegate.docChanges(e).map((function(e){return new Sb(t._firestore,e)}))}},{key:"forEach",value:function(e,t){var n=this;this._delegate.forEach((function(r){e.call(t,new xb(n._firestore,r))}))}},{key:"isEqual",value:function(e){return Gk(this._delegate,e._delegate)}}]),e}(),Tb=function(e){w(n,e);var t=E(n);function n(e,r){var i;return p(this,n),(i=t.call(this,e,r)).firestore=e,i._delegate=r,i}return m(n,[{key:"id",get:function(){return this._delegate.id}},{key:"path",get:function(){return this._delegate.path}},{key:"parent",get:function(){var e=this._delegate.parent;return e?new gb(this.firestore,e):null}},{key:"doc",value:function(e){try{return new gb(this.firestore,void 0===e?Eg(this._delegate):Eg(this._delegate,e))}catch(t){throw kb(t,"doc()","CollectionReference.doc()")}}},{key:"add",value:function(e){var t=this;return function(e,t){var n=pg(e.firestore,Ng),r=Eg(e),i=Uk(e.converter,t);return Zk(n,[$g(Yg(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Nf.exists(!1))]).then((function(){return r}))}(this._delegate,e).then((function(e){return new gb(t.firestore,e)}))}},{key:"isEqual",value:function(e){return Sg(this._delegate,e._delegate)}},{key:"withConverter",value:function(e){return new n(this.firestore,e?this._delegate.withConverter(mb.getInstance(this.firestore,e)):this._delegate.withConverter(null))}}]),n}(Eb);function Cb(e){return pg(e,bg)}var Db,Nb=function(){function e(){p(this,e);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];this._delegate=S(Bg,n)}return m(e,[{key:"isEqual",value:function(e){return(e=$(e))instanceof Bg&&this._delegate._internalPath.isEqual(e._internalPath)}}],[{key:"documentId",value:function(){return new e(as.keyField().canonicalString())}}]),e}(),Ab=function(){function e(t){p(this,e),this._delegate=t}return m(e,[{key:"isEqual",value:function(e){return this._delegate.isEqual(e._delegate)}}],[{key:"serverTimestamp",value:function(){var t=new Zg("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)}},{key:"delete",value:function(){var t=new Xg("deleteField");return t._methodName="FieldValue.delete",new e(t)}},{key:"arrayUnion",value:function(){var t=ab.apply(void 0,arguments);return t._methodName="FieldValue.arrayUnion",new e(t)}},{key:"arrayRemove",value:function(){var t=ob.apply(void 0,arguments);return t._methodName="FieldValue.arrayRemove",new e(t)}},{key:"increment",value:function(t){var n=function(e){return new nk("increment",e)}(t);return n._methodName="FieldValue.increment",new e(n)}}]),e}(),Rb={Firestore:db,GeoPoint:jg,Timestamp:es,Blob:lb,Transaction:pb,WriteBatch:yb,DocumentReference:gb,DocumentSnapshot:_b,Query:Eb,QueryDocumentSnapshot:xb,QuerySnapshot:Ib,CollectionReference:Tb,FieldPath:Nb,FieldValue:Ab,setLogLevel:function(e){!function(e){Du.setLogLevel(e)}(e)},CACHE_SIZE_UNLIMITED:-1};(function(e,t){e.INTERNAL.registerComponent(new J("firestore-compat",(function(e){var n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)}),"PUBLIC").setServiceProps(Object.assign({},Rb)))})(Db=It,(function(e,t){return new db(e,t,new hb)})),Db.registerVersion("@firebase/firestore-compat","0.3.7");It.initializeApp({apiKey:"AIzaSyCACtoF-WXPJ3BgFSBby1WvlYJ_jWpE7PI",authDomain:"blender-app-6153d.firebaseapp.com",projectId:"blender-app-6153d",storageBucket:"blender-app-6153d.appspot.com",messagingSenderId:"449208915744",appId:"1:449208915744:web:4574917f5dd21eeb0ba945"});var Ob=It.storage(),Pb=It.firestore(),Lb=It.firestore.FieldValue.serverTimestamp,Mb=function(e){var n=s((0,t.useState)(0),2),r=n[0],i=n[1],a=s((0,t.useState)(null),2),o=a[0],u=a[1],c=s((0,t.useState)(null),2),f=c[0],d=c[1];return(0,t.useEffect)((function(){var t=Ob.ref(e.name),n=Pb.collection("images");t.put(e).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;i(t)}),(function(e){u(e)}),h(l().mark((function e(){var r,i;return l().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDownloadURL();case 2:r=e.sent,i=Lb(),n.add({url:r,createdAt:i}),d(r);case 6:case"end":return e.stop()}}),e)}))))}),[e]),{progress:r,url:f,error:o}},Fb=function(e){var n=e.file,r=e.setFile,a=Mb(n),o=a.url,u=a.progress;return(0,t.useEffect)((function(){o&&r(null)}),[o,r]),(0,i.jsx)("div",{className:"progress-bar",style:{width:u+"%"}})},Ub=function(){var e=s((0,t.useState)(null),2),n=e[0],r=e[1],a=s((0,t.useState)(null),2),o=a[0],u=a[1],c=["image/png","image/jpeg"];return(0,i.jsxs)("form",{children:[(0,i.jsxs)("label",{children:[(0,i.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0];t&&c.includes(t.type)?(r(t),u("")):(r(null),u("Please select an image file (png or jpeg"))}}),(0,i.jsx)("span",{children:"+"})]}),(0,i.jsxs)("div",{className:"output",children:[o&&(0,i.jsx)("div",{className:"error",children:o}),n&&(0,i.jsx)("div",{children:n.name}),n&&(0,i.jsx)(Fb,{file:n,setFile:r})]})]})};var Vb=function(){return(0,i.jsxs)("div",{className:"App",children:[(0,i.jsx)(a,{}),(0,i.jsx)(Ub,{})]})};r.createRoot(document.getElementById("root")).render((0,i.jsx)(t.StrictMode,{children:(0,i.jsx)(Vb,{})}))}()}();
//# sourceMappingURL=main.5bab591c.js.map